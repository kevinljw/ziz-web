!function(a){function o(e){if(t[e])return t[e].exports;var n=t[e]={i:e,l:!1,exports:{}};return a[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}var t={};o.m=a,o.c=t,o.d=function(a,t,e){o.o(a,t)||Object.defineProperty(a,t,{enumerable:!0,get:e})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(a,n){if(1&n&&(a=o(a)),8&n)return a;if(4&n&&"object"==typeof a&&a&&a.__esModule)return a;var e=Object.create(null);if(o.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:a}),2&n&&"string"!=typeof a)for(var i in a)o.d(e,i,function(t){return a[t]}.bind(null,i));return e},o.n=function(a){var t=a&&a.__esModule?function(){return a.default}:function(){return a};return o.d(t,"a",t),t},o.o=function(a,t){return Object.prototype.hasOwnProperty.call(a,t)},o.p="/dist/",o(o.s=4)}([function(module,exports,__webpack_require__){var _Mathceil=Math.ceil,_Mathacos=Math.acos,_Mathasin=Math.asin,_Mathatan=Math.atan2,_StringfromCharCode=String.fromCharCode,_Mathsin=Math.sin,_Mathcos=Math.cos,_MathPI=Math.PI,_Mathabs=Math.abs,_Mathsqrt=Math.sqrt,_Mathpow=Math.pow,_Mathmin=Math.min,_Mathmax=Math.max,_Mathfloor=Math.floor,_Mathround=Math.round,__WEBPACK_AMD_DEFINE_RESULT__;"undefined"!=typeof navigator&&function(a,t){void 0===(__WEBPACK_AMD_DEFINE_RESULT__=function(){return t(a)}.call(exports,__webpack_require__,exports,module))||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)}(window||{},function(window){"use strict";function ProjectInterface(){return{}}function roundValues(e){bm_rnd=e?_Mathround:function(e){return e}}function styleDiv(e){e.style.position="absolute",e.style.top=0,e.style.left=0,e.style.display="block",e.style.transformOrigin=e.style.webkitTransformOrigin="0 0",e.style.backfaceVisibility=e.style.webkitBackfaceVisibility="visible",e.style.transformStyle=e.style.webkitTransformStyle=e.style.mozTransformStyle="preserve-3d"}function BMEnterFrameEvent(a,t,e,r){this.type=a,this.currentTime=t,this.totalTime=e,this.direction=0>r?-1:1}function BMCompleteEvent(a,t){this.type=a,this.direction=0>t?-1:1}function BMCompleteLoopEvent(a,t,e,r){this.type=a,this.currentLoop=e,this.totalLoops=t,this.direction=0>r?-1:1}function BMSegmentStartEvent(a,t,e){this.type=a,this.firstFrame=t,this.totalFrames=e}function BMDestroyEvent(a,t){this.type=a,this.target=t}function BMRenderFrameErrorEvent(a,t){this.type="renderFrameError",this.nativeError=a,this.currentTime=t}function BMConfigErrorEvent(e){this.type="configError",this.nativeError=e}function BMAnimationConfigErrorEvent(a,t){this.type=a,this.nativeError=t,this.currentTime=currentTime}function HSVtoRGB(d,t,e){var n,p,c,m,g,f,y,v;switch(f=e*(1-t),y=e*(1-(g=6*d-(m=_Mathfloor(6*d)))*t),v=e*(1-(1-g)*t),m%6){case 0:n=e,p=v,c=f;break;case 1:n=y,p=e,c=f;break;case 2:n=f,p=e,c=v;break;case 3:n=f,p=y,c=e;break;case 4:n=v,p=f,c=e;break;case 5:n=e,p=f,c=y;}return[n,p,c]}function RGBtoHSV(l,t,e){var n=_Mathmax(l,t,e),r=_Mathmin(l,t,e),a=n-r,s=0===n?0:a/n,o;return n===r?o=0:n===l?(o=t-e+a*(t<e?6:0),o/=6*a):n===t?(o=e-l+2*a,o/=6*a):n===e?(o=l-t+4*a,o/=6*a):void 0,[o,s,n/255]}function addSaturationToRGB(a,t){var e=RGBtoHSV(255*a[0],255*a[1],255*a[2]);return e[1]+=t,1<e[1]?e[1]=1:0>=e[1]&&(e[1]=0),HSVtoRGB(e[0],e[1],e[2])}function addBrightnessToRGB(a,t){var e=RGBtoHSV(255*a[0],255*a[1],255*a[2]);return e[2]+=t,1<e[2]?e[2]=1:0>e[2]&&(e[2]=0),HSVtoRGB(e[0],e[1],e[2])}function addHueToRGB(a,t){var e=RGBtoHSV(255*a[0],255*a[1],255*a[2]);return e[0]+=t/360,1<e[0]?e[0]-=1:0>e[0]&&(e[0]+=1),HSVtoRGB(e[0],e[1],e[2])}function BaseEvent(){}function createSizedArray(e){return Array.apply(null,{length:e})}function createNS(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function createTag(e){return document.createElement(e)}function DynamicPropertyContainer(){}function extendPrototype(o,t){var e=o.length,r,s;for(r=0;r<e;r+=1)for(var l in s=o[r].prototype)s.hasOwnProperty(l)&&(t.prototype[l]=s[l])}function getDescriptor(a,t){return Object.getOwnPropertyDescriptor(a,t)}function createProxyFunction(a){function t(){}return t.prototype=a,t}function bezFunction(){function x(o,t,e,n,i,r){var a=o*n+t*i+e*r-i*n-r*o-e*t;return-.001<a&&.001>a}function t(e){this.segmentLength=0,this.points=Array(e)}function n(a,t){this.partialLength=a,this.point=t}function m(d,t){var e=t.percents,n=t.lengths,i=e.length,r=bm_floor((i-1)*d),p=d*t.addedLength,s=0;if(r===i-1||0===r||p===n[r])return e[r];for(var c=n[r]>p?-1:1,l=!0;l;)if(n[r]<=p&&n[r+1]>p?(s=(p-n[r])/(n[r+1]-n[r]),l=!1):r+=c,0>r||r>=i-1){if(r===i-1)return e[r];l=!1}return e[r]+(e[r+1]-e[r])*s}Math;var d=function(m,t,e,n){var i=defaultCurveSegments,u=0,g=[],p=[],f=bezier_length_pool.newElement(),d,y,v,_,x,b;for(v=e.length,d=0;d<i;d+=1){for(x=d/(i-1),b=0,y=0;y<v;y+=1)_=bm_pow(1-x,3)*m[y]+3*bm_pow(1-x,2)*x*e[y]+3*(1-x)*bm_pow(x,2)*n[y]+bm_pow(x,3)*t[y],g[y]=_,null!==p[y]&&(b+=bm_pow(g[y]-p[y],2)),p[y]=g[y];b&&(u+=b=bm_sqrt(b)),f.percents[d]=x,f.lengths[d]=u}return f.addedLength=u,f},e=(i={},function(r,e,a,s){var o=(r[0]+"_"+r[1]+"_"+e[0]+"_"+e[1]+"_"+a[0]+"_"+a[1]+"_"+s[0]+"_"+s[1]).replace(/\./g,"p");if(!i[o]){var l=defaultCurveSegments,b=0,E=null,T,S,M,A,w,P,C;2===r.length&&(r[0]!=e[0]||r[1]!=e[1])&&x(r[0],r[1],e[0],e[1],r[0]+a[0],r[1]+a[1])&&x(r[0],r[1],e[0],e[1],e[0]+s[0],e[1]+s[1])&&(l=2);var D=new t(l);for(M=a.length,T=0;T<l;T+=1){for(C=createSizedArray(M),w=T/(l-1),P=0,S=0;S<M;S+=1)A=bm_pow(1-w,3)*r[S]+3*bm_pow(1-w,2)*w*(r[S]+a[S])+3*(1-w)*bm_pow(w,2)*(e[S]+s[S])+bm_pow(w,3)*e[S],C[S]=A,null!==E&&(P+=bm_pow(C[S]-E[S],2));b+=P=bm_sqrt(P),D.points[T]=new n(P,C),E=C}D.segmentLength=b,i[o]=D}return i[o]}),s=createTypedArray("float32",8),i;return{getSegmentsLength:function(e){var t=segments_length_pool.newElement(),i=e.c,r=e.v,a=e.o,s=e.i,o=e._length,l=t.lengths,p=0,c;for(c=0;c<o-1;c+=1)l[c]=d(r[c],r[c+1],a[c],s[c+1]),p+=l[c].addedLength;return i&&o&&(l[c]=d(r[c],r[0],a[c],s[0]),p+=l[c].addedLength),t.totalLength=p,t},getNewSegment:function(o,t,e,n,i,g,y){var l=m(i=0>i?0:1<i?1:i,y),u=m(g=1<g?1:g,y),c=o.length,p=1-l,f=1-u,d;for(d=0;d<c;d+=1)s[4*d]=_Mathround(1e3*(p*p*p*o[d]+3*(l*p*p)*e[d]+3*(l*l*p)*n[d]+l*l*l*t[d]))/1e3,s[4*d+1]=_Mathround(1e3*(p*p*f*o[d]+(l*p*f+p*l*f+p*p*u)*e[d]+(l*l*f+p*l*u+l*p*u)*n[d]+l*l*u*t[d]))/1e3,s[4*d+2]=_Mathround(1e3*(p*f*f*o[d]+(l*f*f+p*u*f+p*f*u)*e[d]+(l*u*f+p*u*u+l*f*u)*n[d]+l*u*u*t[d]))/1e3,s[4*d+3]=_Mathround(1e3*(f*f*f*o[d]+(u*f*f+f*u*f+f*f*u)*e[d]+(u*u*f+f*u*u+u*f*u)*n[d]+u*u*u*t[d]))/1e3;return s},getPointInSegment:function(s,t,e,n,i,r){var a=m(i,r),o=1-a;return[_Mathround(1e3*(o*o*o*s[0]+(a*o*o+o*a*o+o*o*a)*e[0]+(a*a*o+o*a*a+a*o*a)*n[0]+a*a*a*t[0]))/1e3,_Mathround(1e3*(o*o*o*s[1]+(a*o*o+o*a*o+o*o*a)*e[1]+(a*a*o+o*a*a+a*o*a)*n[1]+a*a*a*t[1]))/1e3]},buildBezierData:e,pointOnLine2D:x,pointOnLine3D:function(t,e,n,i,r,a,s,o,l){if(0===n&&0===a&&0===l)return x(t,e,i,r,s,o);var d=_Mathsqrt(_Mathpow(i-t,2)+_Mathpow(r-e,2)+_Mathpow(a-n,2)),c=_Mathsqrt(_Mathpow(s-t,2)+_Mathpow(o-e,2)+_Mathpow(l-n,2)),p=_Mathsqrt(_Mathpow(s-i,2)+_Mathpow(o-r,2)+_Mathpow(l-a,2)),m;return-1e-4<(m=d>c?d>p?d-c-p:p-c-d:p>c?p-c-d:c-d-p)&&1e-4>m}}}function dataFunctionManager(){function d(n,r,a){var i=n.length,s,u,v,_,x,b;for(u=0;u<i;u+=1)if("ks"in(s=n[u])&&!s.completed){if(s.completed=!0,s.tt&&(n[u-1].td=s.tt),[],-1,s.hasMask){var E=s.masksProperties;for(_=E.length,v=0;v<_;v+=1)if(E[v].pt.k.i)y(E[v].pt.k);else for(b=E[v].pt.k.length,x=0;x<b;x+=1)E[v].pt.k[x].s&&y(E[v].pt.k[x].s[0]),E[v].pt.k[x].e&&y(E[v].pt.k[x].e[0])}0===s.ty?(s.layers=t(s.refId,r),d(s.layers,r,a)):4===s.ty?g(s.shapes):5==s.ty&&e(s,a)}}function t(a,t){for(var e=0,r=t.length;e<r;){if(t[e].id===a)return t[e].layers.__used?JSON.parse(JSON.stringify(t[e].layers)):(t[e].layers.__used=!0,t[e].layers);e+=1}}function g(n){var t,i,o;for(t=n.length-1;0<=t;t-=1)if("sh"==n[t].ty){if(n[t].ks.k.i)y(n[t].ks.k);else for(o=n[t].ks.k.length,i=0;i<o;i+=1)n[t].ks.k[i].s&&y(n[t].ks.k[i].s[0]),n[t].ks.k[i].e&&y(n[t].ks.k[i].e[0])}else"gr"==n[t].ty&&g(n[t].it)}function y(a){var t=a.i.length,r;for(r=0;r<t;r+=1)a.i[r][0]+=a.v[r][0],a.i[r][1]+=a.v[r][1],a.o[r][0]+=a.v[r][0],a.o[r][1]+=a.v[r][1]}function p(a,t){var e=t?t.split("."):[100,100,100];return a[0]>e[0]||!(e[0]>a[0])&&(a[1]>e[1]||!(e[1]>a[1])&&(a[2]>e[2]||!(e[2]>a[2])&&void 0))}function e(e){0!==e.t.a.length||"m"in e.t.p||(e.singleShape=!0)}var r=function(){function r(a){var t=a.length,r,o,s;for(r=0;r<t;r+=1)5===a[r].ty&&(o=a[r],s=void 0,s=o.t.d,o.t.d={k:[{s:s,t:0}]})}var e=[4,4,14];return function(t){if(p(e,t.v)&&(r(t.layers),t.assets)){var n=t.assets.length,a;for(a=0;a<n;a+=1)t.assets[a].layers&&r(t.assets[a].layers)}}}(),i=(c=[4,7,99],function(a){if(a.chars&&!p(c,a.v)){var t=a.chars.length,r,i,d,m,u;for(r=0;r<t;r+=1)if(a.chars[r].data&&a.chars[r].data.shapes)for(d=(u=a.chars[r].data.shapes[0].it).length,i=0;i<d;i+=1)(m=u[i].ks.k).__converted||(y(u[i].ks.k),m.__converted=!0)}}),o=function(){function o(e){var t=e.length,a,s,l;for(a=0;a<t;a+=1)if("gr"===e[a].ty)o(e[a].it);else if("fl"===e[a].ty||"st"===e[a].ty)if(e[a].c.k&&e[a].c.k[0].i)for(l=e[a].c.k.length,s=0;s<l;s+=1)e[a].c.k[s].s&&(e[a].c.k[s].s[0]/=255,e[a].c.k[s].s[1]/=255,e[a].c.k[s].s[2]/=255,e[a].c.k[s].s[3]/=255),e[a].c.k[s].e&&(e[a].c.k[s].e[0]/=255,e[a].c.k[s].e[1]/=255,e[a].c.k[s].e[2]/=255,e[a].c.k[s].e[3]/=255);else e[a].c.k[0]/=255,e[a].c.k[1]/=255,e[a].c.k[2]/=255,e[a].c.k[3]/=255}function r(e){var t=e.length,a;for(a=0;a<t;a+=1)4===e[a].ty&&o(e[a].shapes)}var n=[4,1,9];return function(t){if(p(n,t.v)&&(r(t.layers),t.assets)){var e=t.assets.length,a;for(a=0;a<e;a+=1)t.assets[a].layers&&r(t.assets[a].layers)}}}(),s=function(){function l(e){var t,a,o;for(t=e.length-1;0<=t;t-=1)if("sh"==e[t].ty){if(e[t].ks.k.i)e[t].ks.k.c=e[t].closed;else for(o=e[t].ks.k.length,a=0;a<o;a+=1)e[t].ks.k[a].s&&(e[t].ks.k[a].s[0].c=e[t].closed),e[t].ks.k[a].e&&(e[t].ks.k[a].e[0].c=e[t].closed)}else"gr"==e[t].ty&&l(e[t].it)}function r(e){var t=e.length,d,p,c,m,u,g;for(p=0;p<t;p+=1){if((d=e[p]).hasMask){var f=d.masksProperties;for(m=f.length,c=0;c<m;c+=1)if(f[c].pt.k.i)f[c].pt.k.c=f[c].cl;else for(g=f[c].pt.k.length,u=0;u<g;u+=1)f[c].pt.k[u].s&&(f[c].pt.k[u].s[0].c=f[c].cl),f[c].pt.k[u].e&&(f[c].pt.k[u].e[0].c=f[c].cl)}4===d.ty&&l(d.shapes)}}var n=[4,4,18];return function(t){if(p(n,t.v)&&(r(t.layers),t.assets)){var e=t.assets.length,a;for(a=0;a<e;a+=1)t.assets[a].layers&&r(t.assets[a].layers)}}}(),n={completeData:function(t,e){t.__complete||(o(t),r(t),i(t),s(t),d(t.layers,t.assets,e),t.__complete=!0)}},c;return n.checkColors=o,n.checkChars=i,n.checkShapes=s,n.completeLayers=d,n}function ShapePath(){this.c=!1,this._length=0,this._maxLength=8,this.v=createSizedArray(this._maxLength),this.o=createSizedArray(this._maxLength),this.i=createSizedArray(this._maxLength)}function ShapeModifier(){}function TrimModifier(){}function RoundCornersModifier(){}function RepeaterModifier(){}function ShapeCollection(){this._length=0,this._maxLength=4,this.shapes=createSizedArray(this._maxLength)}function DashProperty(o,t,e,n){this.elem=o,this.frameId=-1,this.dataProps=createSizedArray(t.length),this.renderer=e,this.k=!1,this.dashStr="",this.dashArray=createTypedArray("float32",t.length?t.length-1:0),this.dashoffset=createTypedArray("float32",1),this.initDynamicPropertyContainer(n);var i=t.length||0,s,l;for(s=0;s<i;s+=1)l=PropertyFactory.getProp(o,t[s].v,0,0,this),this.k=l.k||this.k,this.dataProps[s]={n:t[s].n,p:l};this.k||this.getValue(!0),this._isAnimated=this.k}function GradientProperty(a,t,e){this.data=t,this.c=createTypedArray("uint8c",4*t.p);var r=t.k.k[0].s?t.k.k[0].s.length-4*t.p:t.k.k.length-4*t.p;this.o=createTypedArray("float32",r),this._cmdf=!1,this._omdf=!1,this._collapsable=this.checkCollapsable(),this._hasOpacity=r,this.initDynamicPropertyContainer(e),this.prop=PropertyFactory.getProp(a,t.k,1,null,this),this.k=this.prop.k,this.getValue(!0)}function TextAnimatorProperty(a,t,e){this._isFirstFrame=!0,this._hasMaskedPath=!1,this._frameId=-1,this._textData=a,this._renderType=t,this._elem=e,this._animatorsData=createSizedArray(this._textData.a.length),this._pathData={},this._moreOptions={alignment:{}},this.renderedLetters=[],this.lettersChangedFlag=!1,this.initDynamicPropertyContainer(e)}function TextAnimatorDataProperty(o,t,e){var n={propType:!1},i=PropertyFactory.getProp,r=t.a;this.a={r:r.r?i(o,r.r,0,degToRads,e):n,rx:r.rx?i(o,r.rx,0,degToRads,e):n,ry:r.ry?i(o,r.ry,0,degToRads,e):n,sk:r.sk?i(o,r.sk,0,degToRads,e):n,sa:r.sa?i(o,r.sa,0,degToRads,e):n,s:r.s?i(o,r.s,1,.01,e):n,a:r.a?i(o,r.a,1,0,e):n,o:r.o?i(o,r.o,0,.01,e):n,p:r.p?i(o,r.p,1,0,e):n,sw:r.sw?i(o,r.sw,0,0,e):n,sc:r.sc?i(o,r.sc,1,0,e):n,fc:r.fc?i(o,r.fc,1,0,e):n,fh:r.fh?i(o,r.fh,0,0,e):n,fs:r.fs?i(o,r.fs,0,.01,e):n,fb:r.fb?i(o,r.fb,0,.01,e):n,t:r.t?i(o,r.t,0,0,e):n},this.s=TextSelectorProp.getTextSelectorProp(o,t.s,e),this.s.t=t.s.t}function LetterProps(o,t,e,n,i,r){this.o=o,this.sw=t,this.sc=e,this.fc=n,this.m=i,this.p=r,this._mdf={o:!0,sw:!!t,sc:!!e,fc:!!n,m:!0,p:!0}}function TextProperty(a,t){this._frameId=-999999,this.pv="",this.v="",this.kf=!1,this._isFirstFrame=!0,this._mdf=!1,this.data=t,this.elem=a,this.comp=this.elem.comp,this.keysIndex=0,this.canResize=!1,this.minimumFontSize=1,this.effectsSequence=[],this.currentData={ascent:0,boxWidth:this.defaultBoxWidth,f:"",fStyle:"",fWeight:"",fc:"",j:"",justifyOffset:"",l:[],lh:0,lineWidths:[],ls:"",of:"",s:"",sc:"",sw:0,t:0,tr:0,sz:0,ps:null,fillColorAnim:!1,strokeColorAnim:!1,strokeWidthAnim:!1,yOffset:0,finalSize:0,finalText:[],finalLineHeight:0,__complete:!1},this.copyData(this.currentData,this.data.d.k[0].s),this.searchProperty()||this.completeTextData(this.currentData)}function BaseRenderer(){}function SVGRenderer(d,t){this.animationItem=d,this.layers=null,this.renderedFrame=-1,this.svgElement=createNS("svg");var e="";if(t&&t.title){var p=createNS("title"),i=createElementID();p.setAttribute("id",i),p.textContent=t.title,this.svgElement.appendChild(p),e+=i}if(t&&t.description){var r=createNS("desc"),a=createElementID();r.setAttribute("id",a),r.textContent=t.description,this.svgElement.appendChild(r),e+=" "+a}e&&this.svgElement.setAttribute("aria-labelledby",e);var s=createNS("defs");this.svgElement.appendChild(s);var o=createNS("g");this.svgElement.appendChild(o),this.layerElement=o,this.renderConfig={preserveAspectRatio:t&&t.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:t&&t.imagePreserveAspectRatio||"xMidYMid slice",progressiveLoad:t&&t.progressiveLoad||!1,hideOnTransparent:!t||!1!==t.hideOnTransparent,viewBoxOnly:t&&t.viewBoxOnly||!1,viewBoxSize:t&&t.viewBoxSize||!1,className:t&&t.className||"",id:t&&t.id||"",focusable:t&&t.focusable,filterSize:{width:t&&t.filterSize&&t.filterSize.width||"100%",height:t&&t.filterSize&&t.filterSize.height||"100%",x:t&&t.filterSize&&t.filterSize.x||"0%",y:t&&t.filterSize&&t.filterSize.y||"0%"}},this.globalData={_mdf:!1,frameNum:-1,defs:s,renderConfig:this.renderConfig},this.elements=[],this.pendingElements=[],this.destroyed=!1,this.rendererType="svg"}function CanvasRenderer(a,t){this.animationItem=a,this.renderConfig={clearCanvas:!t||void 0===t.clearCanvas||t.clearCanvas,context:t&&t.context||null,progressiveLoad:t&&t.progressiveLoad||!1,preserveAspectRatio:t&&t.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:t&&t.imagePreserveAspectRatio||"xMidYMid slice",className:t&&t.className||"",id:t&&t.id||""},this.renderConfig.dpr=t&&t.dpr||1,this.animationItem.wrapper&&(this.renderConfig.dpr=t&&t.dpr||window.devicePixelRatio||1),this.renderedFrame=-1,this.globalData={frameNum:-1,_mdf:!1,renderConfig:this.renderConfig,currentGlobalAlpha:-1},this.contextData=new CVContextData,this.elements=[],this.pendingElements=[],this.transformMat=new Matrix,this.completeLayers=!1,this.rendererType="canvas"}function HybridRenderer(a,t){this.animationItem=a,this.layers=null,this.renderedFrame=-1,this.renderConfig={className:t&&t.className||"",imagePreserveAspectRatio:t&&t.imagePreserveAspectRatio||"xMidYMid slice",hideOnTransparent:!t||!1!==t.hideOnTransparent,filterSize:{width:t&&t.filterSize&&t.filterSize.width||"400%",height:t&&t.filterSize&&t.filterSize.height||"400%",x:t&&t.filterSize&&t.filterSize.x||"-100%",y:t&&t.filterSize&&t.filterSize.y||"-100%"}},this.globalData={_mdf:!1,frameNum:-1,renderConfig:this.renderConfig},this.pendingElements=[],this.elements=[],this.threeDElements=[],this.destroyed=!1,this.camera=null,this.supports3d=!0,this.rendererType="html"}function MaskElement(E,t,e){this.data=E,this.element=t,this.globalData=e,this.storedData=[],this.masksProperties=this.data.masksProperties||[],this.maskElement=null;var n=this.globalData.defs,r=this.masksProperties?this.masksProperties.length:0,T;this.viewData=createSizedArray(r),this.solidPath="";var S=this.masksProperties,f=0,M=[],m=createElementID(),g="clipPath",A="clip-path",w,P,C,D,L,R,k;for(T=0;T<r;T++)if(("a"!==S[T].mode&&"n"!==S[T].mode||S[T].inv||100!==S[T].o.k||S[T].o.x)&&(g="mask",A="mask"),"s"!=S[T].mode&&"i"!=S[T].mode||0!==f?D=null:((D=createNS("rect")).setAttribute("fill","#ffffff"),D.setAttribute("width",this.element.comp.data.w||0),D.setAttribute("height",this.element.comp.data.h||0),M.push(D)),w=createNS("path"),"n"!=S[T].mode){var F;if(f+=1,w.setAttribute("fill","s"===S[T].mode?"#000000":"#ffffff"),w.setAttribute("clip-rule","nonzero"),0===S[T].x.k?(R=null,k=null):(g="mask",A="mask",k=PropertyFactory.getProp(this.element,S[T].x,0,null,this.element),F=createElementID(),(L=createNS("filter")).setAttribute("id",F),(R=createNS("feMorphology")).setAttribute("operator","erode"),R.setAttribute("in","SourceGraphic"),R.setAttribute("radius","0"),L.appendChild(R),n.appendChild(L),w.setAttribute("stroke","s"===S[T].mode?"#000000":"#ffffff")),this.storedData[T]={elem:w,x:k,expan:R,lastPath:"",lastOperator:"",filterId:F,lastRadius:0},"i"==S[T].mode){C=M.length;var I=createNS("g");for(P=0;P<C;P+=1)I.appendChild(M[P]);var x=createNS("mask");x.setAttribute("mask-type","alpha"),x.setAttribute("id",m+"_"+f),x.appendChild(w),n.appendChild(x),I.setAttribute("mask","url("+locationHref+"#"+m+"_"+f+")"),M.length=0,M.push(I)}else M.push(w);S[T].inv&&!this.solidPath&&(this.solidPath=this.createLayerSolidPath()),this.viewData[T]={elem:w,lastPath:"",op:PropertyFactory.getProp(this.element,S[T].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,S[T],3),invRect:D},this.viewData[T].prop.k||this.drawPath(S[T],this.viewData[T].prop.v,this.viewData[T])}else this.viewData[T]={op:PropertyFactory.getProp(this.element,S[T].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,S[T],3),elem:w,lastPath:""},n.appendChild(w);for(this.maskElement=createNS(g),r=M.length,T=0;T<r;T+=1)this.maskElement.appendChild(M[T]);0<f&&(this.maskElement.setAttribute("id",m),this.element.maskedElement.setAttribute(A,"url("+locationHref+"#"+m+")"),n.appendChild(this.maskElement)),this.viewData.length&&this.element.addRenderableComponent(this)}function HierarchyElement(){}function FrameElement(){}function TransformElement(){}function RenderableElement(){}function RenderableDOMElement(){}function ProcessedElement(a,t){this.elem=a,this.pos=t}function SVGStyleData(a,t){this.data=a,this.type=a.ty,this.d="",this.lvl=t,this._mdf=!1,this.closed=!0===a.hd,this.pElem=createNS("path"),this.msElem=null}function SVGShapeData(a,t,e){this.caches=[],this.styles=[],this.transformers=a,this.lStr="",this.sh=e,this.lvl=t,this._isAnimated=!!e.k;for(var n=0,o=a.length;n<o;){if(a[n].mProps.dynamicProperties.length){this._isAnimated=!0;break}n+=1}}function SVGTransformData(a,t,e){this.transform={mProps:a,op:t,container:e},this.elements=[],this._isAnimated=this.transform.mProps.dynamicProperties.length||this.transform.op.effectsSequence.length}function SVGStrokeStyleData(a,t,e){this.initDynamicPropertyContainer(a),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(a,t.o,0,.01,this),this.w=PropertyFactory.getProp(a,t.w,0,null,this),this.d=new DashProperty(a,t.d||{},"svg",this),this.c=PropertyFactory.getProp(a,t.c,1,255,this),this.style=e,this._isAnimated=!!this._isAnimated}function SVGFillStyleData(a,t,e){this.initDynamicPropertyContainer(a),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(a,t.o,0,.01,this),this.c=PropertyFactory.getProp(a,t.c,1,255,this),this.style=e}function SVGGradientFillStyleData(a,t,e){this.initDynamicPropertyContainer(a),this.getValue=this.iterateDynamicProperties,this.initGradientData(a,t,e)}function SVGGradientStrokeStyleData(a,t,e){this.initDynamicPropertyContainer(a),this.getValue=this.iterateDynamicProperties,this.w=PropertyFactory.getProp(a,t.w,0,null,this),this.d=new DashProperty(a,t.d||{},"svg",this),this.initGradientData(a,t,e),this._isAnimated=!!this._isAnimated}function ShapeGroupData(){this.it=[],this.prevViewData=[],this.gr=createNS("g")}function ShapeTransformManager(){this.sequences={},this.sequenceList=[],this.transform_key_count=0}function CVShapeData(l,t,e,n){this.styledShapes=[],this.tr=[0,0,0,0,0,0];var i=4;"rc"==t.ty?i=5:"el"==t.ty?i=6:"sr"==t.ty&&(i=7),this.sh=ShapePropertyFactory.getShapeProp(l,t,i,l);var d=e.length,o,p;for(o=0;o<d;o+=1)e[o].closed||(p={transforms:n.addTransformSequence(e[o].transforms),trNodes:[]},this.styledShapes.push(p),e[o].elements.push(p))}function BaseElement(){}function NullElement(a,t,e){this.initFrame(),this.initBaseData(a,t,e),this.initFrame(),this.initTransform(a,t,e),this.initHierarchy()}function SVGBaseElement(){}function IShapeElement(){}function ITextElement(){}function ICompElement(){}function IImageElement(a,t,e){this.assetData=t.getAssetData(a.refId),this.initElement(a,t,e),this.sourceRect={top:0,left:0,width:this.assetData.w,height:this.assetData.h}}function ISolidElement(a,t,e){this.initElement(a,t,e)}function SVGCompElement(a,t,e){this.layers=a.layers,this.supports3d=!0,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(a,t,e),this.tm=a.tm?PropertyFactory.getProp(this,a.tm,0,t.frameRate,this):{_placeholder:!0}}function SVGTextElement(a,t,e){this.textSpans=[],this.renderType="svg",this.initElement(a,t,e)}function SVGShapeElement(a,t,e){this.shapes=[],this.shapesData=a.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.initElement(a,t,e),this.prevViewData=[]}function SVGTintFilter(a,t){this.filterManager=t;var e=createNS("feColorMatrix");if(e.setAttribute("type","matrix"),e.setAttribute("color-interpolation-filters","linearRGB"),e.setAttribute("values","0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0"),e.setAttribute("result","f1"),a.appendChild(e),(e=createNS("feColorMatrix")).setAttribute("type","matrix"),e.setAttribute("color-interpolation-filters","sRGB"),e.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),e.setAttribute("result","f2"),a.appendChild(e),this.matrixFilter=e,100!==t.effectElements[2].p.v||t.effectElements[2].p.k){var o=createNS("feMerge"),r;a.appendChild(o),(r=createNS("feMergeNode")).setAttribute("in","SourceGraphic"),o.appendChild(r),(r=createNS("feMergeNode")).setAttribute("in","f2"),o.appendChild(r)}}function SVGFillFilter(a,t){this.filterManager=t;var e=createNS("feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("color-interpolation-filters","sRGB"),e.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),a.appendChild(e),this.matrixFilter=e}function SVGGaussianBlurEffect(a,t){a.setAttribute("x","-100%"),a.setAttribute("y","-100%"),a.setAttribute("width","300%"),a.setAttribute("height","300%"),this.filterManager=t;var e=createNS("feGaussianBlur");a.appendChild(e),this.feGaussianBlur=e}function SVGStrokeEffect(a,t){this.initialized=!1,this.filterManager=t,this.elem=a,this.paths=[]}function SVGTritoneFilter(o,t){this.filterManager=t;var e=createNS("feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("color-interpolation-filters","linearRGB"),e.setAttribute("values","0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0"),e.setAttribute("result","f1"),o.appendChild(e);var n=createNS("feComponentTransfer");n.setAttribute("color-interpolation-filters","sRGB"),o.appendChild(n),this.matrixFilter=n;var i=createNS("feFuncR");i.setAttribute("type","table"),n.appendChild(i),this.feFuncR=i;var r=createNS("feFuncG");r.setAttribute("type","table"),n.appendChild(r),this.feFuncG=r;var a=createNS("feFuncB");a.setAttribute("type","table"),n.appendChild(a),this.feFuncB=a}function SVGProLevelsFilter(a,t){this.filterManager=t;var e=this.filterManager.effectElements,r=createNS("feComponentTransfer");(e[10].p.k||0!==e[10].p.v||e[11].p.k||1!==e[11].p.v||e[12].p.k||1!==e[12].p.v||e[13].p.k||0!==e[13].p.v||e[14].p.k||1!==e[14].p.v)&&(this.feFuncR=this.createFeFunc("feFuncR",r)),(e[17].p.k||0!==e[17].p.v||e[18].p.k||1!==e[18].p.v||e[19].p.k||1!==e[19].p.v||e[20].p.k||0!==e[20].p.v||e[21].p.k||1!==e[21].p.v)&&(this.feFuncG=this.createFeFunc("feFuncG",r)),(e[24].p.k||0!==e[24].p.v||e[25].p.k||1!==e[25].p.v||e[26].p.k||1!==e[26].p.v||e[27].p.k||0!==e[27].p.v||e[28].p.k||1!==e[28].p.v)&&(this.feFuncB=this.createFeFunc("feFuncB",r)),(e[31].p.k||0!==e[31].p.v||e[32].p.k||1!==e[32].p.v||e[33].p.k||1!==e[33].p.v||e[34].p.k||0!==e[34].p.v||e[35].p.k||1!==e[35].p.v)&&(this.feFuncA=this.createFeFunc("feFuncA",r)),(this.feFuncR||this.feFuncG||this.feFuncB||this.feFuncA)&&(r.setAttribute("color-interpolation-filters","sRGB"),a.appendChild(r),r=createNS("feComponentTransfer")),(e[3].p.k||0!==e[3].p.v||e[4].p.k||1!==e[4].p.v||e[5].p.k||1!==e[5].p.v||e[6].p.k||0!==e[6].p.v||e[7].p.k||1!==e[7].p.v)&&(r.setAttribute("color-interpolation-filters","sRGB"),a.appendChild(r),this.feFuncRComposed=this.createFeFunc("feFuncR",r),this.feFuncGComposed=this.createFeFunc("feFuncG",r),this.feFuncBComposed=this.createFeFunc("feFuncB",r))}function SVGDropShadowEffect(d,t){var e=t.container.globalData.renderConfig.filterSize;d.setAttribute("x",e.x),d.setAttribute("y",e.y),d.setAttribute("width",e.width),d.setAttribute("height",e.height),this.filterManager=t;var n=createNS("feGaussianBlur");n.setAttribute("in","SourceAlpha"),n.setAttribute("result","drop_shadow_1"),n.setAttribute("stdDeviation","0"),this.feGaussianBlur=n,d.appendChild(n);var i=createNS("feOffset");i.setAttribute("dx","25"),i.setAttribute("dy","0"),i.setAttribute("in","drop_shadow_1"),i.setAttribute("result","drop_shadow_2"),this.feOffset=i,d.appendChild(i);var r=createNS("feFlood");r.setAttribute("flood-color","#00ff00"),r.setAttribute("flood-opacity","1"),r.setAttribute("result","drop_shadow_3"),this.feFlood=r,d.appendChild(r);var a=createNS("feComposite");a.setAttribute("in","drop_shadow_3"),a.setAttribute("in2","drop_shadow_2"),a.setAttribute("operator","in"),a.setAttribute("result","drop_shadow_4"),d.appendChild(a);var s=createNS("feMerge"),l;d.appendChild(s),l=createNS("feMergeNode"),s.appendChild(l),(l=createNS("feMergeNode")).setAttribute("in","SourceGraphic"),this.feMergeNode=l,this.feMerge=s,this.originalNodeAdded=!1,s.appendChild(l)}function SVGMatte3Effect(a,t,e){this.initialized=!1,this.filterManager=t,this.filterElem=a,this.elem=e,e.matteElement=createNS("g"),e.matteElement.appendChild(e.layerElement),e.matteElement.appendChild(e.transformedElement),e.baseElement=e.matteElement}function SVGEffects(o){var t=o.data.ef?o.data.ef.length:0,i=createElementID(),r=filtersFactory.createFilter(i),a=0,l,d;for(this.filters=[],l=0;l<t;l+=1)d=null,20===o.data.ef[l].ty?(a+=1,d=new SVGTintFilter(r,o.effectsManager.effectElements[l])):21===o.data.ef[l].ty?(a+=1,d=new SVGFillFilter(r,o.effectsManager.effectElements[l])):22===o.data.ef[l].ty?d=new SVGStrokeEffect(o,o.effectsManager.effectElements[l]):23===o.data.ef[l].ty?(a+=1,d=new SVGTritoneFilter(r,o.effectsManager.effectElements[l])):24===o.data.ef[l].ty?(a+=1,d=new SVGProLevelsFilter(r,o.effectsManager.effectElements[l])):25===o.data.ef[l].ty?(a+=1,d=new SVGDropShadowEffect(r,o.effectsManager.effectElements[l])):28===o.data.ef[l].ty?d=new SVGMatte3Effect(r,o.effectsManager.effectElements[l],o):29===o.data.ef[l].ty&&(a+=1,d=new SVGGaussianBlurEffect(r,o.effectsManager.effectElements[l])),d&&this.filters.push(d);a&&(o.globalData.defs.appendChild(r),o.layerElement.setAttribute("filter","url("+locationHref+"#"+i+")")),this.filters.length&&o.addRenderableComponent(this)}function CVContextData(){this.saved=[],this.cArrPos=0,this.cTr=new Matrix,this.cO=1;var e;for(this.savedOp=createTypedArray("float32",15),e=0;15>e;e+=1)this.saved[e]=createTypedArray("float32",16);this._length=15}function CVBaseElement(){}function CVImageElement(a,t,e){this.assetData=t.getAssetData(a.refId),this.img=t.imageLoader.getImage(this.assetData),this.initElement(a,t,e)}function CVCompElement(a,t,e){this.completeLayers=!1,this.layers=a.layers,this.pendingElements=[],this.elements=createSizedArray(this.layers.length),this.initElement(a,t,e),this.tm=a.tm?PropertyFactory.getProp(this,a.tm,0,t.frameRate,this):{_placeholder:!0}}function CVMaskElement(a,t){this.data=a,this.element=t,this.masksProperties=this.data.masksProperties||[],this.viewData=createSizedArray(this.masksProperties.length);var e=this.masksProperties.length,i=!1,o;for(o=0;o<e;o++)"n"!==this.masksProperties[o].mode&&(i=!0),this.viewData[o]=ShapePropertyFactory.getShapeProp(this.element,this.masksProperties[o],3);this.hasMasks=i,i&&this.element.addRenderableComponent(this)}function CVShapeElement(a,t,e){this.shapes=[],this.shapesData=a.shapes,this.stylesList=[],this.itemsData=[],this.prevViewData=[],this.shapeModifiers=[],this.processedElements=[],this.transformsManager=new ShapeTransformManager,this.initElement(a,t,e)}function CVSolidElement(a,t,e){this.initElement(a,t,e)}function CVTextElement(a,t,e){this.textSpans=[],this.yOffset=0,this.fillColorAnim=!1,this.strokeColorAnim=!1,this.strokeWidthAnim=!1,this.stroke=!1,this.fill=!1,this.justifyOffset=0,this.currentRender=null,this.renderType="canvas",this.values={fill:"rgba(0,0,0,0)",stroke:"rgba(0,0,0,0)",sWidth:0,fValue:""},this.initElement(a,t,e)}function CVEffects(){}function HBaseElement(){}function HSolidElement(a,t,e){this.initElement(a,t,e)}function HCompElement(a,t,e){this.layers=a.layers,this.supports3d=!a.hasMask,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(a,t,e),this.tm=a.tm?PropertyFactory.getProp(this,a.tm,0,t.frameRate,this):{_placeholder:!0}}function HShapeElement(a,t,e){this.shapes=[],this.shapesData=a.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.shapesContainer=createNS("g"),this.initElement(a,t,e),this.prevViewData=[],this.currentBBox={x:999999,y:-999999,h:0,w:0}}function HTextElement(a,t,e){this.textSpans=[],this.textPaths=[],this.currentBBox={x:999999,y:-999999,h:0,w:0},this.renderType="svg",this.isMasked=!1,this.initElement(a,t,e)}function HImageElement(a,t,e){this.assetData=t.getAssetData(a.refId),this.initElement(a,t,e)}function HCameraElement(o,t,e){this.initFrame(),this.initBaseData(o,t,e),this.initHierarchy();var n=PropertyFactory.getProp;if(this.pe=n(this,o.pe,0,0,this),o.ks.p.s?(this.px=n(this,o.ks.p.x,1,0,this),this.py=n(this,o.ks.p.y,1,0,this),this.pz=n(this,o.ks.p.z,1,0,this)):this.p=n(this,o.ks.p,1,0,this),o.ks.a&&(this.a=n(this,o.ks.a,1,0,this)),o.ks.or.k.length&&o.ks.or.k[0].to){var i=o.ks.or.k.length,a;for(a=0;a<i;a+=1)o.ks.or.k[a].to=null,o.ks.or.k[a].ti=null}this.or=n(this,o.ks.or,1,degToRads,this),this.or.sh=!0,this.rx=n(this,o.ks.rx,0,degToRads,this),this.ry=n(this,o.ks.ry,0,degToRads,this),this.rz=n(this,o.ks.rz,0,degToRads,this),this.mat=new Matrix,this._prevMat=new Matrix,this._isFirstFrame=!0,this.finalTransform={mProp:this}}function HEffects(){}function SliderEffect(a,t,e){this.p=PropertyFactory.getProp(t,a.v,0,0,e)}function AngleEffect(a,t,e){this.p=PropertyFactory.getProp(t,a.v,0,0,e)}function ColorEffect(a,t,e){this.p=PropertyFactory.getProp(t,a.v,1,0,e)}function PointEffect(a,t,e){this.p=PropertyFactory.getProp(t,a.v,1,0,e)}function LayerIndexEffect(a,t,e){this.p=PropertyFactory.getProp(t,a.v,0,0,e)}function MaskIndexEffect(a,t,e){this.p=PropertyFactory.getProp(t,a.v,0,0,e)}function CheckboxEffect(a,t,e){this.p=PropertyFactory.getProp(t,a.v,0,0,e)}function NoValueEffect(){this.p={}}function EffectsManager(){}function EffectsManager(o,t){var e=o.ef||[];this.effectElements=[];var n=e.length,a,s;for(a=0;a<n;a++)s=new GroupEffect(e[a],t),this.effectElements.push(s)}function GroupEffect(a,t){this.init(a,t)}function setLocationHref(e){locationHref=e}function searchAnimations(){!0===standalone?animationManager.searchAnimations(animationData,standalone,renderer):animationManager.searchAnimations()}function setSubframeRendering(e){subframeEnabled=e}function loadAnimation(e){return!0===standalone&&(e.animationData=JSON.parse(animationData)),animationManager.loadAnimation(e)}function setQuality(e){"string"==typeof e?"high"===e?defaultCurveSegments=200:"medium"===e?defaultCurveSegments=50:"low"===e?defaultCurveSegments=10:void 0:!isNaN(e)&&1<e&&(defaultCurveSegments=e);roundValues(!(50<=defaultCurveSegments))}function inBrowser(){return"undefined"!=typeof navigator}function installPlugin(a,t){"expressions"===a&&(expressionsPlugin=t)}function getFactory(e){return"propertyFactory"===e?PropertyFactory:"shapePropertyFactory"===e?ShapePropertyFactory:"matrix"===e?Matrix:void 0}function checkReady(){"complete"===document.readyState&&(clearInterval(readyStateCheckInterval),searchAnimations())}function getQueryVariable(a){for(var t=queryString.split("&"),e=0,r;e<t.length;e++)if(r=t[e].split("="),decodeURIComponent(r[0])==a)return decodeURIComponent(r[1])}var svgNS="http://www.w3.org/2000/svg",locationHref="",initialDefaultFrame=-999999,subframeEnabled=!0,isSafari=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),cachedColors={},bm_rounder=_Mathround,bm_pow=_Mathpow,bm_sqrt=_Mathsqrt,bm_abs=_Mathabs,bm_floor=_Mathfloor,bm_max=_Mathmax,bm_min=_Mathmin,blitter=10,BMMath={},expressionsPlugin,bm_rnd;!function(){var a=["abs","acos","acosh","asin","asinh","atan","atanh","atan2","ceil","cbrt","expm1","clz32","cos","cosh","exp","floor","fround","hypot","imul","log","log1p","log2","log10","max","min","pow","random","round","sign","sin","sinh","sqrt","tan","tanh","trunc","E","LN10","LN2","LOG10E","LOG2E","PI","SQRT1_2","SQRT2"],e=a.length,r;for(r=0;r<e;r+=1)BMMath[a[r]]=Math[a[r]]}(),BMMath.random=Math.random,BMMath.abs=function(a){if("object"==typeof a&&a.length){var t=createSizedArray(a.length),r=a.length,n;for(n=0;n<r;n+=1)t[n]=_Mathabs(a[n]);return t}return _Mathabs(a)};var defaultCurveSegments=150,degToRads=_MathPI/180,roundCorner=.5519;roundValues(!1);var createElementID=(_count=0,function(){return"__lottie_element_"+ ++_count}),rgbToHex=function(){var a=[],r,n;for(r=0;256>r;r+=1)n=r.toString(16),a[r]=1==n.length?"0"+n:n;return function(r,n,o){return 0>r&&(r=0),0>n&&(n=0),0>o&&(o=0),"#"+a[r]+a[n]+a[o]}}(),_count;BaseEvent.prototype={triggerEvent:function(a,t){if(this._cbs[a])for(var e=this._cbs[a].length,r=0;r<e;r++)this._cbs[a][r](t)},addEventListener:function(a,t){return this._cbs[a]||(this._cbs[a]=[]),this._cbs[a].push(t),function(){this.removeEventListener(a,t)}.bind(this)},removeEventListener:function(a,t){if(!t)this._cbs[a]=null;else if(this._cbs[a]){for(var e=0,r=this._cbs[a].length;e<r;)this._cbs[a][e]===t&&(this._cbs[a].splice(e,1),e-=1,r-=1),e+=1;this._cbs[a].length||(this._cbs[a]=null)}}};var createTypedArray="function"==typeof Uint8ClampedArray&&"function"==typeof Float32Array?function(a,t){return"float32"===a?new Float32Array(t):"int16"===a?new Int16Array(t):"uint8c"===a?new Uint8ClampedArray(t):void 0}:function(a,t){var e=0,o=[],r;for(r="int16"===a||"uint8c"===a?1:1.1,e=0;e<t;e+=1)o.push(r);return o};DynamicPropertyContainer.prototype={addDynamicProperty:function(e){-1===this.dynamicProperties.indexOf(e)&&(this.dynamicProperties.push(e),this.container.addDynamicProperty(this),this._isAnimated=!0)},iterateDynamicProperties:function(){this._mdf=!1;var a=this.dynamicProperties.length,e;for(e=0;e<a;e+=1)this.dynamicProperties[e].getValue(),this.dynamicProperties[e]._mdf&&(this._mdf=!0)},initDynamicPropertyContainer:function(e){this.container=e,this.dynamicProperties=[],this._mdf=!1,this._isAnimated=!1}};var getBlendMode=(blendModeEnums={0:"source-over",1:"multiply",2:"screen",3:"overlay",4:"darken",5:"lighten",6:"color-dodge",7:"color-burn",8:"hard-light",9:"soft-light",10:"difference",11:"exclusion",12:"hue",13:"saturation",14:"color",15:"luminosity"},function(e){return blendModeEnums[e]||""}),Matrix=function(){function R(){return this.props[0]=1,this.props[1]=0,this.props[2]=0,this.props[3]=0,this.props[4]=0,this.props[5]=1,this.props[6]=0,this.props[7]=0,this.props[8]=0,this.props[9]=0,this.props[10]=1,this.props[11]=0,this.props[12]=0,this.props[13]=0,this.props[14]=0,this.props[15]=1,this}function r(e){if(0===e)return this;var a=L(e),n=t(e);return this._t(a,-n,0,0,n,a,0,0,0,0,1,0,0,0,0,1)}function a(e){if(0===e)return this;var a=L(e),n=t(e);return this._t(1,0,0,0,0,a,-n,0,0,n,a,0,0,0,0,1)}function s(e){if(0===e)return this;var a=L(e),n=t(e);return this._t(a,0,n,0,0,1,0,0,-n,0,a,0,0,0,0,1)}function o(e){if(0===e)return this;var a=L(e),n=t(e);return this._t(a,-n,0,0,n,a,0,0,0,0,1,0,0,0,0,1)}function l(a,t){return this._t(1,t,a,1,0,0)}function h(a,t){return this.shear(F(a),F(t))}function u(e,n){var r=L(n),a=t(n);return this._t(r,a,0,0,-a,r,0,0,0,0,1,0,0,0,0,1)._t(1,0,0,0,F(e),1,0,0,0,0,1,0,0,0,0,1)._t(r,-a,0,0,a,r,0,0,0,0,1,0,0,0,0,1)}function c(a,t,e){return e||0===e||(e=1),1===a&&1===t&&1===e?this:this._t(a,0,0,0,0,t,0,0,0,0,e,0,0,0,0,1)}function p(g,t,e,n,i,r,a,s,o,l,h,u,c,p,f,d){return this.props[0]=g,this.props[1]=t,this.props[2]=e,this.props[3]=n,this.props[4]=i,this.props[5]=r,this.props[6]=a,this.props[7]=s,this.props[8]=o,this.props[9]=l,this.props[10]=h,this.props[11]=u,this.props[12]=c,this.props[13]=p,this.props[14]=f,this.props[15]=d,this}function f(a,t,e){return e=e||0,0!==a||0!==t||0!==e?this._t(1,0,0,0,0,1,0,0,0,0,1,0,a,t,e,1):this}function d(R,t,e,n,i,r,a,s,o,l,h,u,c,p,f,d){var m=this.props;if(1===R&&0===t&&0===e&&0===n&&0===i&&1===r&&0===a&&0===s&&0===o&&0===l&&1===h&&0===u)return m[12]=m[12]*R+m[15]*c,m[13]=m[13]*r+m[15]*p,m[14]=m[14]*h+m[15]*f,m[15]*=d,this._identityCalculated=!1,this;var g=m[0],v=m[1],y=m[2],_=m[3],x=m[4],b=m[5],E=m[6],w=m[7],D=m[8],M=m[9],S=m[10],T=m[11],A=m[12],C=m[13],P=m[14],k=m[15];return m[0]=g*R+v*i+y*o+_*c,m[1]=g*t+v*r+y*l+_*p,m[2]=g*e+v*a+y*h+_*f,m[3]=g*n+v*s+y*u+_*d,m[4]=x*R+b*i+E*o+w*c,m[5]=x*t+b*r+E*l+w*p,m[6]=x*e+b*a+E*h+w*f,m[7]=x*n+b*s+E*u+w*d,m[8]=D*R+M*i+S*o+T*c,m[9]=D*t+M*r+S*l+T*p,m[10]=D*e+M*a+S*h+T*f,m[11]=D*n+M*s+S*u+T*d,m[12]=A*R+C*i+P*o+k*c,m[13]=A*t+C*r+P*l+k*p,m[14]=A*e+C*a+P*h+k*f,m[15]=A*n+C*s+P*u+k*d,this._identityCalculated=!1,this}function m(){return this._identityCalculated||(this._identity=1===this.props[0]&&0===this.props[1]&&0===this.props[2]&&0===this.props[3]&&0===this.props[4]&&1===this.props[5]&&0===this.props[6]&&0===this.props[7]&&0===this.props[8]&&0===this.props[9]&&1===this.props[10]&&0===this.props[11]&&0===this.props[12]&&0===this.props[13]&&0===this.props[14]&&1===this.props[15],this._identityCalculated=!0),this._identity}function g(a){for(var t=0;16>t;){if(a.props[t]!==this.props[t])return!1;t+=1}return!0}function v(a){var t;for(t=0;16>t;t+=1)a.props[t]=this.props[t]}function y(a){var t;for(t=0;16>t;t+=1)this.props[t]=a[t]}function _(a,t,e){return{x:a*this.props[0]+t*this.props[4]+e*this.props[8]+this.props[12],y:a*this.props[1]+t*this.props[5]+e*this.props[9]+this.props[13],z:a*this.props[2]+t*this.props[6]+e*this.props[10]+this.props[14]}}function x(a,t,e){return a*this.props[0]+t*this.props[4]+e*this.props[8]+this.props[12]}function b(a,t,e){return a*this.props[1]+t*this.props[5]+e*this.props[9]+this.props[13]}function E(a,t,e){return a*this.props[2]+t*this.props[6]+e*this.props[10]+this.props[14]}function w(){var l=this.props[0]*this.props[5]-this.props[1]*this.props[4],t=this.props[5]/l,e=-this.props[1]/l,n=-this.props[4]/l,i=this.props[0]/l,r=(this.props[4]*this.props[13]-this.props[5]*this.props[12])/l,a=-(this.props[0]*this.props[13]-this.props[1]*this.props[12])/l,s=new Matrix;return s.props[0]=t,s.props[1]=e,s.props[4]=n,s.props[5]=i,s.props[12]=r,s.props[13]=a,s}function D(e){return this.getInverseMatrix().applyToPointArray(e[0],e[1],e[2]||0)}function M(a){var t=a.length,r=[],n;for(n=0;n<t;n+=1)r[n]=D(a[n]);return r}function S(d,t,e){var n=createTypedArray("float32",6);if(this.isIdentity())n[0]=d[0],n[1]=d[1],n[2]=t[0],n[3]=t[1],n[4]=e[0],n[5]=e[1];else{var i=this.props[0],r=this.props[1],a=this.props[4],s=this.props[5],o=this.props[12],l=this.props[13];n[0]=d[0]*i+d[1]*a+o,n[1]=d[0]*r+d[1]*s+l,n[2]=t[0]*i+t[1]*a+o,n[3]=t[0]*r+t[1]*s+l,n[4]=e[0]*i+e[1]*a+o,n[5]=e[0]*r+e[1]*s+l}return n}function T(a,t,e){return this.isIdentity()?[a,t,e]:[a*this.props[0]+t*this.props[4]+e*this.props[8]+this.props[12],a*this.props[1]+t*this.props[5]+e*this.props[9]+this.props[13],a*this.props[2]+t*this.props[6]+e*this.props[10]+this.props[14]]}function A(a,t){if(this.isIdentity())return a+","+t;var e=this.props;return _Mathround(100*(a*e[0]+t*e[4]+e[12]))/100+","+_Mathround(100*(a*e[1]+t*e[5]+e[13]))/100}function C(){for(var a=0,r=this.props,e="matrix3d(";16>a;)e+=n(1e4*r[a])/1e4,e+=15==a?")":",",a+=1;return e}function P(e){return 1e-6>e&&0<e||-1e-6<e&&0>e?n(1e4*e)/1e4:e}function k(){var e=this.props;return"matrix("+P(e[0])+","+P(e[1])+","+P(e[4])+","+P(e[5])+","+P(e[12])+","+P(e[13])+")"}var L=_Mathcos,t=_Mathsin,F=Math.tan,n=_Mathround;return function(){this.reset=R,this.rotate=r,this.rotateX=a,this.rotateY=s,this.rotateZ=o,this.skew=h,this.skewFromAxis=u,this.shear=l,this.scale=c,this.setTransform=p,this.translate=f,this.transform=d,this.applyToPoint=_,this.applyToX=x,this.applyToY=b,this.applyToZ=E,this.applyToPointArray=T,this.applyToTriplePoints=S,this.applyToPointStringified=A,this.toCSS=C,this.to2dCSS=k,this.clone=v,this.cloneFromProps=y,this.equals=g,this.inversePoints=M,this.inversePoint=D,this.getInverseMatrix=w,this._t=this.transform,this.isIdentity=m,this._identity=!0,this._identityCalculated=!1,this.props=createTypedArray("float32",16),this.reset()}}(),blendModeEnums;!function(a,y){function e(o){var l=o.length,d=this,i=0,p=d.i=d.j=0,c=d.S=[],s;for(l||(o=[l++]);256>i;)c[i]=i++;for(i=0;256>i;i++)c[i]=c[p=255&p+o[i%l]+(s=c[i])],c[p]=s;d.g=function(i){for(var o=0,l=d.i,p=d.j,c=d.S,s;i--;)s=c[l=255&l+1],o=256*o+c[255&(c[l]=c[p=255&p+s])+(c[p]=s)];return d.i=l,d.j=p,o}}function s(a,t){return t.i=a.i,t.j=a.j,t.S=a.S.slice(),t}function t(a,t){for(var e=a+"",i=0,s;i<e.length;)t[255&i]=255&(s^=19*t[255&i])+e.charCodeAt(i++);return o(t)}function o(e){return _StringfromCharCode.apply(0,e)}var l=this,d=y.pow(256,6),i=y.pow(2,52);y.seedrandom=function(r,n,u){var p=[],f=t(function o(t,e){var n=[],r=typeof t,a;if(e&&"object"==r)for(a in t)try{n.push(o(t[a],e-1))}catch(e){}return n.length?n:"string"==r?t:t+"\0"}((n=!0===n?{entropy:!0}:n||{}).entropy?[r,o(a)]:null===r?function(){try{var t=new Uint8Array(256);return(l.crypto||l.msCrypto).getRandomValues(t),o(t)}catch(t){var n=l.navigator,i=n&&n.plugins;return[+new Date,l,i,l.screen,o(a)]}}():r,3),p),h=new e(p),m=function(){for(var a=h.g(6),r=d,o=0;a<i;)a=256*(a+o),r*=256,o=h.g(1);for(;a>=2*i;)a/=2,r/=2,o>>>=1;return(a+o)/r};return m.int32=function(){return 0|h.g(4)},m.quick=function(){return h.g(4)/4294967296},m.double=m,t(o(h.S),a),(n.pass||u||function(e,t,a,n){return n&&(n.S&&s(n,h),e.state=function(){return s(h,{})}),a?(y.random=e,t):e})(m,f,"global"in n?n.global:this==y,n.state)},t(y.random(),a)}([],BMMath);var BezierFactory=function(){function d(a,t){return 1-3*t+3*a}function i(a,t){return 3*t-6*a}function r(e){return 3*e}function p(a,t,e){return((d(t,e)*a+i(t,e))*a+r(t))*a}function s(a,t,e){return 3*d(t,e)*a*a+2*i(t,e)*a+r(t)}function c(a){this._p=a,this._mSampleValues=e?new Float32Array(11):Array(11),this._precomputed=!1,this.get=this.get.bind(this)}var l={},e="function"==typeof Float32Array;return c.prototype={get:function(a){var t=this._p[0],e=this._p[1],n=this._p[2],i=this._p[3];return this._precomputed||this._precompute(),t===e&&n===i?a:0===a?0:1===a?1:p(this._getTForX(a),e,i)},_precompute:function(){var a=this._p[0],t=this._p[1],e=this._p[2],r=this._p[3];this._precomputed=!0,a===t&&e===r||this._calcSampleValues()},_calcSampleValues:function(){for(var a=this._p[0],t=this._p[2],e=0;11>e;++e)this._mSampleValues[e]=p(.1*e,a,t)},_getTForX:function(o){for(var t=this._p[0],e=this._p[2],n=this._mSampleValues,i=0,d=1;10!=d&&n[d]<=o;++d)i+=.1;var c=i+.1*((o-n[--d])/(n[d+1]-n[d])),l=s(c,t,e);return .001<=l?function(o,t,l,n){for(var i=0,d;4>i;++i){if(d=s(t,l,n),0===d)return t;t-=(p(t,l,n)-o)/d}return t}(o,c,t,e):0===l?c:function(s,t,d,c,i){var r=0,m,u;do 0<(m=p(u=t+(d-t)/2,c,i)-s)?d=u:t=u;while(1e-7<_Mathabs(m)&&10>++r);return u}(o,i,i+.1,t,e)}},{getBezierEasing:function(e,t,n,i,r){var a=r||("bez_"+e+"_"+t+"_"+n+"_"+i).replace(/\./g,"p");if(l[a])return l[a];var s=new c([e,t,n,i]);return l[a]=s,s}}}();!function(){for(var o=0,a=["ms","moz","webkit","o"],e=0;e<a.length&&!window.requestAnimationFrame;++e)window.requestAnimationFrame=window[a[e]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[a[e]+"CancelAnimationFrame"]||window[a[e]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(t){var e=new Date().getTime(),n=_Mathmax(0,16-(e-o)),r=setTimeout(function(){t(e+n)},n);return o=e+n,r}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)})}();var bez=bezFunction(),dataManager=dataFunctionManager(),FontManager=function(){function o(a,t){var e=createTag("span");e.style.fontFamily=t;var n=createTag("span");n.innerHTML="giItT1WQy@!-/#",e.style.position="absolute",e.style.left="-10000px",e.style.top="-10000px",e.style.fontSize="300px",e.style.fontVariant="normal",e.style.fontStyle="normal",e.style.fontWeight="normal",e.style.letterSpacing="0",e.appendChild(n),document.body.appendChild(e);var i=n.offsetWidth;return n.style.fontFamily=a+", "+t,{node:n,w:i,parent:e}}function n(a,t){var e=createNS("text");return e.style.fontSize="100px",e.setAttribute("font-family",t.fFamily),e.setAttribute("font-style",t.fStyle),e.setAttribute("font-weight",t.fWeight),e.textContent="1",t.fClass?(e.style.fontFamily="inherit",e.setAttribute("class",t.fClass)):e.style.fontFamily=t.fFamily,a.appendChild(e),createTag("canvas").getContext("2d").font=t.fWeight+" "+t.fStyle+" 100px "+t.fFamily,e}var s={w:0,size:0,shapes:[]},t=[];t=t.concat([2304,2305,2306,2307,2362,2363,2364,2364,2366,2367,2368,2369,2370,2371,2372,2373,2374,2375,2376,2377,2378,2379,2380,2381,2382,2383,2387,2388,2389,2390,2391,2402,2403]);var a=function(){this.fonts=[],this.chars=null,this.typekitLoaded=0,this.isLoaded=!1,this.initTime=Date.now()};return a.getCombinedCharacterCodes=function(){return t},a.prototype.addChars=function(o){if(o){this.chars||(this.chars=[]);var t=o.length,r=this.chars.length,s,l,d;for(s=0;s<t;s+=1){for(l=0,d=!1;l<r;)this.chars[l].style===o[s].style&&this.chars[l].fFamily===o[s].fFamily&&this.chars[l].ch===o[s].ch&&(d=!0),l+=1;d||(this.chars.push(o[s]),r+=1)}}},a.prototype.addFonts=function(i,t){if(i){if(this.chars)return this.isLoaded=!0,void(this.fonts=i.list);var e=i.list,a=e.length,s=a,d;for(d=0;d<a;d+=1){var m=!0,g,y;if(!(e[d].loaded=!1,e[d].monoCase=o(e[d].fFamily,"monospace"),e[d].sansCase=o(e[d].fFamily,"sans-serif"),e[d].fPath))e[d].loaded=!0,s-=1;else if("p"===e[d].fOrigin||3===e[d].origin){if(0<(g=document.querySelectorAll("style[f-forigin=\"p\"][f-family=\""+e[d].fFamily+"\"], style[f-origin=\"3\"][f-family=\""+e[d].fFamily+"\"]")).length&&(m=!1),m){var v=createTag("style");v.setAttribute("f-forigin",e[d].fOrigin),v.setAttribute("f-origin",e[d].origin),v.setAttribute("f-family",e[d].fFamily),v.type="text/css",v.innerHTML="@font-face {font-family: "+e[d].fFamily+"; font-style: normal; src: url('"+e[d].fPath+"');}",t.appendChild(v)}}else if("g"===e[d].fOrigin||1===e[d].origin){for(g=document.querySelectorAll("link[f-forigin=\"g\"], link[f-origin=\"1\"]"),y=0;y<g.length;y++)-1!==g[y].href.indexOf(e[d].fPath)&&(m=!1);if(m){var c=createTag("link");c.setAttribute("f-forigin",e[d].fOrigin),c.setAttribute("f-origin",e[d].origin),c.type="text/css",c.rel="stylesheet",c.href=e[d].fPath,document.body.appendChild(c)}}else if("t"===e[d].fOrigin||2===e[d].origin){for(g=document.querySelectorAll("script[f-forigin=\"t\"], script[f-origin=\"2\"]"),y=0;y<g.length;y++)e[d].fPath===g[y].src&&(m=!1);if(m){var p=createTag("link");p.setAttribute("f-forigin",e[d].fOrigin),p.setAttribute("f-origin",e[d].origin),p.setAttribute("rel","stylesheet"),p.setAttribute("href",e[d].fPath),t.appendChild(p)}}e[d].helper=n(t,e[d]),e[d].cache={},this.fonts.push(e[d])}0===s?this.isLoaded=!0:setTimeout(this.checkLoadedFonts.bind(this),100)}else this.isLoaded=!0},a.prototype.getCharData=function(t,e,n){for(var i=0,o=this.chars.length;i<o;){if(this.chars[i].ch===t&&this.chars[i].style===e&&this.chars[i].fFamily===n)return this.chars[i];i+=1}return("string"==typeof t&&13!==t.charCodeAt(0)||!t)&&console&&console.warn&&console.warn("Missing character from exported characters list: ",t,e,n),s},a.prototype.getFontByName=function(a){for(var t=0,r=this.fonts.length;t<r;){if(this.fonts[t].fName===a)return this.fonts[t];t+=1}return this.fonts[0]},a.prototype.measureText=function(l,t,e){var n=this.getFontByName(t),i=l.charCodeAt(0);if(!n.cache[i+1]){var r=n.helper;if(" "===l){r.textContent="|"+l+"|";var a=r.getComputedTextLength();r.textContent="||";var s=r.getComputedTextLength();n.cache[i+1]=(a-s)/100}else r.textContent=l,n.cache[i+1]=r.getComputedTextLength()/100}return n.cache[i+1]*e},a.prototype.checkLoadedFonts=function(){var a=this.fonts.length,i=a,o,s,l;for(o=0;o<a;o+=1)this.fonts[o].loaded?i-=1:"n"===this.fonts[o].fOrigin||0===this.fonts[o].origin?this.fonts[o].loaded=!0:(s=this.fonts[o].monoCase.node,l=this.fonts[o].monoCase.w,s.offsetWidth===l?(s=this.fonts[o].sansCase.node,l=this.fonts[o].sansCase.w,s.offsetWidth!==l&&(i-=1,this.fonts[o].loaded=!0)):(i-=1,this.fonts[o].loaded=!0),this.fonts[o].loaded&&(this.fonts[o].sansCase.parent.parentNode.removeChild(this.fonts[o].sansCase.parent),this.fonts[o].monoCase.parent.parentNode.removeChild(this.fonts[o].monoCase.parent)));0!==i&&5e3>Date.now()-this.initTime?setTimeout(this.checkLoadedFonts.bind(this),20):setTimeout(function(){this.isLoaded=!0}.bind(this),0)},a.prototype.loaded=function(){return this.isLoaded},a}(),PropertyFactory=function(){function t(i,t){var e=this.offsetTime,r;"multidimensional"===this.propType&&(r=createTypedArray("float32",this.pv.length));for(var P=t.lastIndex,L=P,R=this.keyframes.length-1,k=!0,F,I,N,z,O,U,B,V;k;){if(F=this.keyframes[L],I=this.keyframes[L+1],L===R-1&&i>=I.t-e){F.h&&(F=I),P=0;break}if(I.t-e>i){P=L;break}L<R-1?L+=1:(P=0,k=!1)}var G=I.t-e,y=F.t-e,_;if(F.to){F.bezierData||(F.bezierData=bez.buildBezierData(F.s,I.s||F.e,F.to,F.ti));var H=F.bezierData;if(i>=G||i<y){var x=i>=G?H.points.length-1:0;for(z=H.points[x].point.length,N=0;N<z;N+=1)r[N]=H.points[x].point[N]}else{F.__fnct?V=F.__fnct:(V=BezierFactory.getBezierEasing(F.o.x,F.o.y,F.i.x,F.i.y,F.n).get,F.__fnct=V),O=V((i-y)/(G-y));var b=H.segmentLength*O,w=t.lastFrame<i&&t._lastKeyframeIndex===L?t._lastAddedLength:0,W;for(B=t.lastFrame<i&&t._lastKeyframeIndex===L?t._lastPoint:0,k=!0,U=H.points.length;k;){if(w+=H.points[B].partialLength,0===b||0===O||B===H.points.length-1){for(z=H.points[B].point.length,N=0;N<z;N+=1)r[N]=H.points[B].point[N];break}if(b>=w&&b<w+H.points[B+1].partialLength){for(W=(b-w)/H.points[B+1].partialLength,z=H.points[B].point.length,N=0;N<z;N+=1)r[N]=H.points[B].point[N]+(H.points[B+1].point[N]-H.points[B].point[N])*W;break}B<U-1?B+=1:k=!1}t._lastPoint=B,t._lastAddedLength=w-H.points[B].partialLength,t._lastKeyframeIndex=L}}else{var X,j,Y,q,Z;if(R=F.s.length,_=I.s||F.e,this.sh&&1!==F.h)i>=G?(r[0]=_[0],r[1]=_[1],r[2]=_[2]):i<=y?(r[0]=F.s[0],r[1]=F.s[1],r[2]=F.s[2]):!function(d,t){var e=t[0],n=t[1],i=t[2],r=t[3],a=_Mathatan(2*n*r-2*e*i,1-2*n*n-2*i*i),s=_Mathasin(2*e*n+2*i*r),o=_Mathatan(2*e*r-2*n*i,1-2*e*e-2*i*i);d[0]=a/degToRads,d[1]=s/degToRads,d[2]=o/degToRads}(r,function(y,t,e){var n=[],l=y[0],h=y[1],u=y[2],c=y[3],p=t[0],v=t[1],_=t[2],x=t[3],b,E,T,S,M;return 0>(E=l*p+h*v+u*_+c*x)&&(E=-E,p=-p,v=-v,_=-_,x=-x),1e-6<1-E?(b=_Mathacos(E),T=_Mathsin(b),S=_Mathsin((1-e)*b)/T,M=_Mathsin(e*b)/T):(S=1-e,M=e),(n[0]=S*l+M*p,n[1]=S*h+M*v,n[2]=S*u+M*_,n[3]=S*c+M*x,n)}(g(F.s),g(_),(i-y)/(G-y)));else for(L=0;L<R;L+=1)1!==F.h&&(i>=G?O=1:i<y?O=0:(F.o.x.constructor===Array?(F.__fnct||(F.__fnct=[]),F.__fnct[L]?V=F.__fnct[L]:(X=void 0===F.o.x[L]?F.o.x[0]:F.o.x[L],j=void 0===F.o.y[L]?F.o.y[0]:F.o.y[L],Y=void 0===F.i.x[L]?F.i.x[0]:F.i.x[L],q=void 0===F.i.y[L]?F.i.y[0]:F.i.y[L],V=BezierFactory.getBezierEasing(X,j,Y,q).get,F.__fnct[L]=V)):F.__fnct?V=F.__fnct:(X=F.o.x,j=F.o.y,Y=F.i.x,q=F.i.y,V=BezierFactory.getBezierEasing(X,j,Y,q).get,F.__fnct=V),O=V((i-y)/(G-y)))),_=I.s||F.e,Z=1===F.h?F.s[L]:F.s[L]+(_[L]-F.s[L])*O,"multidimensional"===this.propType?r[L]=Z:r=Z}return t.lastIndex=P,r}function g(d){var t=d[0]*degToRads,e=d[1]*degToRads,n=d[2]*degToRads,i=_Mathcos(t/2),r=_Mathcos(e/2),a=_Mathcos(n/2),s=_Mathsin(t/2),o=_Mathsin(e/2),l=_Mathsin(n/2);return[s*o*a+i*r*l,s*r*a+i*o*l,i*o*a-s*r*l,i*r*a-s*o*l]}function n(){var t=this.comp.renderedFrame-this.offsetTime,e=this.keyframes[0].t-this.offsetTime,a=this.keyframes[this.keyframes.length-1].t-this.offsetTime;if(!(t===this._caching.lastFrame||this._caching.lastFrame!==-999999&&(this._caching.lastFrame>=a&&t>=a||this._caching.lastFrame<e&&t<e))){this._caching.lastFrame>=t&&(this._caching._lastKeyframeIndex=-1,this._caching.lastIndex=0);var n=this.interpolateValue(t,this._caching);this.pv=n}return this._caching.lastFrame=t,this.pv}function y(e){var t;if("unidimensional"===this.propType)t=e*this.mult,1e-5<c(this.v-t)&&(this.v=t,this._mdf=!0);else for(var a=0,o=this.v.length;a<o;)t=e[a]*this.mult,1e-5<c(this.v[a]-t)&&(this.v[a]=t,this._mdf=!0),a+=1}function a(){if(this.elem.globalData.frameId!==this.frameId&&this.effectsSequence.length)if(this.lock)this.setVValue(this.pv);else{this.lock=!0,this._mdf=this._isFirstFrame;var a=this.effectsSequence.length,e=this.kf?this.pv:this.data.k,r;for(r=0;r<a;r+=1)e=this.effectsSequence[r](e);this.setVValue(e),this._isFirstFrame=!1,this.lock=!1,this.frameId=this.elem.globalData.frameId}}function s(e){this.effectsSequence.push(e),this.container.addDynamicProperty(this)}function o(r,t,e,n){this.propType="unidimensional",this.mult=e||1,this.data=t,this.v=e?t.k*e:t.k,this.pv=t.k,this._mdf=!1,this.elem=r,this.container=n,this.comp=r.comp,this.k=!1,this.kf=!1,this.vel=0,this.effectsSequence=[],this._isFirstFrame=!0,this.getValue=a,this.setVValue=y,this.addEffect=s}function l(o,t,e,n){this.propType="multidimensional",this.mult=e||1,this.data=t,this._mdf=!1,this.elem=o,this.container=n,this.comp=o.comp,this.k=!1,this.kf=!1,this.frameId=-1;var i=t.k.length,l;for(this.v=createTypedArray("float32",i),this.pv=createTypedArray("float32",i),createTypedArray("float32",i),(this.vel=createTypedArray("float32",i),l=0);l<i;l+=1)this.v[l]=t.k[l]*this.mult,this.pv[l]=t.k[l];this._isFirstFrame=!0,this.effectsSequence=[],this.getValue=a,this.setVValue=y,this.addEffect=s}function d(r,e,i,o){this.propType="unidimensional",this.keyframes=e.k,this.offsetTime=r.data.st,this.frameId=-1,this._caching={lastFrame:-999999,lastIndex:0,value:0,_lastKeyframeIndex:-1},this.k=!0,this.kf=!0,this.data=e,this.mult=i||1,this.elem=r,this.container=o,this.comp=r.comp,this.v=-999999,this.pv=-999999,this._isFirstFrame=!0,this.getValue=a,this.setVValue=y,this.interpolateValue=t,this.effectsSequence=[n.bind(this)],this.addEffect=s}function p(r,e,i,o){this.propType="multidimensional";var l=e.k.length,m,h,v,_,x;for(m=0;m<l-1;m+=1)e.k[m].to&&e.k[m].s&&e.k[m+1]&&e.k[m+1].s&&(h=e.k[m].s,v=e.k[m+1].s,_=e.k[m].to,x=e.k[m].ti,(2===h.length&&(h[0]!==v[0]||h[1]!==v[1])&&bez.pointOnLine2D(h[0],h[1],v[0],v[1],h[0]+_[0],h[1]+_[1])&&bez.pointOnLine2D(h[0],h[1],v[0],v[1],v[0]+x[0],v[1]+x[1])||3===h.length&&(h[0]!==v[0]||h[1]!==v[1]||h[2]!==v[2])&&bez.pointOnLine3D(h[0],h[1],h[2],v[0],v[1],v[2],h[0]+_[0],h[1]+_[1],h[2]+_[2])&&bez.pointOnLine3D(h[0],h[1],h[2],v[0],v[1],v[2],v[0]+x[0],v[1]+x[1],v[2]+x[2]))&&(e.k[m].to=null,e.k[m].ti=null),h[0]===v[0]&&h[1]===v[1]&&0===_[0]&&0===_[1]&&0===x[0]&&0===x[1]&&(2===h.length||h[2]===v[2]&&0===_[2]&&0===x[2])&&(e.k[m].to=null,e.k[m].ti=null));this.effectsSequence=[n.bind(this)],this.keyframes=e.k,this.offsetTime=r.data.st,this.k=!0,this.kf=!0,this._isFirstFrame=!0,this.mult=i||1,this.elem=r,this.container=o,this.comp=r.comp,this.getValue=a,this.setVValue=y,this.interpolateValue=t,this.frameId=-1;var b=e.k[0].s.length;for(this.v=createTypedArray("float32",b),this.pv=createTypedArray("float32",b),m=0;m<b;m+=1)this.v[m]=-999999,this.pv[m]=-999999;this._caching={lastFrame:-999999,lastIndex:0,value:createTypedArray("float32",b)},this.addEffect=s}var c=_Mathabs;return{getProp:function(s,t,e,n,i){var r;return t.k.length?"number"==typeof t.k[0]?r=new l(s,t,n,i):0===e?r=new d(s,t,n,i):1===e?r=new p(s,t,n,i):void 0:r=new o(s,t,n,i),r.effectsSequence.length&&i.addDynamicProperty(r),r}}}(),TransformPropertyFactory=function(){function a(a,t,e){if(this.elem=a,this.frameId=-1,this.propType="transform",this.data=t,this.v=new Matrix,this.pre=new Matrix,this.appliedTransformations=0,this.initDynamicPropertyContainer(e||a),t.p&&t.p.s?(this.px=PropertyFactory.getProp(a,t.p.x,0,0,this),this.py=PropertyFactory.getProp(a,t.p.y,0,0,this),t.p.z&&(this.pz=PropertyFactory.getProp(a,t.p.z,0,0,this))):this.p=PropertyFactory.getProp(a,t.p||{k:[0,0,0]},1,0,this),t.rx){if(this.rx=PropertyFactory.getProp(a,t.rx,0,degToRads,this),this.ry=PropertyFactory.getProp(a,t.ry,0,degToRads,this),this.rz=PropertyFactory.getProp(a,t.rz,0,degToRads,this),t.or.k[0].ti){var n=t.or.k.length,r;for(r=0;r<n;r+=1)t.or.k[r].to=t.or.k[r].ti=null}this.or=PropertyFactory.getProp(a,t.or,1,degToRads,this),this.or.sh=!0}else this.r=PropertyFactory.getProp(a,t.r||{k:0},0,degToRads,this);t.sk&&(this.sk=PropertyFactory.getProp(a,t.sk,0,degToRads,this),this.sa=PropertyFactory.getProp(a,t.sa,0,degToRads,this)),this.a=PropertyFactory.getProp(a,t.a||{k:[0,0,0]},1,0,this),this.s=PropertyFactory.getProp(a,t.s||{k:[100,100,100]},1,.01,this),this.o=t.o?PropertyFactory.getProp(a,t.o,0,.01,a):{_mdf:!1,v:1},this._isDirty=!0,this.dynamicProperties.length||this.getValue(!0)}var e=[0,0];return a.prototype={applyToMatrix:function(a){var t=this._mdf;this.iterateDynamicProperties(),this._mdf=this._mdf||t,this.a&&a.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.s&&a.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&a.skewFromAxis(-this.sk.v,this.sa.v),this.r?a.rotate(-this.r.v):a.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.data.p.s?this.data.p.z?a.translate(this.px.v,this.py.v,-this.pz.v):a.translate(this.px.v,this.py.v,0):a.translate(this.p.v[0],this.p.v[1],-this.p.v[2])},getValue:function(t){if(this.elem.globalData.frameId!==this.frameId){if(this._isDirty&&(this.precalculateMatrix(),this._isDirty=!1),this.iterateDynamicProperties(),this._mdf||t){if(this.v.cloneFromProps(this.pre.props),1>this.appliedTransformations&&this.v.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),2>this.appliedTransformations&&this.v.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&3>this.appliedTransformations&&this.v.skewFromAxis(-this.sk.v,this.sa.v),this.r&&4>this.appliedTransformations?this.v.rotate(-this.r.v):!this.r&&4>this.appliedTransformations&&this.v.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.autoOriented){var o=this.elem.globalData.frameRate,r,l;if(this.p&&this.p.keyframes&&this.p.getValueAtTime)this.p._caching.lastFrame+this.p.offsetTime<=this.p.keyframes[0].t?(r=this.p.getValueAtTime((this.p.keyframes[0].t+.01)/o,0),l=this.p.getValueAtTime(this.p.keyframes[0].t/o,0)):this.p._caching.lastFrame+this.p.offsetTime>=this.p.keyframes[this.p.keyframes.length-1].t?(r=this.p.getValueAtTime(this.p.keyframes[this.p.keyframes.length-1].t/o,0),l=this.p.getValueAtTime((this.p.keyframes[this.p.keyframes.length-1].t-.05)/o,0)):(r=this.p.pv,l=this.p.getValueAtTime((this.p._caching.lastFrame+this.p.offsetTime-.01)/o,this.p.offsetTime));else if(this.px&&this.px.keyframes&&this.py.keyframes&&this.px.getValueAtTime&&this.py.getValueAtTime){r=[],l=[];var d=this.px,a=this.py;d._caching.lastFrame+d.offsetTime<=d.keyframes[0].t?(r[0]=d.getValueAtTime((d.keyframes[0].t+.01)/o,0),r[1]=a.getValueAtTime((a.keyframes[0].t+.01)/o,0),l[0]=d.getValueAtTime(d.keyframes[0].t/o,0),l[1]=a.getValueAtTime(a.keyframes[0].t/o,0)):d._caching.lastFrame+d.offsetTime>=d.keyframes[d.keyframes.length-1].t?(r[0]=d.getValueAtTime(d.keyframes[d.keyframes.length-1].t/o,0),r[1]=a.getValueAtTime(a.keyframes[a.keyframes.length-1].t/o,0),l[0]=d.getValueAtTime((d.keyframes[d.keyframes.length-1].t-.01)/o,0),l[1]=a.getValueAtTime((a.keyframes[a.keyframes.length-1].t-.01)/o,0)):(r=[d.pv,a.pv],l[0]=d.getValueAtTime((d._caching.lastFrame+d.offsetTime-.01)/o,d.offsetTime),l[1]=a.getValueAtTime((a._caching.lastFrame+a.offsetTime-.01)/o,a.offsetTime))}else r=l=e;this.v.rotate(-_Mathatan(r[1]-l[1],r[0]-l[0]))}this.data.p&&this.data.p.s?this.data.p.z?this.v.translate(this.px.v,this.py.v,-this.pz.v):this.v.translate(this.px.v,this.py.v,0):this.v.translate(this.p.v[0],this.p.v[1],-this.p.v[2])}this.frameId=this.elem.globalData.frameId}},precalculateMatrix:function(){if(!this.a.k&&(this.pre.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations=1,!this.s.effectsSequence.length)){if(this.pre.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.appliedTransformations=2,this.sk){if(this.sk.effectsSequence.length||this.sa.effectsSequence.length)return;this.pre.skewFromAxis(-this.sk.v,this.sa.v),this.appliedTransformations=3}if(this.r){if(this.r.effectsSequence.length)return;this.pre.rotate(-this.r.v),this.appliedTransformations=4}else this.rz.effectsSequence.length||this.ry.effectsSequence.length||this.rx.effectsSequence.length||this.or.effectsSequence.length||(this.pre.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.appliedTransformations=4)}},autoOrient:function(){}},extendPrototype([DynamicPropertyContainer],a),a.prototype.addDynamicProperty=function(e){this._addDynamicProperty(e),this.elem.addDynamicProperty(e),this._isDirty=!0},a.prototype._addDynamicProperty=DynamicPropertyContainer.prototype.addDynamicProperty,{getTransformProperty:function(e,t,r){return new a(e,t,r)}}}();ShapePath.prototype.setPathData=function(a,t){this.c=a,this.setLength(t);for(var e=0;e<t;)this.v[e]=point_pool.newElement(),this.o[e]=point_pool.newElement(),this.i[e]=point_pool.newElement(),e+=1},ShapePath.prototype.setLength=function(e){for(;this._maxLength<e;)this.doubleArrayLength();this._length=e},ShapePath.prototype.doubleArrayLength=function(){this.v=this.v.concat(createSizedArray(this._maxLength)),this.i=this.i.concat(createSizedArray(this._maxLength)),this.o=this.o.concat(createSizedArray(this._maxLength)),this._maxLength*=2},ShapePath.prototype.setXYAt=function(o,t,e,n,i){var r;switch(this._length=_Mathmax(this._length,n+1),this._length>=this._maxLength&&this.doubleArrayLength(),e){case"v":r=this.v;break;case"i":r=this.i;break;case"o":r=this.o;}r[n]&&(!r[n]||i)||(r[n]=point_pool.newElement()),r[n][0]=o,r[n][1]=t},ShapePath.prototype.setTripleAt=function(l,t,e,n,i,r,a,s){this.setXYAt(l,t,"v",a,s),this.setXYAt(e,n,"o",a,s),this.setXYAt(i,r,"i",a,s)},ShapePath.prototype.reverse=function(){var l=new ShapePath;l.setPathData(this.c,this._length);var t=this.v,e=this.o,n=this.i,i=0;this.c&&(l.setTripleAt(t[0][0],t[0][1],n[0][0],n[0][1],e[0][0],e[0][1],0,!1),i=1);var d=this._length-1,p=this._length,o;for(o=i;o<p;o+=1)l.setTripleAt(t[d][0],t[d][1],n[d][0],n[d][1],e[d][0],e[d][1],o,!1),d-=1;return l};var ShapePropertyFactory=function(){function d(x,t,e){var n=e.lastIndex,b=this.keyframes,f,E,T,S,M,A,w,P,C;if(x<b[0].t-this.offsetTime)f=b[0].s[0],T=!0,n=0;else if(x>=b[b.length-1].t-this.offsetTime)f=b[b.length-1].s?b[b.length-1].s[0]:b[b.length-2].e[0],T=!0;else{for(var D=n,L=b.length-1,v=!0,R,k;v&&(R=b[D],!((k=b[D+1]).t-this.offsetTime>x));)D<L-1?D+=1:v=!1;if(n=D,!(T=1===R.h)){if(x>=k.t-this.offsetTime)P=1;else if(x<R.t-this.offsetTime)P=0;else{var F;R.__fnct?F=R.__fnct:(F=BezierFactory.getBezierEasing(R.o.x,R.o.y,R.i.x,R.i.y).get,R.__fnct=F),P=F((x-(R.t-this.offsetTime))/(k.t-this.offsetTime-(R.t-this.offsetTime)))}E=k.s?k.s[0]:R.e[0]}f=R.s[0]}for(A=t._length,w=f.i[0].length,e.lastIndex=n,S=0;S<A;S+=1)for(M=0;M<w;M+=1)C=T?f.i[S][M]:f.i[S][M]+(E.i[S][M]-f.i[S][M])*P,t.i[S][M]=C,C=T?f.o[S][M]:f.o[S][M]+(E.o[S][M]-f.o[S][M])*P,t.o[S][M]=C,C=T?f.v[S][M]:f.v[S][M]+(E.v[S][M]-f.v[S][M])*P,t.v[S][M]=C}function p(){var a=this.comp.renderedFrame-this.offsetTime,t=this.keyframes[0].t-this.offsetTime,e=this.keyframes[this.keyframes.length-1].t-this.offsetTime,r=this._caching.lastFrame;return-999999!==r&&(r<t&&a<t||r>e&&a>e)||(this._caching.lastIndex=r<a?this._caching.lastIndex:0,this.interpolateShape(a,this.pv,this._caching)),this._caching.lastFrame=a,this.pv}function c(){this.paths=this.localShapeCollection}function e(e){(function(a,t){if(a._length!==t._length||a.c!==t.c)return!1;var e=a._length,r;for(r=0;r<e;r+=1)if(a.v[r][0]!==t.v[r][0]||a.v[r][1]!==t.v[r][1]||a.o[r][0]!==t.o[r][0]||a.o[r][1]!==t.o[r][1]||a.i[r][0]!==t.i[r][0]||a.i[r][1]!==t.i[r][1])return!1;return!0})(this.v,e)||(this.v=shape_pool.clone(e),this.localShapeCollection.releaseShapes(),this.localShapeCollection.addShape(this.v),this._mdf=!0,this.paths=this.localShapeCollection)}function t(){if(this.elem.globalData.frameId!==this.frameId)if(!this.effectsSequence.length)this._mdf=!1;else if(this.lock)this.setVValue(this.pv);else{this.lock=!0,this._mdf=!1;var a=this.kf?this.pv:this.data.ks?this.data.ks.k:this.data.pt.k,r=this.effectsSequence.length,n;for(n=0;n<r;n+=1)a=this.effectsSequence[n](a);this.setVValue(a),this.lock=!1,this.frameId=this.elem.globalData.frameId}}function r(a,t,e){this.propType="shape",this.comp=a.comp,this.container=a,this.elem=a,this.data=t,this.k=!1,this.kf=!1,this._mdf=!1;var n=3===e?t.pt.k:t.ks.k;this.v=shape_pool.clone(n),this.pv=shape_pool.clone(this.v),this.localShapeCollection=shapeCollection_pool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.reset=c,this.effectsSequence=[]}function a(e){this.effectsSequence.push(e),this.container.addDynamicProperty(this)}function s(e,t,n){this.propType="shape",this.comp=e.comp,this.elem=e,this.container=e,this.offsetTime=e.data.st,this.keyframes=3===n?t.pt.k:t.ks.k,this.k=!0,this.kf=!0;var r=this.keyframes[0].s[0].i.length;this.keyframes[0].s[0].i[0].length,this.v=shape_pool.newElement(),this.v.setPathData(this.keyframes[0].s[0].c,r),this.pv=shape_pool.clone(this.v),this.localShapeCollection=shapeCollection_pool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.lastFrame=-999999,this.reset=c,this._caching={lastFrame:-999999,lastIndex:0},this.effectsSequence=[p.bind(this)]}r.prototype.interpolateShape=d,r.prototype.getValue=t,r.prototype.setVValue=e,r.prototype.addEffect=a,s.prototype.getValue=t,s.prototype.interpolateShape=d,s.prototype.setVValue=e,s.prototype.addEffect=a;var o=function(){function a(a,t){this.v=shape_pool.newElement(),this.v.setPathData(!0,4),this.localShapeCollection=shapeCollection_pool.newShapeCollection(),this.paths=this.localShapeCollection,this.localShapeCollection.addShape(this.v),this.d=t.d,this.elem=a,this.comp=a.comp,this.frameId=-1,this.initDynamicPropertyContainer(a),this.p=PropertyFactory.getProp(a,t.p,1,0,this),this.s=PropertyFactory.getProp(a,t.s,1,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertEllToPath())}var o=roundCorner;return a.prototype={reset:c,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertEllToPath())},convertEllToPath:function(){var t=this.p.v[0],e=this.p.v[1],n=this.s.v[0]/2,i=this.s.v[1]/2,r=3!==this.d,a=this.v;a.v[0][0]=t,a.v[0][1]=e-i,a.v[1][0]=r?t+n:t-n,a.v[1][1]=e,a.v[2][0]=t,a.v[2][1]=e+i,a.v[3][0]=r?t-n:t+n,a.v[3][1]=e,a.i[0][0]=r?t-n*o:t+n*o,a.i[0][1]=e-i,a.i[1][0]=r?t+n:t-n,a.i[1][1]=e-i*o,a.i[2][0]=r?t+n*o:t-n*o,a.i[2][1]=e+i,a.i[3][0]=r?t-n:t+n,a.i[3][1]=e+i*o,a.o[0][0]=r?t+n*o:t-n*o,a.o[0][1]=e-i,a.o[1][0]=r?t+n:t-n,a.o[1][1]=e+i*o,a.o[2][0]=r?t-n*o:t+n*o,a.o[2][1]=e+i,a.o[3][0]=r?t-n:t+n,a.o[3][1]=e-i*o}},extendPrototype([DynamicPropertyContainer],a),a}(),l=function(){function e(a,t){this.v=shape_pool.newElement(),this.v.setPathData(!0,0),this.elem=a,this.comp=a.comp,this.data=t,this.frameId=-1,this.d=t.d,this.initDynamicPropertyContainer(a),1===t.sy?(this.ir=PropertyFactory.getProp(a,t.ir,0,0,this),this.is=PropertyFactory.getProp(a,t.is,0,.01,this),this.convertToPath=this.convertStarToPath):this.convertToPath=this.convertPolygonToPath,this.pt=PropertyFactory.getProp(a,t.pt,0,0,this),this.p=PropertyFactory.getProp(a,t.p,1,0,this),this.r=PropertyFactory.getProp(a,t.r,0,degToRads,this),this.or=PropertyFactory.getProp(a,t.or,0,0,this),this.os=PropertyFactory.getProp(a,t.os,0,.01,this),this.localShapeCollection=shapeCollection_pool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertToPath())}return e.prototype={reset:c,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertToPath())},convertStarToPath:function(){var a=2*_Mathfloor(this.pt.v),r=!0,p=this.or.v,o=this.ir.v,l=this.os.v,c=this.is.v,u=-_MathPI/2,h,_,x,b;u+=this.r.v;var E=3===this.data.d?-1:1;for(this.v._length=0,h=0;h<a;h+=1){x=r?l:c,b=r?2*_MathPI*p/(2*a):2*_MathPI*o/(2*a);var d=(_=r?p:o)*_Mathcos(u),T=_*_Mathsin(u),S=0==d&&0===T?0:T/_Mathsqrt(d*d+T*T),v=0==d&&0===T?0:-d/_Mathsqrt(d*d+T*T);d+=+this.p.v[0],T+=+this.p.v[1],this.v.setTripleAt(d,T,d-S*b*x*E,T-v*b*x*E,d+S*b*x*E,T+v*b*x*E,h,!0),r=!r,u+=2*_MathPI/a*E}},convertPolygonToPath:function(){var n=_Mathfloor(this.pt.v),e=this.or.v,i=this.os.v,r=2*_MathPI*e/(4*n),a=-_MathPI/2,d=3===this.data.d?-1:1,o;for(a+=this.r.v,this.v._length=0,o=0;o<n;o+=1){var p=e*_Mathcos(a),m=e*_Mathsin(a),g=0==p&&0===m?0:m/_Mathsqrt(p*p+m*m),u=0==p&&0===m?0:-p/_Mathsqrt(p*p+m*m);p+=+this.p.v[0],m+=+this.p.v[1],this.v.setTripleAt(p,m,p-g*r*i*d,m-u*r*i*d,p+g*r*i*d,m+u*r*i*d,o,!0),a+=2*_MathPI/n*d}this.paths.length=0,this.paths[0]=this.v}},extendPrototype([DynamicPropertyContainer],e),e}(),m=function(){function e(a,t){this.v=shape_pool.newElement(),this.v.c=!0,this.localShapeCollection=shapeCollection_pool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.elem=a,this.comp=a.comp,this.frameId=-1,this.d=t.d,this.initDynamicPropertyContainer(a),this.p=PropertyFactory.getProp(a,t.p,1,0,this),this.s=PropertyFactory.getProp(a,t.s,1,0,this),this.r=PropertyFactory.getProp(a,t.r,0,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertRectToPath())}return e.prototype={convertRectToPath:function(){var o=this.p.v[0],t=this.p.v[1],e=this.s.v[0]/2,n=this.s.v[1]/2,i=bm_min(e,n,this.r.v),r=i*(1-roundCorner);this.v._length=0,2===this.d||1===this.d?(this.v.setTripleAt(o+e,t-n+i,o+e,t-n+i,o+e,t-n+r,0,!0),this.v.setTripleAt(o+e,t+n-i,o+e,t+n-r,o+e,t+n-i,1,!0),0===i?(this.v.setTripleAt(o-e,t+n,o-e+r,t+n,o-e,t+n,2),this.v.setTripleAt(o-e,t-n,o-e,t-n+r,o-e,t-n,3)):(this.v.setTripleAt(o+e-i,t+n,o+e-i,t+n,o+e-r,t+n,2,!0),this.v.setTripleAt(o-e+i,t+n,o-e+r,t+n,o-e+i,t+n,3,!0),this.v.setTripleAt(o-e,t+n-i,o-e,t+n-i,o-e,t+n-r,4,!0),this.v.setTripleAt(o-e,t-n+i,o-e,t-n+r,o-e,t-n+i,5,!0),this.v.setTripleAt(o-e+i,t-n,o-e+i,t-n,o-e+r,t-n,6,!0),this.v.setTripleAt(o+e-i,t-n,o+e-r,t-n,o+e-i,t-n,7,!0))):(this.v.setTripleAt(o+e,t-n+i,o+e,t-n+r,o+e,t-n+i,0,!0),0===i?(this.v.setTripleAt(o-e,t-n,o-e+r,t-n,o-e,t-n,1,!0),this.v.setTripleAt(o-e,t+n,o-e,t+n-r,o-e,t+n,2,!0),this.v.setTripleAt(o+e,t+n,o+e-r,t+n,o+e,t+n,3,!0)):(this.v.setTripleAt(o+e-i,t-n,o+e-i,t-n,o+e-r,t-n,1,!0),this.v.setTripleAt(o-e+i,t-n,o-e+r,t-n,o-e+i,t-n,2,!0),this.v.setTripleAt(o-e,t-n+i,o-e,t-n+i,o-e,t-n+r,3,!0),this.v.setTripleAt(o-e,t+n-i,o-e,t+n-r,o-e,t+n-i,4,!0),this.v.setTripleAt(o-e+i,t+n,o-e+i,t+n,o-e+r,t+n,5,!0),this.v.setTripleAt(o+e-i,t+n,o+e-r,t+n,o+e-i,t+n,6,!0),this.v.setTripleAt(o+e,t+n-i,o+e,t+n-i,o+e,t+n-r,7,!0)))},getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertRectToPath())},reset:c},extendPrototype([DynamicPropertyContainer],e),e}();return{getShapeProp:function(a,t,e){var n;return 3===e||4===e?n=(3===e?t.pt:t.ks).k.length?new s(a,t,e):new r(a,t,e):5===e?n=new m(a,t):6===e?n=new o(a,t):7==e&&(n=new l(a,t)),n.k&&a.addDynamicProperty(n),n},getConstructorFunction:function(){return r},getKeyframedConstructorFunction:function(){return s}}}(),ShapeModifiers=function(){var a={},r={};return a.registerModifier=function(e,t){r[e]||(r[e]=t)},a.getModifier=function(e,t,a){return new r[e](t,a)},a}();ShapeModifier.prototype.initModifierProperties=function(){},ShapeModifier.prototype.addShapeToModifier=function(){},ShapeModifier.prototype.addShape=function(a){if(!this.closed){a.sh.container.addDynamicProperty(a.sh);var t={shape:a.sh,data:a,localShapeCollection:shapeCollection_pool.newShapeCollection()};this.shapes.push(t),this.addShapeToModifier(t),this._isAnimated&&a.setAsAnimated()}},ShapeModifier.prototype.init=function(a,t){this.shapes=[],this.elem=a,this.initDynamicPropertyContainer(a),this.initModifierProperties(a,t),this.frameId=-999999,this.closed=!1,this.k=!1,this.dynamicProperties.length?this.k=!0:this.getValue(!0)},ShapeModifier.prototype.processKeys=function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties())},extendPrototype([DynamicPropertyContainer],ShapeModifier),extendPrototype([ShapeModifier],TrimModifier),TrimModifier.prototype.initModifierProperties=function(a,t){this.s=PropertyFactory.getProp(a,t.s,0,.01,this),this.e=PropertyFactory.getProp(a,t.e,0,.01,this),this.o=PropertyFactory.getProp(a,t.o,0,0,this),this.sValue=0,this.eValue=0,this.getValue=this.processKeys,this.m=t.m,this._isAnimated=!!this.s.effectsSequence.length||!!this.e.effectsSequence.length||!!this.o.effectsSequence.length},TrimModifier.prototype.addShapeToModifier=function(e){e.pathsData=[]},TrimModifier.prototype.calculateShapeEdges=function(d,t,e,n,i){var r=[];1>=t?r.push({s:d,e:t}):1<=d?r.push({s:d-1,e:t-1}):(r.push({s:d,e:1}),r.push({s:0,e:t-1}));var a=[],l=r.length,p,m;for(p=0;p<l;p+=1){var g,f;if((m=r[p]).e*i<n||m.s*i>n+e);else g=m.s*i<=n?0:(m.s*i-n)/e,f=m.e*i>=n+e?1:(m.e*i-n)/e,a.push([g,f])}return a.length||a.push([0,0]),a},TrimModifier.prototype.releasePathsData=function(a){var t=a.length,r;for(r=0;r<t;r+=1)segments_length_pool.release(a[r]);return a.length=0,a},TrimModifier.prototype.processShapes=function(T){var t,S,M;if(this._mdf||T){var A=this.o.v%360/360;if(0>A&&(A+=1),(t=(1<this.s.v?1:0>this.s.v?0:this.s.v)+A)>(S=(1<this.e.v?1:0>this.e.v?0:this.e.v)+A)){var w=t;t=S,S=w}t=1e-4*_Mathround(1e4*t),S=1e-4*_Mathround(1e4*S),this.sValue=t,this.eValue=S}else t=this.sValue,S=this.eValue;var a=this.shapes.length,p=0,P,C,D,L,R,k;if(S===t)for(P=0;P<a;P+=1)this.shapes[P].localShapeCollection.releaseShapes(),this.shapes[P].shape._mdf=!0,this.shapes[P].shape.paths=this.shapes[P].localShapeCollection;else if(!(1===S&&0===t||0===S&&1===t)){var F=[],g,I;for(P=0;P<a;P+=1)if((g=this.shapes[P]).shape._mdf||this._mdf||T||2===this.m){if(D=(M=g.shape.paths)._length,k=0,!g.shape._mdf&&g.pathsData.length)k=g.totalShapeLength;else{for(L=this.releasePathsData(g.pathsData),C=0;C<D;C+=1)R=bez.getSegmentsLength(M.shapes[C]),L.push(R),k+=R.totalLength;g.totalShapeLength=k,g.pathsData=L}p+=k,g.shape._mdf=!0}else g.shape.paths=g.localShapeCollection;var N=t,z=S,O=0,U;for(P=a-1;0<=P;P-=1)if((g=this.shapes[P]).shape._mdf){for((I=g.localShapeCollection).releaseShapes(),2===this.m&&1<a?(U=this.calculateShapeEdges(t,S,g.totalShapeLength,O,p),O+=g.totalShapeLength):U=[[N,z]],D=U.length,C=0;C<D;C+=1){N=U[C][0],z=U[C][1],F.length=0,1>=z?F.push({s:g.totalShapeLength*N,e:g.totalShapeLength*z}):1<=N?F.push({s:g.totalShapeLength*(N-1),e:g.totalShapeLength*(z-1)}):(F.push({s:g.totalShapeLength*N,e:g.totalShapeLength}),F.push({s:0,e:g.totalShapeLength*(z-1)}));var B=this.addShapes(g,F[0]);if(F[0].s!==F[0].e){if(1<F.length)if(g.shape.paths.shapes[g.shape.paths._length-1].c){var V=B.pop();this.addPaths(B,I),B=this.addShapes(g,F[1],V)}else this.addPaths(B,I),B=this.addShapes(g,F[1]);this.addPaths(B,I)}}g.shape.paths=I}}else if(this._mdf)for(P=0;P<a;P+=1)this.shapes[P].pathsData.length=0,this.shapes[P].shape._mdf=!0},TrimModifier.prototype.addPaths=function(a,t){var e=a.length,r;for(r=0;r<e;r+=1)t.addShape(a[r])},TrimModifier.prototype.addSegment=function(o,t,e,n,i,r,a){i.setXYAt(t[0],t[1],"o",r),i.setXYAt(e[0],e[1],"i",r+1),a&&i.setXYAt(o[0],o[1],"v",r),i.setXYAt(n[0],n[1],"v",r+1)},TrimModifier.prototype.addSegmentFromArray=function(a,t,e,r){t.setXYAt(a[1],a[5],"o",e),t.setXYAt(a[2],a[6],"i",e+1),r&&t.setXYAt(a[0],a[4],"v",e),t.setXYAt(a[3],a[7],"v",e+1)},TrimModifier.prototype.addShapes=function(y,t,e){var _=y.pathsData,c=y.shape.paths.shapes,p=y.shape.paths._length,f=0,x=[],m=!0,b,E,T,S,M,A,w,P;for(e?(M=e._length,P=e._length):(e=shape_pool.newElement(),M=0,P=0),x.push(e),b=0;b<p;b+=1){for(A=_[b].lengths,e.c=c[b].c,T=c[b].c?A.length:A.length+1,E=1;E<T;E+=1)if(f+(S=A[E-1]).addedLength<t.s)f+=S.addedLength,e.c=!1;else{if(f>t.e){e.c=!1;break}t.s<=f&&t.e>=f+S.addedLength?(this.addSegment(c[b].v[E-1],c[b].o[E-1],c[b].i[E],c[b].v[E],e,M,m),m=!1):(w=bez.getNewSegment(c[b].v[E-1],c[b].v[E],c[b].o[E-1],c[b].i[E],(t.s-f)/S.addedLength,(t.e-f)/S.addedLength,A[E-1]),this.addSegmentFromArray(w,e,M,m),m=!1,e.c=!1),f+=S.addedLength,M+=1}if(c[b].c&&A.length){if(S=A[E-1],f<=t.e){var C=A[E-1].addedLength;t.s<=f&&t.e>=f+C?(this.addSegment(c[b].v[E-1],c[b].o[E-1],c[b].i[0],c[b].v[0],e,M,m),m=!1):(w=bez.getNewSegment(c[b].v[E-1],c[b].v[0],c[b].o[E-1],c[b].i[0],(t.s-f)/C,(t.e-f)/C,A[E-1]),this.addSegmentFromArray(w,e,M,m),m=!1,e.c=!1)}else e.c=!1;f+=S.addedLength,M+=1}if(e._length&&(e.setXYAt(e.v[P][0],e.v[P][1],"i",P),e.setXYAt(e.v[e._length-1][0],e.v[e._length-1][1],"o",e._length-1)),f>t.e)break;b<p-1&&(e=shape_pool.newElement(),m=!0,x.push(e),M=0)}return x},ShapeModifiers.registerModifier("tm",TrimModifier),extendPrototype([ShapeModifier],RoundCornersModifier),RoundCornersModifier.prototype.initModifierProperties=function(a,t){this.getValue=this.processKeys,this.rd=PropertyFactory.getProp(a,t.r,0,null,this),this._isAnimated=!!this.rd.effectsSequence.length},RoundCornersModifier.prototype.processPath=function(y,t){var e=shape_pool.newElement();e.c=y.c;var n=y._length,g=0,_,x,b,E,T,S,M,A,w,P,C,D,L;for(_=0;_<n;_+=1)x=y.v[_],E=y.o[_],b=y.i[_],x[0]===E[0]&&x[1]===E[1]&&x[0]===b[0]&&x[1]===b[1]?0!==_&&_!==n-1||y.c?(T=0===_?y.v[n-1]:y.v[_-1],M=(S=_Mathsqrt(_Mathpow(x[0]-T[0],2)+_Mathpow(x[1]-T[1],2)))?_Mathmin(S/2,t)/S:0,A=D=x[0]+(T[0]-x[0])*M,w=L=x[1]-(x[1]-T[1])*M,P=A-(A-x[0])*roundCorner,C=w-(w-x[1])*roundCorner,e.setTripleAt(A,w,P,C,D,L,g),g+=1,T=_===n-1?y.v[0]:y.v[_+1],M=(S=_Mathsqrt(_Mathpow(x[0]-T[0],2)+_Mathpow(x[1]-T[1],2)))?_Mathmin(S/2,t)/S:0,A=P=x[0]+(T[0]-x[0])*M,w=C=x[1]+(T[1]-x[1])*M,D=A-(A-x[0])*roundCorner,L=w-(w-x[1])*roundCorner,e.setTripleAt(A,w,P,C,D,L,g),g+=1):(e.setTripleAt(x[0],x[1],E[0],E[1],b[0],b[1],g),g+=1):(e.setTripleAt(y.v[_][0],y.v[_][1],y.o[_][0],y.o[_][1],y.i[_][0],y.i[_][1],g),g+=1);return e},RoundCornersModifier.prototype.processShapes=function(d){var t=this.shapes.length,o=this.rd.v,l,p,c,m,u,g;if(0!==o)for(p=0;p<t;p+=1){if((u=this.shapes[p]).shape.paths,g=u.localShapeCollection,u.shape._mdf||this._mdf||d)for(g.releaseShapes(),u.shape._mdf=!0,l=u.shape.paths.shapes,m=u.shape.paths._length,c=0;c<m;c+=1)g.addShape(this.processPath(l[c],o));u.shape.paths=u.localShapeCollection}this.dynamicProperties.length||(this._mdf=!1)},ShapeModifiers.registerModifier("rd",RoundCornersModifier),extendPrototype([ShapeModifier],RepeaterModifier),RepeaterModifier.prototype.initModifierProperties=function(a,t){this.getValue=this.processKeys,this.c=PropertyFactory.getProp(a,t.c,0,null,this),this.o=PropertyFactory.getProp(a,t.o,0,null,this),this.tr=TransformPropertyFactory.getTransformProperty(a,t.tr,this),this.so=PropertyFactory.getProp(a,t.tr.so,0,.01,this),this.eo=PropertyFactory.getProp(a,t.tr.eo,0,.01,this),this.data=t,this.dynamicProperties.length||this.getValue(!0),this._isAnimated=!!this.dynamicProperties.length,this.pMatrix=new Matrix,this.rMatrix=new Matrix,this.sMatrix=new Matrix,this.tMatrix=new Matrix,this.matrix=new Matrix},RepeaterModifier.prototype.applyTransforms=function(d,t,e,n,i,r){var a=r?-1:1,s=n.s.v[0]+(1-n.s.v[0])*(1-i),o=n.s.v[1]+(1-n.s.v[1])*(1-i);d.translate(n.p.v[0]*a*i,n.p.v[1]*a*i,n.p.v[2]),t.translate(-n.a.v[0],-n.a.v[1],n.a.v[2]),t.rotate(-n.r.v*a*i),t.translate(n.a.v[0],n.a.v[1],n.a.v[2]),e.translate(-n.a.v[0],-n.a.v[1],n.a.v[2]),e.scale(r?1/s:s,r?1/o:o),e.translate(n.a.v[0],n.a.v[1],n.a.v[2])},RepeaterModifier.prototype.init=function(a,t,e,r){for(this.elem=a,this.arr=t,this.pos=e,this.elemsData=r,this._currentCopies=0,this._elements=[],this._groups=[],this.frameId=-1,this.initDynamicPropertyContainer(a),this.initModifierProperties(a,t[e]);0<e;)e-=1,this._elements.unshift(t[e]),1;this.dynamicProperties.length?this.k=!0:this.getValue(!0)},RepeaterModifier.prototype.resetElements=function(a){var t=a.length,r;for(r=0;r<t;r+=1)a[r]._processed=!1,"gr"===a[r].ty&&this.resetElements(a[r].it)},RepeaterModifier.prototype.cloneElements=function(a){a.length;var t=JSON.parse(JSON.stringify(a));return this.resetElements(t),t},RepeaterModifier.prototype.changeGroupRender=function(a,t){var e=a.length,r;for(r=0;r<e;r+=1)a[r]._render=t,"gr"===a[r].ty&&this.changeGroupRender(a[r].it,t)},RepeaterModifier.prototype.processShapes=function(y){var t,_,x,b,E;if(this._mdf||y){var T=_Mathceil(this.c.v),o;if(this._groups.length<T){for(;this._groups.length<T;){var S={it:this.cloneElements(this._elements),ty:"gr"};S.it.push({a:{a:0,ix:1,k:[0,0]},nm:"Transform",o:{a:0,ix:7,k:100},p:{a:0,ix:2,k:[0,0]},r:{a:1,ix:6,k:[{s:0,e:0,t:0},{s:0,e:0,t:1}]},s:{a:0,ix:3,k:[100,100]},sa:{a:0,ix:5,k:0},sk:{a:0,ix:4,k:0},ty:"tr"}),this.arr.splice(0,0,S),this._groups.splice(0,0,S),this._currentCopies+=1}this.elem.reloadShapes()}for(E=0,x=0;x<=this._groups.length-1;x+=1)o=E<T,this._groups[x]._render=o,this.changeGroupRender(this._groups[x].it,o),E+=1;this._currentCopies=T;var l=this.o.v,h=l%1,u=0<l?_Mathfloor(l):_Mathceil(l),c=(this.tr.v.props,this.pMatrix.props),p=this.rMatrix.props,f=this.sMatrix.props;this.pMatrix.reset(),this.rMatrix.reset(),this.sMatrix.reset(),this.tMatrix.reset(),this.matrix.reset();var d=0,M,A;if(0<l){for(;d<u;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),d+=1;h&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,h,!1),d+=h)}else if(0>l){for(;d>u;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!0),d-=1;h&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,-h,!0),d-=h)}for(x=1===this.data.m?0:this._currentCopies-1,b=1===this.data.m?1:-1,E=this._currentCopies;E;){if(A=(_=(t=this.elemsData[x].it)[t.length-1].transform.mProps.v.props).length,t[t.length-1].transform.mProps._mdf=!0,t[t.length-1].transform.op._mdf=!0,t[t.length-1].transform.op.v=this.so.v+(this.eo.v-this.so.v)*(x/(this._currentCopies-1)),0!==d){for((0!==x&&1===b||x!==this._currentCopies-1&&-1===b)&&this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),this.matrix.transform(p[0],p[1],p[2],p[3],p[4],p[5],p[6],p[7],p[8],p[9],p[10],p[11],p[12],p[13],p[14],p[15]),this.matrix.transform(f[0],f[1],f[2],f[3],f[4],f[5],f[6],f[7],f[8],f[9],f[10],f[11],f[12],f[13],f[14],f[15]),this.matrix.transform(c[0],c[1],c[2],c[3],c[4],c[5],c[6],c[7],c[8],c[9],c[10],c[11],c[12],c[13],c[14],c[15]),M=0;M<A;M+=1)_[M]=this.matrix.props[M];this.matrix.reset()}else for(this.matrix.reset(),M=0;M<A;M+=1)_[M]=this.matrix.props[M];d+=1,E-=1,x+=b}}else for(E=this._currentCopies,x=0,b=1;E;)_=(t=this.elemsData[x].it)[t.length-1].transform.mProps.v.props,t[t.length-1].transform.mProps._mdf=!1,t[t.length-1].transform.op._mdf=!1,E-=1,x+=b},RepeaterModifier.prototype.addShape=function(){},ShapeModifiers.registerModifier("rp",RepeaterModifier),ShapeCollection.prototype.addShape=function(e){this._length===this._maxLength&&(this.shapes=this.shapes.concat(createSizedArray(this._maxLength)),this._maxLength*=2),this.shapes[this._length]=e,this._length+=1},ShapeCollection.prototype.releaseShapes=function(){var e;for(e=0;e<this._length;e+=1)shape_pool.release(this.shapes[e]);this._length=0},DashProperty.prototype.getValue=function(a){if((this.elem.globalData.frameId!==this.frameId||a)&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf=this._mdf||a,this._mdf)){var t=0,r=this.dataProps.length;for("svg"===this.renderer&&(this.dashStr=""),t=0;t<r;t+=1)"o"==this.dataProps[t].n?this.dashoffset[0]=this.dataProps[t].p.v:"svg"===this.renderer?this.dashStr+=" "+this.dataProps[t].p.v:this.dashArray[t]=this.dataProps[t].p.v}},extendPrototype([DynamicPropertyContainer],DashProperty),GradientProperty.prototype.comparePoints=function(a,t){for(var e=0,r=this.o.length/2;e<r;){if(.01<_Mathabs(a[4*e]-a[4*t+2*e]))return!1;e+=1}return!0},GradientProperty.prototype.checkCollapsable=function(){if(this.o.length/2!=this.c.length/4)return!1;if(this.data.k.k[0].s)for(var a=0,r=this.data.k.k.length;a<r;){if(!this.comparePoints(this.data.k.k[a].s,this.data.p))return!1;a+=1}else if(!this.comparePoints(this.data.k.k,this.data.p))return!1;return!0},GradientProperty.prototype.getValue=function(a){if(this.prop.getValue(),this._mdf=!1,this._cmdf=!1,this._omdf=!1,this.prop._mdf||a){var t=4*this.data.p,o,s,l;for(o=0;o<t;o+=1)s=0==o%4?100:255,l=_Mathround(this.prop.v[o]*s),this.c[o]!==l&&(this.c[o]=l,this._cmdf=!a);if(this.o.length)for(t=this.prop.v.length,o=4*this.data.p;o<t;o+=1)s=0==o%2?100:1,l=0==o%2?_Mathround(100*this.prop.v[o]):this.prop.v[o],this.o[o-4*this.data.p]!==l&&(this.o[o-4*this.data.p]=l,this._omdf=!a);this._mdf=!a}},extendPrototype([DynamicPropertyContainer],GradientProperty);var buildShapeString=function(d,t,e,n){if(0===t)return"";var i=d.o,a=d.i,s=d.v,o=" M"+n.applyToPointStringified(s[0][0],s[0][1]),p;for(p=1;p<t;p+=1)o+=" C"+n.applyToPointStringified(i[p-1][0],i[p-1][1])+" "+n.applyToPointStringified(a[p][0],a[p][1])+" "+n.applyToPointStringified(s[p][0],s[p][1]);return e&&t&&(o+=" C"+n.applyToPointStringified(i[p-1][0],i[p-1][1])+" "+n.applyToPointStringified(a[0][0],a[0][1])+" "+n.applyToPointStringified(s[0][0],s[0][1]),o+="z"),o},ImagePreloader=function(){function d(){this.loadedAssets+=1,this.loadedAssets===this.totalImages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}function e(t){var e=function(a,t,e){var n="";if(a.e)n=a.p;else if(t){var o=a.p;-1!==o.indexOf("images/")&&(o=o.split("/")[1]),n=t+o}else n=e,n+=a.u?a.u:"",n+=a.p;return n}(t,this.assetsPath,this.path),a=createTag("img");a.crossOrigin="anonymous",a.addEventListener("load",this._imageLoaded.bind(this),!1),a.addEventListener("error",function(){n.img=l,this._imageLoaded()}.bind(this),!1),a.src=e;var n={img:a,assetData:t};return n}function n(a,t){this.imagesLoadedCb=t;var e=a.length,r;for(r=0;r<e;r+=1)a[r].layers||(this.totalImages+=1,this.images.push(this._createImageData(a[r])))}function i(e){this.path=e||""}function r(e){this.assetsPath=e||""}function a(a){for(var t=0,r=this.images.length;t<r;){if(this.images[t].assetData===a)return this.images[t].img;t+=1}}function s(){this.imagesLoadedCb=null,this.images.length=0}function o(){return this.totalImages===this.loadedAssets}var l=function(){var a=createTag("canvas");a.width=1,a.height=1;var t=a.getContext("2d");return t.fillStyle="rgba(0,0,0,0)",t.fillRect(0,0,1,1),a}();return function(){this.loadAssets=n,this.setAssetsPath=r,this.setPath=i,this.loaded=o,this.destroy=s,this.getImage=a,this._createImageData=e,this._imageLoaded=d,this.assetsPath="",this.path="",this.totalImages=0,this.loadedAssets=0,this.imagesLoadedCb=null,this.images=[]}}(),featureSupport=function(){var e={maskType:!0};return(/MSIE 10/i.test(navigator.userAgent)||/MSIE 9/i.test(navigator.userAgent)||/rv:11.0/i.test(navigator.userAgent)||/Edge\/\d./i.test(navigator.userAgent))&&(e.maskType=!1),e}(),filtersFactory=function(){var e={};return e.createFilter=function(a){var t=createNS("filter");return t.setAttribute("id",a),t.setAttribute("filterUnits","objectBoundingBox"),t.setAttribute("x","0%"),t.setAttribute("y","0%"),t.setAttribute("width","100%"),t.setAttribute("height","100%"),t},e.createAlphaToLuminanceFilter=function(){var e=createNS("feColorMatrix");return e.setAttribute("type","matrix"),e.setAttribute("color-interpolation-filters","sRGB"),e.setAttribute("values","0 0 0 1 0  0 0 0 1 0  0 0 0 1 0  0 0 0 1 1"),e},e}();TextAnimatorProperty.prototype.searchProperties=function(){var a=this._textData.a.length,r=PropertyFactory.getProp,n,i;for(n=0;n<a;n+=1)i=this._textData.a[n],this._animatorsData[n]=new TextAnimatorDataProperty(this._elem,i,this);this._textData.p&&"m"in this._textData.p?(this._pathData={f:r(this._elem,this._textData.p.f,0,0,this),l:r(this._elem,this._textData.p.l,0,0,this),r:this._textData.p.r,m:this._elem.maskManager.getMaskProperty(this._textData.p.m)},this._hasMaskedPath=!0):this._hasMaskedPath=!1,this._moreOptions.alignment=r(this._elem,this._textData.m.a,1,0,this)},TextAnimatorProperty.prototype.getMeasures=function(ee,t){if(this.lettersChangedFlag=t,this._mdf||this._isFirstFrame||t||this._hasMaskedPath&&this._pathData.m._mdf){this._isFirstFrame=!1;var e=this._moreOptions.alignment.v,b=this._animatorsData,E=this._textData,w=this.mHelper,D=this._renderType,M=this.renderedLetters.length,te=(this.data,ee.l),T,ae,re,ne,ie,oe,se,le,de,pe,ce,me,ue,ge,fe,he,ye,ve,_e;if(this._hasMaskedPath){if(_e=this._pathData.m,!this._pathData.n||this._pathData._mdf){var xe=_e.v,be;for(this._pathData.r&&(xe=xe.reverse()),ie={tLength:0,segments:[]},ne=xe._length-1,he=0,re=0;re<ne;re+=1)be=bez.buildBezierData(xe.v[re],xe.v[re+1],[xe.o[re][0]-xe.v[re][0],xe.o[re][1]-xe.v[re][1]],[xe.i[re+1][0]-xe.v[re+1][0],xe.i[re+1][1]-xe.v[re+1][1]]),ie.tLength+=be.segmentLength,ie.segments.push(be),he+=be.segmentLength;re=ne,_e.v.c&&(be=bez.buildBezierData(xe.v[re],xe.v[0],[xe.o[re][0]-xe.v[re][0],xe.o[re][1]-xe.v[re][1]],[xe.i[0][0]-xe.v[0][0],xe.i[0][1]-xe.v[0][1]]),ie.tLength+=be.segmentLength,ie.segments.push(be),he+=be.segmentLength),this._pathData.pi=ie}if(ie=this._pathData.pi,oe=this._pathData.f.v,ce=0,pe=1,le=0,de=!0,ge=ie.segments,0>oe&&_e.v.c)for(ie.tLength<_Mathabs(oe)&&(oe=-_Mathabs(oe)%ie.tLength),pe=(ue=ge[ce=ge.length-1].points).length-1;0>oe;)oe+=ue[pe].partialLength,0>(pe-=1)&&(pe=(ue=ge[ce-=1].points).length-1);me=(ue=ge[ce].points)[pe-1],fe=(se=ue[pe]).partialLength}ne=te.length,T=0,ae=0;var Ee=.714*(1.2*ee.finalSize),I=!0,Te,Se,Me,Ae;Me=b.length;var we=-1,Pe=oe,J=ce,K=pe,$=-1,Ce="",De=this.defaultPropsArray,Le,Re,ke,Fe,Ie,Ne,ze,Oe,Ue,Be,Ve,Ge,He;if(2===ee.j||1===ee.j){var We=0,Xe=0,je=2===ee.j?-.5:-1,Ye=0,qe=!0;for(re=0;re<ne;re+=1)if(te[re].n){for(We&&(We+=Xe);Ye<re;)te[Ye].animatorJustifyOffset=We,Ye+=1;We=0,qe=!0}else{for(Se=0;Se<Me;Se+=1)(Te=b[Se].a).t.propType&&(qe&&2===ee.j&&(Xe+=Te.t.v*je),We+=(Le=b[Se].s.getMult(te[re].anIndexes[Se],E.a[Se].s.totalChars)).length?Te.t.v*Le[0]*je:Te.t.v*Le*je);qe=!1}for(We&&(We+=Xe);Ye<re;)te[Ye].animatorJustifyOffset=We,Ye+=1}for(re=0;re<ne;re+=1){if(w.reset(),Ie=1,te[re].n)T=0,ae+=ee.yOffset,ae+=I?1:0,oe=Pe,I=!1,0,this._hasMaskedPath&&(pe=K,me=(ue=ge[ce=J].points)[pe-1],fe=(se=ue[pe]).partialLength,le=0),He=Be=Ge=Ce="",De=this.defaultPropsArray;else{if(this._hasMaskedPath){if($!==te[re].line){switch(ee.j){case 1:oe+=he-ee.lineWidths[te[re].line];break;case 2:oe+=(he-ee.lineWidths[te[re].line])/2;}$=te[re].line}we!==te[re].ind&&(te[we]&&(oe+=te[we].extra),oe+=te[re].an/2,we=te[re].ind),oe+=e[0]*te[re].an/200;var Ze=0;for(Se=0;Se<Me;Se+=1)(Te=b[Se].a).p.propType&&((Le=b[Se].s.getMult(te[re].anIndexes[Se],E.a[Se].s.totalChars)).length?Ze+=Te.p.v[0]*Le[0]:Ze+=Te.p.v[0]*Le),Te.a.propType&&((Le=b[Se].s.getMult(te[re].anIndexes[Se],E.a[Se].s.totalChars)).length?Ze+=Te.a.v[0]*Le[0]:Ze+=Te.a.v[0]*Le);for(de=!0;de;)le+fe>=oe+Ze||!ue?(ye=(oe+Ze-le)/se.partialLength,ke=me.point[0]+(se.point[0]-me.point[0])*ye,Fe=me.point[1]+(se.point[1]-me.point[1])*ye,w.translate(-e[0]*te[re].an/200,-e[1]*Ee/100),de=!1):ue&&(le+=se.partialLength,(pe+=1)>=ue.length&&(pe=0,ge[ce+=1]?ue=ge[ce].points:_e.v.c?(pe=0,ue=ge[ce=0].points):(le-=se.partialLength,ue=null)),ue&&(me=se,fe=(se=ue[pe]).partialLength));Re=te[re].an/2-te[re].add,w.translate(-Re,0,0)}else Re=te[re].an/2-te[re].add,w.translate(-Re,0,0),w.translate(-e[0]*te[re].an/200,-e[1]*Ee/100,0);for(te[re].l/2,Se=0;Se<Me;Se+=1)(Te=b[Se].a).t.propType&&(Le=b[Se].s.getMult(te[re].anIndexes[Se],E.a[Se].s.totalChars),0===T&&0===ee.j||(this._hasMaskedPath?Le.length?oe+=Te.t.v*Le[0]:oe+=Te.t.v*Le:Le.length?T+=Te.t.v*Le[0]:T+=Te.t.v*Le));for(te[re].l/2,ee.strokeWidthAnim&&(ze=ee.sw||0),ee.strokeColorAnim&&(Ne=ee.sc?[ee.sc[0],ee.sc[1],ee.sc[2]]:[0,0,0]),ee.fillColorAnim&&ee.fc&&(Oe=[ee.fc[0],ee.fc[1],ee.fc[2]]),Se=0;Se<Me;Se+=1)(Te=b[Se].a).a.propType&&((Le=b[Se].s.getMult(te[re].anIndexes[Se],E.a[Se].s.totalChars)).length?w.translate(-Te.a.v[0]*Le[0],-Te.a.v[1]*Le[1],Te.a.v[2]*Le[2]):w.translate(-Te.a.v[0]*Le,-Te.a.v[1]*Le,Te.a.v[2]*Le));for(Se=0;Se<Me;Se+=1)(Te=b[Se].a).s.propType&&((Le=b[Se].s.getMult(te[re].anIndexes[Se],E.a[Se].s.totalChars)).length?w.scale(1+(Te.s.v[0]-1)*Le[0],1+(Te.s.v[1]-1)*Le[1],1):w.scale(1+(Te.s.v[0]-1)*Le,1+(Te.s.v[1]-1)*Le,1));for(Se=0;Se<Me;Se+=1){if(Te=b[Se].a,Le=b[Se].s.getMult(te[re].anIndexes[Se],E.a[Se].s.totalChars),Te.sk.propType&&(Le.length?w.skewFromAxis(-Te.sk.v*Le[0],Te.sa.v*Le[1]):w.skewFromAxis(-Te.sk.v*Le,Te.sa.v*Le)),Te.r.propType&&(Le.length?w.rotateZ(-Te.r.v*Le[2]):w.rotateZ(-Te.r.v*Le)),Te.ry.propType&&(Le.length?w.rotateY(Te.ry.v*Le[1]):w.rotateY(Te.ry.v*Le)),Te.rx.propType&&(Le.length?w.rotateX(Te.rx.v*Le[0]):w.rotateX(Te.rx.v*Le)),Te.o.propType&&(Le.length?Ie+=(Te.o.v*Le[0]-Ie)*Le[0]:Ie+=(Te.o.v*Le-Ie)*Le),ee.strokeWidthAnim&&Te.sw.propType&&(Le.length?ze+=Te.sw.v*Le[0]:ze+=Te.sw.v*Le),ee.strokeColorAnim&&Te.sc.propType)for(Ue=0;3>Ue;Ue+=1)Ne[Ue]+=Le.length?(Te.sc.v[Ue]-Ne[Ue])*Le[0]:(Te.sc.v[Ue]-Ne[Ue])*Le;if(ee.fillColorAnim&&ee.fc){if(Te.fc.propType)for(Ue=0;3>Ue;Ue+=1)Oe[Ue]+=Le.length?(Te.fc.v[Ue]-Oe[Ue])*Le[0]:(Te.fc.v[Ue]-Oe[Ue])*Le;Te.fh.propType&&(Oe=Le.length?addHueToRGB(Oe,Te.fh.v*Le[0]):addHueToRGB(Oe,Te.fh.v*Le)),Te.fs.propType&&(Oe=Le.length?addSaturationToRGB(Oe,Te.fs.v*Le[0]):addSaturationToRGB(Oe,Te.fs.v*Le)),Te.fb.propType&&(Oe=Le.length?addBrightnessToRGB(Oe,Te.fb.v*Le[0]):addBrightnessToRGB(Oe,Te.fb.v*Le))}}for(Se=0;Se<Me;Se+=1)(Te=b[Se].a).p.propType&&(Le=b[Se].s.getMult(te[re].anIndexes[Se],E.a[Se].s.totalChars),this._hasMaskedPath?Le.length?w.translate(0,Te.p.v[1]*Le[0],-Te.p.v[2]*Le[1]):w.translate(0,Te.p.v[1]*Le,-Te.p.v[2]*Le):Le.length?w.translate(Te.p.v[0]*Le[0],Te.p.v[1]*Le[1],-Te.p.v[2]*Le[2]):w.translate(Te.p.v[0]*Le,Te.p.v[1]*Le,-Te.p.v[2]*Le));if(ee.strokeWidthAnim&&(Be=0>ze?0:ze),ee.strokeColorAnim&&(Ve="rgb("+_Mathround(255*Ne[0])+","+_Mathround(255*Ne[1])+","+_Mathround(255*Ne[2])+")"),ee.fillColorAnim&&ee.fc&&(Ge="rgb("+_Mathround(255*Oe[0])+","+_Mathround(255*Oe[1])+","+_Mathround(255*Oe[2])+")"),this._hasMaskedPath){if(w.translate(0,-ee.ls),w.translate(0,e[1]*Ee/100+ae,0),E.p.p){ve=(se.point[1]-me.point[1])/(se.point[0]-me.point[0]);var Je=180*Math.atan(ve)/_MathPI;se.point[0]<me.point[0]&&(Je+=180),w.rotate(-Je*_MathPI/180)}w.translate(ke,Fe,0),oe-=e[0]*te[re].an/200,te[re+1]&&we!==te[re+1].ind&&(oe+=te[re].an/2,oe+=ee.tr/1e3*ee.finalSize)}else{switch(w.translate(T,ae,0),ee.ps&&w.translate(ee.ps[0],ee.ps[1]+ee.ascent,0),ee.j){case 1:w.translate(te[re].animatorJustifyOffset+ee.justifyOffset+(ee.boxWidth-ee.lineWidths[te[re].line]),0,0);break;case 2:w.translate(te[re].animatorJustifyOffset+ee.justifyOffset+(ee.boxWidth-ee.lineWidths[te[re].line])/2,0,0);}w.translate(0,-ee.ls),w.translate(Re,0,0),w.translate(e[0]*te[re].an/200,e[1]*Ee/100,0),T+=te[re].l+ee.tr/1e3*ee.finalSize}"html"===D?Ce=w.toCSS():"svg"===D?Ce=w.to2dCSS():De=[w.props[0],w.props[1],w.props[2],w.props[3],w.props[4],w.props[5],w.props[6],w.props[7],w.props[8],w.props[9],w.props[10],w.props[11],w.props[12],w.props[13],w.props[14],w.props[15]],He=Ie}M<=re?(Ae=new LetterProps(He,Be,Ve,Ge,Ce,De),this.renderedLetters.push(Ae),M+=1,this.lettersChangedFlag=!0):(Ae=this.renderedLetters[re],this.lettersChangedFlag=Ae.update(He,Be,Ve,Ge,Ce,De)||this.lettersChangedFlag)}}},TextAnimatorProperty.prototype.getValue=function(){this._elem.globalData.frameId!==this._frameId&&(this._frameId=this._elem.globalData.frameId,this.iterateDynamicProperties())},TextAnimatorProperty.prototype.mHelper=new Matrix,TextAnimatorProperty.prototype.defaultPropsArray=[],extendPrototype([DynamicPropertyContainer],TextAnimatorProperty),LetterProps.prototype.update=function(o,t,e,n,i,r){this._mdf.o=!1,this._mdf.sw=!1,this._mdf.sc=!1,this._mdf.fc=!1,this._mdf.m=!1,this._mdf.p=!1;var a=!1;return this.o!==o&&(this.o=o,this._mdf.o=!0,a=!0),this.sw!==t&&(this.sw=t,this._mdf.sw=!0,a=!0),this.sc!==e&&(this.sc=e,this._mdf.sc=!0,a=!0),this.fc!==n&&(this.fc=n,this._mdf.fc=!0,a=!0),this.m!==i&&(this.m=i,this._mdf.m=!0,a=!0),!r.length||this.p[0]===r[0]&&this.p[1]===r[1]&&this.p[4]===r[4]&&this.p[5]===r[5]&&this.p[12]===r[12]&&this.p[13]===r[13]||(this.p=r,this._mdf.p=!0,a=!0),a},TextProperty.prototype.defaultBoxWidth=[0,0],TextProperty.prototype.copyData=function(a,t){for(var e in t)t.hasOwnProperty(e)&&(a[e]=t[e]);return a},TextProperty.prototype.setCurrentData=function(e){e.__complete||this.completeTextData(e),this.currentData=e,this.currentData.boxWidth=this.currentData.boxWidth||this.defaultBoxWidth,this._mdf=!0},TextProperty.prototype.searchProperty=function(){return this.searchKeyframes()},TextProperty.prototype.searchKeyframes=function(){return this.kf=1<this.data.d.k.length,this.kf&&this.addEffect(this.getKeyframeValue.bind(this)),this.kf},TextProperty.prototype.addEffect=function(e){this.effectsSequence.push(e),this.elem.addDynamicProperty(this)},TextProperty.prototype.getValue=function(o){if(this.elem.globalData.frameId!==this.frameId&&this.effectsSequence.length||o){this.currentData.t=this.data.d.k[this.keysIndex].s.t;var t=this.currentData,e=this.keysIndex;if(this.lock)this.setCurrentData(this.currentData);else{this.lock=!0,this._mdf=!1;var n=this.effectsSequence.length,r=o||this.data.d.k[this.keysIndex].s,s;for(s=0;s<n;s+=1)r=e===this.keysIndex?this.effectsSequence[s](this.currentData,r.t):this.effectsSequence[s](r,r.t);t!==r&&this.setCurrentData(r),this.pv=this.v=this.currentData,this.lock=!1,this.frameId=this.elem.globalData.frameId}}},TextProperty.prototype.getKeyframeValue=function(){for(var a=this.data.d.k,t=this.elem.comp.renderedFrame,e=0,r=a.length;e<=r-1&&(a[e].s,!(e===r-1||a[e+1].t>t));)e+=1;return this.keysIndex!==e&&(this.keysIndex=e),this.data.d.k[this.keysIndex].s},TextProperty.prototype.buildFinalText=function(o){for(var t=FontManager.getCombinedCharacterCodes(),n=[],i=0,s=o.length,a;i<s;)a=o.charCodeAt(i),-1===t.indexOf(a)?55296<=a&&56319>=a&&56320<=(a=o.charCodeAt(i+1))&&57343>=a?(n.push(o.substr(i,2)),++i):n.push(o.charAt(i)):n[n.length-1]+=o.charAt(i),i+=1;return n},TextProperty.prototype.completeTextData=function(G){G.__complete=!0;var t=this.elem.globalData.fontManager,l=this.data,h=[],u=0,H=l.m.g,p=0,W=0,X=0,j=[],g=0,Y=0,q=t.getFontByName(G.f),_=0,Z=q.fStyle?q.fStyle.split(" "):[],b="normal",J="normal",K,Q,$,ee,te,ae,re;for(Q=Z.length,K=0;K<Q;K+=1)switch(Z[K].toLowerCase()){case"italic":J="italic";break;case"bold":b="700";break;case"black":b="900";break;case"medium":b="500";break;case"regular":case"normal":b="400";break;case"light":case"thin":b="200";}G.fWeight=q.fWeight||b,G.fStyle=J,G.finalSize=G.s,G.finalText=this.buildFinalText(G.t),Q=G.finalText.length,G.finalLineHeight=G.lh;var ne=G.tr/1e3*G.finalSize,ie;if(G.sz)for(var oe=!0,se=G.sz[0],C=G.sz[1],P,le;oe;){P=0,g=0,Q=(le=this.buildFinalText(G.t)).length,ne=G.tr/1e3*G.finalSize;var de=-1;for(K=0;K<Q;K+=1)ie=le[K].charCodeAt(0),$=!1," "===le[K]?de=K:13!==ie&&3!==ie||(g=0,$=!0,P+=G.finalLineHeight||1.2*G.finalSize),t.chars?(re=t.getCharData(le[K],q.fStyle,q.fFamily),_=$?0:re.w*G.finalSize/100):_=t.measureText(le[K],G.f,G.finalSize),g+_>se&&" "!==le[K]?(-1===de?Q+=1:K=de,P+=G.finalLineHeight||1.2*G.finalSize,le.splice(K,de===K?1:0,"\r"),de=-1,g=0):(g+=_,g+=ne);P+=q.ascent*G.finalSize/100,this.canResize&&G.finalSize>this.minimumFontSize&&C<P?(G.finalSize-=1,G.finalLineHeight=G.finalSize*G.lh/G.s):(G.finalText=le,Q=G.finalText.length,oe=!1)}g=-ne,_=0;var pe=0,ce;for(K=0;K<Q;K+=1)if($=!1,13===(ie=(ce=G.finalText[K]).charCodeAt(0))||3===ie?(pe=0,j.push(g),Y=g>Y?g:Y,g=-2*ne,ee="",$=!0,X+=1):ee=ce,t.chars?(re=t.getCharData(ce,q.fStyle,t.getFontByName(G.f).fFamily),_=$?0:re.w*G.finalSize/100):_=t.measureText(ee,G.f,G.finalSize)," "===ce?pe+=_+ne:(g+=_+ne+pe,pe=0),h.push({l:_,an:_,add:p,n:$,anIndexes:[],val:ee,line:X,animatorJustifyOffset:0}),2==H){if(p+=_,""===ee||" "===ee||K===Q-1){for(""!==ee&&" "!==ee||(p-=_);W<=K;)h[W].an=p,h[W].ind=u,h[W].extra=_,W+=1;u+=1,p=0}}else if(!(3==H))h[u].ind=u,h[u].extra=0,u+=1;else if(p+=_,""===ee||K===Q-1){for(""===ee&&(p-=_);W<=K;)h[W].an=p,h[W].ind=u,h[W].extra=_,W+=1;p=0,u+=1}if(G.l=h,Y=g>Y?g:Y,j.push(g),G.sz)G.boxWidth=G.sz[0],G.justifyOffset=0;else switch(G.boxWidth=Y,G.j){case 1:G.justifyOffset=-G.boxWidth;break;case 2:G.justifyOffset=-G.boxWidth/2;break;default:G.justifyOffset=0;}G.lineWidths=j;var me=l.a,O,ue;ae=me.length;var ge=[],z,fe;for(te=0;te<ae;te+=1){for((O=me[te]).a.sc&&(G.strokeColorAnim=!0),O.a.sw&&(G.strokeWidthAnim=!0),(O.a.fc||O.a.fh||O.a.fs||O.a.fb)&&(G.fillColorAnim=!0),fe=0,z=O.s.b,K=0;K<Q;K+=1)(ue=h[K]).anIndexes[te]=fe,(1==z&&""!==ue.val||2==z&&""!==ue.val&&" "!==ue.val||3==z&&(ue.n||" "==ue.val||K==Q-1)||4==z&&(ue.n||K==Q-1))&&(1===O.s.rn&&ge.push(fe),fe+=1);l.a[te].s.totalChars=fe;var he=-1,ye;if(1===O.s.rn)for(K=0;K<Q;K+=1)he!=(ue=h[K]).anIndexes[te]&&(he=ue.anIndexes[te],ye=ge.splice(_Mathfloor(Math.random()*ge.length),1)[0]),ue.anIndexes[te]=ye}G.yOffset=G.finalLineHeight||1.2*G.finalSize,G.ls=G.ls||0,G.ascent=q.ascent*G.finalSize/100},TextProperty.prototype.updateDocumentData=function(a,t){t=void 0===t?this.keysIndex:t;var r=this.copyData({},this.data.d.k[t].s);r=this.copyData(r,a),this.data.d.k[t].s=r,this.recalculate(t),this.elem.addDynamicProperty(this)},TextProperty.prototype.recalculate=function(a){var t=this.data.d.k[a].s;t.__complete=!1,this.keysIndex=0,this._isFirstFrame=!0,this.getValue(t)},TextProperty.prototype.canResizeFont=function(e){this.canResize=e,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)},TextProperty.prototype.setMinimumFontSize=function(e){this.minimumFontSize=_Mathfloor(e)||1,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)};var TextSelectorProp=function(){function a(a,t){this._currentTextLength=-1,this.k=!1,this.data=t,this.elem=a,this.comp=a.comp,this.finalS=0,this.finalE=0,this.initDynamicPropertyContainer(a),this.s=PropertyFactory.getProp(a,t.s||{k:0},0,0,this),this.e="e"in t?PropertyFactory.getProp(a,t.e,0,0,this):{v:100},this.o=PropertyFactory.getProp(a,t.o||{k:0},0,0,this),this.xe=PropertyFactory.getProp(a,t.xe||{k:0},0,0,this),this.ne=PropertyFactory.getProp(a,t.ne||{k:0},0,0,this),this.a=PropertyFactory.getProp(a,t.a,0,.01,this),this.dynamicProperties.length||this.getValue()}var n=_Mathmax,t=_Mathmin;return a.prototype={getMult:function(e){this._currentTextLength!==this.elem.textProperty.currentData.l.length&&this.getValue();var g=0,y=0,v=1,_=1;0<this.ne.v?g=this.ne.v/100:y=-this.ne.v/100,0<this.xe.v?v=1-this.xe.v/100:_=1+this.xe.v/100;var x=BezierFactory.getBezierEasing(g,y,v,_).get,l=0,b=this.finalS,u=this.finalE,c=this.data.sh;if(2===c)l=x(l=u===b?e>=u?1:0:n(0,t(.5/(u-b)+(e-b)/(u-b),1)));else if(3===c)l=x(l=u===b?e>=u?0:1:1-n(0,t(.5/(u-b)+(e-b)/(u-b),1)));else if(4===c)u===b?l=0:.5>(l=n(0,t(.5/(u-b)+(e-b)/(u-b),1)))?l*=2:l=1-2*(l-.5),l=x(l);else if(5===c){if(u===b)l=0;else{var p=u-b,f=-p/2+(e=t(n(0,e+.5-b),u-b)),d=p/2;l=_Mathsqrt(1-f*f/(d*d))}l=x(l)}else 6===c?(u===b?l=0:(e=t(n(0,e+.5-b),u-b),l=(1+_Mathcos(_MathPI+2*_MathPI*e/(u-b)))/2),l=x(l)):(e>=_Mathfloor(b)&&(l=n(0,t(0>e-b?t(u,1)-(b-e):u-e,1))),l=x(l));return l*this.a.v},getValue:function(o){this.iterateDynamicProperties(),this._mdf=o||this._mdf,this._currentTextLength=this.elem.textProperty.currentData.l.length||0,o&&2===this.data.r&&(this.e.v=this._currentTextLength);var t=2===this.data.r?1:100/this.data.totalChars,e=this.o.v/t,n=this.s.v/t+e,s=this.e.v/t+e;if(n>s){var l=n;n=s,s=l}this.finalS=n,this.finalE=s}},extendPrototype([DynamicPropertyContainer],a),{getTextSelectorProp:function(r,t,e){return new a(r,t,e)}}}(),pool_factory=function(i,t,e){function n(){return o?d[o-=1]:t()}var o=0,l=i,d=createSizedArray(l);return{newElement:n,release:function(a){o===l&&(d=pooling.double(d),l*=2),e&&e(a),d[o]=a,o+=1}}},pooling={double:function(e){return e.concat(createSizedArray(e.length))}},point_pool=pool_factory(8,function(){return createTypedArray("float32",2)}),shape_pool=(factory=pool_factory(4,function(){return new ShapePath},function(a){var t=a._length,r;for(r=0;r<t;r+=1)point_pool.release(a.v[r]),point_pool.release(a.i[r]),point_pool.release(a.o[r]),a.v[r]=null,a.i[r]=null,a.o[r]=null;a._length=0,a.c=!1}),factory.clone=function(a){var t=factory.newElement(),r=void 0===a._length?a.v.length:a._length,n;for(t.setLength(r),t.c=a.c,n=0;n<r;n+=1)t.setTripleAt(a.v[n][0],a.v[n][1],a.o[n][0],a.o[n][1],a.i[n][0],a.i[n][1],n);return t},factory),shapeCollection_pool=function(){var o=0,s=4,l=createSizedArray(s);return{newShapeCollection:function(){var e;return e=o?l[o-=1]:new ShapeCollection,e},release:function(e){var t=e._length,a;for(a=0;a<t;a+=1)shape_pool.release(e.shapes[a]);e._length=0,o===s&&(l=pooling.double(l),s*=2),l[o]=e,o+=1}}}(),segments_length_pool=pool_factory(8,function(){return{lengths:[],totalLength:0}},function(a){var t=a.lengths.length,r;for(r=0;r<t;r+=1)bezier_length_pool.release(a.lengths[r]);a.lengths.length=0}),bezier_length_pool=pool_factory(8,function(){return{addedLength:0,percents:createTypedArray("float32",defaultCurveSegments),lengths:createTypedArray("float32",defaultCurveSegments)}}),factory;BaseRenderer.prototype.checkLayers=function(a){var t=this.layers.length,r,i;for(this.completeLayers=!0,r=t-1;0<=r;r--)this.elements[r]||(i=this.layers[r]).ip-i.st<=a-this.layers[r].st&&i.op-i.st>a-this.layers[r].st&&this.buildItem(r),this.completeLayers=!!this.elements[r]&&this.completeLayers;this.checkPendingElements()},BaseRenderer.prototype.createItem=function(e){switch(e.ty){case 2:return this.createImage(e);case 0:return this.createComp(e);case 1:return this.createSolid(e);case 3:return this.createNull(e);case 4:return this.createShape(e);case 5:return this.createText(e);case 13:return this.createCamera(e);}return this.createNull(e)},BaseRenderer.prototype.createCamera=function(){throw new Error("You're using a 3d camera. Try the html renderer.")},BaseRenderer.prototype.buildAllItems=function(){var a=this.layers.length,e;for(e=0;e<a;e+=1)this.buildItem(e);this.checkPendingElements()},BaseRenderer.prototype.includeLayers=function(a){this.completeLayers=!1;var t=a.length,i=this.layers.length,r,o;for(r=0;r<t;r+=1)for(o=0;o<i;){if(this.layers[o].id==a[r].id){this.layers[o]=a[r];break}o+=1}},BaseRenderer.prototype.setProjectInterface=function(e){this.globalData.projectInterface=e},BaseRenderer.prototype.initItems=function(){this.globalData.progressiveLoad||this.buildAllItems()},BaseRenderer.prototype.buildElementParenting=function(o,t,e){for(var n=this.elements,i=this.layers,r=0,l=i.length;r<l;)i[r].ind==t&&(n[r]&&!0!==n[r]?(e.push(n[r]),n[r].setAsParent(),void 0===i[r].parent?o.setHierarchy(e):this.buildElementParenting(o,i[r].parent,e)):(this.buildItem(r),this.addPendingElement(o))),r+=1},BaseRenderer.prototype.addPendingElement=function(e){this.pendingElements.push(e)},BaseRenderer.prototype.searchExtraCompositions=function(a){var t=a.length,r;for(r=0;r<t;r+=1)if(a[r].xt){var n=this.createComp(a[r]);n.initExpressions(),this.globalData.projectInterface.registerComposition(n)}},BaseRenderer.prototype.setupGlobalData=function(a,t){this.globalData.fontManager=new FontManager,this.globalData.fontManager.addChars(a.chars),this.globalData.fontManager.addFonts(a.fonts,t),this.globalData.getAssetData=this.animationItem.getAssetData.bind(this.animationItem),this.globalData.getAssetsPath=this.animationItem.getAssetsPath.bind(this.animationItem),this.globalData.imageLoader=this.animationItem.imagePreloader,this.globalData.frameId=0,this.globalData.frameRate=a.fr,this.globalData.nm=a.nm,this.globalData.compSize={w:a.w,h:a.h}},extendPrototype([BaseRenderer],SVGRenderer),SVGRenderer.prototype.createNull=function(e){return new NullElement(e,this.globalData,this)},SVGRenderer.prototype.createShape=function(e){return new SVGShapeElement(e,this.globalData,this)},SVGRenderer.prototype.createText=function(e){return new SVGTextElement(e,this.globalData,this)},SVGRenderer.prototype.createImage=function(e){return new IImageElement(e,this.globalData,this)},SVGRenderer.prototype.createComp=function(e){return new SVGCompElement(e,this.globalData,this)},SVGRenderer.prototype.createSolid=function(e){return new ISolidElement(e,this.globalData,this)},SVGRenderer.prototype.configAnimation=function(a){this.svgElement.setAttribute("xmlns","http://www.w3.org/2000/svg"),this.renderConfig.viewBoxSize?this.svgElement.setAttribute("viewBox",this.renderConfig.viewBoxSize):this.svgElement.setAttribute("viewBox","0 0 "+a.w+" "+a.h),this.renderConfig.viewBoxOnly||(this.svgElement.setAttribute("width",a.w),this.svgElement.setAttribute("height",a.h),this.svgElement.style.width="100%",this.svgElement.style.height="100%",this.svgElement.style.transform="translate3d(0,0,0)"),this.renderConfig.className&&this.svgElement.setAttribute("class",this.renderConfig.className),this.renderConfig.id&&this.svgElement.setAttribute("id",this.renderConfig.id),void 0!==this.renderConfig.focusable&&this.svgElement.setAttribute("focusable",this.renderConfig.focusable),this.svgElement.setAttribute("preserveAspectRatio",this.renderConfig.preserveAspectRatio),this.animationItem.wrapper.appendChild(this.svgElement);var t=this.globalData.defs;this.setupGlobalData(a,t),this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.data=a;var e=createNS("clipPath"),n=createNS("rect");n.setAttribute("width",a.w),n.setAttribute("height",a.h),n.setAttribute("x",0),n.setAttribute("y",0);var i=createElementID();e.setAttribute("id",i),e.appendChild(n),this.layerElement.setAttribute("clip-path","url("+locationHref+"#"+i+")"),t.appendChild(e),this.layers=a.layers,this.elements=createSizedArray(a.layers.length)},SVGRenderer.prototype.destroy=function(){this.animationItem.wrapper.innerHTML="",this.layerElement=null,this.globalData.defs=null;var a=this.layers?this.layers.length:0,e;for(e=0;e<a;e++)this.elements[e]&&this.elements[e].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},SVGRenderer.prototype.updateContainerSize=function(){},SVGRenderer.prototype.buildItem=function(a){var t=this.elements;if(!t[a]&&99!=this.layers[a].ty){t[a]=!0;var e=this.createItem(this.layers[a]);t[a]=e,expressionsPlugin&&(0===this.layers[a].ty&&this.globalData.projectInterface.registerComposition(e),e.initExpressions()),this.appendElementInPos(e,a),this.layers[a].tt&&(this.elements[a-1]&&!0!==this.elements[a-1]?e.setMatte(t[a-1].layerId):(this.buildItem(a-1),this.addPendingElement(e)))}},SVGRenderer.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var a=this.pendingElements.pop();if(a.checkParenting(),a.data.tt)for(var t=0,r=this.elements.length;t<r;){if(this.elements[t]===a){a.setMatte(this.elements[t-1].layerId);break}t+=1}}},SVGRenderer.prototype.renderFrame=function(a){if(this.renderedFrame!==a&&!this.destroyed){null===a?a=this.renderedFrame:this.renderedFrame=a,this.globalData.frameNum=a,this.globalData.frameId+=1,this.globalData.projectInterface.currentFrame=a,this.globalData._mdf=!1;var r=this.layers.length,n;for(this.completeLayers||this.checkLayers(a),n=r-1;0<=n;n--)(this.completeLayers||this.elements[n])&&this.elements[n].prepareFrame(a-this.layers[n].st);if(this.globalData._mdf)for(n=0;n<r;n+=1)(this.completeLayers||this.elements[n])&&this.elements[n].renderFrame()}},SVGRenderer.prototype.appendElementInPos=function(a,t){var e=a.getBaseElement();if(e){for(var n=0,o;n<t;)this.elements[n]&&!0!==this.elements[n]&&this.elements[n].getBaseElement()&&(o=this.elements[n].getBaseElement()),n+=1;o?this.layerElement.insertBefore(e,o):this.layerElement.appendChild(e)}},SVGRenderer.prototype.hide=function(){this.layerElement.style.display="none"},SVGRenderer.prototype.show=function(){this.layerElement.style.display="block"},extendPrototype([BaseRenderer],CanvasRenderer),CanvasRenderer.prototype.createShape=function(e){return new CVShapeElement(e,this.globalData,this)},CanvasRenderer.prototype.createText=function(e){return new CVTextElement(e,this.globalData,this)},CanvasRenderer.prototype.createImage=function(e){return new CVImageElement(e,this.globalData,this)},CanvasRenderer.prototype.createComp=function(e){return new CVCompElement(e,this.globalData,this)},CanvasRenderer.prototype.createSolid=function(e){return new CVSolidElement(e,this.globalData,this)},CanvasRenderer.prototype.createNull=SVGRenderer.prototype.createNull,CanvasRenderer.prototype.ctxTransform=function(a){if(1!==a[0]||0!==a[1]||0!==a[4]||1!==a[5]||0!==a[12]||0!==a[13])if(this.renderConfig.clearCanvas){this.transformMat.cloneFromProps(a);var t=this.contextData.cTr.props;this.transformMat.transform(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15]),this.contextData.cTr.cloneFromProps(this.transformMat.props);var e=this.contextData.cTr.props;this.canvasContext.setTransform(e[0],e[1],e[4],e[5],e[12],e[13])}else this.canvasContext.transform(a[0],a[1],a[4],a[5],a[12],a[13])},CanvasRenderer.prototype.ctxOpacity=function(e){return this.renderConfig.clearCanvas?void(this.contextData.cO*=0>e?0:e,this.globalData.currentGlobalAlpha!==this.contextData.cO&&(this.canvasContext.globalAlpha=this.contextData.cO,this.globalData.currentGlobalAlpha=this.contextData.cO)):(this.canvasContext.globalAlpha*=0>e?0:e,void(this.globalData.currentGlobalAlpha=this.contextData.cO))},CanvasRenderer.prototype.reset=function(){this.renderConfig.clearCanvas?this.contextData.reset():this.canvasContext.restore()},CanvasRenderer.prototype.save=function(a){if(this.renderConfig.clearCanvas){a&&this.canvasContext.save();var t=this.contextData.cTr.props;this.contextData._length<=this.contextData.cArrPos&&this.contextData.duplicate();var e=this.contextData.saved[this.contextData.cArrPos],r;for(r=0;16>r;r+=1)e[r]=t[r];this.contextData.savedOp[this.contextData.cArrPos]=this.contextData.cO,this.contextData.cArrPos+=1}else this.canvasContext.save()},CanvasRenderer.prototype.restore=function(a){if(this.renderConfig.clearCanvas){a&&(this.canvasContext.restore(),this.globalData.blendMode="source-over"),this.contextData.cArrPos-=1;var t=this.contextData.saved[this.contextData.cArrPos],r=this.contextData.cTr.props,i;for(i=0;16>i;i+=1)r[i]=t[i];this.canvasContext.setTransform(t[0],t[1],t[4],t[5],t[12],t[13]),t=this.contextData.savedOp[this.contextData.cArrPos],this.contextData.cO=t,this.globalData.currentGlobalAlpha!==t&&(this.canvasContext.globalAlpha=t,this.globalData.currentGlobalAlpha=t)}else this.canvasContext.restore()},CanvasRenderer.prototype.configAnimation=function(e){this.animationItem.wrapper?(this.animationItem.container=createTag("canvas"),this.animationItem.container.style.width="100%",this.animationItem.container.style.height="100%",this.animationItem.container.style.transformOrigin=this.animationItem.container.style.mozTransformOrigin=this.animationItem.container.style.webkitTransformOrigin=this.animationItem.container.style["-webkit-transform"]="0px 0px 0px",this.animationItem.wrapper.appendChild(this.animationItem.container),this.canvasContext=this.animationItem.container.getContext("2d"),this.renderConfig.className&&this.animationItem.container.setAttribute("class",this.renderConfig.className),this.renderConfig.id&&this.animationItem.container.setAttribute("id",this.renderConfig.id)):this.canvasContext=this.renderConfig.context,this.data=e,this.layers=e.layers,this.transformCanvas={w:e.w,h:e.h,sx:0,sy:0,tx:0,ty:0},this.setupGlobalData(e,document.body),this.globalData.canvasContext=this.canvasContext,this.globalData.renderer=this,this.globalData.isDashed=!1,this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.globalData.transformCanvas=this.transformCanvas,this.elements=createSizedArray(e.layers.length),this.updateContainerSize()},CanvasRenderer.prototype.updateContainerSize=function(){var d,p,c,m;if(this.reset(),this.animationItem.wrapper&&this.animationItem.container?(d=this.animationItem.wrapper.offsetWidth,p=this.animationItem.wrapper.offsetHeight,this.animationItem.container.setAttribute("width",d*this.renderConfig.dpr),this.animationItem.container.setAttribute("height",p*this.renderConfig.dpr)):(d=this.canvasContext.canvas.width*this.renderConfig.dpr,p=this.canvasContext.canvas.height*this.renderConfig.dpr),-1!==this.renderConfig.preserveAspectRatio.indexOf("meet")||-1!==this.renderConfig.preserveAspectRatio.indexOf("slice")){var u=this.renderConfig.preserveAspectRatio.split(" "),r=u[1]||"meet",a=u[0]||"xMidYMid",s=a.substr(0,4),o=a.substr(4);c=d/p,(m=this.transformCanvas.w/this.transformCanvas.h)>c&&"meet"===r||m<c&&"slice"===r?(this.transformCanvas.sx=d/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=d/(this.transformCanvas.w/this.renderConfig.dpr)):(this.transformCanvas.sx=p/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.sy=p/(this.transformCanvas.h/this.renderConfig.dpr)),this.transformCanvas.tx="xMid"===s&&(m<c&&"meet"===r||m>c&&"slice"===r)?(d-this.transformCanvas.w*(p/this.transformCanvas.h))/2*this.renderConfig.dpr:"xMax"===s&&(m<c&&"meet"===r||m>c&&"slice"===r)?(d-this.transformCanvas.w*(p/this.transformCanvas.h))*this.renderConfig.dpr:0,this.transformCanvas.ty="YMid"===o&&(m>c&&"meet"===r||m<c&&"slice"===r)?(p-this.transformCanvas.h*(d/this.transformCanvas.w))/2*this.renderConfig.dpr:"YMax"===o&&(m>c&&"meet"===r||m<c&&"slice"===r)?(p-this.transformCanvas.h*(d/this.transformCanvas.w))*this.renderConfig.dpr:0}else"none"==this.renderConfig.preserveAspectRatio?(this.transformCanvas.sx=d/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=p/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.tx=0,this.transformCanvas.ty=0):(this.transformCanvas.sx=this.renderConfig.dpr,this.transformCanvas.sy=this.renderConfig.dpr,this.transformCanvas.tx=0,this.transformCanvas.ty=0);this.transformCanvas.props=[this.transformCanvas.sx,0,0,0,0,this.transformCanvas.sy,0,0,0,0,1,0,this.transformCanvas.tx,this.transformCanvas.ty,0,1],this.ctxTransform(this.transformCanvas.props),this.canvasContext.beginPath(),this.canvasContext.rect(0,0,this.transformCanvas.w,this.transformCanvas.h),this.canvasContext.closePath(),this.canvasContext.clip(),this.renderFrame(this.renderedFrame,!0)},CanvasRenderer.prototype.destroy=function(){var e;for(this.renderConfig.clearCanvas&&(this.animationItem.wrapper.innerHTML=""),e=(this.layers?this.layers.length:0)-1;0<=e;e-=1)this.elements[e]&&this.elements[e].destroy();this.elements.length=0,this.globalData.canvasContext=null,this.animationItem.container=null,this.destroyed=!0},CanvasRenderer.prototype.renderFrame=function(a,t){if((this.renderedFrame!==a||!0!==this.renderConfig.clearCanvas||t)&&!this.destroyed&&-1!==a){this.renderedFrame=a,this.globalData.frameNum=a-this.animationItem._isFirstFrame,this.globalData.frameId+=1,this.globalData._mdf=!this.renderConfig.clearCanvas||t,this.globalData.projectInterface.currentFrame=a;var e=this.layers.length,r;for(this.completeLayers||this.checkLayers(a),r=0;r<e;r++)(this.completeLayers||this.elements[r])&&this.elements[r].prepareFrame(a-this.layers[r].st);if(this.globalData._mdf){for(!0===this.renderConfig.clearCanvas?this.canvasContext.clearRect(0,0,this.transformCanvas.w,this.transformCanvas.h):this.save(),r=e-1;0<=r;r-=1)(this.completeLayers||this.elements[r])&&this.elements[r].renderFrame();!0!==this.renderConfig.clearCanvas&&this.restore()}}},CanvasRenderer.prototype.buildItem=function(a){var t=this.elements;if(!t[a]&&99!=this.layers[a].ty){var e=this.createItem(this.layers[a],this,this.globalData);t[a]=e,e.initExpressions()}},CanvasRenderer.prototype.checkPendingElements=function(){for(;this.pendingElements.length;)this.pendingElements.pop().checkParenting()},CanvasRenderer.prototype.hide=function(){this.animationItem.container.style.display="none"},CanvasRenderer.prototype.show=function(){this.animationItem.container.style.display="block"},extendPrototype([BaseRenderer],HybridRenderer),HybridRenderer.prototype.buildItem=SVGRenderer.prototype.buildItem,HybridRenderer.prototype.checkPendingElements=function(){for(;this.pendingElements.length;)this.pendingElements.pop().checkParenting()},HybridRenderer.prototype.appendElementInPos=function(o,t){var e=o.getBaseElement();if(e){var n=this.layers[t];if(n.ddd&&this.supports3d)this.addTo3dContainer(e,t);else if(this.threeDElements)this.addTo3dContainer(e,t);else{for(var i=0,l,d;i<t;)this.elements[i]&&!0!==this.elements[i]&&this.elements[i].getBaseElement&&(d=this.elements[i],l=(this.layers[i].ddd?this.getThreeDContainerByPos(i):d.getBaseElement())||l),i+=1;l?n.ddd&&this.supports3d||this.layerElement.insertBefore(e,l):n.ddd&&this.supports3d||this.layerElement.appendChild(e)}}},HybridRenderer.prototype.createShape=function(e){return this.supports3d?new HShapeElement(e,this.globalData,this):new SVGShapeElement(e,this.globalData,this)},HybridRenderer.prototype.createText=function(e){return this.supports3d?new HTextElement(e,this.globalData,this):new SVGTextElement(e,this.globalData,this)},HybridRenderer.prototype.createCamera=function(e){return this.camera=new HCameraElement(e,this.globalData,this),this.camera},HybridRenderer.prototype.createImage=function(e){return this.supports3d?new HImageElement(e,this.globalData,this):new IImageElement(e,this.globalData,this)},HybridRenderer.prototype.createComp=function(e){return this.supports3d?new HCompElement(e,this.globalData,this):new SVGCompElement(e,this.globalData,this)},HybridRenderer.prototype.createSolid=function(e){return this.supports3d?new HSolidElement(e,this.globalData,this):new ISolidElement(e,this.globalData,this)},HybridRenderer.prototype.createNull=SVGRenderer.prototype.createNull,HybridRenderer.prototype.getThreeDContainerByPos=function(a){for(var t=0,r=this.threeDElements.length;t<r;){if(this.threeDElements[t].startPos<=a&&this.threeDElements[t].endPos>=a)return this.threeDElements[t].perspectiveElem;t+=1}},HybridRenderer.prototype.createThreeDContainer=function(a,t){var e=createTag("div");styleDiv(e);var n=createTag("div");styleDiv(n),"3d"===t&&(e.style.width=this.globalData.compSize.w+"px",e.style.height=this.globalData.compSize.h+"px",e.style.transformOrigin=e.style.mozTransformOrigin=e.style.webkitTransformOrigin="50% 50%",n.style.transform=n.style.webkitTransform="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)"),e.appendChild(n);var i={container:n,perspectiveElem:e,startPos:a,endPos:a,type:t};return this.threeDElements.push(i),i},HybridRenderer.prototype.build3dContainers=function(){var a=this.layers.length,r="",o,s;for(o=0;o<a;o+=1)this.layers[o].ddd&&3!==this.layers[o].ty?("3d"!==r&&(r="3d",s=this.createThreeDContainer(o,"3d")),s.endPos=_Mathmax(s.endPos,o)):("2d"!==r&&(r="2d",s=this.createThreeDContainer(o,"2d")),s.endPos=_Mathmax(s.endPos,o));for(o=(a=this.threeDElements.length)-1;0<=o;o--)this.resizerElem.appendChild(this.threeDElements[o].perspectiveElem)},HybridRenderer.prototype.addTo3dContainer=function(o,t){for(var e=0,s=this.threeDElements.length;e<s;){if(t<=this.threeDElements[e].endPos){for(var i=this.threeDElements[e].startPos,l;i<t;)this.elements[i]&&this.elements[i].getBaseElement&&(l=this.elements[i].getBaseElement()),i+=1;l?this.threeDElements[e].container.insertBefore(o,l):this.threeDElements[e].container.appendChild(o);break}e+=1}},HybridRenderer.prototype.configAnimation=function(a){var t=createTag("div"),e=this.animationItem.wrapper;t.style.width=a.w+"px",t.style.height=a.h+"px",this.resizerElem=t,styleDiv(t),t.style.transformStyle=t.style.webkitTransformStyle=t.style.mozTransformStyle="flat",this.renderConfig.className&&t.setAttribute("class",this.renderConfig.className),e.appendChild(t),t.style.overflow="hidden";var n=createNS("svg");n.setAttribute("width","1"),n.setAttribute("height","1"),styleDiv(n),this.resizerElem.appendChild(n);var i=createNS("defs");n.appendChild(i),this.data=a,this.setupGlobalData(a,n),this.globalData.defs=i,this.layers=a.layers,this.layerElement=this.resizerElem,this.build3dContainers(),this.updateContainerSize()},HybridRenderer.prototype.destroy=function(){this.animationItem.wrapper.innerHTML="",this.animationItem.container=null,this.globalData.defs=null;var a=this.layers?this.layers.length:0,e;for(e=0;e<a;e++)this.elements[e].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},HybridRenderer.prototype.updateContainerSize=function(){var o=this.animationItem.wrapper.offsetWidth,r=this.animationItem.wrapper.offsetHeight,a,s,l,d;this.globalData.compSize.w/this.globalData.compSize.h>o/r?(a=o/this.globalData.compSize.w,s=o/this.globalData.compSize.w,l=0,d=(r-this.globalData.compSize.h*(o/this.globalData.compSize.w))/2):(a=r/this.globalData.compSize.h,s=r/this.globalData.compSize.h,l=(o-this.globalData.compSize.w*(r/this.globalData.compSize.h))/2,d=0),this.resizerElem.style.transform=this.resizerElem.style.webkitTransform="matrix3d("+a+",0,0,0,0,"+s+",0,0,0,0,1,0,"+l+","+d+",0,1)"},HybridRenderer.prototype.renderFrame=SVGRenderer.prototype.renderFrame,HybridRenderer.prototype.hide=function(){this.resizerElem.style.display="none"},HybridRenderer.prototype.show=function(){this.resizerElem.style.display="block"},HybridRenderer.prototype.initItems=function(){if(this.buildAllItems(),this.camera)this.camera.setup();else{var a=this.globalData.compSize.w,e=this.globalData.compSize.h,r=this.threeDElements.length,n;for(n=0;n<r;n+=1)this.threeDElements[n].perspectiveElem.style.perspective=this.threeDElements[n].perspectiveElem.style.webkitPerspective=_Mathsqrt(_Mathpow(a,2)+_Mathpow(e,2))+"px"}},HybridRenderer.prototype.searchExtraCompositions=function(a){var t=a.length,n=createTag("div"),i;for(i=0;i<t;i+=1)if(a[i].xt){var o=this.createComp(a[i],n,this.globalData.comp,null);o.initExpressions(),this.globalData.projectInterface.registerComposition(o)}},MaskElement.prototype.getMaskProperty=function(e){return this.viewData[e].prop},MaskElement.prototype.renderFrame=function(a){var t=this.element.finalTransform.mat,n=this.masksProperties.length,i;for(i=0;i<n;i++)if((this.viewData[i].prop._mdf||a)&&this.drawPath(this.masksProperties[i],this.viewData[i].prop.v,this.viewData[i]),(this.viewData[i].op._mdf||a)&&this.viewData[i].elem.setAttribute("fill-opacity",this.viewData[i].op.v),"n"!==this.masksProperties[i].mode&&(this.viewData[i].invRect&&(this.element.finalTransform.mProp._mdf||a)&&this.viewData[i].invRect.setAttribute("transform",t.getInverseMatrix().to2dCSS()),this.storedData[i].x&&(this.storedData[i].x._mdf||a))){var o=this.storedData[i].expan;0>this.storedData[i].x.v?("erode"!==this.storedData[i].lastOperator&&(this.storedData[i].lastOperator="erode",this.storedData[i].elem.setAttribute("filter","url("+locationHref+"#"+this.storedData[i].filterId+")")),o.setAttribute("radius",-this.storedData[i].x.v)):("dilate"!==this.storedData[i].lastOperator&&(this.storedData[i].lastOperator="dilate",this.storedData[i].elem.setAttribute("filter",null)),this.storedData[i].elem.setAttribute("stroke-width",2*this.storedData[i].x.v))}},MaskElement.prototype.getMaskelement=function(){return this.maskElement},MaskElement.prototype.createLayerSolidPath=function(){var e="M0,0 ";return e+=" h"+this.globalData.compSize.w,e+=" v"+this.globalData.compSize.h,e+=" h-"+this.globalData.compSize.w,e+=" v-"+this.globalData.compSize.h+" "},MaskElement.prototype.drawPath=function(o,t,e){var n=" M"+t.v[0][0]+","+t.v[0][1],l,d;for(d=t._length,l=1;l<d;l+=1)n+=" C"+t.o[l-1][0]+","+t.o[l-1][1]+" "+t.i[l][0]+","+t.i[l][1]+" "+t.v[l][0]+","+t.v[l][1];if(t.c&&1<d&&(n+=" C"+t.o[l-1][0]+","+t.o[l-1][1]+" "+t.i[0][0]+","+t.i[0][1]+" "+t.v[0][0]+","+t.v[0][1]),e.lastPath!==n){var p="";e.elem&&(t.c&&(p=o.inv?this.solidPath+n:n),e.elem.setAttribute("d",p)),e.lastPath=n}},MaskElement.prototype.destroy=function(){this.element=null,this.globalData=null,this.maskElement=null,this.data=null,this.masksProperties=null},HierarchyElement.prototype={initHierarchy:function(){this.hierarchy=[],this._isParent=!1,this.checkParenting()},setHierarchy:function(e){this.hierarchy=e},setAsParent:function(){this._isParent=!0},checkParenting:function(){void 0!==this.data.parent&&this.comp.buildElementParenting(this,this.data.parent,[])}},FrameElement.prototype={initFrame:function(){this._isFirstFrame=!1,this.dynamicProperties=[],this._mdf=!1},prepareProperties:function(a,t){var e=this.dynamicProperties.length,r;for(r=0;r<e;r+=1)(t||this._isParent&&"transform"===this.dynamicProperties[r].propType)&&(this.dynamicProperties[r].getValue(),this.dynamicProperties[r]._mdf&&(this.globalData._mdf=!0,this._mdf=!0))},addDynamicProperty:function(e){-1===this.dynamicProperties.indexOf(e)&&this.dynamicProperties.push(e)}},TransformElement.prototype={initTransform:function(){this.finalTransform={mProp:this.data.ks?TransformPropertyFactory.getTransformProperty(this,this.data.ks,this):{o:0},_matMdf:!1,_opMdf:!1,mat:new Matrix},this.data.ao&&(this.finalTransform.mProp.autoOriented=!0),this.data.ty},renderTransform:function(){if(this.finalTransform._opMdf=this.finalTransform.mProp.o._mdf||this._isFirstFrame,this.finalTransform._matMdf=this.finalTransform.mProp._mdf||this._isFirstFrame,this.hierarchy){var a=this.finalTransform.mat,e=0,r=this.hierarchy.length,i;if(!this.finalTransform._matMdf)for(;e<r;){if(this.hierarchy[e].finalTransform.mProp._mdf){this.finalTransform._matMdf=!0;break}e+=1}if(this.finalTransform._matMdf)for(i=this.finalTransform.mProp.v.props,a.cloneFromProps(i),e=0;e<r;e+=1)i=this.hierarchy[e].finalTransform.mProp.v.props,a.transform(i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7],i[8],i[9],i[10],i[11],i[12],i[13],i[14],i[15])}},globalToLocal:function(o){for(var l=[this.finalTransform],e=!0,d=this.comp;e;)d.finalTransform?(d.data.hasMask&&l.splice(0,0,d.finalTransform),d=d.comp):e=!1;var p=l.length,s,c;for(s=0;s<p;s+=1)c=l[s].mat.applyToPointArray(0,0,0),o=[o[0]-c[0],o[1]-c[1],0];return o},mHelper:new Matrix},RenderableElement.prototype={initRenderable:function(){this.isInRange=!1,this.hidden=!1,this.isTransparent=!1,this.renderableComponents=[]},addRenderableComponent:function(e){-1===this.renderableComponents.indexOf(e)&&this.renderableComponents.push(e)},removeRenderableComponent:function(e){-1!==this.renderableComponents.indexOf(e)&&this.renderableComponents.splice(this.renderableComponents.indexOf(e),1)},prepareRenderableFrame:function(e){this.checkLayerLimits(e)},checkTransparency:function(){0>=this.finalTransform.mProp.o.v?!this.isTransparent&&this.globalData.renderConfig.hideOnTransparent&&(this.isTransparent=!0,this.hide()):this.isTransparent&&(this.isTransparent=!1,this.show())},checkLayerLimits:function(e){this.data.ip-this.data.st<=e&&this.data.op-this.data.st>e?!0!==this.isInRange&&(this.globalData._mdf=!0,this._mdf=!0,this.isInRange=!0,this.show()):!1!==this.isInRange&&(this.globalData._mdf=!0,this.isInRange=!1,this.hide())},renderRenderable:function(){var a=this.renderableComponents.length,e;for(e=0;e<a;e+=1)this.renderableComponents[e].renderFrame(this._isFirstFrame)},sourceRectAtTime:function(){return{top:0,left:0,width:100,height:100}},getLayerSize:function(){return 5===this.data.ty?{w:this.data.textData.width,h:this.data.textData.height}:{w:this.data.width,h:this.data.height}}},extendPrototype([RenderableElement,createProxyFunction({initElement:function(a,t,e){this.initFrame(),this.initBaseData(a,t,e),this.initTransform(a,t,e),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide()},hide:function(){this.hidden||this.isInRange&&!this.isTransparent||((this.baseElement||this.layerElement).style.display="none",this.hidden=!0)},show:function(){this.isInRange&&!this.isTransparent&&(this.data.hd||((this.baseElement||this.layerElement).style.display="block"),this.hidden=!1,this._isFirstFrame=!0)},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},renderInnerContent:function(){},prepareFrame:function(e){this._mdf=!1,this.prepareRenderableFrame(e),this.prepareProperties(e,this.isInRange),this.checkTransparency()},destroy:function(){this.innerElem=null,this.destroyBaseElement()}})],RenderableDOMElement),SVGStyleData.prototype.reset=function(){this.d="",this._mdf=!1},SVGShapeData.prototype.setAsAnimated=function(){this._isAnimated=!0},extendPrototype([DynamicPropertyContainer],SVGStrokeStyleData),extendPrototype([DynamicPropertyContainer],SVGFillStyleData),SVGGradientFillStyleData.prototype.initGradientData=function(a,t,e){this.o=PropertyFactory.getProp(a,t.o,0,.01,this),this.s=PropertyFactory.getProp(a,t.s,1,null,this),this.e=PropertyFactory.getProp(a,t.e,1,null,this),this.h=PropertyFactory.getProp(a,t.h||{k:0},0,.01,this),this.a=PropertyFactory.getProp(a,t.a||{k:0},0,degToRads,this),this.g=new GradientProperty(a,t.g,this),this.style=e,this.stops=[],this.setGradientData(e.pElem,t),this.setGradientOpacity(t,e),this._isAnimated=!!this._isAnimated},SVGGradientFillStyleData.prototype.setGradientData=function(l,t){var e=createElementID(),n=createNS(1===t.t?"linearGradient":"radialGradient");n.setAttribute("id",e),n.setAttribute("spreadMethod","pad"),n.setAttribute("gradientUnits","userSpaceOnUse");var i=[],o,d,p;for(p=4*t.g.p,d=0;d<p;d+=4)o=createNS("stop"),n.appendChild(o),i.push(o);l.setAttribute("gf"===t.ty?"fill":"stroke","url("+locationHref+"#"+e+")"),this.gf=n,this.cst=i},SVGGradientFillStyleData.prototype.setGradientOpacity=function(d,t){if(this.g._hasOpacity&&!this.g._collapsable){var e=createNS("mask"),a=createNS("path"),s,p,c;e.appendChild(a);var m=createElementID(),o=createElementID();e.setAttribute("id",o);var l=createNS(1===d.t?"linearGradient":"radialGradient");l.setAttribute("id",m),l.setAttribute("spreadMethod","pad"),l.setAttribute("gradientUnits","userSpaceOnUse"),c=d.g.k.k[0].s?d.g.k.k[0].s.length:d.g.k.k.length;var g=this.stops;for(p=4*d.g.p;p<c;p+=2)(s=createNS("stop")).setAttribute("stop-color","rgb(255,255,255)"),l.appendChild(s),g.push(s);a.setAttribute("gf"===d.ty?"fill":"stroke","url("+locationHref+"#"+m+")"),this.of=l,this.ms=e,this.ost=g,this.maskId=o,t.msElem=a}},extendPrototype([DynamicPropertyContainer],SVGGradientFillStyleData),extendPrototype([SVGGradientFillStyleData,DynamicPropertyContainer],SVGGradientStrokeStyleData);var SVGElementsRenderer=function(){function l(a,t,e){(e||t.transform.op._mdf)&&t.transform.container.setAttribute("opacity",t.transform.op.v),(e||t.transform.mProps._mdf)&&t.transform.container.setAttribute("transform",t.transform.mProps.v.to2dCSS())}function n(e,n,i){var r=n.styles.length,y=n.lvl,v,_,x,b,E,T,S,M,A,w,P;for(T=0;T<r;T+=1){if(b=n.sh._mdf||i,n.styles[T].lvl<y){for(M=t.reset(),w=y-n.styles[T].lvl,P=n.transformers.length-1;!b&&0<w;)b=n.transformers[P].mProps._mdf||b,w--,P--;if(b)for(w=y-n.styles[T].lvl,P=n.transformers.length-1;0<w;)A=n.transformers[P].mProps.v.props,M.transform(A[0],A[1],A[2],A[3],A[4],A[5],A[6],A[7],A[8],A[9],A[10],A[11],A[12],A[13],A[14],A[15]),w--,P--}else M=g;if(_=(S=n.sh.paths)._length,b){for(x="",v=0;v<_;v+=1)(E=S.shapes[v])&&E._length&&(x+=buildShapeString(E,E._length,E.c,M));n.caches[T]=x}else x=n.caches[T];n.styles[T].d+=!0===e.hd?"":x,n.styles[T]._mdf=b||n.styles[T]._mdf}}function i(a,t,e){var r=t.style;(t.c._mdf||e)&&r.pElem.setAttribute("fill","rgb("+bm_floor(t.c.v[0])+","+bm_floor(t.c.v[1])+","+bm_floor(t.c.v[2])+")"),(t.o._mdf||e)&&r.pElem.setAttribute("fill-opacity",t.o.v)}function r(r,t,e){a(r,t,e),s(r,t,e)}function a(b,t,e){var n=t.gf,l=t.g._hasOpacity,h=t.s.v,u=t.e.v,c,E,T,S,M;if(t.o._mdf||e){var A="gf"===b.ty?"fill-opacity":"stroke-opacity";t.style.pElem.setAttribute(A,t.o.v)}if(t.s._mdf||e){var p=1===b.t?"x1":"cx",f="x1"==p?"y1":"cy";n.setAttribute(p,h[0]),n.setAttribute(f,h[1]),l&&!t.g._collapsable&&(t.of.setAttribute(p,h[0]),t.of.setAttribute(f,h[1]))}if(t.g._cmdf||e){c=t.cst;var d=t.g.c;for(T=c.length,E=0;E<T;E+=1)(S=c[E]).setAttribute("offset",d[4*E]+"%"),S.setAttribute("stop-color","rgb("+d[4*E+1]+","+d[4*E+2]+","+d[4*E+3]+")")}if(l&&(t.g._omdf||e)){var m=t.g.o;for(T=(c=t.g._collapsable?t.cst:t.ost).length,E=0;E<T;E+=1)S=c[E],t.g._collapsable||S.setAttribute("offset",m[2*E]+"%"),S.setAttribute("stop-opacity",m[2*E+1])}if(1===b.t)(t.e._mdf||e)&&(n.setAttribute("x2",u[0]),n.setAttribute("y2",u[1]),l&&!t.g._collapsable&&(t.of.setAttribute("x2",u[0]),t.of.setAttribute("y2",u[1])));else if((t.s._mdf||t.e._mdf||e)&&(M=_Mathsqrt(_Mathpow(h[0]-u[0],2)+_Mathpow(h[1]-u[1],2)),n.setAttribute("r",M),l&&!t.g._collapsable&&t.of.setAttribute("r",M)),t.e._mdf||t.h._mdf||t.a._mdf||e){M||(M=_Mathsqrt(_Mathpow(h[0]-u[0],2)+_Mathpow(h[1]-u[1],2)));var g=_Mathatan(u[1]-h[1],u[0]-h[0]),v=M*(1<=t.h.v?.99:-1>=t.h.v?-.99:t.h.v),y=_Mathcos(g+t.a.v)*v+h[0],_=_Mathsin(g+t.a.v)*v+h[1];n.setAttribute("fx",y),n.setAttribute("fy",_),l&&!t.g._collapsable&&(t.of.setAttribute("fx",y),t.of.setAttribute("fy",_))}}function s(a,t,e){var n=t.style,i=t.d;i&&(i._mdf||e)&&i.dashStr&&(n.pElem.setAttribute("stroke-dasharray",i.dashStr),n.pElem.setAttribute("stroke-dashoffset",i.dashoffset[0])),t.c&&(t.c._mdf||e)&&n.pElem.setAttribute("stroke","rgb("+bm_floor(t.c.v[0])+","+bm_floor(t.c.v[1])+","+bm_floor(t.c.v[2])+")"),(t.o._mdf||e)&&n.pElem.setAttribute("stroke-opacity",t.o.v),(t.w._mdf||e)&&(n.pElem.setAttribute("stroke-width",t.w.v),n.msElem&&n.msElem.setAttribute("stroke-width",t.w.v))}var g=new Matrix,t=new Matrix;return{createRenderFunction:function(e){switch(e.ty,e.ty){case"fl":return i;case"gf":return a;case"gs":return r;case"st":return s;case"sh":case"el":case"rc":case"sr":return n;case"tr":return l;}}}}();ShapeTransformManager.prototype={addTransformSequence:function(a){var t=a.length,n="_",o;for(o=0;o<t;o+=1)n+=a[o].transform.key+"_";var s=this.sequences[n];return s||(s={transforms:[].concat(a),finalTransform:new Matrix,_mdf:!1},this.sequences[n]=s,this.sequenceList.push(s)),s},processSequence:function(o,t){for(var e=0,s=o.transforms.length,r=t,l;e<s&&!t;){if(o.transforms[e].transform.mProps._mdf){r=!0;break}e+=1}if(r)for(o.finalTransform.reset(),e=s-1;0<=e;e-=1)l=o.transforms[e].transform.mProps.v.props,o.finalTransform.transform(l[0],l[1],l[2],l[3],l[4],l[5],l[6],l[7],l[8],l[9],l[10],l[11],l[12],l[13],l[14],l[15]);o._mdf=r},processSequences:function(a){var t=this.sequenceList.length,r;for(r=0;r<t;r+=1)this.processSequence(this.sequenceList[r],a)},getNewKey:function(){return"_"+this.transform_key_count++}},CVShapeData.prototype.setAsAnimated=SVGShapeData.prototype.setAsAnimated,BaseElement.prototype={checkMasks:function(){if(!this.data.hasMask)return!1;for(var a=0,r=this.data.masksProperties.length;a<r;){if("n"!==this.data.masksProperties[a].mode&&!1!==this.data.masksProperties[a].cl)return!0;a+=1}return!1},initExpressions:function(){this.layerInterface=LayerExpressionInterface(this),this.data.hasMask&&this.maskManager&&this.layerInterface.registerMaskInterface(this.maskManager);var e=EffectsExpressionInterface.createEffectsInterface(this,this.layerInterface);this.layerInterface.registerEffectsInterface(e),0===this.data.ty||this.data.xt?this.compInterface=CompExpressionInterface(this):4===this.data.ty?(this.layerInterface.shapeInterface=ShapeExpressionInterface(this.shapesData,this.itemsData,this.layerInterface),this.layerInterface.content=this.layerInterface.shapeInterface):5===this.data.ty&&(this.layerInterface.textInterface=TextExpressionInterface(this),this.layerInterface.text=this.layerInterface.textInterface)},setBlendMode:function(){var e=getBlendMode(this.data.bm);(this.baseElement||this.layerElement).style["mix-blend-mode"]=e},initBaseData:function(a,t,e){this.globalData=t,this.comp=e,this.data=a,this.layerId=createElementID(),this.data.sr||(this.data.sr=1),this.effectsManager=new EffectsManager(this.data,this,this.dynamicProperties)},getType:function(){return this.type},sourceRectAtTime:function(){}},NullElement.prototype.prepareFrame=function(e){this.prepareProperties(e,!0)},NullElement.prototype.renderFrame=function(){},NullElement.prototype.getBaseElement=function(){return null},NullElement.prototype.destroy=function(){},NullElement.prototype.sourceRectAtTime=function(){},NullElement.prototype.hide=function(){},extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement],NullElement),SVGBaseElement.prototype={initRendererElement:function(){this.layerElement=createNS("g")},createContainerElements:function(){this.matteElement=createNS("g"),this.transformedElement=this.layerElement,this.maskedElement=this.layerElement,this._sizeChanged=!1;var d=null,m,g,y;if(!this.data.td)this.data.tt?(this.matteElement.appendChild(this.layerElement),d=this.matteElement,this.baseElement=this.matteElement):this.baseElement=this.layerElement;else if(3==this.data.td||1==this.data.td){var v=createNS("mask");v.setAttribute("id",this.layerId),v.setAttribute("mask-type",3==this.data.td?"luminance":"alpha"),v.appendChild(this.layerElement),d=v,this.globalData.defs.appendChild(v),featureSupport.maskType||1!=this.data.td||(v.setAttribute("mask-type","luminance"),m=createElementID(),g=filtersFactory.createFilter(m),this.globalData.defs.appendChild(g),g.appendChild(filtersFactory.createAlphaToLuminanceFilter()),(y=createNS("g")).appendChild(this.layerElement),d=y,v.appendChild(y),y.setAttribute("filter","url("+locationHref+"#"+m+")"))}else if(2==this.data.td){var r=createNS("mask");r.setAttribute("id",this.layerId),r.setAttribute("mask-type","alpha");var a=createNS("g");r.appendChild(a),m=createElementID(),g=filtersFactory.createFilter(m);var s=createNS("feComponentTransfer");s.setAttribute("in","SourceGraphic"),g.appendChild(s);var o=createNS("feFuncA");o.setAttribute("type","table"),o.setAttribute("tableValues","1.0 0.0"),s.appendChild(o),this.globalData.defs.appendChild(g);var l=createNS("rect");l.setAttribute("width",this.comp.data.w),l.setAttribute("height",this.comp.data.h),l.setAttribute("x","0"),l.setAttribute("y","0"),l.setAttribute("fill","#ffffff"),l.setAttribute("opacity","0"),a.setAttribute("filter","url("+locationHref+"#"+m+")"),a.appendChild(l),a.appendChild(this.layerElement),d=a,featureSupport.maskType||(r.setAttribute("mask-type","luminance"),g.appendChild(filtersFactory.createAlphaToLuminanceFilter()),y=createNS("g"),a.appendChild(l),y.appendChild(this.layerElement),d=y,a.appendChild(y)),this.globalData.defs.appendChild(r)}if(this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),0===this.data.ty&&!this.data.hd){var h=createNS("clipPath"),u=createNS("path");u.setAttribute("d","M0,0 L"+this.data.w+",0 L"+this.data.w+","+this.data.h+" L0,"+this.data.h+"z");var c=createElementID();if(h.setAttribute("id",c),h.appendChild(u),this.globalData.defs.appendChild(h),this.checkMasks()){var p=createNS("g");p.setAttribute("clip-path","url("+locationHref+"#"+c+")"),p.appendChild(this.layerElement),this.transformedElement=p,d?d.appendChild(this.transformedElement):this.baseElement=this.transformedElement}else this.layerElement.setAttribute("clip-path","url("+locationHref+"#"+c+")")}0!==this.data.bm&&this.setBlendMode()},renderElement:function(){this.finalTransform._matMdf&&this.transformedElement.setAttribute("transform",this.finalTransform.mat.to2dCSS()),this.finalTransform._opMdf&&this.transformedElement.setAttribute("opacity",this.finalTransform.mProp.o.v)},destroyBaseElement:function(){this.layerElement=null,this.matteElement=null,this.maskManager.destroy()},getBaseElement:function(){return this.data.hd?null:this.baseElement},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData),this.renderableEffectsManager=new SVGEffects(this)},setMatte:function(e){this.matteElement&&this.matteElement.setAttribute("mask","url("+locationHref+"#"+e+")")}},IShapeElement.prototype={addShapeToModifiers:function(a){var t=this.shapeModifiers.length,r;for(r=0;r<t;r+=1)this.shapeModifiers[r].addShape(a)},isShapeInAnimatedModifiers:function(a){for(var t=this.shapeModifiers.length;0<t;)if(this.shapeModifiers[0].isAnimatedWithShape(a))return!0;return!1},renderModifiers:function(){if(this.shapeModifiers.length){var a=this.shapes.length,r;for(r=0;r<a;r+=1)this.shapes[r].sh.reset();for(r=(a=this.shapeModifiers.length)-1;0<=r;r-=1)this.shapeModifiers[r].processShapes(this._isFirstFrame)}},lcEnum:{1:"butt",2:"round",3:"square"},ljEnum:{1:"miter",2:"round",3:"bevel"},searchProcessedElement:function(a){for(var t=this.processedElements,e=0,r=t.length;e<r;){if(t[e].elem===a)return t[e].pos;e+=1}return 0},addProcessedElement:function(a,t){for(var e=this.processedElements,r=e.length;r;)if(e[r-=1].elem===a)return void(e[r].pos=t);e.push(new ProcessedElement(a,t))},prepareFrame:function(e){this.prepareRenderableFrame(e),this.prepareProperties(e,this.isInRange)}},ITextElement.prototype.initElement=function(a,t,e){this.lettersChangedFlag=!0,this.initFrame(),this.initBaseData(a,t,e),this.textProperty=new TextProperty(this,a.t,this.dynamicProperties),this.textAnimator=new TextAnimatorProperty(a.t,this.renderType,this),this.initTransform(a,t,e),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide(),this.textAnimator.searchProperties(this.dynamicProperties)},ITextElement.prototype.prepareFrame=function(e){this._mdf=!1,this.prepareRenderableFrame(e),this.prepareProperties(e,this.isInRange),(this.textProperty._mdf||this.textProperty._isFirstFrame)&&(this.buildNewText(),this.textProperty._isFirstFrame=!1,this.textProperty._mdf=!1)},ITextElement.prototype.createPathShape=function(o,t){var e=t.length,r="",s,l;for(s=0;s<e;s+=1)l=t[s].ks.k,r+=buildShapeString(l,l.i.length,!0,o);return r},ITextElement.prototype.updateDocumentData=function(a,t){this.textProperty.updateDocumentData(a,t)},ITextElement.prototype.canResizeFont=function(e){this.textProperty.canResizeFont(e)},ITextElement.prototype.setMinimumFontSize=function(e){this.textProperty.setMinimumFontSize(e)},ITextElement.prototype.applyTextPropertiesToMatrix=function(a,t,e,n,i){switch(a.ps&&t.translate(a.ps[0],a.ps[1]+a.ascent,0),t.translate(0,-a.ls,0),a.j){case 1:t.translate(a.justifyOffset+(a.boxWidth-a.lineWidths[e]),0,0);break;case 2:t.translate(a.justifyOffset+(a.boxWidth-a.lineWidths[e])/2,0,0);}t.translate(n,i,0)},ITextElement.prototype.buildColor=function(e){return"rgb("+_Mathround(255*e[0])+","+_Mathround(255*e[1])+","+_Mathround(255*e[2])+")"},ITextElement.prototype.emptyProp=new LetterProps,ITextElement.prototype.destroy=function(){},extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement,RenderableDOMElement],ICompElement),ICompElement.prototype.initElement=function(a,t,e){this.initFrame(),this.initBaseData(a,t,e),this.initTransform(a,t,e),this.initRenderable(),this.initHierarchy(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),!this.data.xt&&t.progressiveLoad||this.buildAllItems(),this.hide()},ICompElement.prototype.prepareFrame=function(a){if(this._mdf=!1,this.prepareRenderableFrame(a),this.prepareProperties(a,this.isInRange),this.isInRange||this.data.xt){if(this.tm._placeholder)this.renderedFrame=a/this.data.sr;else{var t=this.tm.v;t===this.data.op&&(t=this.data.op-1),this.renderedFrame=t}var r=this.elements.length,i;for(this.completeLayers||this.checkLayers(this.renderedFrame),i=r-1;0<=i;i-=1)(this.completeLayers||this.elements[i])&&(this.elements[i].prepareFrame(this.renderedFrame-this.layers[i].st),this.elements[i]._mdf&&(this._mdf=!0))}},ICompElement.prototype.renderInnerContent=function(){var a=this.layers.length,e;for(e=0;e<a;e+=1)(this.completeLayers||this.elements[e])&&this.elements[e].renderFrame()},ICompElement.prototype.setElements=function(e){this.elements=e},ICompElement.prototype.getElements=function(){return this.elements},ICompElement.prototype.destroyElements=function(){var a=this.layers.length,e;for(e=0;e<a;e+=1)this.elements[e]&&this.elements[e].destroy()},ICompElement.prototype.destroy=function(){this.destroyElements(),this.destroyBaseElement()},extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],IImageElement),IImageElement.prototype.createContent=function(){var e=this.globalData.getAssetsPath(this.assetData);this.innerElem=createNS("image"),this.innerElem.setAttribute("width",this.assetData.w+"px"),this.innerElem.setAttribute("height",this.assetData.h+"px"),this.innerElem.setAttribute("preserveAspectRatio",this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio),this.innerElem.setAttributeNS("http://www.w3.org/1999/xlink","href",e),this.layerElement.appendChild(this.innerElem)},IImageElement.prototype.sourceRectAtTime=function(){return this.sourceRect},extendPrototype([IImageElement],ISolidElement),ISolidElement.prototype.createContent=function(){var e=createNS("rect");e.setAttribute("width",this.data.sw),e.setAttribute("height",this.data.sh),e.setAttribute("fill",this.data.sc),this.layerElement.appendChild(e)},extendPrototype([SVGRenderer,ICompElement,SVGBaseElement],SVGCompElement),extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],SVGTextElement),SVGTextElement.prototype.createContent=function(){this.data.singleShape&&!this.globalData.fontManager.chars&&(this.textContainer=createNS("text"))},SVGTextElement.prototype.buildTextContents=function(a){for(var t=0,o=a.length,n=[],i="";t<o;)a[t]===_StringfromCharCode(13)||a[t]===_StringfromCharCode(3)?(n.push(i),i=""):i+=a[t],t+=1;return n.push(i),n},SVGTextElement.prototype.buildNewText=function(){var T=this.textProperty.currentData,n,S;this.renderedLetters=createSizedArray(T?T.l.length:0),T.fc?this.layerElement.setAttribute("fill",this.buildColor(T.fc)):this.layerElement.setAttribute("fill","rgba(0,0,0,0)"),T.sc&&(this.layerElement.setAttribute("stroke",this.buildColor(T.sc)),this.layerElement.setAttribute("stroke-width",T.sw)),this.layerElement.setAttribute("font-size",T.finalSize);var M=this.globalData.fontManager.getFontByName(T.f);if(M.fClass)this.layerElement.setAttribute("class",M.fClass);else{this.layerElement.setAttribute("font-family",M.fFamily);var i=T.fWeight,r=T.fStyle;this.layerElement.setAttribute("font-style",r),this.layerElement.setAttribute("font-weight",i)}this.layerElement.setAttribute("aria-label",T.t);var a=T.l||[],o=!!this.globalData.fontManager.chars,l;S=a.length;var A=this.mHelper,u="",w=this.data.singleShape,p=0,P=0,C=!0,D=T.tr/1e3*T.finalSize,g;if(!w||o||T.sz){var L=this.textSpans.length,_,R;for(n=0;n<S;n+=1)o&&w&&0!==n||(l=L>n?this.textSpans[n]:createNS(o?"path":"text"),L<=n&&(l.setAttribute("stroke-linecap","butt"),l.setAttribute("stroke-linejoin","round"),l.setAttribute("stroke-miterlimit","4"),this.textSpans[n]=l,this.layerElement.appendChild(l)),l.style.display="inherit"),A.reset(),A.scale(T.finalSize/100,T.finalSize/100),w&&(a[n].n&&(p=-D,P+=T.yOffset,P+=C?1:0,C=!1),this.applyTextPropertiesToMatrix(T,A,a[n].line,p,P),p+=a[n].l||0,p+=D),o?(g=(_=(R=this.globalData.fontManager.getCharData(T.finalText[n],M.fStyle,this.globalData.fontManager.getFontByName(T.f).fFamily))&&R.data||{}).shapes?_.shapes[0].it:[],w?u+=this.createPathShape(A,g):l.setAttribute("d",this.createPathShape(A,g))):(w&&l.setAttribute("transform","translate("+A.props[12]+","+A.props[13]+")"),l.textContent=a[n].val,l.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"));w&&l&&l.setAttribute("d",u)}else{var k=this.textContainer,x="start";switch(T.j){case 1:x="end";break;case 2:x="middle";}k.setAttribute("text-anchor",x),k.setAttribute("letter-spacing",D);var F=this.buildTextContents(T.finalText);for(S=F.length,P=T.ps?T.ps[1]+T.ascent:0,n=0;n<S;n+=1)(l=this.textSpans[n]||createNS("tspan")).textContent=F[n],l.setAttribute("x",0),l.setAttribute("y",P),l.style.display="inherit",k.appendChild(l),this.textSpans[n]=l,P+=T.finalLineHeight;this.layerElement.appendChild(k)}for(;n<this.textSpans.length;)this.textSpans[n].style.display="none",n+=1;this._sizeChanged=!0},SVGTextElement.prototype.sourceRectAtTime=function(){if(this.prepareFrame(this.comp.renderedFrame-this.data.st),this.renderInnerContent(),this._sizeChanged){this._sizeChanged=!1;var t=this.layerElement.getBBox();this.bbox={top:t.y,left:t.x,width:t.width,height:t.height}}return this.bbox},SVGTextElement.prototype.renderInnerContent=function(){if(!this.data.singleShape&&(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),this.lettersChangedFlag||this.textAnimator.lettersChangedFlag)){var o,s;this._sizeChanged=!0;var l=this.textAnimator.renderedLetters,r=this.textProperty.currentData.l,a,d;for(s=r.length,o=0;o<s;o+=1)r[o].n||(a=l[o],d=this.textSpans[o],a._mdf.m&&d.setAttribute("transform",a.m),a._mdf.o&&d.setAttribute("opacity",a.o),a._mdf.sw&&d.setAttribute("stroke-width",a.sw),a._mdf.sc&&d.setAttribute("stroke",a.sc),a._mdf.fc&&d.setAttribute("fill",a.fc))}},extendPrototype([BaseElement,TransformElement,SVGBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableDOMElement],SVGShapeElement),SVGShapeElement.prototype.initSecondaryElement=function(){},SVGShapeElement.prototype.identityMatrix=new Matrix,SVGShapeElement.prototype.buildExpressionInterface=function(){},SVGShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes()},SVGShapeElement.prototype.filterUniqueShapes=function(){var l=this.shapes.length,r=this.stylesList.length,a=[],s=!1,d,p,c,m;for(c=0;c<r;c+=1){for(m=this.stylesList[c],s=!1,a.length=0,d=0;d<l;d+=1)-1!==(p=this.shapes[d]).styles.indexOf(m)&&(a.push(p),s=p._isAnimated||s);1<a.length&&s&&this.setShapesAsAnimated(a)}},SVGShapeElement.prototype.setShapesAsAnimated=function(a){var t=a.length,r;for(r=0;r<t;r+=1)a[r].setAsAnimated()},SVGShapeElement.prototype.createStyleElement=function(a,t){var e=new SVGStyleData(a,t),i=e.pElem,r;return"st"===a.ty?r=new SVGStrokeStyleData(this,a,e):"fl"===a.ty?r=new SVGFillStyleData(this,a,e):("gf"===a.ty||"gs"===a.ty)&&(r=new("gf"===a.ty?SVGGradientFillStyleData:SVGGradientStrokeStyleData)(this,a,e),this.globalData.defs.appendChild(r.gf),r.maskId&&(this.globalData.defs.appendChild(r.ms),this.globalData.defs.appendChild(r.of),i.setAttribute("mask","url("+locationHref+"#"+r.maskId+")"))),"st"!==a.ty&&"gs"!==a.ty||(i.setAttribute("stroke-linecap",this.lcEnum[a.lc]||"round"),i.setAttribute("stroke-linejoin",this.ljEnum[a.lj]||"round"),i.setAttribute("fill-opacity","0"),1===a.lj&&i.setAttribute("stroke-miterlimit",a.ml)),2===a.r&&i.setAttribute("fill-rule","evenodd"),a.ln&&i.setAttribute("id",a.ln),a.cl&&i.setAttribute("class",a.cl),a.bm&&(i.style["mix-blend-mode"]=getBlendMode(a.bm)),this.stylesList.push(e),this.addToAnimatedContents(a,r),r},SVGShapeElement.prototype.createGroupElement=function(a){var t=new ShapeGroupData;return a.ln&&t.gr.setAttribute("id",a.ln),a.cl&&t.gr.setAttribute("class",a.cl),a.bm&&(t.gr.style["mix-blend-mode"]=getBlendMode(a.bm)),t},SVGShapeElement.prototype.createTransformElement=function(a,t){var e=TransformPropertyFactory.getTransformProperty(this,a,this),r=new SVGTransformData(e,e.o,t);return this.addToAnimatedContents(a,r),r},SVGShapeElement.prototype.createShapeElement=function(a,t,e){var n=4;"rc"===a.ty?n=5:"el"===a.ty?n=6:"sr"===a.ty&&(n=7);var o=new SVGShapeData(t,e,ShapePropertyFactory.getShapeProp(this,a,n,this));return this.shapes.push(o),this.addShapeToModifiers(o),this.addToAnimatedContents(a,o),o},SVGShapeElement.prototype.addToAnimatedContents=function(a,t){for(var e=0,r=this.animatedContents.length;e<r;){if(this.animatedContents[e].element===t)return;e+=1}this.animatedContents.push({fn:SVGElementsRenderer.createRenderFunction(a),element:t,data:a})},SVGShapeElement.prototype.setElementStyles=function(a){var t=a.styles,r=this.stylesList.length,n;for(n=0;n<r;n+=1)this.stylesList[n].closed||t.push(this.stylesList[n])},SVGShapeElement.prototype.reloadShapes=function(){this._isFirstFrame=!0;var a=this.itemsData.length,r;for(r=0;r<a;r+=1)this.prevViewData[r]=this.itemsData[r];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes(),a=this.dynamicProperties.length,r=0;r<a;r+=1)this.dynamicProperties[r].getValue();this.renderModifiers()},SVGShapeElement.prototype.searchShapes=function(y,t,e,n,i,r,a){var v=[].concat(r),f=y.length-1,_=[],m=[],g,x,b,E,T,S;for(g=f;0<=g;g-=1){if((S=this.searchProcessedElement(y[g]))?t[g]=e[S-1]:y[g]._render=a,"fl"==y[g].ty||"st"==y[g].ty||"gf"==y[g].ty||"gs"==y[g].ty)S?t[g].style.closed=!1:t[g]=this.createStyleElement(y[g],i),y[g]._render&&n.appendChild(t[g].style.pElem),_.push(t[g].style);else if("gr"==y[g].ty){if(S)for(b=t[g].it.length,x=0;x<b;x+=1)t[g].prevViewData[x]=t[g].it[x];else t[g]=this.createGroupElement(y[g]);this.searchShapes(y[g].it,t[g].it,t[g].prevViewData,t[g].gr,i+1,v,a),y[g]._render&&n.appendChild(t[g].gr)}else"tr"==y[g].ty?(S||(t[g]=this.createTransformElement(y[g],n)),E=t[g].transform,v.push(E)):"sh"==y[g].ty||"rc"==y[g].ty||"el"==y[g].ty||"sr"==y[g].ty?(S||(t[g]=this.createShapeElement(y[g],v,i)),this.setElementStyles(t[g])):"tm"==y[g].ty||"rd"==y[g].ty||"ms"==y[g].ty?(S?(T=t[g]).closed=!1:((T=ShapeModifiers.getModifier(y[g].ty)).init(this,y[g]),t[g]=T,this.shapeModifiers.push(T)),m.push(T)):"rp"==y[g].ty&&(S?(T=t[g]).closed=!0:(T=ShapeModifiers.getModifier(y[g].ty),t[g]=T,T.init(this,y,g,t),this.shapeModifiers.push(T),a=!1),m.push(T));this.addProcessedElement(y[g],g+1)}for(f=_.length,g=0;g<f;g+=1)_[g].closed=!0;for(f=m.length,g=0;g<f;g+=1)m[g].closed=!0},SVGShapeElement.prototype.renderInnerContent=function(){this.renderModifiers();var a=this.stylesList.length,e;for(e=0;e<a;e+=1)this.stylesList[e].reset();for(this.renderShape(),e=0;e<a;e+=1)(this.stylesList[e]._mdf||this._isFirstFrame)&&(this.stylesList[e].msElem&&(this.stylesList[e].msElem.setAttribute("d",this.stylesList[e].d),this.stylesList[e].d="M0 0"+this.stylesList[e].d),this.stylesList[e].pElem.setAttribute("d",this.stylesList[e].d||"M0 0"))},SVGShapeElement.prototype.renderShape=function(){var a=this.animatedContents.length,r,n;for(r=0;r<a;r+=1)n=this.animatedContents[r],(this._isFirstFrame||n.element._isAnimated)&&!0!==n.data&&n.fn(n.data,n.element,this._isFirstFrame)},SVGShapeElement.prototype.destroy=function(){this.destroyBaseElement(),this.shapesData=null,this.itemsData=null},SVGTintFilter.prototype.renderFrame=function(a){if(a||this.filterManager._mdf){var t=this.filterManager.effectElements[0].p.v,e=this.filterManager.effectElements[1].p.v,r=this.filterManager.effectElements[2].p.v/100;this.matrixFilter.setAttribute("values",e[0]-t[0]+" 0 0 0 "+t[0]+" "+(e[1]-t[1])+" 0 0 0 "+t[1]+" "+(e[2]-t[2])+" 0 0 0 "+t[2]+" 0 0 0 "+r+" 0")}},SVGFillFilter.prototype.renderFrame=function(a){if(a||this.filterManager._mdf){var t=this.filterManager.effectElements[2].p.v,e=this.filterManager.effectElements[6].p.v;this.matrixFilter.setAttribute("values","0 0 0 0 "+t[0]+" 0 0 0 0 "+t[1]+" 0 0 0 0 "+t[2]+" 0 0 0 "+e+" 0")}},SVGGaussianBlurEffect.prototype.renderFrame=function(o){if(o||this.filterManager._mdf){var t=.3*this.filterManager.effectElements[0].p.v,e=this.filterManager.effectElements[1].p.v,n=3==e?0:t,i=2==e?0:t;this.feGaussianBlur.setAttribute("stdDeviation",n+" "+i);var r=1==this.filterManager.effectElements[2].p.v?"wrap":"duplicate";this.feGaussianBlur.setAttribute("edgeMode",r)}},SVGStrokeEffect.prototype.initialize=function(){var l=this.elem.layerElement.children||this.elem.layerElement.childNodes,d,p,c,m;for(1===this.filterManager.effectElements[1].p.v?(m=this.elem.maskManager.masksProperties.length,c=0):m=(c=this.filterManager.effectElements[0].p.v-1)+1,(p=createNS("g")).setAttribute("fill","none"),p.setAttribute("stroke-linecap","round"),p.setAttribute("stroke-dashoffset",1);c<m;c+=1)d=createNS("path"),p.appendChild(d),this.paths.push({p:d,m:c});if(3===this.filterManager.effectElements[10].p.v){var u=createNS("mask"),a=createElementID();u.setAttribute("id",a),u.setAttribute("mask-type","alpha"),u.appendChild(p),this.elem.globalData.defs.appendChild(u);var s=createNS("g");for(s.setAttribute("mask","url("+locationHref+"#"+a+")");l[0];)s.appendChild(l[0]);this.elem.layerElement.appendChild(s),this.masker=u,p.setAttribute("stroke","#fff")}else if(1===this.filterManager.effectElements[10].p.v||2===this.filterManager.effectElements[10].p.v){if(2===this.filterManager.effectElements[10].p.v)for(l=this.elem.layerElement.children||this.elem.layerElement.childNodes;l.length;)this.elem.layerElement.removeChild(l[0]);this.elem.layerElement.appendChild(p),this.elem.layerElement.removeAttribute("mask"),p.setAttribute("stroke","#fff")}this.initialized=!0,this.pathMasker=p},SVGStrokeEffect.prototype.renderFrame=function(d){this.initialized||this.initialize();var t=this.paths.length,r,m,u;for(r=0;r<t;r+=1)if(-1!==this.paths[r].m&&(m=this.elem.maskManager.viewData[this.paths[r].m],u=this.paths[r].p,(d||this.filterManager._mdf||m.prop._mdf)&&u.setAttribute("d",m.lastPath),d||this.filterManager.effectElements[9].p._mdf||this.filterManager.effectElements[4].p._mdf||this.filterManager.effectElements[7].p._mdf||this.filterManager.effectElements[8].p._mdf||m.prop._mdf)){var g;if(0!==this.filterManager.effectElements[7].p.v||100!==this.filterManager.effectElements[8].p.v){var y=_Mathmin(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v)/100,s=_Mathmax(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v)/100,o=u.getTotalLength();g="0 0 0 "+o*y+" ";var l=1+2*this.filterManager.effectElements[4].p.v*this.filterManager.effectElements[9].p.v/100,c=_Mathfloor(o*(s-y)/l),p;for(p=0;p<c;p+=1)g+="1 "+2*this.filterManager.effectElements[4].p.v*this.filterManager.effectElements[9].p.v/100+" ";g+="0 "+10*o+" 0 0"}else g="1 "+2*this.filterManager.effectElements[4].p.v*this.filterManager.effectElements[9].p.v/100;u.setAttribute("stroke-dasharray",g)}if((d||this.filterManager.effectElements[4].p._mdf)&&this.pathMasker.setAttribute("stroke-width",2*this.filterManager.effectElements[4].p.v),(d||this.filterManager.effectElements[6].p._mdf)&&this.pathMasker.setAttribute("opacity",this.filterManager.effectElements[6].p.v),(1===this.filterManager.effectElements[10].p.v||2===this.filterManager.effectElements[10].p.v)&&(d||this.filterManager.effectElements[3].p._mdf)){var v=this.filterManager.effectElements[3].p.v;this.pathMasker.setAttribute("stroke","rgb("+bm_floor(255*v[0])+","+bm_floor(255*v[1])+","+bm_floor(255*v[2])+")")}},SVGTritoneFilter.prototype.renderFrame=function(o){if(o||this.filterManager._mdf){var t=this.filterManager.effectElements[0].p.v,e=this.filterManager.effectElements[1].p.v,n=this.filterManager.effectElements[2].p.v,i=n[0]+" "+e[0]+" "+t[0],r=n[1]+" "+e[1]+" "+t[1],a=n[2]+" "+e[2]+" "+t[2];this.feFuncR.setAttribute("tableValues",i),this.feFuncG.setAttribute("tableValues",r),this.feFuncB.setAttribute("tableValues",a)}},SVGProLevelsFilter.prototype.createFeFunc=function(a,t){var e=createNS(a);return e.setAttribute("type","table"),t.appendChild(e),e},SVGProLevelsFilter.prototype.getTableValue=function(d,t,e,n,i){for(var r=0,p=_Mathmin(d,t),l=_Mathmax(d,t),m=Array.call(null,{length:256}),u=0,g=t-d,f,h;256>=r;)h=(f=r/256)<=p?0>g?i:n:f>=l?0>g?n:i:n+(i-n)*_Mathpow((f-d)/g,1/e),m[u++]=h,r+=256/255;return m.join(" ")},SVGProLevelsFilter.prototype.renderFrame=function(a){if(a||this.filterManager._mdf){var t=this.filterManager.effectElements,r;this.feFuncRComposed&&(a||t[3].p._mdf||t[4].p._mdf||t[5].p._mdf||t[6].p._mdf||t[7].p._mdf)&&(r=this.getTableValue(t[3].p.v,t[4].p.v,t[5].p.v,t[6].p.v,t[7].p.v),this.feFuncRComposed.setAttribute("tableValues",r),this.feFuncGComposed.setAttribute("tableValues",r),this.feFuncBComposed.setAttribute("tableValues",r)),this.feFuncR&&(a||t[10].p._mdf||t[11].p._mdf||t[12].p._mdf||t[13].p._mdf||t[14].p._mdf)&&(r=this.getTableValue(t[10].p.v,t[11].p.v,t[12].p.v,t[13].p.v,t[14].p.v),this.feFuncR.setAttribute("tableValues",r)),this.feFuncG&&(a||t[17].p._mdf||t[18].p._mdf||t[19].p._mdf||t[20].p._mdf||t[21].p._mdf)&&(r=this.getTableValue(t[17].p.v,t[18].p.v,t[19].p.v,t[20].p.v,t[21].p.v),this.feFuncG.setAttribute("tableValues",r)),this.feFuncB&&(a||t[24].p._mdf||t[25].p._mdf||t[26].p._mdf||t[27].p._mdf||t[28].p._mdf)&&(r=this.getTableValue(t[24].p.v,t[25].p.v,t[26].p.v,t[27].p.v,t[28].p.v),this.feFuncB.setAttribute("tableValues",r)),this.feFuncA&&(a||t[31].p._mdf||t[32].p._mdf||t[33].p._mdf||t[34].p._mdf||t[35].p._mdf)&&(r=this.getTableValue(t[31].p.v,t[32].p.v,t[33].p.v,t[34].p.v,t[35].p.v),this.feFuncA.setAttribute("tableValues",r))}},SVGDropShadowEffect.prototype.renderFrame=function(o){if(o||this.filterManager._mdf){if((o||this.filterManager.effectElements[4].p._mdf)&&this.feGaussianBlur.setAttribute("stdDeviation",this.filterManager.effectElements[4].p.v/4),o||this.filterManager.effectElements[0].p._mdf){var t=this.filterManager.effectElements[0].p.v;this.feFlood.setAttribute("flood-color",rgbToHex(_Mathround(255*t[0]),_Mathround(255*t[1]),_Mathround(255*t[2])))}if((o||this.filterManager.effectElements[1].p._mdf)&&this.feFlood.setAttribute("flood-opacity",this.filterManager.effectElements[1].p.v/255),o||this.filterManager.effectElements[2].p._mdf||this.filterManager.effectElements[3].p._mdf){var e=this.filterManager.effectElements[3].p.v,n=(this.filterManager.effectElements[2].p.v-90)*degToRads,i=e*_Mathcos(n),r=e*_Mathsin(n);this.feOffset.setAttribute("dx",i),this.feOffset.setAttribute("dy",r)}}};var _svgMatteSymbols=[];SVGMatte3Effect.prototype.findSymbol=function(a){for(var t=0,r=_svgMatteSymbols.length;t<r;){if(_svgMatteSymbols[t]===a)return _svgMatteSymbols[t];t+=1}return null},SVGMatte3Effect.prototype.replaceInParent=function(l,t){var e=l.layerElement.parentNode;if(e){for(var n=e.children,r=0,d=n.length,s;r<d&&n[r]!==l.layerElement;)r+=1;r<=d-2&&(s=n[r+1]);var p=createNS("use");p.setAttribute("href","#"+t),s?e.insertBefore(p,s):e.appendChild(p)}},SVGMatte3Effect.prototype.setElementAsMask=function(o,t){if(!this.findSymbol(t)){var e=createElementID(),n=createNS("mask");n.setAttribute("id",t.layerId),n.setAttribute("mask-type","alpha"),_svgMatteSymbols.push(t);var i=o.globalData.defs;i.appendChild(n);var r=createNS("symbol");r.setAttribute("id",e),this.replaceInParent(t,e),r.appendChild(t.layerElement),i.appendChild(r);var a=createNS("use");a.setAttribute("href","#"+e),n.appendChild(a),t.data.hd=!1,t.show()}o.setMatte(t.layerId)},SVGMatte3Effect.prototype.initialize=function(){for(var a=this.filterManager.effectElements[0].p.v,t=this.elem.comp.elements,e=0,r=t.length;e<r;)t[e]&&t[e].data.ind===a&&this.setElementAsMask(this.elem,t[e]),e+=1;this.initialized=!0},SVGMatte3Effect.prototype.renderFrame=function(){this.initialized||this.initialize()},SVGEffects.prototype.renderFrame=function(a){var t=this.filters.length,r;for(r=0;r<t;r+=1)this.filters[r].renderFrame(a)},CVContextData.prototype.duplicate=function(){var a=2*this._length,t=this.savedOp;this.savedOp=createTypedArray("float32",a),this.savedOp.set(t);var e=0;for(e=this._length;e<a;e+=1)this.saved[e]=createTypedArray("float32",16);this._length=a},CVContextData.prototype.reset=function(){this.cArrPos=0,this.cTr.reset(),this.cO=1},CVBaseElement.prototype={createElements:function(){},initRendererElement:function(){},createContainerElements:function(){this.canvasContext=this.globalData.canvasContext,this.renderableEffectsManager=new CVEffects(this)},createContent:function(){},setBlendMode:function(){var a=this.globalData;if(a.blendMode!==this.data.bm){a.blendMode=this.data.bm;var t=getBlendMode(this.data.bm);a.canvasContext.globalCompositeOperation=t}},createRenderableComponents:function(){this.maskManager=new CVMaskElement(this.data,this)},hideElement:function(){this.hidden||this.isInRange&&!this.isTransparent||(this.hidden=!0)},showElement:function(){this.isInRange&&!this.isTransparent&&(this.hidden=!1,this._isFirstFrame=!0,this.maskManager._isFirstFrame=!0)},renderFrame:function(){if(!this.hidden&&!this.data.hd){this.renderTransform(),this.renderRenderable(),this.setBlendMode();var e=0===this.data.ty;this.globalData.renderer.save(e),this.globalData.renderer.ctxTransform(this.finalTransform.mat.props),this.globalData.renderer.ctxOpacity(this.finalTransform.mProp.o.v),this.renderInnerContent(),this.globalData.renderer.restore(e),this.maskManager.hasMasks&&this.globalData.renderer.restore(!0),this._isFirstFrame&&(this._isFirstFrame=!1)}},destroy:function(){this.canvasContext=null,this.data=null,this.globalData=null,this.maskManager.destroy()},mHelper:new Matrix},CVBaseElement.prototype.hide=CVBaseElement.prototype.hideElement,CVBaseElement.prototype.show=CVBaseElement.prototype.showElement,extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVImageElement),CVImageElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVImageElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVImageElement.prototype.createContent=function(){if(this.img.width&&(this.assetData.w!==this.img.width||this.assetData.h!==this.img.height)){var d=createTag("canvas");d.width=this.assetData.w,d.height=this.assetData.h;var t=d.getContext("2d"),i=this.img.width,r=this.img.height,a=i/r,s=this.assetData.w/this.assetData.h,o=this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio,l,p;a>s&&"xMidYMid slice"===o||a<s&&"xMidYMid slice"!==o?l=(p=r)*s:p=(l=i)/s,t.drawImage(this.img,(i-l)/2,(r-p)/2,l,p,0,0,this.assetData.w,this.assetData.h),this.img=d}},CVImageElement.prototype.renderInnerContent=function(){this.canvasContext.drawImage(this.img,0,0)},CVImageElement.prototype.destroy=function(){this.img=null},extendPrototype([CanvasRenderer,ICompElement,CVBaseElement],CVCompElement),CVCompElement.prototype.renderInnerContent=function(){var a=this.canvasContext,e;for(a.beginPath(),a.moveTo(0,0),a.lineTo(this.data.w,0),a.lineTo(this.data.w,this.data.h),a.lineTo(0,this.data.h),a.lineTo(0,0),a.clip(),e=this.layers.length-1;0<=e;e-=1)(this.completeLayers||this.elements[e])&&this.elements[e].renderFrame()},CVCompElement.prototype.destroy=function(){var e;for(e=this.layers.length-1;0<=e;e-=1)this.elements[e]&&this.elements[e].destroy();this.layers=null,this.elements=null},CVMaskElement.prototype.renderFrame=function(){if(this.hasMasks){var d=this.element.finalTransform.mat,r=this.element.canvasContext,a=this.masksProperties.length,s,p,c,m;for(r.beginPath(),s=0;s<a;s++)if("n"!==this.masksProperties[s].mode){this.masksProperties[s].inv&&(r.moveTo(0,0),r.lineTo(this.element.globalData.compSize.w,0),r.lineTo(this.element.globalData.compSize.w,this.element.globalData.compSize.h),r.lineTo(0,this.element.globalData.compSize.h),r.lineTo(0,0)),m=this.viewData[s].v,p=d.applyToPointArray(m.v[0][0],m.v[0][1],0),r.moveTo(p[0],p[1]);var u=m._length,l;for(l=1;l<u;l++)c=d.applyToTriplePoints(m.o[l-1],m.i[l],m.v[l]),r.bezierCurveTo(c[0],c[1],c[2],c[3],c[4],c[5]);c=d.applyToTriplePoints(m.o[l-1],m.i[0],m.v[0]),r.bezierCurveTo(c[0],c[1],c[2],c[3],c[4],c[5])}this.element.globalData.renderer.save(!0),r.clip()}},CVMaskElement.prototype.getMaskProperty=MaskElement.prototype.getMaskProperty,CVMaskElement.prototype.destroy=function(){this.element=null},extendPrototype([BaseElement,TransformElement,CVBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableElement],CVShapeElement),CVShapeElement.prototype.initElement=RenderableDOMElement.prototype.initElement,CVShapeElement.prototype.transformHelper={opacity:1,_opMdf:!1},CVShapeElement.prototype.dashResetter=[],CVShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[])},CVShapeElement.prototype.createStyleElement=function(a,t){var e={data:a,type:a.ty,preTransforms:this.transformsManager.addTransformSequence(t),transforms:[],elements:[],closed:!0===a.hd},n={};if(!("fl"==a.ty||"st"==a.ty?(n.c=PropertyFactory.getProp(this,a.c,1,255,this),n.c.k||(e.co="rgb("+bm_floor(n.c.v[0])+","+bm_floor(n.c.v[1])+","+bm_floor(n.c.v[2])+")")):"gf"!==a.ty&&"gs"!==a.ty||(n.s=PropertyFactory.getProp(this,a.s,1,null,this),n.e=PropertyFactory.getProp(this,a.e,1,null,this),n.h=PropertyFactory.getProp(this,a.h||{k:0},0,.01,this),n.a=PropertyFactory.getProp(this,a.a||{k:0},0,degToRads,this),n.g=new GradientProperty(this,a.g,this)),n.o=PropertyFactory.getProp(this,a.o,0,.01,this),"st"==a.ty||"gs"==a.ty))e.r=2===a.r?"evenodd":"nonzero";else if(e.lc=this.lcEnum[a.lc]||"round",e.lj=this.ljEnum[a.lj]||"round",1==a.lj&&(e.ml=a.ml),n.w=PropertyFactory.getProp(this,a.w,0,null,this),n.w.k||(e.wi=n.w.v),a.d){var i=new DashProperty(this,a.d,"canvas",this);n.d=i,n.d.k||(e.da=n.d.dashArray,e.do=n.d.dashoffset[0])}return this.stylesList.push(e),n.style=e,n},CVShapeElement.prototype.createGroupElement=function(){return{it:[],prevViewData:[]}},CVShapeElement.prototype.createTransformElement=function(e){return{transform:{opacity:1,_opMdf:!1,key:this.transformsManager.getNewKey(),op:PropertyFactory.getProp(this,e.o,0,.01,this),mProps:TransformPropertyFactory.getTransformProperty(this,e,this)}}},CVShapeElement.prototype.createShapeElement=function(a){var t=new CVShapeData(this,a,this.stylesList,this.transformsManager);return this.shapes.push(t),this.addShapeToModifiers(t),t},CVShapeElement.prototype.reloadShapes=function(){this._isFirstFrame=!0;var a=this.itemsData.length,r;for(r=0;r<a;r+=1)this.prevViewData[r]=this.itemsData[r];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[]),a=this.dynamicProperties.length,r=0;r<a;r+=1)this.dynamicProperties[r].getValue();this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame)},CVShapeElement.prototype.addTransformToStyleList=function(a){var t=this.stylesList.length,r;for(r=0;r<t;r+=1)this.stylesList[r].closed||this.stylesList[r].transforms.push(a)},CVShapeElement.prototype.removeTransformFromStyleList=function(){var a=this.stylesList.length,e;for(e=0;e<a;e+=1)this.stylesList[e].closed||this.stylesList[e].transforms.pop()},CVShapeElement.prototype.closeStyles=function(a){var t=a.length,r;for(r=0;r<t;r+=1)a[r].closed=!0},CVShapeElement.prototype.searchShapes=function(m,t,e,n,g){var r=m.length-1,y=[],p=[],f=[].concat(g),d,v,_,x,b,E;for(d=r;0<=d;d-=1){if((x=this.searchProcessedElement(m[d]))?t[d]=e[x-1]:m[d]._shouldRender=n,"fl"==m[d].ty||"st"==m[d].ty||"gf"==m[d].ty||"gs"==m[d].ty)x?t[d].style.closed=!1:t[d]=this.createStyleElement(m[d],f),y.push(t[d].style);else if("gr"==m[d].ty){if(x)for(_=t[d].it.length,v=0;v<_;v+=1)t[d].prevViewData[v]=t[d].it[v];else t[d]=this.createGroupElement(m[d]);this.searchShapes(m[d].it,t[d].it,t[d].prevViewData,n,f)}else"tr"==m[d].ty?(x||(E=this.createTransformElement(m[d]),t[d]=E),f.push(t[d]),this.addTransformToStyleList(t[d])):"sh"==m[d].ty||"rc"==m[d].ty||"el"==m[d].ty||"sr"==m[d].ty?x||(t[d]=this.createShapeElement(m[d])):"tm"==m[d].ty||"rd"==m[d].ty?(x?(b=t[d]).closed=!1:((b=ShapeModifiers.getModifier(m[d].ty)).init(this,m[d]),t[d]=b,this.shapeModifiers.push(b)),p.push(b)):"rp"==m[d].ty&&(x?(b=t[d]).closed=!0:(b=ShapeModifiers.getModifier(m[d].ty),t[d]=b,b.init(this,m,d,t),this.shapeModifiers.push(b),n=!1),p.push(b));this.addProcessedElement(m[d],d+1)}for(this.removeTransformFromStyleList(),this.closeStyles(y),r=p.length,d=0;d<r;d+=1)p[d].closed=!0},CVShapeElement.prototype.renderInnerContent=function(){this.transformHelper.opacity=1,this.transformHelper._opMdf=!1,this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame),this.renderShape(this.transformHelper,this.shapesData,this.itemsData,!0)},CVShapeElement.prototype.renderShapeTransform=function(a,t){(a._opMdf||t.op._mdf||this._isFirstFrame)&&(t.opacity=a.opacity,t.opacity*=t.op.v,t._opMdf=!0)},CVShapeElement.prototype.drawLayer=function(){var d=this.stylesList.length,p=this.globalData.renderer,m=this.globalData.canvasContext,c,u,g,f,h,y,v,_,x;for(c=0;c<d;c+=1)if(("st"!==(_=(x=this.stylesList[c]).type)&&"gs"!==_||0!==x.wi)&&x.data._shouldRender&&0!==x.coOp&&0!==this.globalData.currentGlobalAlpha){for(p.save(),y=x.elements,"st"===_||"gs"===_?(m.strokeStyle="st"===_?x.co:x.grd,m.lineWidth=x.wi,m.lineCap=x.lc,m.lineJoin=x.lj,m.miterLimit=x.ml||0):m.fillStyle="fl"===_?x.co:x.grd,p.ctxOpacity(x.coOp),"st"!==_&&"gs"!==_&&m.beginPath(),p.ctxTransform(x.preTransforms.finalTransform.props),g=y.length,u=0;u<g;u+=1){for("st"!==_&&"gs"!==_||(m.beginPath(),x.da&&(m.setLineDash(x.da),m.lineDashOffset=x.do)),h=(v=y[u].trNodes).length,f=0;f<h;f+=1)"m"==v[f].t?m.moveTo(v[f].p[0],v[f].p[1]):"c"==v[f].t?m.bezierCurveTo(v[f].pts[0],v[f].pts[1],v[f].pts[2],v[f].pts[3],v[f].pts[4],v[f].pts[5]):m.closePath();"st"!==_&&"gs"!==_||(m.stroke(),x.da&&m.setLineDash(this.dashResetter))}"st"!==_&&"gs"!==_&&m.fill(x.r),p.restore()}},CVShapeElement.prototype.renderShape=function(o,t,e,n){var i,s;for(s=o,i=t.length-1;0<=i;i-=1)"tr"==t[i].ty?(s=e[i].transform,this.renderShapeTransform(o,s)):"sh"==t[i].ty||"el"==t[i].ty||"rc"==t[i].ty||"sr"==t[i].ty?this.renderPath(t[i],e[i]):"fl"==t[i].ty?this.renderFill(t[i],e[i],s):"st"==t[i].ty?this.renderStroke(t[i],e[i],s):"gf"==t[i].ty||"gs"==t[i].ty?this.renderGradientFill(t[i],e[i],s):"gr"==t[i].ty?this.renderShape(s,t[i].it,e[i].it):t[i].ty;n&&this.drawLayer()},CVShapeElement.prototype.renderStyledShape=function(d,t){if(this._isFirstFrame||t._mdf||d.transforms._mdf){var e=d.trNodes,a=t.paths,s=a._length,o,p,c;e.length=0;var m=d.transforms.finalTransform;for(c=0;c<s;c+=1){var l=a.shapes[c];if(l&&l.v){for(p=l._length,o=1;o<p;o+=1)1===o&&e.push({t:"m",p:m.applyToPointArray(l.v[0][0],l.v[0][1],0)}),e.push({t:"c",pts:m.applyToTriplePoints(l.o[o-1],l.i[o],l.v[o])});1===p&&e.push({t:"m",p:m.applyToPointArray(l.v[0][0],l.v[0][1],0)}),l.c&&p&&(e.push({t:"c",pts:m.applyToTriplePoints(l.o[o-1],l.i[0],l.v[0])}),e.push({t:"z"}))}}d.trNodes=e}},CVShapeElement.prototype.renderPath=function(a,t){if(!0!==a.hd&&a._shouldRender){var e=t.styledShapes.length,r;for(r=0;r<e;r+=1)this.renderStyledShape(t.styledShapes[r],t.sh)}},CVShapeElement.prototype.renderFill=function(a,t,e){var r=t.style;(t.c._mdf||this._isFirstFrame)&&(r.co="rgb("+bm_floor(t.c.v[0])+","+bm_floor(t.c.v[1])+","+bm_floor(t.c.v[2])+")"),(t.o._mdf||e._opMdf||this._isFirstFrame)&&(r.coOp=t.o.v*e.opacity)},CVShapeElement.prototype.renderGradientFill=function(y,t,e){var n=t.style;if(!n.grd||t.g._mdf||t.s._mdf||t.e._mdf||1!==y.t&&(t.h._mdf||t.a._mdf)){var i=this.globalData.canvasContext,r=t.s.v,a=t.e.v;if(1===y.t)c=i.createLinearGradient(r[0],r[1],a[0],a[1]);else var s=_Mathsqrt(_Mathpow(r[0]-a[0],2)+_Mathpow(r[1]-a[1],2)),o=_Mathatan(a[1]-r[1],a[0]-r[0]),l=s*(1<=t.h.v?.99:-1>=t.h.v?-.99:t.h.v),h=_Mathcos(o+t.a.v)*l+r[0],u=_Mathsin(o+t.a.v)*l+r[1],c=i.createRadialGradient(h,u,0,r[0],r[1],s);var v=y.g.p,d=t.g.c,m=1,_;for(_=0;_<v;_+=1)t.g._hasOpacity&&t.g._collapsable&&(m=t.g.o[2*_+1]),c.addColorStop(d[4*_]/100,"rgba("+d[4*_+1]+","+d[4*_+2]+","+d[4*_+3]+","+m+")");n.grd=c}n.coOp=t.o.v*e.opacity},CVShapeElement.prototype.renderStroke=function(a,t,e){var n=t.style,i=t.d;i&&(i._mdf||this._isFirstFrame)&&(n.da=i.dashArray,n.do=i.dashoffset[0]),(t.c._mdf||this._isFirstFrame)&&(n.co="rgb("+bm_floor(t.c.v[0])+","+bm_floor(t.c.v[1])+","+bm_floor(t.c.v[2])+")"),(t.o._mdf||e._opMdf||this._isFirstFrame)&&(n.coOp=t.o.v*e.opacity),(t.w._mdf||this._isFirstFrame)&&(n.wi=t.w.v)},CVShapeElement.prototype.destroy=function(){this.shapesData=null,this.globalData=null,this.canvasContext=null,this.stylesList.length=0,this.itemsData.length=0},extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVSolidElement),CVSolidElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVSolidElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVSolidElement.prototype.renderInnerContent=function(){var e=this.canvasContext;e.fillStyle=this.data.sc,e.fillRect(0,0,this.data.sw,this.data.sh)},extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement,ITextElement],CVTextElement),CVTextElement.prototype.tHelper=createTag("canvas").getContext("2d"),CVTextElement.prototype.buildNewText=function(){var T=this.textProperty.currentData;this.renderedLetters=createSizedArray(T.l?T.l.length:0);var t=!1;T.fc?(t=!0,this.values.fill=this.buildColor(T.fc)):this.values.fill="rgba(0,0,0,0)",this.fill=t;var S=!1;T.sc&&(S=!0,this.values.stroke=this.buildColor(T.sc),this.values.sWidth=T.sw);var M=this.globalData.fontManager.getFontByName(T.f),a=T.l,s=this.mHelper,o,A;this.stroke=S,this.values.fValue=T.finalSize+"px "+this.globalData.fontManager.getFontByName(T.f).fFamily,A=T.finalText.length;var P=this.data.singleShape,y=T.tr/1e3*T.finalSize,_=0,C=0,D=!0,L=0,R,k,F,I,N,z,O,U,B,V;for(o=0;o<A;o+=1){for(k=(R=this.globalData.fontManager.getCharData(T.finalText[o],M.fStyle,this.globalData.fontManager.getFontByName(T.f).fFamily))&&R.data||{},s.reset(),P&&a[o].n&&(_=-y,C+=T.yOffset,C+=D?1:0,D=!1),O=(N=k.shapes?k.shapes[0].it:[]).length,s.scale(T.finalSize/100,T.finalSize/100),P&&this.applyTextPropertiesToMatrix(T,s,a[o].line,_,C),B=createSizedArray(O),z=0;z<O;z+=1){for(I=N[z].ks.k.i.length,U=N[z].ks.k,V=[],F=1;F<I;F+=1)1==F&&V.push(s.applyToX(U.v[0][0],U.v[0][1],0),s.applyToY(U.v[0][0],U.v[0][1],0)),V.push(s.applyToX(U.o[F-1][0],U.o[F-1][1],0),s.applyToY(U.o[F-1][0],U.o[F-1][1],0),s.applyToX(U.i[F][0],U.i[F][1],0),s.applyToY(U.i[F][0],U.i[F][1],0),s.applyToX(U.v[F][0],U.v[F][1],0),s.applyToY(U.v[F][0],U.v[F][1],0));V.push(s.applyToX(U.o[F-1][0],U.o[F-1][1],0),s.applyToY(U.o[F-1][0],U.o[F-1][1],0),s.applyToX(U.i[0][0],U.i[0][1],0),s.applyToY(U.i[0][0],U.i[0][1],0),s.applyToX(U.v[0][0],U.v[0][1],0),s.applyToY(U.v[0][0],U.v[0][1],0)),B[z]=V}P&&(_+=a[o].l,_+=y),this.textSpans[L]?this.textSpans[L].elem=B:this.textSpans[L]={elem:B},L+=1}},CVTextElement.prototype.renderInnerContent=function(){var m=this.canvasContext,s,g,y,v,_,x;this.finalTransform.mat.props,m.font=this.values.fValue,m.lineCap="butt",m.lineJoin="miter",m.miterLimit=4,this.data.singleShape||this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag);var b=this.textAnimator.renderedLetters,l=this.textProperty.currentData.l,h;g=l.length;var E=null,T=null,S=null,M,A;for(s=0;s<g;s+=1)if(!l[s].n){if((h=b[s])&&(this.globalData.renderer.save(),this.globalData.renderer.ctxTransform(h.p),this.globalData.renderer.ctxOpacity(h.o)),this.fill){for(h&&h.fc?E!==h.fc&&(E=h.fc,m.fillStyle=h.fc):E!==this.values.fill&&(E=this.values.fill,m.fillStyle=this.values.fill),v=(M=this.textSpans[s].elem).length,this.globalData.canvasContext.beginPath(),y=0;y<v;y+=1)for(x=(A=M[y]).length,this.globalData.canvasContext.moveTo(A[0],A[1]),_=2;_<x;_+=6)this.globalData.canvasContext.bezierCurveTo(A[_],A[_+1],A[_+2],A[_+3],A[_+4],A[_+5]);this.globalData.canvasContext.closePath(),this.globalData.canvasContext.fill()}if(this.stroke){for(h&&h.sw?S!==h.sw&&(S=h.sw,m.lineWidth=h.sw):S!==this.values.sWidth&&(S=this.values.sWidth,m.lineWidth=this.values.sWidth),h&&h.sc?T!==h.sc&&(T=h.sc,m.strokeStyle=h.sc):T!==this.values.stroke&&(T=this.values.stroke,m.strokeStyle=this.values.stroke),v=(M=this.textSpans[s].elem).length,this.globalData.canvasContext.beginPath(),y=0;y<v;y+=1)for(x=(A=M[y]).length,this.globalData.canvasContext.moveTo(A[0],A[1]),_=2;_<x;_+=6)this.globalData.canvasContext.bezierCurveTo(A[_],A[_+1],A[_+2],A[_+3],A[_+4],A[_+5]);this.globalData.canvasContext.closePath(),this.globalData.canvasContext.stroke()}h&&this.globalData.renderer.restore()}},CVEffects.prototype.renderFrame=function(){},HBaseElement.prototype={checkBlendMode:function(){},initRendererElement:function(){this.baseElement=createTag(this.data.tg||"div"),this.data.hasMask?(this.svgElement=createNS("svg"),this.layerElement=createNS("g"),this.maskedElement=this.layerElement,this.svgElement.appendChild(this.layerElement),this.baseElement.appendChild(this.svgElement)):this.layerElement=this.baseElement,styleDiv(this.baseElement)},createContainerElements:function(){this.renderableEffectsManager=new CVEffects(this),this.transformedElement=this.baseElement,this.maskedElement=this.layerElement,this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),0!==this.data.bm&&this.setBlendMode()},renderElement:function(){this.finalTransform._matMdf&&(this.transformedElement.style.transform=this.transformedElement.style.webkitTransform=this.finalTransform.mat.toCSS()),this.finalTransform._opMdf&&(this.transformedElement.style.opacity=this.finalTransform.mProp.o.v)},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},destroy:function(){this.layerElement=null,this.transformedElement=null,this.matteElement&&(this.matteElement=null),this.maskManager&&(this.maskManager.destroy(),this.maskManager=null)},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData)},addEffects:function(){},setMatte:function(){}},HBaseElement.prototype.getBaseElement=SVGBaseElement.prototype.getBaseElement,HBaseElement.prototype.destroyBaseElement=HBaseElement.prototype.destroy,HBaseElement.prototype.buildElementParenting=HybridRenderer.prototype.buildElementParenting,extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],HSolidElement),HSolidElement.prototype.createContent=function(){var e;this.data.hasMask?((e=createNS("rect")).setAttribute("width",this.data.sw),e.setAttribute("height",this.data.sh),e.setAttribute("fill",this.data.sc),this.svgElement.setAttribute("width",this.data.sw),this.svgElement.setAttribute("height",this.data.sh)):((e=createTag("div")).style.width=this.data.sw+"px",e.style.height=this.data.sh+"px",e.style.backgroundColor=this.data.sc),this.layerElement.appendChild(e)},extendPrototype([HybridRenderer,ICompElement,HBaseElement],HCompElement),HCompElement.prototype._createBaseContainerElements=HCompElement.prototype.createContainerElements,HCompElement.prototype.createContainerElements=function(){this._createBaseContainerElements(),this.data.hasMask?(this.svgElement.setAttribute("width",this.data.w),this.svgElement.setAttribute("height",this.data.h),this.transformedElement=this.baseElement):this.transformedElement=this.layerElement},HCompElement.prototype.addTo3dContainer=function(a,t){for(var e=0,r;e<t;)this.elements[e]&&this.elements[e].getBaseElement&&(r=this.elements[e].getBaseElement()),e+=1;r?this.layerElement.insertBefore(a,r):this.layerElement.appendChild(a)},extendPrototype([BaseElement,TransformElement,HSolidElement,SVGShapeElement,HBaseElement,HierarchyElement,FrameElement,RenderableElement],HShapeElement),HShapeElement.prototype._renderShapeFrame=HShapeElement.prototype.renderInnerContent,HShapeElement.prototype.createContent=function(){var a;if(this.baseElement.style.fontSize=0,this.data.hasMask)this.layerElement.appendChild(this.shapesContainer),a=this.svgElement;else{a=createNS("svg");var r=this.comp.data?this.comp.data:this.globalData.compSize;a.setAttribute("width",r.w),a.setAttribute("height",r.h),a.appendChild(this.shapesContainer),this.layerElement.appendChild(a)}this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.shapesContainer,0,[],!0),this.filterUniqueShapes(),this.shapeCont=a},HShapeElement.prototype.getTransformedPoint=function(a,t){var r=a.length,i;for(i=0;i<r;i+=1)t=a[i].mProps.v.applyToPointArray(t[0],t[1],0);return t},HShapeElement.prototype.calculateShapeBoundingBox=function(d,t){var e=d.sh.v,o=d.transformers,l=e._length,p,c,m,u,g;if(!(1>=l)){for(p=0;p<l-1;p+=1)c=this.getTransformedPoint(o,e.v[p]),m=this.getTransformedPoint(o,e.o[p]),u=this.getTransformedPoint(o,e.i[p+1]),g=this.getTransformedPoint(o,e.v[p+1]),this.checkBounds(c,m,u,g,t);e.c&&(c=this.getTransformedPoint(o,e.v[p]),m=this.getTransformedPoint(o,e.o[p]),u=this.getTransformedPoint(o,e.i[0]),g=this.getTransformedPoint(o,e.v[0]),this.checkBounds(c,m,u,g,t))}},HShapeElement.prototype.checkBounds=function(o,t,e,n,i){this.getBoundsOfCurve(o,t,e,n);var r=this.shapeBoundingBox;i.x=bm_min(r.left,i.x),i.xMax=bm_max(r.right,i.xMax),i.y=bm_min(r.top,i.y),i.yMax=bm_max(r.bottom,i.yMax)},HShapeElement.prototype.shapeBoundingBox={left:0,right:0,top:0,bottom:0},HShapeElement.prototype.tempBoundingBox={x:0,xMax:0,y:0,yMax:0,width:0,height:0},HShapeElement.prototype.getBoundsOfCurve=function(d,t,e,n){for(var i=[[d[0],n[0]],[d[1],n[1]]],c=0,m,g,f,y,v,_,x;2>c;++c)if(g=6*d[c]-12*t[c]+6*e[c],m=-3*d[c]+9*t[c]-9*e[c]+3*n[c],f=3*t[c]-3*d[c],g|=0,f|=0,0!=(m|=0))0>(v=g*g-4*f*m)||(0<(_=(-g+bm_sqrt(v))/(2*m))&&1>_&&i[c].push(this.calculateF(_,d,t,e,n,c)),0<(x=(-g-bm_sqrt(v))/(2*m))&&1>x&&i[c].push(this.calculateF(x,d,t,e,n,c)));else{if(0===g)continue;0<(y=-f/g)&&1>y&&i[c].push(this.calculateF(y,d,t,e,n,c))}this.shapeBoundingBox.left=bm_min.apply(null,i[0]),this.shapeBoundingBox.top=bm_min.apply(null,i[1]),this.shapeBoundingBox.right=bm_max.apply(null,i[0]),this.shapeBoundingBox.bottom=bm_max.apply(null,i[1])},HShapeElement.prototype.calculateF=function(o,t,e,n,i,r){return bm_pow(1-o,3)*t[r]+3*bm_pow(1-o,2)*o*e[r]+3*(1-o)*bm_pow(o,2)*n[r]+bm_pow(o,3)*i[r]},HShapeElement.prototype.calculateBoundingBox=function(a,t){var e=a.length,r;for(r=0;r<e;r+=1)a[r]&&a[r].sh?this.calculateShapeBoundingBox(a[r],t):a[r]&&a[r].it&&this.calculateBoundingBox(a[r].it,t)},HShapeElement.prototype.currentBoxContains=function(e){return this.currentBBox.x<=e.x&&this.currentBBox.y<=e.y&&this.currentBBox.width+this.currentBBox.x>=e.x+e.width&&this.currentBBox.height+this.currentBBox.y>=e.y+e.height},HShapeElement.prototype.renderInnerContent=function(){if(this._renderShapeFrame(),!this.hidden&&(this._isFirstFrame||this._mdf)){var e=this.tempBoundingBox;if(e.x=999999,e.xMax=-999999,e.y=999999,e.yMax=-999999,this.calculateBoundingBox(this.itemsData,e),e.width=e.xMax<e.x?0:e.xMax-e.x,e.height=e.yMax<e.y?0:e.yMax-e.y,this.currentBoxContains(e))return;var t=!1;this.currentBBox.w!==e.width&&(this.currentBBox.w=e.width,this.shapeCont.setAttribute("width",e.width),t=!0),this.currentBBox.h!==e.height&&(this.currentBBox.h=e.height,this.shapeCont.setAttribute("height",e.height),t=!0),(t||this.currentBBox.x!==e.x||this.currentBBox.y!==e.y)&&(this.currentBBox.w=e.width,this.currentBBox.h=e.height,this.currentBBox.x=e.x,this.currentBBox.y=e.y,this.shapeCont.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h),this.shapeCont.style.transform=this.shapeCont.style.webkitTransform="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)")}},extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],HTextElement),HTextElement.prototype.createContent=function(){if(this.isMasked=this.checkMasks(),this.isMasked){this.renderType="svg",this.compW=this.comp.data.w,this.compH=this.comp.data.h,this.svgElement.setAttribute("width",this.compW),this.svgElement.setAttribute("height",this.compH);var e=createNS("g");this.maskedElement.appendChild(e),this.innerElem=e}else this.renderType="html",this.innerElem=this.layerElement;this.checkParenting()},HTextElement.prototype.buildNewText=function(){var y=this.textProperty.currentData;this.renderedLetters=createSizedArray(y.l?y.l.length:0);var t=this.innerElem.style;t.color=t.fill=y.fc?this.buildColor(y.fc):"rgba(0,0,0,0)",y.sc&&(t.stroke=this.buildColor(y.sc),t.strokeWidth=y.sw+"px");var e=this.globalData.fontManager.getFontByName(y.f),r,_;if(!this.globalData.fontManager.chars)if(t.fontSize=y.finalSize+"px",t.lineHeight=y.finalSize+"px",e.fClass)this.innerElem.className=e.fClass;else{t.fontFamily=e.fFamily;var x=y.fWeight,a=y.fStyle;t.fontStyle=a,t.fontWeight=x}var s=y.l,u,b,E;_=s.length;var T=this.mHelper,p="",S=0,M;for(r=0;r<_;r+=1){if(this.globalData.fontManager.chars?(this.textPaths[S]?u=this.textPaths[S]:((u=createNS("path")).setAttribute("stroke-linecap","butt"),u.setAttribute("stroke-linejoin","round"),u.setAttribute("stroke-miterlimit","4")),this.isMasked||(this.textSpans[S]?E=(b=this.textSpans[S]).children[0]:((b=createTag("div")).style.lineHeight=0,(E=createNS("svg")).appendChild(u),styleDiv(b)))):this.isMasked?u=this.textPaths[S]?this.textPaths[S]:createNS("text"):this.textSpans[S]?(b=this.textSpans[S],u=this.textPaths[S]):(styleDiv(b=createTag("span")),styleDiv(u=createTag("span")),b.appendChild(u)),this.globalData.fontManager.chars){var A=this.globalData.fontManager.getCharData(y.finalText[r],e.fStyle,this.globalData.fontManager.getFontByName(y.f).fFamily),g;if(g=A?A.data:null,T.reset(),g&&g.shapes&&(M=g.shapes[0].it,T.scale(y.finalSize/100,y.finalSize/100),p=this.createPathShape(T,M),u.setAttribute("d",p)),this.isMasked)this.innerElem.appendChild(u);else{if(this.innerElem.appendChild(b),g&&g.shapes){document.body.appendChild(E);var w=E.getBBox();E.setAttribute("width",w.width+2),E.setAttribute("height",w.height+2),E.setAttribute("viewBox",w.x-1+" "+(w.y-1)+" "+(w.width+2)+" "+(w.height+2)),E.style.transform=E.style.webkitTransform="translate("+(w.x-1)+"px,"+(w.y-1)+"px)",s[r].yOffset=w.y-1}else E.setAttribute("width",1),E.setAttribute("height",1);b.appendChild(E)}}else u.textContent=s[r].val,u.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),this.isMasked?this.innerElem.appendChild(u):(this.innerElem.appendChild(b),u.style.transform=u.style.webkitTransform="translate3d(0,"+-y.finalSize/1.2+"px,0)");this.textSpans[S]=this.isMasked?u:b,this.textSpans[S].style.display="block",this.textPaths[S]=u,S+=1}for(;S<this.textSpans.length;)this.textSpans[S].style.display="none",S+=1},HTextElement.prototype.renderInnerContent=function(){if(this.data.singleShape){if(!this._isFirstFrame&&!this.lettersChangedFlag)return;this.isMasked&&this.finalTransform._matMdf&&(this.svgElement.setAttribute("viewBox",-this.finalTransform.mProp.p.v[0]+" "+-this.finalTransform.mProp.p.v[1]+" "+this.compW+" "+this.compH),this.svgElement.style.transform=this.svgElement.style.webkitTransform="translate("+-this.finalTransform.mProp.p.v[0]+"px,"+-this.finalTransform.mProp.p.v[1]+"px)")}if(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),this.lettersChangedFlag||this.textAnimator.lettersChangedFlag){var d=0,p=this.textAnimator.renderedLetters,s=this.textProperty.currentData.l,o,c,m,u,g;for(c=s.length,o=0;o<c;o+=1)s[o].n?d+=1:(u=this.textSpans[o],g=this.textPaths[o],m=p[d],d+=1,m._mdf.m&&(this.isMasked?u.setAttribute("transform",m.m):u.style.transform=u.style.webkitTransform=m.m),u.style.opacity=m.o,m.sw&&m._mdf.sw&&g.setAttribute("stroke-width",m.sw),m.sc&&m._mdf.sc&&g.setAttribute("stroke",m.sc),m.fc&&m._mdf.fc&&(g.setAttribute("fill",m.fc),g.style.color=m.fc));if(this.innerElem.getBBox&&!this.hidden&&(this._isFirstFrame||this._mdf)){var f=this.innerElem.getBBox();this.currentBBox.w!==f.width&&(this.currentBBox.w=f.width,this.svgElement.setAttribute("width",f.width)),this.currentBBox.h!==f.height&&(this.currentBBox.h=f.height,this.svgElement.setAttribute("height",f.height)),this.currentBBox.w===f.width+2&&this.currentBBox.h===f.height+2&&this.currentBBox.x===f.x-1&&this.currentBBox.y===f.y-1||(this.currentBBox.w=f.width+2,this.currentBBox.h=f.height+2,this.currentBBox.x=f.x-1,this.currentBBox.y=f.y-1,this.svgElement.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h),this.svgElement.style.transform=this.svgElement.style.webkitTransform="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)")}}},extendPrototype([BaseElement,TransformElement,HBaseElement,HSolidElement,HierarchyElement,FrameElement,RenderableElement],HImageElement),HImageElement.prototype.createContent=function(){var a=this.globalData.getAssetsPath(this.assetData),t=new Image;this.data.hasMask?(this.imageElem=createNS("image"),this.imageElem.setAttribute("width",this.assetData.w+"px"),this.imageElem.setAttribute("height",this.assetData.h+"px"),this.imageElem.setAttributeNS("http://www.w3.org/1999/xlink","href",a),this.layerElement.appendChild(this.imageElem),this.baseElement.setAttribute("width",this.assetData.w),this.baseElement.setAttribute("height",this.assetData.h)):this.layerElement.appendChild(t),t.src=a,this.data.ln&&this.baseElement.setAttribute("id",this.data.ln)},extendPrototype([BaseElement,FrameElement,HierarchyElement],HCameraElement),HCameraElement.prototype.setup=function(){var a=this.comp.threeDElements.length,r,n;for(r=0;r<a;r+=1)"3d"===(n=this.comp.threeDElements[r]).type&&(n.perspectiveElem.style.perspective=n.perspectiveElem.style.webkitPerspective=this.pe.v+"px",n.container.style.transformOrigin=n.container.style.mozTransformOrigin=n.container.style.webkitTransformOrigin="0px 0px 0px",n.perspectiveElem.style.transform=n.perspectiveElem.style.webkitTransform="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)")},HCameraElement.prototype.createElements=function(){},HCameraElement.prototype.hide=function(){},HCameraElement.prototype.renderFrame=function(){var d=this._isFirstFrame,p,m;if(this.hierarchy)for(m=this.hierarchy.length,p=0;p<m;p+=1)d=this.hierarchy[p].finalTransform.mProp._mdf||d;if(d||this.pe._mdf||this.p&&this.p._mdf||this.px&&(this.px._mdf||this.py._mdf||this.pz._mdf)||this.rx._mdf||this.ry._mdf||this.rz._mdf||this.or._mdf||this.a&&this.a._mdf){if(this.mat.reset(),this.hierarchy)for(p=m=this.hierarchy.length-1;0<=p;p-=1){var g=this.hierarchy[p].finalTransform.mProp;this.mat.translate(-g.p.v[0],-g.p.v[1],g.p.v[2]),this.mat.rotateX(-g.or.v[0]).rotateY(-g.or.v[1]).rotateZ(g.or.v[2]),this.mat.rotateX(-g.rx.v).rotateY(-g.ry.v).rotateZ(g.rz.v),this.mat.scale(1/g.s.v[0],1/g.s.v[1],1/g.s.v[2]),this.mat.translate(g.a.v[0],g.a.v[1],g.a.v[2])}if(this.p?this.mat.translate(-this.p.v[0],-this.p.v[1],this.p.v[2]):this.mat.translate(-this.px.v,-this.py.v,this.pz.v),this.a){var i=this.p?[this.p.v[0]-this.a.v[0],this.p.v[1]-this.a.v[1],this.p.v[2]-this.a.v[2]]:[this.px.v-this.a.v[0],this.py.v-this.a.v[1],this.pz.v-this.a.v[2]];var r=_Mathsqrt(_Mathpow(i[0],2)+_Mathpow(i[1],2)+_Mathpow(i[2],2)),a=[i[0]/r,i[1]/r,i[2]/r],s=_Mathsqrt(a[2]*a[2]+a[0]*a[0]),o=_Mathatan(a[1],s),l=_Mathatan(a[0],-a[2]);this.mat.rotateY(l).rotateX(-o)}this.mat.rotateX(-this.rx.v).rotateY(-this.ry.v).rotateZ(this.rz.v),this.mat.rotateX(-this.or.v[0]).rotateY(-this.or.v[1]).rotateZ(this.or.v[2]),this.mat.translate(this.globalData.compSize.w/2,this.globalData.compSize.h/2,0),this.mat.translate(0,0,this.pe.v);var f=!this._prevMat.equals(this.mat);if((f||this.pe._mdf)&&this.comp.threeDElements){var u;for(m=this.comp.threeDElements.length,p=0;p<m;p+=1)"3d"===(u=this.comp.threeDElements[p]).type&&(f&&(u.container.style.transform=u.container.style.webkitTransform=this.mat.toCSS()),this.pe._mdf&&(u.perspectiveElem.style.perspective=u.perspectiveElem.style.webkitPerspective=this.pe.v+"px"));this.mat.clone(this._prevMat)}}this._isFirstFrame=!1},HCameraElement.prototype.prepareFrame=function(e){this.prepareProperties(e,!0)},HCameraElement.prototype.destroy=function(){},HCameraElement.prototype.getBaseElement=function(){return null},HEffects.prototype.renderFrame=function(){};var animationManager=function(){function m(e){for(var t=0,a=e.target;t<y;)h[t].animation===a&&(h.splice(t,1),t-=1,y-=1,a.isPaused||l()),t+=1}function g(e,t){if(!e)return null;for(var n=0;n<y;){if(h[n].elem==e&&null!==h[n].elem)return h[n].animation;n+=1}var i=new AnimationItem;return u(i,e),i.setData(e,t),i}function o(){v+=1,f()}function l(){v-=1}function u(e,t){e.addEventListener("destroy",m),e.addEventListener("_active",o),e.addEventListener("_idle",l),h.push({elem:t,animation:e}),y+=1}function c(a){var t=a-e,r;for(r=0;r<y;r+=1)h[r].animation.advanceTime(t);e=a,v&&!x?window.requestAnimationFrame(c):_=!0}function p(a){e=a,window.requestAnimationFrame(c)}function f(){!x&&v&&_&&(window.requestAnimationFrame(p),_=!1)}var d={},h=[],e=0,y=0,v=0,_=!0,x=!1;return d.registerAnimation=g,d.loadAnimation=function(a){var t=new AnimationItem;return u(t,null),t.setParams(a),t},d.setSpeed=function(e,t){var a;for(a=0;a<y;a+=1)h[a].animation.setSpeed(e,t)},d.setDirection=function(e,t){var a;for(a=0;a<y;a+=1)h[a].animation.setDirection(e,t)},d.play=function(e){var t;for(t=0;t<y;t+=1)h[t].animation.play(e)},d.pause=function(e){var t;for(t=0;t<y;t+=1)h[t].animation.pause(e)},d.stop=function(e){var t;for(t=0;t<y;t+=1)h[t].animation.stop(e)},d.togglePause=function(e){var t;for(t=0;t<y;t+=1)h[t].animation.togglePause(e)},d.searchAnimations=function(l,t,e){var d=[].concat([].slice.call(document.getElementsByClassName("lottie")),[].slice.call(document.getElementsByClassName("bodymovin"))),r=d.length,a;for(a=0;a<r;a+=1)e&&d[a].setAttribute("data-bm-type",e),g(d[a],l);if(t&&0===r){e||(e="svg");var p=document.getElementsByTagName("body")[0];p.innerHTML="";var s=createTag("div");s.style.width="100%",s.style.height="100%",s.setAttribute("data-bm-type",e),p.appendChild(s),g(s,l)}},d.resize=function(){var e;for(e=0;e<y;e+=1)h[e].animation.resize()},d.goToAndStop=function(e,t,n){var r;for(r=0;r<y;r+=1)h[r].animation.goToAndStop(e,t,n)},d.destroy=function(e){var t;for(t=y-1;0<=t;t-=1)h[t].animation.destroy(e)},d.freeze=function(){x=!0},d.unfreeze=function(){x=!1,f()},d.getRegisteredAnimations=function(){var e=h.length,a=[],r;for(r=0;r<e;r+=1)a.push(h[r].animation);return a},d}(),AnimationItem=function(){this._cbs=[],this.name="",this.path="",this.isLoaded=!1,this.currentFrame=0,this.currentRawFrame=0,this.firstFrame=0,this.totalFrames=0,this.frameRate=0,this.frameMult=0,this.playSpeed=1,this.playDirection=1,this.playCount=0,this.animationData={},this.assets=[],this.isPaused=!0,this.autoplay=!1,this.loop=!0,this.renderer=null,this.animationID=createElementID(),this.assetsPath="",this.timeCompleted=0,this.segmentPos=0,this.subframeEnabled=subframeEnabled,this.segments=[],this._idle=!0,this._completedLoop=!1,this.projectInterface=ProjectInterface(),this.imagePreloader=new ImagePreloader};extendPrototype([BaseEvent],AnimationItem),AnimationItem.prototype.setParams=function(a){a.context&&(this.context=a.context),(a.wrapper||a.container)&&(this.wrapper=a.wrapper||a.container);var t=a.animType?a.animType:a.renderer?a.renderer:"svg";this.renderer="canvas"===t?new CanvasRenderer(this,a.rendererSettings):"svg"===t?new SVGRenderer(this,a.rendererSettings):new HybridRenderer(this,a.rendererSettings);this.renderer.setProjectInterface(this.projectInterface),this.animType=t,""===a.loop||null===a.loop||(!1===a.loop?this.loop=!1:!0===a.loop?this.loop=!0:this.loop=parseInt(a.loop)),this.autoplay=!("autoplay"in a)||a.autoplay,this.name=a.name?a.name:"",this.autoloadSegments=!a.hasOwnProperty("autoloadSegments")||a.autoloadSegments,this.assetsPath=a.assetsPath,this.initialSegment=a.initialSegment,a.animationData?this.configAnimation(a.animationData):a.path&&(this.path=-1===a.path.lastIndexOf("\\")?a.path.substr(0,a.path.lastIndexOf("/")+1):a.path.substr(0,a.path.lastIndexOf("\\")+1),this.fileName=a.path.substr(a.path.lastIndexOf("/")+1),this.fileName=this.fileName.substr(0,this.fileName.lastIndexOf(".json")))},AnimationItem.prototype.setData=function(o,t){var e={wrapper:o,animationData:t?"object"==typeof t?t:JSON.parse(t):null},n=o.attributes;e.path=n.getNamedItem("data-animation-path")?n.getNamedItem("data-animation-path").value:n.getNamedItem("data-bm-path")?n.getNamedItem("data-bm-path").value:n.getNamedItem("bm-path")?n.getNamedItem("bm-path").value:"",e.animType=n.getNamedItem("data-anim-type")?n.getNamedItem("data-anim-type").value:n.getNamedItem("data-bm-type")?n.getNamedItem("data-bm-type").value:n.getNamedItem("bm-type")?n.getNamedItem("bm-type").value:n.getNamedItem("data-bm-renderer")?n.getNamedItem("data-bm-renderer").value:n.getNamedItem("bm-renderer")?n.getNamedItem("bm-renderer").value:"canvas";var i=n.getNamedItem("data-anim-loop")?n.getNamedItem("data-anim-loop").value:n.getNamedItem("data-bm-loop")?n.getNamedItem("data-bm-loop").value:n.getNamedItem("bm-loop")?n.getNamedItem("bm-loop").value:"";""===i||(e.loop="false"!==i&&("true"===i||parseInt(i)));var r=n.getNamedItem("data-anim-autoplay")?n.getNamedItem("data-anim-autoplay").value:n.getNamedItem("data-bm-autoplay")?n.getNamedItem("data-bm-autoplay").value:!n.getNamedItem("bm-autoplay")||n.getNamedItem("bm-autoplay").value;e.autoplay="false"!==r,e.name=n.getNamedItem("data-name")?n.getNamedItem("data-name").value:n.getNamedItem("data-bm-name")?n.getNamedItem("data-bm-name").value:n.getNamedItem("bm-name")?n.getNamedItem("bm-name").value:"","false"===(n.getNamedItem("data-anim-prerender")?n.getNamedItem("data-anim-prerender").value:n.getNamedItem("data-bm-prerender")?n.getNamedItem("data-bm-prerender").value:n.getNamedItem("bm-prerender")?n.getNamedItem("bm-prerender").value:"")&&(e.prerender=!1),this.setParams(e)},AnimationItem.prototype.includeLayers=function(o){o.op>this.animationData.op&&(this.animationData.op=o.op,this.totalFrames=_Mathfloor(o.op-this.animationData.ip));var t=this.animationData.layers,i=t.length,l=o.layers,a=l.length,s,d;for(d=0;d<a;d+=1)for(s=0;s<i;){if(t[s].id==l[d].id){t[s]=l[d];break}s+=1}if((o.chars||o.fonts)&&(this.renderer.globalData.fontManager.addChars(o.chars),this.renderer.globalData.fontManager.addFonts(o.fonts,this.renderer.globalData.defs)),o.assets)for(i=o.assets.length,s=0;s<i;s+=1)this.animationData.assets.push(o.assets[s]);this.animationData.__complete=!1,dataManager.completeData(this.animationData,this.renderer.globalData.fontManager),this.renderer.includeLayers(o.layers),expressionsPlugin&&expressionsPlugin.initExpressions(this),this.loadNextSegment()},AnimationItem.prototype.loadNextSegment=function(){var a=this.animationData.segments;if(!a||0===a.length||!this.autoloadSegments)return this.trigger("data_ready"),void(this.timeCompleted=this.totalFrames);var t=a.shift();this.timeCompleted=t.time*this.frameRate;var e=this.path+this.fileName+"_"+this.segmentPos+".json";this.segmentPos+=1,assetLoader.load(e,this.includeLayers.bind(this),function(){this.trigger("data_failed")}.bind(this))},AnimationItem.prototype.loadSegments=function(){this.animationData.segments||(this.timeCompleted=this.totalFrames),this.loadNextSegment()},AnimationItem.prototype.imagesLoaded=function(){this.trigger("loaded_images"),this.checkLoaded()},AnimationItem.prototype.preloadImages=function(){this.imagePreloader.setAssetsPath(this.assetsPath),this.imagePreloader.setPath(this.path),this.imagePreloader.loadAssets(this.animationData.assets,this.imagesLoaded.bind(this))},AnimationItem.prototype.configAnimation=function(e){if(this.renderer)try{this.animationData=e,this.initialSegment?(this.totalFrames=_Mathfloor(this.initialSegment[1]-this.initialSegment[0]),this.firstFrame=_Mathround(this.initialSegment[0])):(this.totalFrames=_Mathfloor(this.animationData.op-this.animationData.ip),this.firstFrame=_Mathround(this.animationData.ip)),this.renderer.configAnimation(e),e.assets||(e.assets=[]),this.assets=this.animationData.assets,this.frameRate=this.animationData.fr,this.frameMult=this.animationData.fr/1e3,this.renderer.searchExtraCompositions(e.assets),this.trigger("config_ready"),this.preloadImages(),this.loadSegments(),this.updaFrameModifier(),this.waitForFontsLoaded()}catch(e){this.triggerConfigError(e)}},AnimationItem.prototype.waitForFontsLoaded=function(){this.renderer&&(this.renderer.globalData.fontManager.loaded()?this.checkLoaded():setTimeout(this.waitForFontsLoaded.bind(this),20))},AnimationItem.prototype.checkLoaded=function(){!this.isLoaded&&this.renderer.globalData.fontManager.loaded()&&(this.imagePreloader.loaded()||"canvas"!==this.renderer.rendererType)&&(this.isLoaded=!0,dataManager.completeData(this.animationData,this.renderer.globalData.fontManager),expressionsPlugin&&expressionsPlugin.initExpressions(this),this.renderer.initItems(),setTimeout(function(){this.trigger("DOMLoaded")}.bind(this),0),this.gotoFrame(),this.autoplay&&this.play())},AnimationItem.prototype.resize=function(){this.renderer.updateContainerSize()},AnimationItem.prototype.setSubframe=function(e){this.subframeEnabled=!!e},AnimationItem.prototype.gotoFrame=function(){this.currentFrame=this.subframeEnabled?this.currentRawFrame:~~this.currentRawFrame,this.timeCompleted!==this.totalFrames&&this.currentFrame>this.timeCompleted&&(this.currentFrame=this.timeCompleted),this.trigger("enterFrame"),this.renderFrame()},AnimationItem.prototype.renderFrame=function(){if(!1!==this.isLoaded)try{this.renderer.renderFrame(this.currentFrame+this.firstFrame)}catch(e){this.triggerRenderFrameError(e)}},AnimationItem.prototype.play=function(e){e&&this.name!=e||!0===this.isPaused&&(this.isPaused=!1,this._idle&&(this._idle=!1,this.trigger("_active")))},AnimationItem.prototype.pause=function(e){e&&this.name!=e||!1===this.isPaused&&(this.isPaused=!0,this._idle=!0,this.trigger("_idle"))},AnimationItem.prototype.togglePause=function(e){e&&this.name!=e||(!0===this.isPaused?this.play():this.pause())},AnimationItem.prototype.stop=function(e){e&&this.name!=e||(this.pause(),this.playCount=0,this._completedLoop=!1,this.setCurrentRawFrameValue(0))},AnimationItem.prototype.goToAndStop=function(a,t,e){e&&this.name!=e||(t?this.setCurrentRawFrameValue(a):this.setCurrentRawFrameValue(a*this.frameModifier),this.pause())},AnimationItem.prototype.goToAndPlay=function(a,t,e){this.goToAndStop(a,t,e),this.play()},AnimationItem.prototype.advanceTime=function(a){if(!0!==this.isPaused&&!1!==this.isLoaded){var t=this.currentRawFrame+a*this.frameModifier,r=!1;t>=this.totalFrames-1&&0<this.frameModifier?this.loop&&this.playCount!==this.loop?t>=this.totalFrames?(this.playCount+=1,this.checkSegments(t%this.totalFrames)||(this.setCurrentRawFrameValue(t%this.totalFrames),this._completedLoop=!0,this.trigger("loopComplete"))):this.setCurrentRawFrameValue(t):this.checkSegments(t>this.totalFrames?t%this.totalFrames:0)||(r=!0,t=this.totalFrames-1):0>t?this.checkSegments(t%this.totalFrames)||(!this.loop||0>=this.playCount--&&!0!==this.loop?(r=!0,t=0):(this.setCurrentRawFrameValue(this.totalFrames+t%this.totalFrames),this._completedLoop?this.trigger("loopComplete"):this._completedLoop=!0)):this.setCurrentRawFrameValue(t),r&&(this.setCurrentRawFrameValue(t),this.pause(),this.trigger("complete"))}},AnimationItem.prototype.adjustSegment=function(a,t){this.playCount=0,a[1]<a[0]?(0<this.frameModifier&&(0>this.playSpeed?this.setSpeed(-this.playSpeed):this.setDirection(-1)),this.timeCompleted=this.totalFrames=a[0]-a[1],this.firstFrame=a[1],this.setCurrentRawFrameValue(this.totalFrames-.001-t)):a[1]>a[0]&&(0>this.frameModifier&&(0>this.playSpeed?this.setSpeed(-this.playSpeed):this.setDirection(1)),this.timeCompleted=this.totalFrames=a[1]-a[0],this.firstFrame=a[0],this.setCurrentRawFrameValue(.001+t)),this.trigger("segmentStart")},AnimationItem.prototype.setSegment=function(a,t){var e=-1;this.isPaused&&(this.currentRawFrame+this.firstFrame<a?e=a:this.currentRawFrame+this.firstFrame>t&&(e=t-a)),this.firstFrame=a,this.timeCompleted=this.totalFrames=t-a,-1!=e&&this.goToAndStop(e,!0)},AnimationItem.prototype.playSegments=function(a,t){if(t&&(this.segments.length=0),"object"==typeof a[0]){var e=a.length,r;for(r=0;r<e;r+=1)this.segments.push(a[r])}else this.segments.push(a);this.segments.length&&t&&this.adjustSegment(this.segments.shift(),0),this.isPaused&&this.play()},AnimationItem.prototype.resetSegments=function(e){this.segments.length=0,this.segments.push([this.animationData.ip,this.animationData.op]),e&&this.checkSegments(0)},AnimationItem.prototype.checkSegments=function(e){return!!this.segments.length&&(this.adjustSegment(this.segments.shift(),e),!0)},AnimationItem.prototype.destroy=function(e){e&&this.name!=e||!this.renderer||(this.renderer.destroy(),this.imagePreloader.destroy(),this.trigger("destroy"),this._cbs=null,this.onEnterFrame=this.onLoopComplete=this.onComplete=this.onSegmentStart=this.onDestroy=null,this.renderer=null)},AnimationItem.prototype.setCurrentRawFrameValue=function(e){this.currentRawFrame=e,this.gotoFrame()},AnimationItem.prototype.setSpeed=function(e){this.playSpeed=e,this.updaFrameModifier()},AnimationItem.prototype.setDirection=function(e){this.playDirection=0>e?-1:1,this.updaFrameModifier()},AnimationItem.prototype.updaFrameModifier=function(){this.frameModifier=this.frameMult*this.playSpeed*this.playDirection},AnimationItem.prototype.getPath=function(){return this.path},AnimationItem.prototype.getAssetsPath=function(a){var t="";if(a.e)t=a.p;else if(this.assetsPath){var r=a.p;-1!==r.indexOf("images/")&&(r=r.split("/")[1]),t=this.assetsPath+r}else t=this.path,t+=a.u?a.u:"",t+=a.p;return t},AnimationItem.prototype.getAssetData=function(a){for(var t=0,r=this.assets.length;t<r;){if(a==this.assets[t].id)return this.assets[t];t+=1}},AnimationItem.prototype.hide=function(){this.renderer.hide()},AnimationItem.prototype.show=function(){this.renderer.show()},AnimationItem.prototype.getDuration=function(e){return e?this.totalFrames:this.totalFrames/this.frameRate},AnimationItem.prototype.trigger=function(e){this._cbs&&this._cbs[e]&&("enterFrame"===e?this.triggerEvent(e,new BMEnterFrameEvent(e,this.currentFrame,this.totalFrames,this.frameModifier)):"loopComplete"===e?this.triggerEvent(e,new BMCompleteLoopEvent(e,this.loop,this.playCount,this.frameMult)):"complete"===e?this.triggerEvent(e,new BMCompleteEvent(e,this.frameMult)):"segmentStart"===e?this.triggerEvent(e,new BMSegmentStartEvent(e,this.firstFrame,this.totalFrames)):"destroy"===e?this.triggerEvent(e,new BMDestroyEvent(e,this)):this.triggerEvent(e));"enterFrame"===e&&this.onEnterFrame&&this.onEnterFrame.call(this,new BMEnterFrameEvent(e,this.currentFrame,this.totalFrames,this.frameMult)),"loopComplete"===e&&this.onLoopComplete&&this.onLoopComplete.call(this,new BMCompleteLoopEvent(e,this.loop,this.playCount,this.frameMult)),"complete"===e&&this.onComplete&&this.onComplete.call(this,new BMCompleteEvent(e,this.frameMult)),"segmentStart"===e&&this.onSegmentStart&&this.onSegmentStart.call(this,new BMSegmentStartEvent(e,this.firstFrame,this.totalFrames)),"destroy"===e&&this.onDestroy&&this.onDestroy.call(this,new BMDestroyEvent(e,this))},AnimationItem.prototype.triggerRenderFrameError=function(a){var t=new BMRenderFrameErrorEvent(a,this.currentFrame);this.triggerEvent("error",t),this.onError&&this.onError.call(this,t)},AnimationItem.prototype.triggerConfigError=function(a){var t=new BMConfigErrorEvent(a,this.currentFrame);this.triggerEvent("error",t),this.onError&&this.onError.call(this,t)};var Expressions=function(){var e={};return e.initExpressions=function(a){var t=0,r=[];a.renderer.compInterface=CompExpressionInterface(a.renderer),a.renderer.globalData.projectInterface.registerComposition(a.renderer),a.renderer.globalData.pushExpression=function(){t+=1},a.renderer.globalData.popExpression=function(){0==(t-=1)&&function(){var a=r.length,e;for(e=0;e<a;e+=1)r[e].release();r.length=0}()},a.renderer.globalData.registerExpressionProperty=function(e){-1===r.indexOf(e)&&r.push(e)}},e}();expressionsPlugin=Expressions;var ExpressionManager=function(){function $bm_isInstanceOfArray(e){return e.constructor===Array||e.constructor===Float32Array}function isNumerable(a,t){return"number"===a||"boolean"===a||"string"===a||t instanceof Number}function $bm_neg(a){var t=typeof a;if("number"==t||"boolean"===t||a instanceof Number)return-a;if($bm_isInstanceOfArray(a)){var e=a.length,i=[],r;for(r=0;r<e;r+=1)i[r]=-a[r];return i}return a.propType?a.v:void 0}function sum(l,d){var p=typeof l,n=typeof d;if("string"==p||"string"===n)return l+d;if(isNumerable(p,l)&&isNumerable(n,d))return l+d;if($bm_isInstanceOfArray(l)&&isNumerable(n,d))return(l=l.slice(0))[0]=l[0]+d,l;if(isNumerable(p,l)&&$bm_isInstanceOfArray(d))return(d=d.slice(0))[0]=l+d[0],d;if($bm_isInstanceOfArray(l)&&$bm_isInstanceOfArray(d)){for(var i=0,c=l.length,a=d.length,s=[];i<c||i<a;)s[i]=("number"==typeof l[i]||l[i]instanceof Number)&&("number"==typeof d[i]||d[i]instanceof Number)?l[i]+d[i]:void 0===d[i]?l[i]:l[i]||d[i],i+=1;return s}return 0}function sub(l,d){var p=typeof l,n=typeof d;if(isNumerable(p,l)&&isNumerable(n,d))return"string"===p&&(l=parseInt(l)),"string"===n&&(d=parseInt(d)),l-d;if($bm_isInstanceOfArray(l)&&isNumerable(n,d))return(l=l.slice(0))[0]=l[0]-d,l;if(isNumerable(p,l)&&$bm_isInstanceOfArray(d))return(d=d.slice(0))[0]=l-d[0],d;if($bm_isInstanceOfArray(l)&&$bm_isInstanceOfArray(d)){for(var i=0,c=l.length,a=d.length,s=[];i<c||i<a;)s[i]=("number"==typeof l[i]||l[i]instanceof Number)&&("number"==typeof d[i]||d[i]instanceof Number)?l[i]-d[i]:void 0===d[i]?l[i]:l[i]||d[i],i+=1;return s}return 0}function mul(o,t){var e=typeof o,a=typeof t,s,l,d;if(isNumerable(e,o)&&isNumerable(a,t))return o*t;if($bm_isInstanceOfArray(o)&&isNumerable(a,t)){for(d=o.length,s=createTypedArray("float32",d),l=0;l<d;l+=1)s[l]=o[l]*t;return s}if(isNumerable(e,o)&&$bm_isInstanceOfArray(t)){for(d=t.length,s=createTypedArray("float32",d),l=0;l<d;l+=1)s[l]=o*t[l];return s}return 0}function div(o,t){var e=typeof o,a=typeof t,s,l,d;if(isNumerable(e,o)&&isNumerable(a,t))return o/t;if($bm_isInstanceOfArray(o)&&isNumerable(a,t)){for(d=o.length,s=createTypedArray("float32",d),l=0;l<d;l+=1)s[l]=o[l]/t;return s}if(isNumerable(e,o)&&$bm_isInstanceOfArray(t)){for(d=t.length,s=createTypedArray("float32",d),l=0;l<d;l+=1)s[l]=o/t[l];return s}return 0}function mod(a,r){return"string"==typeof a&&(a=parseInt(a)),"string"==typeof r&&(r=parseInt(r)),a%r}function clamp(a,t,r){if(t>r){var o=r;r=t,t=o}return _Mathmin(_Mathmax(a,t),r)}function radiansToDegrees(e){return e/degToRads}function degreesToRadians(e){return e*degToRads}function length(a,t){if("number"==typeof a||a instanceof Number)return t=t||0,_Mathabs(a-t);t||(t=helperLengthArray);var o=_Mathmin(a.length,t.length),i=0,s;for(s=0;s<o;s+=1)i+=_Mathpow(t[s]-a[s],2);return _Mathsqrt(i)}function normalize(e){return div(e,length(e))}function rgbToHsl(d){var t=d[0],i=d[1],r=d[2],a=_Mathmax(t,i,r),s=_Mathmin(t,i,r),o=(a+s)/2,l,p;if(a==s)l=p=0;else{var c=a-s;switch(p=.5<o?c/(2-a-s):c/(a+s),a){case t:l=(i-r)/c+(i<r?6:0);break;case i:l=(r-t)/c+2;break;case r:l=(t-i)/c+4;}l/=6}return[l,p,o,d[3]]}function hue2rgb(a,t,e){return 0>e&&(e+=1),1<e&&(e-=1),e<1/6?a+6*(t-a)*e:.5>e?t:e<2/3?a+6*((t-a)*(2/3-e)):a}function hslToRgb(d){var t=d[0],r=d[1],a=d[2],s,p,c;if(0===r)s=p=c=a;else{var m=.5>a?a*(1+r):a+r-a*r,o=2*a-m;s=hue2rgb(o,m,t+1/3),p=hue2rgb(o,m,t),c=hue2rgb(o,m,t-1/3)}return[s,p,c,d[3]]}function linear(d,t,p,c,m){if(void 0!==c&&void 0!==m||(c=t,m=p,t=0,p=1),p<t){var u=p;p=t,t=u}if(d<=t)return c;if(d>=p)return m;var a=p===t?0:(d-t)/(p-t);if(!c.length)return c+(m-c)*a;var s=c.length,l=createTypedArray("float32",s),g;for(g=0;g<s;g+=1)l[g]=c[g]+(m[g]-c[g])*a;return l}function random(o,s){if(void 0===s&&(void 0===o?(o=0,s=1):(s=o,o=void 0)),s.length){var l=s.length,i;o||(o=createTypedArray("float32",l));var d=createTypedArray("float32",l),r=BMMath.random();for(i=0;i<l;i+=1)d[i]=o[i]+r*(s[i]-o[i]);return d}return void 0===o&&(o=0),o+BMMath.random()*(s-o)}function createPath(d,t,e,n){var i=d.length,a=shape_pool.newElement(),s;a.setPathData(!!n,i);var p=[0,0],c,m;for(s=0;s<i;s+=1)c=t&&t[s]?t[s]:p,m=e&&e[s]?e[s]:p,a.setTripleAt(d[s][0],d[s][1],m[0]+d[s][0],m[1]+d[s][1],c[0]+d[s][0],c[1]+d[s][1],s,!0);return a}function initiateExpression(elem,data,property){function loopInDuration(a,t){return loopIn(a,t,!0)}function loopOutDuration(a,t){return loopOut(a,t,!0)}function lookAt(a,t){var e=[t[0]-a[0],t[1]-a[1],t[2]-a[2]],r=_Mathatan(e[0],_Mathsqrt(e[1]*e[1]+e[2]*e[2]))/degToRads;return[-_Mathatan(e[1],e[2])/degToRads,r,0]}function easeOut(a,t,e,n,i){return applyEase(easeOutBez,a,t,e,n,i)}function easeIn(a,t,e,n,i){return applyEase(easeInBez,a,t,e,n,i)}function ease(a,t,e,n,i){return applyEase(easeInOutBez,a,t,e,n,i)}function applyEase(d,t,p,n,i,c){void 0===i?(i=p,c=n):t=(t-p)/(n-p);var m=d(t=1<t?1:0>t?0:t);if($bm_isInstanceOfArray(i)){var s=i.length,l=createTypedArray("float32",s),u;for(u=0;u<s;u+=1)l[u]=(c[u]-i[u])*m+i[u];return l}return(c-i)*m+i}function nearestKey(o){var s=data.k.length,r,l,d;if(!(data.k.length&&"number"!=typeof data.k[0]))l=0,d=0;else if(l=-1,(o*=elem.comp.globalData.frameRate)<data.k[0].t)l=1,d=data.k[0].t;else{for(r=0;r<s-1;r+=1){if(o===data.k[r].t){l=r+1,d=data.k[r].t;break}if(o>data.k[r].t&&o<data.k[r+1].t){o-data.k[r].t>data.k[r+1].t-o?(l=r+2,d=data.k[r+1].t):(l=r+1,d=data.k[r].t);break}}-1===l&&(l=r+1,d=data.k[r].t)}var p={};return p.index=l,p.time=d/elem.comp.globalData.frameRate,p}function key(a){var o,s,l;if(!data.k.length||"number"==typeof data.k[0])throw new Error("The property has no keyframe at index "+a);a-=1,o={time:data.k[a].t/elem.comp.globalData.frameRate,value:[]};var d=data.k[a].hasOwnProperty("s")?data.k[a].s:data.k[a-1].e;for(l=d.length,s=0;s<l;s+=1)o[s]=d[s],o.value[s]=d[s];return o}function framesToTime(a,t){return t||(t=elem.comp.globalData.frameRate),a/t}function timeToFrames(a,r){return a||0===a||(a=time),r||(r=elem.comp.globalData.frameRate),a*r}function seedRandom(e){BMMath.seedrandom(randSeed+e)}function sourceRectAtTime(){return elem.sourceRectAtTime()}function substring(a,t){return"string"==typeof value?void 0===t?value.substring(a):value.substring(a,t):""}function substr(a,t){return"string"==typeof value?void 0===t?value.substr(a):value.substr(a,t):""}function posterizeTime(e){time=0===e?0:_Mathfloor(time*e)/e,value=valueAtTime(time)}function executeExpression(e){return value=e,_needsRandom&&seedRandom(randSeed),this.frameExpressionId===elem.globalData.frameId&&"textSelector"!==this.propType?value:("textSelector"===this.propType&&(textIndex=this.textIndex,textTotal=this.textTotal,selectorValue=this.selectorValue),thisLayer||(text=elem.layerInterface.text,thisLayer=elem.layerInterface,thisComp=elem.comp.compInterface,toWorld=thisLayer.toWorld.bind(thisLayer),fromWorld=thisLayer.fromWorld.bind(thisLayer),fromComp=thisLayer.fromComp.bind(thisLayer),toComp=thisLayer.toComp.bind(thisLayer),mask=thisLayer.mask?thisLayer.mask.bind(thisLayer):null,fromCompToSurface=fromComp),transform||(transform=elem.layerInterface("ADBE Transform Group"),$bm_transform=transform,transform&&(anchorPoint=transform.anchorPoint)),4!==elemType||content||(content=thisLayer("ADBE Root Vectors Group")),effect||(effect=thisLayer(4)),(hasParent=elem.hierarchy&&elem.hierarchy.length)&&!parent&&(parent=elem.hierarchy[0].layerInterface),time=this.comp.renderedFrame/this.comp.globalData.frameRate,needsVelocity&&(velocity=velocityAtTime(time)),expression_function(),this.frameExpressionId=elem.globalData.frameId,"shape"===scoped_bm_rt.propType&&(scoped_bm_rt=scoped_bm_rt.v),scoped_bm_rt)}var val=data.x,needsVelocity=/velocity(?![\w\d])/.test(val),_needsRandom=-1!==val.indexOf("random"),elemType=elem.data.ty,thisProperty=property,transform,$bm_transform,content,effect;thisProperty.valueAtTime=thisProperty.getValueAtTime,Object.defineProperty(thisProperty,"value",{get:function(){return thisProperty.v}}),elem.comp.frameDuration=1/elem.comp.globalData.frameRate,elem.comp.displayStartTime=0;var inPoint=elem.data.ip/elem.comp.globalData.frameRate,outPoint=elem.data.op/elem.comp.globalData.frameRate,width=elem.data.sw?elem.data.sw:0,height=elem.data.sh?elem.data.sh:0,name=elem.data.nm,__expression_functions=[],loopIn,loop_in,loopOut,loop_out,smooth,toWorld,fromWorld,fromComp,toComp,fromCompToSurface,position,rotation,anchorPoint,scale,thisLayer,thisComp,mask,valueAtTime,velocityAtTime,scoped_bm_rt;if(data.xf){var len=data.xf.length,i;for(i=0;i<len;i+=1)__expression_functions[i]=eval("(function(){ return "+data.xf[i]+"}())")}var expression_function=eval("[function _expression_function(){"+val+";scoped_bm_rt=$bm_rt}]")[0],numKeys=property.kf?data.k.length:0,active=!this.data||!0!==this.data.hd,wiggle=function(d,t){var e=this.pv.length?this.pv.length:1,r=createTypedArray("float32",e),a=_Mathfloor(5*time),s,p;for(s=0,p=0;s<a;){for(p=0;p<e;p+=1)r[p]+=-t+2*t*BMMath.random();s+=1}var c=5*time,o=c-_Mathfloor(c),l=createTypedArray("float32",e);if(1<e){for(p=0;p<e;p+=1)l[p]=this.pv[p]+r[p]+(-t+2*t*BMMath.random())*o;return l}return this.pv+r[0]+(-t+2*t*BMMath.random())*o}.bind(this);thisProperty.loopIn&&(loopIn=thisProperty.loopIn.bind(thisProperty),loop_in=loopIn),thisProperty.loopOut&&(loopOut=thisProperty.loopOut.bind(thisProperty),loop_out=loopOut),thisProperty.smooth&&(smooth=thisProperty.smooth.bind(thisProperty)),this.getValueAtTime&&(valueAtTime=this.getValueAtTime.bind(this)),this.getVelocityAtTime&&(velocityAtTime=this.getVelocityAtTime.bind(this));var comp=elem.comp.globalData.projectInterface.bind(elem.comp.globalData.projectInterface),index=elem.data.ind,hasParent=elem.hierarchy&&elem.hierarchy.length,randSeed=_Mathfloor(1e6*Math.random()),globalData=elem.globalData,time,velocity,value,text,textIndex,textTotal,selectorValue,parent;return executeExpression}var ob={},Math=BMMath,window=null,document=null,easeInBez=BezierFactory.getBezierEasing(.333,0,.833,.833,"easeIn").get,easeOutBez=BezierFactory.getBezierEasing(.167,.167,.667,1,"easeOut").get,easeInOutBez=BezierFactory.getBezierEasing(.33,0,.667,1,"easeInOut").get,add=sum,$bm_sum=sum,$bm_sub=sub,$bm_mul=mul,$bm_div=div,$bm_mod=mod,radians_to_degrees=radiansToDegrees,degrees_to_radians=radiansToDegrees,helperLengthArray=[0,0,0,0,0,0];return ob.initiateExpression=initiateExpression,ob}(),expressionHelpers={searchExpressions:function(a,t,e){t.x&&(e.k=!0,e.x=!0,e.initiateExpression=ExpressionManager.initiateExpression,e.effectsSequence.push(e.initiateExpression(a,t,e).bind(e)))},getSpeedAtTime:function(a){var t=this.getValueAtTime(a),e=this.getValueAtTime(a+-.01),n=0;if(t.length){var o;for(o=0;o<t.length;o+=1)n+=_Mathpow(e[o]-t[o],2);n=100*_Mathsqrt(n)}else n=0;return n},getVelocityAtTime:function(a){if(void 0!==this.vel)return this.vel;var t=this.getValueAtTime(a),i=this.getValueAtTime(a+-.001),r,o;if(t.length)for(r=createTypedArray("float32",t.length),o=0;o<t.length;o+=1)r[o]=(i[o]-t[o])/-.001;else r=(i-t)/-.001;return r},getValueAtTime:function(e){return e*=this.elem.globalData.frameRate,(e-=this.offsetTime)!==this._cachingAtTime.lastFrame&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastFrame<e?this._cachingAtTime.lastIndex:0,this._cachingAtTime.value=this.interpolateValue(e,this._cachingAtTime),this._cachingAtTime.lastFrame=e),this._cachingAtTime.value},getStaticValueAtTime:function(){return this.pv},setGroupProperty:function(e){this.propertyGroup=e}};!function(){function d(y,v,_){if(!this.k||!this.keyframes)return this.pv;y=y?y.toLowerCase():"";var n=this.comp.renderedFrame,l=this.keyframes,h=l[l.length-1].t,u,x,b,E,T;if(n<=h)return this.pv;if(_?x=h-(u=v?_Mathabs(h-elem.comp.globalData.frameRate*v):_Mathmax(0,h-this.elem.data.ip)):((!v||v>l.length-1)&&(v=l.length-1),u=h-(x=l[l.length-1-v].t)),"pingpong"!==y){if("offset"===y){var S=this.getValueAtTime(x/this.comp.globalData.frameRate,0),c=this.getValueAtTime(h/this.comp.globalData.frameRate,0),p=this.getValueAtTime(((n-x)%u+x)/this.comp.globalData.frameRate,0),f=_Mathfloor((n-x)/u);if(this.pv.length){for(E=(T=Array(S.length)).length,b=0;b<E;b+=1)T[b]=(c[b]-S[b])*f+p[b];return T}return(c-S)*f+p}if("continue"===y){var d=this.getValueAtTime(h/this.comp.globalData.frameRate,0),m=this.getValueAtTime((h-.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(E=(T=Array(d.length)).length,b=0;b<E;b+=1)T[b]=d[b]+(d[b]-m[b])*((n-h)/this.comp.globalData.frameRate)/5e-4;return T}return d+(n-h)/.001*(d-m)}}else if(0!=_Mathfloor((n-x)/u)%2)return this.getValueAtTime((u-(n-x)%u+x)/this.comp.globalData.frameRate,0);return this.getValueAtTime(((n-x)%u+x)/this.comp.globalData.frameRate,0)}function t(y,v,_){if(!this.k)return this.pv;y=y?y.toLowerCase():"";var n=this.comp.renderedFrame,l=this.keyframes,h=l[0].t,u,x,b,E,T;if(n>=h)return this.pv;if(_?x=h+(u=v?_Mathabs(elem.comp.globalData.frameRate*v):_Mathmax(0,this.elem.data.op-h)):((!v||v>l.length-1)&&(v=l.length-1),u=(x=l[v].t)-h),"pingpong"!==y){if("offset"===y){var S=this.getValueAtTime(h/this.comp.globalData.frameRate,0),c=this.getValueAtTime(x/this.comp.globalData.frameRate,0),p=this.getValueAtTime((u-(h-n)%u+h)/this.comp.globalData.frameRate,0),f=_Mathfloor((h-n)/u)+1;if(this.pv.length){for(E=(T=Array(S.length)).length,b=0;b<E;b+=1)T[b]=p[b]-(c[b]-S[b])*f;return T}return p-(c-S)*f}if("continue"===y){var d=this.getValueAtTime(h/this.comp.globalData.frameRate,0),m=this.getValueAtTime((h+.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(E=(T=Array(d.length)).length,b=0;b<E;b+=1)T[b]=d[b]+(d[b]-m[b])*(h-n)/.001;return T}return d+(d-m)*(h-n)/.001}}else if(0==_Mathfloor((h-n)/u)%2)return this.getValueAtTime(((h-n)%u+h)/this.comp.globalData.frameRate,0);return this.getValueAtTime((u-(h-n)%u+h)/this.comp.globalData.frameRate,0)}function e(d,p){if(!this.k)return this.pv;if(d=.5*(d||.4),1>=(p=_Mathfloor(p||5)))return this.pv;var c=this.comp.renderedFrame/this.comp.globalData.frameRate,r=c-d,a=1<p?(c+d-r)/(p-1):1,s=0,m=0,u,g;for(u=this.pv.length?createTypedArray("float32",this.pv.length):0;s<p;){if(g=this.getValueAtTime(r+s*a),this.pv.length)for(m=0;m<this.pv.length;m+=1)u[m]+=g[m];else u+=g;s+=1}if(this.pv.length)for(m=0;m<this.pv.length;m+=1)u[m]/=p;else u/=p;return u}function p(){console.warn("Transform at time not supported")}function i(){}function r(){}var c=TransformPropertyFactory.getTransformProperty;TransformPropertyFactory.getTransformProperty=function(a,t,e){var r=c(a,t,e);return r.getValueAtTime=r.dynamicProperties.length?p.bind(r):i.bind(r),r.setGroupProperty=expressionHelpers.setGroupProperty,r};var n=PropertyFactory.getProp;PropertyFactory.getProp=function(s,i,r,a,o){var l=n(s,i,r,a,o);l.getValueAtTime=l.kf?expressionHelpers.getValueAtTime.bind(l):expressionHelpers.getStaticValueAtTime.bind(l),l.setGroupProperty=expressionHelpers.setGroupProperty,l.loopOut=d,l.loopIn=t,l.smooth=e,l.getVelocityAtTime=expressionHelpers.getVelocityAtTime.bind(l),l.getSpeedAtTime=expressionHelpers.getSpeedAtTime.bind(l),l.numKeys=1===i.a?i.k.length:0,l.propertyIndex=i.ix;var p=0;return 0!==r&&(p=createTypedArray("float32",1===i.a?i.k[0].s.length:i.k.length)),l._cachingAtTime={lastFrame:-999999,lastIndex:0,value:p},expressionHelpers.searchExpressions(s,i,l),l.k&&o.addDynamicProperty(l),l};var a=ShapePropertyFactory.getConstructorFunction(),o=ShapePropertyFactory.getKeyframedConstructorFunction();r.prototype={vertices:function(l,t){this.k&&this.getValue();var e=this.v;void 0!==t&&(e=this.getValueAtTime(t,0));var d=e._length,r=e[l],a=e.v,s=createSizedArray(d),o;for(o=0;o<d;o+=1)s[o]="i"===l||"o"===l?[r[o][0]-a[o][0],r[o][1]-a[o][1]]:[r[o][0],r[o][1]];return s},points:function(e){return this.vertices("v",e)},inTangents:function(e){return this.vertices("i",e)},outTangents:function(e){return this.vertices("o",e)},isClosed:function(){return this.v.c},pointOnPath:function(d,t){var e=this.v;void 0!==t&&(e=this.getValueAtTime(t,0)),this._segmentsLength||(this._segmentsLength=bez.getSegmentsLength(e));for(var m=this._segmentsLength,r=m.lengths,a=m.totalLength*d,s=0,g=r.length,l=0,f;s<g;){if(l+r[s].addedLength>a){var y=s,u=e.c&&s===g-1?0:s+1,c=(a-l)/r[s].addedLength;f=bez.getPointInSegment(e.v[y],e.v[u],e.o[y],e.i[u],c,r[s]);break}l+=r[s].addedLength,s+=1}return f||(f=e.c?[e.v[0][0],e.v[0][1]]:[e.v[e._length-1][0],e.v[e._length-1][1]]),f},vectorOnPath:function(l,d,e){l=1==l?this.v.c?0:.999:l;var n=this.pointOnPath(l,d),i=this.pointOnPath(l+.001,d),r=i[0]-n[0],a=i[1]-n[1],s=_Mathsqrt(_Mathpow(r,2)+_Mathpow(a,2));return 0===s?[0,0]:"tangent"===e?[r/s,a/s]:[-a/s,r/s]},tangentOnPath:function(a,t){return this.vectorOnPath(a,t,"tangent")},normalOnPath:function(a,t){return this.vectorOnPath(a,t,"normal")},setGroupProperty:expressionHelpers.setGroupProperty,getValueAtTime:expressionHelpers.getStaticValueAtTime},extendPrototype([r],a),extendPrototype([r],o),o.prototype.getValueAtTime=function(e){return this._cachingAtTime||(this._cachingAtTime={shapeValue:shape_pool.clone(this.pv),lastIndex:0,lastTime:-999999}),e*=this.elem.globalData.frameRate,(e-=this.offsetTime)!==this._cachingAtTime.lastTime&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastTime<e?this._caching.lastIndex:0,this._cachingAtTime.lastTime=e,this.interpolateShape(e,this._cachingAtTime.shapeValue,this._cachingAtTime)),this._cachingAtTime.shapeValue},o.prototype.initiateExpression=ExpressionManager.initiateExpression;var s=ShapePropertyFactory.getShapeProp;ShapePropertyFactory.getShapeProp=function(o,t,e,n,i){var r=s(o,t,e,n,i);return r.propertyIndex=t.ix,r.lock=!1,3===e?expressionHelpers.searchExpressions(o,t.pt,r):4==e&&expressionHelpers.searchExpressions(o,t.ks,r),r.k&&o.addDynamicProperty(r),r}}(),TextProperty.prototype.getExpressionValue=function(a,t){var e=this.calculateExpression(t);if(a.t!==e){var r={};return this.copyData(r,a),r.t=e.toString(),r.__complete=!1,r}return a},TextProperty.prototype.searchProperty=function(){var a=this.searchKeyframes(),t=this.searchExpressions();return this.kf=a||t,this.kf},TextProperty.prototype.searchExpressions=function(){if(this.data.d.x)return this.calculateExpression=ExpressionManager.initiateExpression.bind(this)(this.elem,this.data.d,this),this.addEffect(this.getExpressionValue.bind(this)),!0};var ShapeExpressionInterface=function(){function d(u,t,c){var p=[],d=u?u.length:0,m;for(m=0;m<d;m+=1)"gr"==u[m].ty?p.push(g(u[m],t[m],c)):"fl"==u[m].ty?p.push(e(u[m],t[m],c)):"st"==u[m].ty?p.push(n(u[m],t[m],c)):"tm"==u[m].ty?p.push(i(u[m],t[m],c)):"tr"==u[m].ty||("el"==u[m].ty?p.push(r(u[m],t[m],c)):"sr"==u[m].ty?p.push(a(u[m],t[m],c)):"sh"==u[m].ty?p.push(h(u[m],t[m],c)):"rc"==u[m].ty?p.push(s(u[m],t[m],c)):"rd"==u[m].ty?p.push(o(u[m],t[m],c)):"rp"==u[m].ty&&p.push(l(u[m],t[m],c)));return p}function g(t,e,n){var i=function(e){return"ADBE Vectors Group"===e||"Contents"===e||2===e?i.content:i.transform};i.propertyGroup=function(e){return 1===e?i:n(e-1)};var r=function(t,e,n){var i=function(r){for(var t=0,i=a.length;t<i;){if(a[t]._name===r||a[t].mn===r||a[t].propertyIndex===r||a[t].ix===r||a[t].ind===r)return a[t];t+=1}if("number"==typeof r)return a[r-1]},a;return i.propertyGroup=function(e){return 1===e?i:n(e-1)},a=d(t.it,e.it,i.propertyGroup),i.numProperties=a.length,i.propertyIndex=t.cix,i._name=t.nm,i}(t,e,i.propertyGroup),a=function(a,t,e){function n(a){return 1==a?i:e(--a)}function i(t){return a.a.ix===t||"Anchor Point"===t?i.anchorPoint:a.o.ix===t||"Opacity"===t?i.opacity:a.p.ix===t||"Position"===t?i.position:a.r.ix===t||"Rotation"===t||"ADBE Vector Rotation"===t?i.rotation:a.s.ix===t||"Scale"===t?i.scale:a.sk&&a.sk.ix===t||"Skew"===t?i.skew:a.sa&&a.sa.ix===t||"Skew Axis"===t?i.skewAxis:void 0}return t.transform.mProps.o.setGroupProperty(n),t.transform.mProps.p.setGroupProperty(n),t.transform.mProps.a.setGroupProperty(n),t.transform.mProps.s.setGroupProperty(n),t.transform.mProps.r.setGroupProperty(n),t.transform.mProps.sk&&(t.transform.mProps.sk.setGroupProperty(n),t.transform.mProps.sa.setGroupProperty(n)),(t.transform.op.setGroupProperty(n),Object.defineProperties(i,{opacity:{get:ExpressionPropertyInterface(t.transform.mProps.o)},position:{get:ExpressionPropertyInterface(t.transform.mProps.p)},anchorPoint:{get:ExpressionPropertyInterface(t.transform.mProps.a)},scale:{get:ExpressionPropertyInterface(t.transform.mProps.s)},rotation:{get:ExpressionPropertyInterface(t.transform.mProps.r)},skew:{get:ExpressionPropertyInterface(t.transform.mProps.sk)},skewAxis:{get:ExpressionPropertyInterface(t.transform.mProps.sa)},_name:{value:a.nm}}),i.ty="tr",i.mn=a.mn,i.propertyGroup=e,i)}(t.it[t.it.length-1],e.it[e.it.length-1],i.propertyGroup);return i.content=r,i.transform=a,Object.defineProperty(i,"_name",{get:function(){return t.nm}}),i.numProperties=t.np,i.propertyIndex=t.ix,i.nm=t.nm,i.mn=t.mn,i}function e(a,t,e){function r(e){return"Color"===e||"color"===e?r.color:"Opacity"===e||"opacity"===e?r.opacity:void 0}return Object.defineProperties(r,{color:{get:ExpressionPropertyInterface(t.c)},opacity:{get:ExpressionPropertyInterface(t.o)},_name:{value:a.nm},mn:{value:a.mn}}),t.c.setGroupProperty(e),t.o.setGroupProperty(e),r}function n(d,t,e){function n(a){return 1===a?ob:e(a-1)}function i(e){return 1===e?o:n(e-1)}function r(e){Object.defineProperty(o,d.d[e].nm,{get:ExpressionPropertyInterface(t.d.dataProps[e].p)})}function a(e){return"Color"===e||"color"===e?a.color:"Opacity"===e||"opacity"===e?a.opacity:"Stroke Width"===e||"stroke width"===e?a.strokeWidth:void 0}var p=d.d?d.d.length:0,o={},l;for(l=0;l<p;l+=1)r(l),t.d.dataProps[l].p.setGroupProperty(i);return Object.defineProperties(a,{color:{get:ExpressionPropertyInterface(t.c)},opacity:{get:ExpressionPropertyInterface(t.o)},strokeWidth:{get:ExpressionPropertyInterface(t.w)},dash:{get:function(){return o}},_name:{value:d.nm},mn:{value:d.mn}}),t.c.setGroupProperty(n),t.o.setGroupProperty(n),t.w.setGroupProperty(n),a}function i(a,t,e){function n(a){return 1==a?i:e(--a)}function i(t){return t===a.e.ix||"End"===t||"end"===t?i.end:t===a.s.ix?i.start:t===a.o.ix?i.offset:void 0}return i.propertyIndex=a.ix,t.s.setGroupProperty(n),t.e.setGroupProperty(n),t.o.setGroupProperty(n),i.propertyIndex=a.ix,i.propertyGroup=e,Object.defineProperties(i,{start:{get:ExpressionPropertyInterface(t.s)},end:{get:ExpressionPropertyInterface(t.e)},offset:{get:ExpressionPropertyInterface(t.o)},_name:{value:a.nm}}),i.mn=a.mn,i}function r(o,t,e){function n(a){return 1==a?i:e(--a)}function i(t){return o.p.ix===t?i.position:o.s.ix===t?i.size:void 0}i.propertyIndex=o.ix;var a="tm"===t.sh.ty?t.sh.prop:t.sh;return a.s.setGroupProperty(n),a.p.setGroupProperty(n),Object.defineProperties(i,{size:{get:ExpressionPropertyInterface(a.s)},position:{get:ExpressionPropertyInterface(a.p)},_name:{value:o.nm}}),i.mn=o.mn,i}function a(o,t,e){function n(a){return 1==a?i:e(--a)}function i(t){return o.p.ix===t?i.position:o.r.ix===t?i.rotation:o.pt.ix===t?i.points:o.or.ix===t||"ADBE Vector Star Outer Radius"===t?i.outerRadius:o.os.ix===t?i.outerRoundness:o.ir&&(o.ir.ix===t||"ADBE Vector Star Inner Radius"===t)?i.innerRadius:o.is&&o.is.ix===t?i.innerRoundness:void 0}var a="tm"===t.sh.ty?t.sh.prop:t.sh;return i.propertyIndex=o.ix,a.or.setGroupProperty(n),a.os.setGroupProperty(n),a.pt.setGroupProperty(n),a.p.setGroupProperty(n),a.r.setGroupProperty(n),o.ir&&(a.ir.setGroupProperty(n),a.is.setGroupProperty(n)),Object.defineProperties(i,{position:{get:ExpressionPropertyInterface(a.p)},rotation:{get:ExpressionPropertyInterface(a.r)},points:{get:ExpressionPropertyInterface(a.pt)},outerRadius:{get:ExpressionPropertyInterface(a.or)},outerRoundness:{get:ExpressionPropertyInterface(a.os)},innerRadius:{get:ExpressionPropertyInterface(a.ir)},innerRoundness:{get:ExpressionPropertyInterface(a.is)},_name:{value:o.nm}}),i.mn=o.mn,i}function s(o,t,e){function n(a){return 1==a?i:e(--a)}function i(t){return o.p.ix===t?i.position:o.r.ix===t?i.roundness:o.s.ix===t||"Size"===t||"ADBE Vector Rect Size"===t?i.size:void 0}var a="tm"===t.sh.ty?t.sh.prop:t.sh;return i.propertyIndex=o.ix,a.p.setGroupProperty(n),a.s.setGroupProperty(n),a.r.setGroupProperty(n),Object.defineProperties(i,{position:{get:ExpressionPropertyInterface(a.p)},roundness:{get:ExpressionPropertyInterface(a.r)},size:{get:ExpressionPropertyInterface(a.s)},_name:{value:o.nm}}),i.mn=o.mn,i}function o(a,t,e){function n(t){if(a.r.ix===t||"Round Corners 1"===t)return n.radius}var r=t;return n.propertyIndex=a.ix,r.rd.setGroupProperty(function(a){return 1==a?n:e(--a)}),Object.defineProperties(n,{radius:{get:ExpressionPropertyInterface(r.rd)},_name:{value:a.nm}}),n.mn=a.mn,n}function l(o,t,e){function n(a){return 1==a?i:e(--a)}function i(t){return o.c.ix===t||"Copies"===t?i.copies:o.o.ix===t||"Offset"===t?i.offset:void 0}var a=t;return i.propertyIndex=o.ix,a.c.setGroupProperty(n),a.o.setGroupProperty(n),Object.defineProperties(i,{copies:{get:ExpressionPropertyInterface(a.c)},offset:{get:ExpressionPropertyInterface(a.o)},_name:{value:o.nm}}),i.mn=o.mn,i}function h(a,t,e){function n(e){if("Shape"===e||"shape"===e||"Path"===e||"path"===e||"ADBE Vector Shape"===e||2===e)return n.path}var r=t.sh;return r.setGroupProperty(function(a){return 1==a?n:e(--a)}),Object.defineProperties(n,{path:{get:function(){return r.k&&r.getValue(),r}},shape:{get:function(){return r.k&&r.getValue(),r}},_name:{value:a.nm},ix:{value:a.ix},propertyIndex:{value:a.ix},mn:{value:a.mn}}),n}return function(t,e,n){function i(r){if("number"==typeof r)return a[r-1];for(var t=0,i=a.length;t<i;){if(a[t]._name===r)return a[t];t+=1}}var a;return i.propertyGroup=n,a=d(t,e,i),i.numProperties=a.length,i}}(),TextExpressionInterface=function(a){function t(){}var r;return Object.defineProperty(t,"sourceText",{get:function(){a.textProperty.getValue();var e=a.textProperty.currentData.t;return void 0!==e&&(a.textProperty.currentData.t=void 0,(r=new String(e)).value=e||new String(e)),r}}),t},LayerExpressionInterface=function(){function l(e){var t=new Matrix;if(t.reset(),this._elem.finalTransform.mProp.applyToMatrix(t),this._elem.hierarchy&&this._elem.hierarchy.length){var a=this._elem.hierarchy.length,r;for(r=0;r<a;r+=1)this._elem.hierarchy[r].finalTransform.mProp.applyToMatrix(t);return t.applyToPointArray(e[0],e[1],e[2]||0)}return t.applyToPointArray(e[0],e[1],e[2]||0)}function t(e){var t=new Matrix;if(t.reset(),this._elem.finalTransform.mProp.applyToMatrix(t),this._elem.hierarchy&&this._elem.hierarchy.length){var a=this._elem.hierarchy.length,r;for(r=0;r<a;r+=1)this._elem.hierarchy[r].finalTransform.mProp.applyToMatrix(t);return t.inversePoint(e)}return t.inversePoint(e)}function e(a){var t=new Matrix;if(t.reset(),this._elem.finalTransform.mProp.applyToMatrix(t),this._elem.hierarchy&&this._elem.hierarchy.length){var e=this._elem.hierarchy.length,r;for(r=0;r<e;r+=1)this._elem.hierarchy[r].finalTransform.mProp.applyToMatrix(t);return t.inversePoint(a)}return t.inversePoint(a)}function n(){return[1,1,1,1]}return function(i){function r(e){return"ADBE Root Vectors Group"===e||"Contents"===e||2===e?r.shapeInterface:1===e||6===e||"Transform"===e||"transform"===e||"ADBE Transform Group"===e?s:4===e||"ADBE Effect Parade"===e||"effects"===e||"Effects"===e?r.effect:void 0}var s;r.toWorld=l,r.fromWorld=t,r.toComp=l,r.fromComp=e,r.sampleImage=n,r.sourceRectAtTime=i.sourceRectAtTime.bind(i),r._elem=i;var d=getDescriptor(s=TransformExpressionInterface(i.finalTransform.mProp),"anchorPoint");return Object.defineProperties(r,{hasParent:{get:function(){return i.hierarchy.length}},parent:{get:function(){return i.hierarchy[0].layerInterface}},rotation:getDescriptor(s,"rotation"),scale:getDescriptor(s,"scale"),position:getDescriptor(s,"position"),opacity:getDescriptor(s,"opacity"),anchorPoint:d,anchor_point:d,transform:{get:function(){return s}},active:{get:function(){return i.isInRange}}}),r.startTime=i.data.st,r.index=i.data.ind,r.source=i.data.refId,r.height=0===i.data.ty?i.data.h:100,r.width=0===i.data.ty?i.data.w:100,r.inPoint=i.data.ip/i.comp.globalData.frameRate,r.outPoint=i.data.op/i.comp.globalData.frameRate,r._name=i.data.nm,r.registerMaskInterface=function(e){r.mask=new MaskManagerInterface(e,i)},r.registerEffectsInterface=function(e){r.effect=e},r}}(),CompExpressionInterface=function(a){function t(t){for(var e=0,r=a.layers.length;e<r;){if(a.layers[e].nm===t||a.layers[e].ind===t)return a.elements[e].layerInterface;e+=1}return null}return Object.defineProperty(t,"_name",{value:a.data.nm}),t.layer=t,t.pixelAspect=1,t.height=a.data.h||a.globalData.compSize.h,t.width=a.data.w||a.globalData.compSize.w,t.pixelAspect=1,t.frameDuration=1/a.globalData.frameRate,t.displayStartTime=0,t.numLayers=a.layers.length,t},TransformExpressionInterface=function(a){function r(e){return"scale"===e||"Scale"===e||"ADBE Scale"===e||6===e?r.scale:"rotation"===e||"Rotation"===e||"ADBE Rotation"===e||"ADBE Rotate Z"===e||10===e?r.rotation:"ADBE Rotate X"===e?r.xRotation:"ADBE Rotate Y"===e?r.yRotation:"position"===e||"Position"===e||"ADBE Position"===e||2===e?r.position:"ADBE Position_0"===e?r.xPosition:"ADBE Position_1"===e?r.yPosition:"ADBE Position_2"===e?r.zPosition:"anchorPoint"===e||"AnchorPoint"===e||"Anchor Point"===e||"ADBE AnchorPoint"===e||1===e?r.anchorPoint:"opacity"===e||"Opacity"===e||11===e?r.opacity:void 0}if(Object.defineProperty(r,"rotation",{get:ExpressionPropertyInterface(a.r||a.rz)}),Object.defineProperty(r,"zRotation",{get:ExpressionPropertyInterface(a.rz||a.r)}),Object.defineProperty(r,"xRotation",{get:ExpressionPropertyInterface(a.rx)}),Object.defineProperty(r,"yRotation",{get:ExpressionPropertyInterface(a.ry)}),Object.defineProperty(r,"scale",{get:ExpressionPropertyInterface(a.s)}),a.p)var e=ExpressionPropertyInterface(a.p);return Object.defineProperty(r,"position",{get:function(){return a.p?e():[a.px.v,a.py.v,a.pz?a.pz.v:0]}}),Object.defineProperty(r,"xPosition",{get:ExpressionPropertyInterface(a.px)}),Object.defineProperty(r,"yPosition",{get:ExpressionPropertyInterface(a.py)}),Object.defineProperty(r,"zPosition",{get:ExpressionPropertyInterface(a.pz)}),Object.defineProperty(r,"anchorPoint",{get:ExpressionPropertyInterface(a.a)}),Object.defineProperty(r,"opacity",{get:ExpressionPropertyInterface(a.o)}),Object.defineProperty(r,"skew",{get:ExpressionPropertyInterface(a.sk)}),Object.defineProperty(r,"skewAxis",{get:ExpressionPropertyInterface(a.sa)}),Object.defineProperty(r,"orientation",{get:ExpressionPropertyInterface(a.or)}),r},ProjectInterface=function(){function a(e){this.compositions.push(e)}return function(){function t(a){for(var t=0,r=this.compositions.length;t<r;){if(this.compositions[t].data&&this.compositions[t].data.nm===a)return this.compositions[t].prepareFrame&&this.compositions[t].data.xt&&this.compositions[t].prepareFrame(this.currentFrame),this.compositions[t].compInterface;t+=1}}return t.compositions=[],t.currentFrame=0,t.registerComposition=a,t}}(),EffectsExpressionInterface=function(){function d(p,e,n,r){function a(e){return 1===e?l:n(e-1)}var c=[],i=p.ef.length,o;for(o=0;o<i;o+=1)5===p.ef[o].ty?c.push(d(p.ef[o],e.effectElements[o],e.effectElements[o].propertyGroup,r)):c.push(t(e.effectElements[o],p.ef[o].ty,r,a));var l=function(a){for(var t=p.ef,e=0,n=t.length;e<n;){if(a===t[e].nm||a===t[e].mn||a===t[e].ix)return 5===t[e].ty?c[e]:c[e]();e+=1}return c[0]()};return l.propertyGroup=a,"ADBE Color Control"===p.mn&&Object.defineProperty(l,"color",{get:function(){return c[0]()}}),Object.defineProperty(l,"numProperties",{get:function(){return p.np}}),l.active=l.enabled=0!==p.en,l}function t(a,t,e,n){var i=ExpressionPropertyInterface(a.p);return a.p.setGroupProperty&&a.p.setGroupProperty(n),function(){return 10===t?e.comp.compInterface(a.p.v):i()}}return{createEffectsInterface:function(o,e){if(o.effectsManager){var l=[],t=o.data.ef,a=o.effectsManager.effectElements.length,r;for(r=0;r<a;r+=1)l.push(d(t[r],o.effectsManager.effectElements[r],e,o));return function(e){for(var t=o.data.ef||[],r=0,n=t.length;r<n;){if(e===t[r].nm||e===t[r].mn||e===t[r].ix)return l[r];r+=1}}}}}}(),MaskManagerInterface=function(){function n(a,t){this._mask=a,this._data=t}return Object.defineProperty(n.prototype,"maskPath",{get:function(){return this._mask.prop.k&&this._mask.prop.getValue(),this._mask.prop}}),Object.defineProperty(n.prototype,"maskOpacity",{get:function(){return this._mask.op.k&&this._mask.op.getValue(),100*this._mask.op.v}}),function(o){var e=createSizedArray(o.viewData.length),r=o.viewData.length,a;for(a=0;a<r;a+=1)e[a]=new n(o.viewData[a],o.masksProperties[a]);return function(n){for(a=0;a<r;){if(o.masksProperties[a].nm===n)return e[a];a+=1}}}}(),ExpressionPropertyInterface=function(){function o(o,t,e){Object.defineProperty(o,"velocity",{get:function(){return t.getVelocityAtTime(t.comp.currentFrame)}}),o.numKeys=t.keyframes?t.keyframes.length:0,o.key=function(n){if(o.numKeys){var i="";i="s"in t.keyframes[n-1]?t.keyframes[n-1].s:"e"in t.keyframes[n-2]?t.keyframes[n-2].e:t.keyframes[n-2].s;var s="unidimensional"===e?new Number(i):Object.assign({},i);return s.time=t.keyframes[n-1].t/t.elem.comp.globalData.frameRate,s}return 0},o.valueAtTime=t.getValueAtTime,o.speedAtTime=t.getSpeedAtTime,o.velocityAtTime=t.getVelocityAtTime,o.propertyGroup=t.propertyGroup}function a(){return n}var n={pv:0,v:0,mult:1},l={pv:[0,0,0],v:[0,0,0],mult:1};return function(e){return e?"unidimensional"===e.propType?function(t){t&&"pv"in t||(t=n);var s=1/t.mult,i=t.pv*s,l=new Number(i);return l.value=i,o(l,t,"unidimensional"),function(){return t.k&&t.getValue(),i=t.v*s,l.value!==i&&((l=new Number(i)).value=i,o(l,t,"unidimensional")),l}}(e):function(n){n&&"pv"in n||(n=l);var d=1/n.mult,i=n.pv.length,r=createTypedArray("float32",i),a=createTypedArray("float32",i);return r.value=a,o(r,n,"multidimensional"),function(){n.k&&n.getValue();for(var t=0;t<i;t+=1)r[t]=a[t]=n.v[t]*d;return r}}(e):a}}(),TextExpressionSelectorProp,propertyGetTextProp;TextExpressionSelectorProp=function(){function a(a,t){return this.textIndex=a+1,this.textTotal=t,this.v=this.getValue()*this.mult,this.v}return function(t,e){this.pv=1,this.comp=t.comp,this.elem=t,this.mult=.01,this.propType="textSelector",this.textTotal=e.totalChars,this.selectorValue=100,this.lastValue=[1,1,1],this.k=!0,this.x=!0,this.getValue=ExpressionManager.initiateExpression.bind(this)(t,e,this),this.getMult=a,this.getVelocityAtTime=expressionHelpers.getVelocityAtTime,this.getValueAtTime=this.kf?expressionHelpers.getValueAtTime.bind(this):expressionHelpers.getStaticValueAtTime.bind(this),this.setGroupProperty=expressionHelpers.setGroupProperty}}(),propertyGetTextProp=TextSelectorProp.getTextSelectorProp,TextSelectorProp.getTextSelectorProp=function(a,t,e){return 1===t.t?new TextExpressionSelectorProp(a,t,e):propertyGetTextProp(a,t,e)},extendPrototype([DynamicPropertyContainer],GroupEffect),GroupEffect.prototype.getValue=GroupEffect.prototype.iterateDynamicProperties,GroupEffect.prototype.init=function(o,t){this.data=o,this.effectElements=[],this.initDynamicPropertyContainer(t);var e=this.data.ef.length,r=this.data.ef,a,s;for(a=0;a<e;a+=1){switch(s=null,r[a].ty){case 0:s=new SliderEffect(r[a],t,this);break;case 1:s=new AngleEffect(r[a],t,this);break;case 2:s=new ColorEffect(r[a],t,this);break;case 3:s=new PointEffect(r[a],t,this);break;case 4:case 7:s=new CheckboxEffect(r[a],t,this);break;case 10:s=new LayerIndexEffect(r[a],t,this);break;case 11:s=new MaskIndexEffect(r[a],t,this);break;case 5:s=new EffectsManager(r[a],t,this);break;default:s=new NoValueEffect(r[a],t,this);}s&&this.effectElements.push(s)}};var lottie={},_isFrozen=!1;lottie.play=animationManager.play,lottie.pause=animationManager.pause,lottie.setLocationHref=setLocationHref,lottie.togglePause=animationManager.togglePause,lottie.setSpeed=animationManager.setSpeed,lottie.setDirection=animationManager.setDirection,lottie.stop=animationManager.stop,lottie.searchAnimations=searchAnimations,lottie.registerAnimation=animationManager.registerAnimation,lottie.loadAnimation=loadAnimation,lottie.setSubframeRendering=setSubframeRendering,lottie.resize=animationManager.resize,lottie.goToAndStop=animationManager.goToAndStop,lottie.destroy=animationManager.destroy,lottie.setQuality=setQuality,lottie.inBrowser=inBrowser,lottie.installPlugin=installPlugin,lottie.freeze=animationManager.freeze,lottie.unfreeze=animationManager.unfreeze,lottie.getRegisteredAnimations=animationManager.getRegisteredAnimations,lottie.__getFactory=getFactory,lottie.version="5.6.8";var standalone="__[STANDALONE]__",animationData="__[ANIMATIONDATA]__",renderer="";var scripts=document.getElementsByTagName("script"),index=scripts.length-1,myScript=scripts[index]||{src:""},queryString=myScript.src.replace(/^[^\?]+\??/,"");renderer=getQueryVariable("renderer");var readyStateCheckInterval=setInterval(checkReady,100);return lottie})},function(a,t,e){"use strict";function n(){var a=navigator.userAgent.toLowerCase(),t=navigator.appVersion.toLowerCase(),e=/windows phone|iemobile|wpdesktop/.test(a),n=!e&&/android.*mobile/.test(a),i=!e&&!n&&/android/i.test(a),r=!e&&/ip(hone|od|ad)/i.test(a)&&!window.MSStream,s=!e&&/ipad/i.test(a)&&r,o=i||s,l=n||r&&!s||e,u=-1<a.indexOf("firefox"),c=!!a.match(/version\/[\d\.]+.*safari/),p=-1<a.indexOf("opr"),f=!window.ActiveXObject&&"ActiveXObject"in window,d=-1<t.indexOf("msie")||f||-1<t.indexOf("edge"),m=-1<a.indexOf("edge"),g=null!==window.chrome&&void 0!==window.chrome&&"google inc."==navigator.vendor.toLowerCase()&&!p&&!m;this.infos={isDroid:n||i,isDroidPhone:n,isDroidTablet:i,isWindowsPhone:e,isIos:r,isIpad:s,isDevice:l||o,isEdge:m,isIE:d,isIE11:f,isPhone:l,isTablet:o,isFirefox:u,isSafari:c,isOpera:p,isChrome:g,isDesktop:!l&&!o},Object.keys(this.infos).forEach(function(e){Object.defineProperty(this,e,{get:function(){return this.infos[e]}})},this),Object.freeze(this)}var r=e(7);a.exports=new n,n.prototype.addClasses=function(a){Object.keys(this.infos).forEach(function(t){this.infos[t]&&function(a,t){a.addClass?a.addClass(t):a.classList?a.classList.add(t):a.className+=" "+t}(a,r(t))},this)},n.prototype.getInfos=function(){return e=this.infos,JSON.parse(JSON.stringify(e));var e}},function(g,t,e){(function(t){function T(a){var t=typeof a;return!!a&&("object"==t||"function"==t)}function d(s){if("number"==typeof s)return s;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==l.call(e)}(s))return NaN;if(T(s)){var d="function"==typeof s.valueOf?s.valueOf():s;s=T(d)?d+"":d}if("string"!=typeof s)return 0===s?s:+s;s=s.replace(m,"");var e=i.test(s);return e||r.test(s)?a(s.slice(2),e?2:8):n.test(s)?NaN:+s}var m=/^\s+|\s+$/g,n=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,r=/^0o[0-7]+$/i,a=parseInt,e="object"==typeof t&&t&&t.Object===Object&&t,o="object"==typeof self&&self&&self.Object===Object&&self,s=e||o||Function("return this")(),l=Object.prototype.toString,S=Math.max,c=Math.min,p=function(){return s.Date.now()};g.exports=function(m,f,t){function n(t){var e=C,r=D;return C=D=void 0,M=t,R=m.apply(r,e)}function y(e){return M=e,k=setTimeout(x,f),A?n(e):R}function _(e){var t=e-F;return void 0===F||t>=f||0>t||w&&e-M>=L}function x(){var e=p();return _(e)?b(e):void(k=setTimeout(x,function(e){var t=f-(e-F);return w?c(t,L-(e-M)):t}(e)))}function b(e){return k=void 0,P&&C?n(e):(C=D=void 0,R)}function E(){var e=p(),t=_(e);if(C=arguments,D=this,F=e,t){if(void 0===k)return y(F);if(w)return k=setTimeout(x,f),n(F)}return void 0===k&&(k=setTimeout(x,f)),R}var M=0,A=!1,w=!1,P=!0,C,D,L,R,k,F;if("function"!=typeof m)throw new TypeError("Expected a function");return f=d(f)||0,T(t)&&(A=!!t.leading,L=(w="maxWait"in t)?S(d(t.maxWait)||0,f):L,P="trailing"in t?!!t.trailing:P),E.cancel=function(){void 0!==k&&clearTimeout(k),M=0,C=F=D=k=void 0},E.flush=function(){return void 0===k?R:b(p())},E}}).call(this,e(8))},function(n,t){function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var e,d,p,c;c=function(a){"use strict";var Z=function(e){return y.getComputedStyle(e)},r=Array.isArray,o=[].slice,T=function(e,t){var a;return r(e)?e:"string"===(a=l(e))&&!t&&e?o.call(C.querySelectorAll(e),0):e&&"object"===a&&"length"in e?o.call(e,0):e?[e]:[]},J=function(e){return"absolute"===e.position||!0===e.absolute},s=function(a,t){for(var e=t.length,r;-1<--e;)if(r=t[e],a.substr(0,r.length)===r)return r.length},p=function(a,r){void 0===a&&(a="");var e=~a.indexOf("++"),n=1;return e&&(a=a.split("++").join("")),function(){return"<"+r+" style='position:relative;display:inline-block;'"+(a?" class='"+a+(e?n++:"")+"'>":">")}},P=function a(t,o,n){var i=t.nodeType;if(1===i||9===i||11===i)for(t=t.firstChild;t;t=t.nextSibling)a(t,o,n);else 3!==i&&4!==i||(t.nodeValue=t.nodeValue.split(o).join(n))},m=function(a,t){for(var e=t.length;-1<--e;)a.push(t[e])},u=function(a,r,e){for(var n;a&&a!==r;){if(n=a._next||a.nextSibling)return n.textContent.charAt(0)===e;a=a.parentNode||a._parent}},d=function o(t){var e=T(t.childNodes),r=e.length,a,s;for(a=0;a<r;a++)(s=e[a])._isSplit?o(s):(a&&3===s.previousSibling.nodeType?s.previousSibling.nodeValue+=3===s.nodeType?s.nodeValue:s.firstChild.nodeValue:3!==s.nodeType&&t.insertBefore(s.firstChild,s),t.removeChild(s))},g=function(a,t){return parseFloat(t[a])||0},c=function(e,t,n,i,r,a,s){var o=Z(e),l=g("paddingLeft",o),p=-999,y=g("borderBottomWidth",o)+g("borderTopWidth",o),v=g("borderLeftWidth",o)+g("borderRightWidth",o),_=g("paddingTop",o)+g("paddingBottom",o),T=g("paddingLeft",o)+g("paddingRight",o),A=.2*g("fontSize",o),L=o.textAlign,R=[],k=[],F=[],I=t.wordDelimiter||" ",N=t.tag?t.tag:t.span?"span":"div",z=t.type||t.split||"chars,words,lines",O=r&&~z.indexOf("lines")?[]:null,U=~z.indexOf("words"),B=~z.indexOf("chars"),V=J(t),G=t.linesClass,H=~(G||"").indexOf("++"),W=[],j,Y,q,K,Q,$,ee,te,ae,re,ne,ie;for(H&&(G=G.split("++").join("")),q=(Y=e.getElementsByTagName("*")).length,Q=[],j=0;j<q;j++)Q[j]=Y[j];if(O||V)for(j=0;j<q;j++)(($=(K=Q[j]).parentNode===e)||V||B&&!U)&&(ie=K.offsetTop,O&&$&&Math.abs(ie-p)>A&&("BR"!==K.nodeName||0===j)&&(ee=[],O.push(ee),p=ie),V&&(K._x=K.offsetLeft,K._y=ie,K._w=K.offsetWidth,K._h=K.offsetHeight),O&&((K._isSplit&&$||!B&&$||U&&$||!U&&K.parentNode.parentNode===e&&!K.parentNode._isSplit)&&(ee.push(K),K._x-=l,u(K,e,I)&&(K._wordEnd=!0)),"BR"===K.nodeName&&(K.nextSibling&&"BR"===K.nextSibling.nodeName||0===j)&&O.push([])));for(j=0;j<q;j++)$=(K=Q[j]).parentNode===e,"BR"===K.nodeName?O||V?(K.parentNode&&K.parentNode.removeChild(K),Q.splice(j--,1),q--):U||e.appendChild(K):(V&&(ae=K.style,U||$||(K._x+=K.parentNode._x,K._y+=K.parentNode._y),ae.left=K._x+"px",ae.top=K._y+"px",ae.position="absolute",ae.display="block",ae.width=K._w+1+"px",ae.height=K._h+"px"),!U&&B?K._isSplit?(K._next=K.nextSibling,K.parentNode.appendChild(K)):K.parentNode._isSplit?(K._parent=K.parentNode,!K.previousSibling&&K.firstChild&&(K.firstChild._isFirst=!0),K.nextSibling&&" "===K.nextSibling.textContent&&!K.nextSibling.nextSibling&&W.push(K.nextSibling),K._next=K.nextSibling&&K.nextSibling._isFirst?null:K.nextSibling,K.parentNode.removeChild(K),Q.splice(j--,1),q--):$||(ie=!K.nextSibling&&u(K.parentNode,e,I),K.parentNode._parent&&K.parentNode._parent.appendChild(K),ie&&K.parentNode.appendChild(C.createTextNode(" ")),"span"===N&&(K.style.display="inline"),R.push(K)):K.parentNode._isSplit&&!K._isSplit&&""!==K.innerHTML?k.push(K):B&&!K._isSplit&&("span"===N&&(K.style.display="inline"),R.push(K)));for(j=W.length;-1<--j;)W[j].parentNode.removeChild(W[j]);if(O){for(V&&(re=C.createElement(N),e.appendChild(re),ne=re.offsetWidth+"px",ie=re.offsetParent===e?0:e.offsetLeft,e.removeChild(re)),ae=e.style.cssText,e.style.cssText="display:none;";e.firstChild;)e.removeChild(e.firstChild);for(te=" "===I&&(!V||!U&&!B),j=0;j<O.length;j++){for(ee=O[j],(re=C.createElement(N)).style.cssText="display:block;text-align:"+L+";position:"+(V?"absolute;":"relative;"),G&&(re.className=G+(H?j+1:"")),F.push(re),q=ee.length,Y=0;Y<q;Y++)"BR"!==ee[Y].nodeName&&(K=ee[Y],re.appendChild(K),te&&K._wordEnd&&re.appendChild(C.createTextNode(" ")),V&&(0===Y&&(re.style.top=K._y+"px",re.style.left=l+ie+"px"),K.style.top="0px",ie&&(K.style.left=K._x-ie+"px")));0===q?re.innerHTML="&nbsp;":U||B||(d(re),P(re,String.fromCharCode(160)," ")),V&&(re.style.width=ne,re.style.height=K._h+"px"),e.appendChild(re)}e.style.cssText=ae}V&&(s>e.clientHeight&&(e.style.height=s-_+"px",e.clientHeight<s&&(e.style.height=s+y+"px")),a>e.clientWidth&&(e.style.width=a-T+"px",e.clientWidth<a&&(e.style.width=a+v+"px"))),m(n,R),U&&m(i,k),m(r,F)},f=function(e,a,r,n){var i=a.tag?a.tag:a.span?"span":"div",o=~(a.type||a.split||"chars,words,lines").indexOf("chars"),p=J(a),m=a.wordDelimiter||" ",f=" "===m?p?"&#173; ":" ":"",_="</"+i+">",x=1,b=a.specialChars?"function"==typeof a.specialChars?a.specialChars:s:null,E=C.createElement("div"),T=e.parentNode,S,A,w,D,L,R,k,F;for(T.insertBefore(E,e),E.textContent=e.nodeValue,T.removeChild(e),k=-1!==(S=function a(t){var r=t.nodeType,n="";if(1===r||9===r||11===r){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=a(t)}else if(3===r||4===r)return t.nodeValue;return n}(e=E)).indexOf("<"),!1!==a.reduceWhiteSpace&&(S=S.replace(/(?:\s\s+)/g," ").replace(/(?:\r|\n|\t\t)/g,"")),k&&(S=S.split("<").join("{{LT}}")),L=S.length,A=(" "===S.charAt(0)?f:"")+r(),w=0;w<L;w++)if(R=S.charAt(w),b&&(F=b(S.substr(w),a.specialChars)))R=S.substr(w,F||1),A+=o&&" "!==R?n()+R+"</"+i+">":R,w+=F-1;else if(R===m&&S.charAt(w-1)!==m&&w){for(A+=x?_:"",x=0;S.charAt(w+1)===m;)A+=f,w++;w===L-1?A+=f:")"!==S.charAt(w+1)&&(A+=f+r(),x=1)}else"{"===R&&"{{LT}}"===S.substr(w,6)?(A+=o?n()+"{{LT}}</"+i+">":"{{LT}}",w+=5):55296<=R.charCodeAt(0)&&56319>=R.charCodeAt(0)||65024<=S.charCodeAt(w+1)&&65039>=S.charCodeAt(w+1)?(D=((S.substr(w,12).split(/([\uD800-\uDBFF][\uDC00-\uDFFF](?:[\u200D\uFE0F][\uD800-\uDBFF][\uDC00-\uDFFF]){2,}|\uD83D\uDC69(?:\u200D(?:(?:\uD83D\uDC69\u200D)?\uD83D\uDC67|(?:\uD83D\uDC69\u200D)?\uD83D\uDC66)|\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC69\u200D(?:\uD83D\uDC69\u200D)?\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC69\u200D(?:\uD83D\uDC69\u200D)?\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|\uD83C\uDFF3\uFE0F\u200D\uD83C\uDF08|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3D\uDD3E\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642]\uFE0F|\uD83D\uDC69(?:\uD83C[\uDFFB-\uDFFF])\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92])|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC6F\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3C-\uDD3E\uDDD6-\uDDDF])\u200D[\u2640\u2642]\uFE0F|\uD83C\uDDFD\uD83C\uDDF0|\uD83C\uDDF6\uD83C\uDDE6|\uD83C\uDDF4\uD83C\uDDF2|\uD83C\uDDE9(?:\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF])|\uD83C\uDDF7(?:\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC])|\uD83C\uDDE8(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF])|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uFE0F\u200D[\u2640\u2642]|(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642])\uFE0F|(?:\uD83D\uDC41\uFE0F\u200D\uD83D\uDDE8|\uD83D\uDC69(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2695\u2696\u2708]|\uD83D\uDC69\u200D[\u2695\u2696\u2708]|\uD83D\uDC68(?:(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708]))\uFE0F|\uD83C\uDDF2(?:\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF])|\uD83D\uDC69\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69]))|\uD83C\uDDF1(?:\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE])|\uD83C\uDDEF(?:\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5])|\uD83C\uDDED(?:\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA])|\uD83C\uDDEB(?:\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7])|[#\*0-9]\uFE0F\u20E3|\uD83C\uDDE7(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF])|\uD83C\uDDE6(?:\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF])|\uD83C\uDDFF(?:\uD83C[\uDDE6\uDDF2\uDDFC])|\uD83C\uDDF5(?:\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE])|\uD83C\uDDFB(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA])|\uD83C\uDDF3(?:\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF])|\uD83C\uDFF4\uDB40\uDC67\uDB40\uDC62(?:\uDB40\uDC77\uDB40\uDC6C\uDB40\uDC73|\uDB40\uDC73\uDB40\uDC63\uDB40\uDC74|\uDB40\uDC65\uDB40\uDC6E\uDB40\uDC67)\uDB40\uDC7F|\uD83D\uDC68(?:\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83D\uDC68|(?:(?:\uD83D[\uDC68\uDC69])\u200D)?\uD83D\uDC66\u200D\uD83D\uDC66|(?:(?:\uD83D[\uDC68\uDC69])\u200D)?\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92])|(?:\uD83C[\uDFFB-\uDFFF])\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]))|\uD83C\uDDF8(?:\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF])|\uD83C\uDDF0(?:\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF])|\uD83C\uDDFE(?:\uD83C[\uDDEA\uDDF9])|\uD83C\uDDEE(?:\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9])|\uD83C\uDDF9(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF])|\uD83C\uDDEC(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE])|\uD83C\uDDFA(?:\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF])|\uD83C\uDDEA(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA])|\uD83C\uDDFC(?:\uD83C[\uDDEB\uDDF8])|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uD83C[\uDFFB-\uDFFF])|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3D\uDD3E\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u270A-\u270D]|\uD83C[\uDF85\uDFC2\uDFC7]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC70\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDCAA\uDD74\uDD7A\uDD90\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC]|\uD83E[\uDD18-\uDD1C\uDD1E\uDD1F\uDD30-\uDD36\uDDD1-\uDDD5])(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC68(?:\u200D(?:(?:(?:\uD83D[\uDC68\uDC69])\u200D)?\uD83D\uDC67|(?:(?:\uD83D[\uDC68\uDC69])\u200D)?\uD83D\uDC66)|\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u26F9\u270A-\u270D]|\uD83C[\uDF85\uDFC2-\uDFC4\uDFC7\uDFCA-\uDFCC]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66-\uDC69\uDC6E\uDC70-\uDC78\uDC7C\uDC81-\uDC83\uDC85-\uDC87\uDCAA\uDD74\uDD75\uDD7A\uDD90\uDD95\uDD96\uDE45-\uDE47\uDE4B-\uDE4F\uDEA3\uDEB4-\uDEB6\uDEC0\uDECC]|\uD83E[\uDD18-\uDD1C\uDD1E\uDD1F\uDD26\uDD30-\uDD39\uDD3D\uDD3E\uDDD1-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])?|(?:[\u231A\u231B\u23E9-\u23EC\u23F0\u23F3\u25FD\u25FE\u2614\u2615\u2648-\u2653\u267F\u2693\u26A1\u26AA\u26AB\u26BD\u26BE\u26C4\u26C5\u26CE\u26D4\u26EA\u26F2\u26F3\u26F5\u26FA\u26FD\u2705\u270A\u270B\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u27B0\u27BF\u2B1B\u2B1C\u2B50\u2B55]|\uD83C[\uDC04\uDCCF\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF93\uDFA0-\uDFCA\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF4\uDFF8-\uDFFF]|\uD83D[\uDC00-\uDC3E\uDC40\uDC42-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDD7A\uDD95\uDD96\uDDA4\uDDFB-\uDE4F\uDE80-\uDEC5\uDECC\uDED0-\uDED2\uDEEB\uDEEC\uDEF4-\uDEF8]|\uD83E[\uDD10-\uDD3A\uDD3C-\uDD3E\uDD40-\uDD45\uDD47-\uDD4C\uDD50-\uDD6B\uDD80-\uDD97\uDDC0\uDDD0-\uDDE6])|(?:[#\*0-9\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u2660\u2663\u2665\u2666\u2668\u267B\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDEE0-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEF8]|\uD83E[\uDD10-\uDD3A\uDD3C-\uDD3E\uDD40-\uDD45\uDD47-\uDD4C\uDD50-\uDD6B\uDD80-\uDD97\uDDC0\uDDD0-\uDDE6])\uFE0F)/)||[])[1]||"").length||2,A+=o&&" "!==R?n()+S.substr(w,D)+"</"+i+">":S.substr(w,D),w+=D-1):A+=o&&" "!==R?n()+R+"</"+i+">":R;e.outerHTML=A+(x?_:""),k&&P(T,"{{LT}}","<")},h=function l(t,e,n,i){var r=T(t.childNodes),o=r.length,d=J(e),p,c;if(3!==t.nodeType||1<o){for(e.absolute=!1,p=0;p<o;p++)(3!==(c=r[p]).nodeType||/\S+/.test(c.nodeValue))&&(d&&3!==c.nodeType&&"inline"===Z(c).display&&(c.style.display="inline-block",c.style.position="relative"),c._isSplit=!0,l(c,e,n,i));return e.absolute=d,void(t._isSplit=!0)}f(t,e,n,i)},t=function(){function a(e,t){v||(C=document,y=window,v=1),this.elements=T(e),this.chars=[],this.words=[],this.lines=[],this._originals=[],this.vars=t||{},this.split(t)}var e=a.prototype;return e.split=function(l){this.isSplit&&this.revert(),this.vars=l=l||this.vars,this._originals.length=this.chars.length=this.words.length=this.lines.length=0;for(var d=this.elements.length,m=l.tag?l.tag:l.span?"span":"div",a=p(l.wordsClass,m),s=p(l.charsClass,m),o,u,g;-1<--d;)g=this.elements[d],this._originals[d]=g.innerHTML,o=g.clientHeight,u=g.clientWidth,h(g,l,a,s),c(g,l,this.chars,this.words,this.lines,u,o);return this.chars.reverse(),this.words.reverse(),this.lines.reverse(),this.isSplit=!0,this},e.revert=function(){var a=this._originals;if(!a)throw"revert() call wasn't scoped properly.";return this.elements.forEach(function(t,e){return t.innerHTML=a[e]}),this.chars=[],this.words=[],this.lines=[],this.isSplit=!1,this},a.create=function(t,e){return new a(t,e)},a}(),C,y,v;t.version="3.0.0",a.SplitText=t,a.default=t,Object.defineProperty(a,"__esModule",{value:!0})},"object"===l(t)&&void 0!==n?c(t):(d=[t],void 0===(p="function"==typeof(e=c)?e.apply(t,d):e)||(n.exports=p))},function(a,t,e){a.exports=e(9)},function(){},function(){var e=Math.min,r=Math.max;!function(){"use strict";function d(o){this.time=o.time,this.target=o.target,this.rootBounds=a(o.rootBounds),this.boundingClientRect=a(o.boundingClientRect),this.intersectionRect=a(o.intersectionRect||{top:0,bottom:0,left:0,right:0,width:0,height:0}),this.isIntersecting=!!o.intersectionRect;var t=this.boundingClientRect,e=t.width*t.height,n=this.intersectionRect,i=n.width*n.height;this.intersectionRatio=e?+(i/e).toFixed(4):this.isIntersecting?1:0}function m(o,t){var e=t||{},a,s,l;if("function"!=typeof o)throw new Error("callback must be a function");if(e.root&&1!=e.root.nodeType)throw new Error("root must be an Element");this._checkForIntersections=(a=this._checkForIntersections.bind(this),s=this.THROTTLE_TIMEOUT,l=null,function(){l||(l=setTimeout(function(){a(),l=null},s))}),this._callback=o,this._observationTargets=[],this._queuedEntries=[],this._rootMarginValues=this._parseRootMargin(e.rootMargin),this.thresholds=this._initThresholds(e.threshold),this.root=e.root||null,this.rootMargin=this._rootMarginValues.map(function(e){return e.value+e.unit}).join(" "),this._monitoringDocuments=[],this._monitoringUnsubscribes=[]}function g(a,t,e,r){"function"==typeof a.addEventListener?a.addEventListener(t,e,r||!1):"function"==typeof a.attachEvent&&a.attachEvent("on"+t,e)}function s(a,t,e,r){"function"==typeof a.removeEventListener?a.removeEventListener(t,e,r||!1):"function"==typeof a.detatchEvent&&a.detatchEvent("on"+t,e)}function v(a){var t;try{t=a.getBoundingClientRect()}catch(e){}return t?(t.width&&t.height||(t={top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.right-t.left,height:t.bottom-t.top}),t):{top:0,bottom:0,left:0,right:0,width:0,height:0}}function a(e){return!e||"x"in e?e:{top:e.top,y:e.top,bottom:e.bottom,left:e.left,x:e.left,right:e.right,width:e.width,height:e.height}}function o(a,t){var e=t.top-a.top,r=t.left-a.left;return{top:e,left:r,height:t.height,width:t.width,bottom:e+t.height,right:r+t.width}}function l(a,t){for(var e=t;e;){if(e==a)return!0;e=u(e)}return!1}function u(t){var e=t.parentNode;return 9==t.nodeType&&t!=_?p(t):e&&11==e.nodeType&&e.host?e.host:e&&e.assignedSlot?e.assignedSlot.parentNode:e}function p(e){try{return e.defaultView&&e.defaultView.frameElement||null}catch(e){return null}}if("object"==typeof window)if("IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype)"isIntersecting"in window.IntersectionObserverEntry.prototype||Object.defineProperty(window.IntersectionObserverEntry.prototype,"isIntersecting",{get:function(){return 0<this.intersectionRatio}});else{var _=window.document,c=[],T=null,S=null;m.prototype.THROTTLE_TIMEOUT=100,m.prototype.POLL_INTERVAL=null,m.prototype.USE_MUTATION_OBSERVER=!0,m._setupCrossOriginUpdater=function(){return T||(T=function(e,t){S=e&&t?o(e,t):{top:0,bottom:0,left:0,right:0,width:0,height:0},c.forEach(function(e){e._checkForIntersections()})}),T},m._resetCrossOriginUpdater=function(){T=null,S=null},m.prototype.observe=function(a){if(!this._observationTargets.some(function(t){return t.element==a})){if(!a||1!=a.nodeType)throw new Error("target must be an Element");this._registerInstance(),this._observationTargets.push({element:a,entry:null}),this._monitorIntersections(a.ownerDocument),this._checkForIntersections()}},m.prototype.unobserve=function(a){this._observationTargets=this._observationTargets.filter(function(t){return t.element!=a}),this._unmonitorIntersections(a.ownerDocument),0==this._observationTargets.length&&this._unregisterInstance()},m.prototype.disconnect=function(){this._observationTargets=[],this._unmonitorAllIntersections(),this._unregisterInstance()},m.prototype.takeRecords=function(){var e=this._queuedEntries.slice();return this._queuedEntries=[],e},m.prototype._initThresholds=function(a){var t=a||[0];return Array.isArray(t)||(t=[t]),t.sort().filter(function(a,t,e){if("number"!=typeof a||isNaN(a)||0>a||1<a)throw new Error("threshold must be a number between 0 and 1 inclusively");return a!==e[t-1]})},m.prototype._parseRootMargin=function(a){var t=(a||"0px").split(/\s+/).map(function(a){var t=/^(-?\d*\.?\d+)(px|%)$/.exec(a);if(!t)throw new Error("rootMargin must be specified in pixels or percent");return{value:parseFloat(t[1]),unit:t[2]}});return t[1]=t[1]||t[0],t[2]=t[2]||t[0],t[3]=t[3]||t[1],t},m.prototype._monitorIntersections=function(o){var e=o.defaultView;if(e&&-1==this._monitoringDocuments.indexOf(o)){var n=this._checkForIntersections,i=null,d=null;if(this.POLL_INTERVAL?i=e.setInterval(n,this.POLL_INTERVAL):(g(e,"resize",n,!0),g(o,"scroll",n,!0),this.USE_MUTATION_OBSERVER&&"MutationObserver"in e&&(d=new e.MutationObserver(n)).observe(o,{attributes:!0,childList:!0,characterData:!0,subtree:!0})),this._monitoringDocuments.push(o),this._monitoringUnsubscribes.push(function(){var e=o.defaultView;e&&(i&&e.clearInterval(i),s(e,"resize",n,!0)),s(o,"scroll",n,!0),d&&d.disconnect()}),o!=(this.root&&this.root.ownerDocument||_)){var t=p(o);t&&this._monitorIntersections(t.ownerDocument)}}},m.prototype._unmonitorIntersections=function(o){var e=this._monitoringDocuments.indexOf(o);if(-1!=e){var t=this.root&&this.root.ownerDocument||_;if(!this._observationTargets.some(function(e){var a=e.element.ownerDocument;if(a==o)return!0;for(;a&&a!=t;){var i=p(a);if((a=i&&i.ownerDocument)==o)return!0}return!1})){var n=this._monitoringUnsubscribes[e];if(this._monitoringDocuments.splice(e,1),this._monitoringUnsubscribes.splice(e,1),n(),o!=t){var r=p(o);r&&this._unmonitorIntersections(r.ownerDocument)}}}},m.prototype._unmonitorAllIntersections=function(){var a=this._monitoringUnsubscribes.slice(0);this._monitoringDocuments.length=0,this._monitoringUnsubscribes.length=0;for(var t=0;t<a.length;t++)a[t]()},m.prototype._checkForIntersections=function(){if(this.root||!T||S){var r=this._rootIsInDom(),t=r?this._getRootRect():{top:0,bottom:0,left:0,right:0,width:0,height:0};this._observationTargets.forEach(function(e){var n=e.element,a=v(n),i=this._rootContainsTarget(n),o=e.entry,s=r&&i&&this._computeTargetAndRootIntersection(n,a,t),l=e.entry=new d({time:window.performance&&performance.now&&performance.now(),target:n,boundingClientRect:a,rootBounds:T&&!this.root?null:t,intersectionRect:s});o?r&&i?this._hasCrossedThreshold(o,l)&&this._queuedEntries.push(l):o&&o.isIntersecting&&this._queuedEntries.push(l):this._queuedEntries.push(l)},this),this._queuedEntries.length&&this._callback(this.takeRecords(),this)}},m.prototype._computeTargetAndRootIntersection=function(t,n,i){if("none"!=window.getComputedStyle(t).display){for(var a=n,l=u(t),p=!1,A,P,C,L,R,k,F,I;!p&&l;){var N=null,z=1==l.nodeType?window.getComputedStyle(l):{};if("none"==z.display)return null;if(l!=this.root&&9!=l.nodeType){var b=l.ownerDocument;l!=b.body&&l!=b.documentElement&&"visible"!=z.overflow&&(N=v(l))}else if(p=!0,l==this.root||l==_)T&&!this.root?S&&(0!=S.width||0!=S.height)?N=S:(l=null,N=null,a=null):N=i;else{var M=u(l),E=M&&v(M),w=M&&this._computeTargetAndRootIntersection(M,E,i);E&&w?(l=M,N=o(E,w)):(l=null,a=null)}if(N&&(A=N,P=a,C=void 0,L=void 0,R=void 0,k=void 0,F=void 0,I=void 0,C=r(A.top,P.top),L=e(A.bottom,P.bottom),R=r(A.left,P.left),k=e(A.right,P.right),I=L-C,a=0<=(F=k-R)&&0<=I&&{top:C,bottom:L,left:R,right:k,width:F,height:I}||null),!a)break;l=l&&u(l)}return a}},m.prototype._getRootRect=function(){var t;if(this.root)t=v(this.root);else{var a=_.documentElement,r=_.body;t={top:0,left:0,right:a.clientWidth||r.clientWidth,width:a.clientWidth||r.clientWidth,bottom:a.clientHeight||r.clientHeight,height:a.clientHeight||r.clientHeight}}return this._expandRectByRootMargin(t)},m.prototype._expandRectByRootMargin=function(a){var t=this._rootMarginValues.map(function(t,e){return"px"==t.unit?t.value:t.value*(e%2?a.width:a.height)/100}),e={top:a.top-t[0],right:a.right+t[1],bottom:a.bottom+t[2],left:a.left-t[3]};return e.width=e.right-e.left,e.height=e.bottom-e.top,e},m.prototype._hasCrossedThreshold=function(o,t){var e=o&&o.isIntersecting?o.intersectionRatio||0:-1,n=t.isIntersecting?t.intersectionRatio||0:-1;if(e!==n)for(var i=0,s;i<this.thresholds.length;i++)if(s=this.thresholds[i],s==e||s==n||s<e!=s<n)return!0},m.prototype._rootIsInDom=function(){return!this.root||l(_,this.root)},m.prototype._rootContainsTarget=function(t){return l(this.root||_,t)&&(!this.root||this.root.ownerDocument==t.ownerDocument)},m.prototype._registerInstance=function(){0>c.indexOf(this)&&c.push(this)},m.prototype._unregisterInstance=function(){var e=c.indexOf(this);-1!=e&&c.splice(e,1)},window.IntersectionObserver=m,window.IntersectionObserverEntry=d}}()},function(e){"use strict";e.exports=function(e){if("string"!=typeof e)throw new TypeError("expected a string");return(e=(e=(e=e.replace(/([a-z])([A-Z])/g,"$1-$2")).replace(/[ \t\W]/g,"-")).replace(/^-+|-+$/g,"")).toLowerCase()}},function(e){var a=function(){return this}();try{a=a||new Function("return this")()}catch(e){"object"==typeof window&&(a=window)}e.exports=a},function(T,t,e){"use strict";var om=Number.EPSILON,sm=Math.LN2,lm=Math.log,dm=Math.atan,pm=Math.ceil,cm=Math.acos,mm=Math.asin,um=Math.atan2,gm=Math.tan,fm=Math.sin,hm=Math.cos,ym=Math.PI,vm=Math.abs,_m=Math.sqrt,xm=Math.pow,bm=Math.min,Em=Math.max,Tm=Math.floor,Sm=Math.round;function n(){}function r(a,t){var e=Object.keys(a);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(a);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(a,t).enumerable})),e.push.apply(e,r)}return e}function d(a,t,e){return t in a?Object.defineProperty(a,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):a[t]=e,a}function m(a,t,e){return a*(1-e)+t*e}function v(e){return e.getBoundingClientRect()}function x(){return this instanceof x?void(this.size=0,this.uid=0,this.selectors=[],this.selectorObjects={},this.indexes=Object.create(this.indexes),this.activeIndexes=[]):new x}function b(d,p){var e=(d=d.slice(0).concat(d.default)).length,l=p,c=[],m,u,g,f,y,v;do if(Am.exec(""),(g=Am.exec(l))&&(l=g[3],g[2]||!l))for(m=0;m<e;m++)if(y=(v=d[m]).selector(g[1])){for(u=c.length,f=!1;u--;)if(c[u].index===v&&c[u].key===y){f=!0;break}f||c.push({index:v,key:y});break}while(g);return c}function M(a,t){var e,o,s;for(e=0,o=a.length;e<o;e++)if(s=a[e],t.isPrototypeOf(s))return s}function P(a,t){return a.id-t.id}function C(e){void 0===L[e]&&(L[e]=[])}function D(e){return"string"==typeof e?document.querySelectorAll(e):e}function k(a){let t=function(a,t){const r=[];let n=t;do{if(1!==n.nodeType)break;const t=a.matches(n);t.length&&r.push({delegatedTarget:n,stack:t})}while(n=n.parentElement);return r}(A[a.type],a.target);if(t.length)for(let e=0;e<t.length;e++)for(let r=0;r<t[e].stack.length;r++)-1===R.indexOf(a.type)?(F(a,t[e].delegatedTarget),t[e].stack[r].data(a)):(F(a,t[e].delegatedTarget),a.target===t[e].delegatedTarget&&t[e].stack[r].data(a))}function F(a,t){Object.defineProperty(a,"currentTarget",{configurable:!0,enumerable:!0,value:t})}function N(e){return JSON.parse(JSON.stringify(e))}function z(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}function O(a,t){for(var e=0,r;e<t.length;e++)r=t[e],r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(a,r.key,r)}function B(a,t,e){return t in a?Object.defineProperty(a,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):a[t]=e,a}function V(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function G(a,t){a.prototype=Object.create(t.prototype),a.prototype.constructor=a,a.__proto__=t}function H(){}function j(a,t){this.x=a||0,this.y=t||0}function W(){this.elements=[1,0,0,0,1,0,0,0,1],0<arguments.length&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}function X(d,t,e,n,i,r,a,s,o,l){Object.defineProperty(this,"id",{value:Mr++}),this.uuid=eg.generateUUID(),this.name="",this.image=void 0===d?X.DEFAULT_IMAGE:d,this.mipmaps=[],this.mapping=void 0===t?X.DEFAULT_MAPPING:t,this.wrapS=void 0===e?1001:e,this.wrapT=void 0===n?1001:n,this.magFilter=void 0===i?1006:i,this.minFilter=void 0===r?1008:r,this.anisotropy=void 0===o?1:o,this.format=void 0===a?1023:a,this.internalFormat=null,this.type=void 0===s?1009:s,this.offset=new j(0,0),this.repeat=new j(1,1),this.center=new j(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new W,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=void 0===l?3e3:l,this.version=0,this.onUpdate=null}function q(d,t,e,n,i,r,a,s,o,l,p,m){X.call(this,null,r,a,s,o,l,n,i,p,m),this.image={data:d||null,width:t||1,height:e||1},this.magFilter=void 0===o?1003:o,this.minFilter=void 0===l?1003:l,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}function rt(a,t,e,r){this._x=a||0,this._y=t||0,this._z=e||0,this._w=void 0===r?1:r}function At(a,t,e){this.x=a||0,this.y=t||0,this.z=e||0}function it(a,t){this.min=void 0===a?new At(1/0,1/0,1/0):a,this.max=void 0===t?new At(-1/0,-1/0,-1/0):t}function Pt(d,t,e,n,i){var r,p;for(r=0,p=d.length-3;r<=p;r+=3){jr.fromArray(d,r);var c=i.x*vm(jr.x)+i.y*vm(jr.y)+i.z*vm(jr.z),o=t.dot(jr),l=e.dot(jr),m=n.dot(jr);if(Em(-Em(o,l,m),bm(o,l,m))>c)return!1}return!0}function Rt(a,t){this.center=void 0===a?new At:a,this.radius=void 0===t?-1:t}function It(a,t){this.normal=void 0===a?new At(1,0,0):a,this.constant=void 0===t?0:t}function Yt(o,t,e,n,i,r){this.planes=[void 0===o?new It:o,void 0===t?new It:t,void 0===e?new It:e,void 0===n?new It:n,void 0===i?new It:i,void 0===r?new It:r]}function na(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],0<arguments.length&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}function ua(a,t,e){return void 0===t&&void 0===e?this.set(a):this.setRGB(a,t,e)}function da(a,t,e){return 0>e&&(e+=1),1<e&&(e-=1),e<1/6?a+6*(t-a)*e:.5>e?t:e<2/3?a+6*(t-a)*(2/3-e):a}function ma(e){return .04045>e?.0773993808*e:xm(.9478672986*e+.0521327014,2.4)}function ga(e){return .0031308>e?12.92*e:1.055*xm(e,.41666)-.055}function va(a,t,e,r){this.x=a||0,this.y=t||0,this.z=e||0,this.w=void 0===r?1:r}function _a(a,t,e,r){this._x=a||0,this._y=t||0,this._z=e||0,this._order=r||_a.DefaultOrder}function Ea(){this.mask=1}function wa(){Object.defineProperty(this,"id",{value:ba++}),this.uuid=eg.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=wa.DefaultUp.clone();var a=new At,t=new _a,e=new rt,r=new At(1,1,1);t._onChange(function(){e.setFromEuler(t,!1)}),e._onChange(function(){t.setFromQuaternion(e,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:a},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:e},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new na},normalMatrix:{value:new W}}),this.matrix=new na,this.matrixWorld=new na,this.matrixAutoUpdate=wa.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new Ea,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}function Na(){wa.call(this),this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}function Ba(){function o(e,t){!1!==s&&(l(e,t),i.requestAnimationFrame(o))}var i=null,s=!1,l=null;return{start:function(){!0!==s&&null!==l&&(i.requestAnimationFrame(o),s=!0)},stop:function(){s=!1},setAnimationLoop:function(e){l=e},setContext:function(t){i=t}}}function za(o,t){var l=t.isWebGL2,s=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),s.get(e)},remove:function(t){t.isInterleavedBufferAttribute&&(t=t.data);var a=s.get(t);a&&(o.deleteBuffer(a.buffer),s.delete(t))},update:function(t,n){t.isInterleavedBufferAttribute&&(t=t.data);var r=s.get(t);void 0===r?s.set(t,function(t,e){var n=t.array,i=t.usage,r=o.createBuffer();o.bindBuffer(e,r),o.bufferData(e,n,i),t.onUploadCallback();var a=o.FLOAT;return n instanceof Float32Array?a=o.FLOAT:n instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):n instanceof Uint16Array?a=o.UNSIGNED_SHORT:n instanceof Int16Array?a=o.SHORT:n instanceof Uint32Array?a=o.UNSIGNED_INT:n instanceof Int32Array?a=o.INT:n instanceof Int8Array?a=o.BYTE:n instanceof Uint8Array&&(a=o.UNSIGNED_BYTE),{buffer:r,type:a,bytesPerElement:n.BYTES_PER_ELEMENT,version:t.version}}(t,n)):r.version<t.version&&(!function(t,e,n){var r=e.array,a=e.updateRange;o.bindBuffer(n,t),-1===a.count?o.bufferSubData(n,0,r):(l?o.bufferSubData(n,a.offset*r.BYTES_PER_ELEMENT,r,a.offset,a.count):o.bufferSubData(n,a.offset*r.BYTES_PER_ELEMENT,r.subarray(a.offset,a.offset+a.count)),a.count=-1)}(r.buffer,t,n),r.version=t.version)}}}function Ua(o,t,e,n,i,r){this.a=o,this.b=t,this.c=e,this.normal=n&&n.isVector3?n:new At,this.vertexNormals=Array.isArray(n)?n:[],this.color=i&&i.isColor?i:new ua,this.vertexColors=Array.isArray(i)?i:[],this.materialIndex=void 0===r?0:r}function Va(){Object.defineProperty(this,"id",{value:Oa+=2}),this.uuid=eg.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}function Xa(a,t,e){if(Array.isArray(a))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=a,this.itemSize=t,this.count=void 0===a?0:a.length/t,this.normalized=!0===e,this.usage=35044,this.updateRange={offset:0,count:-1},this.version=0}function Ya(a,t,e){Xa.call(this,new Int8Array(a),t,e)}function Za(a,t,e){Xa.call(this,new Uint8Array(a),t,e)}function Ja(a,t,e){Xa.call(this,new Uint8ClampedArray(a),t,e)}function Ka(a,t,e){Xa.call(this,new Int16Array(a),t,e)}function $a(a,t,e){Xa.call(this,new Uint16Array(a),t,e)}function Qa(a,t,e){Xa.call(this,new Int32Array(a),t,e)}function Er(a,t,e){Xa.call(this,new Uint32Array(a),t,e)}function Tr(a,t,e){Xa.call(this,new Float32Array(a),t,e)}function Ar(a,t,e){Xa.call(this,new Float64Array(a),t,e)}function wr(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}function Cr(a){if(0===a.length)return-1/0;for(var t=a[0],r=1,o=a.length;r<o;++r)a[r]>t&&(t=a[r]);return t}function Dr(){Object.defineProperty(this,"id",{value:qa+=2}),this.uuid=eg.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}function Lr(a,t,e,r){Va.call(this),this.type="PlaneGeometry",this.parameters={width:a,height:t,widthSegments:e,heightSegments:r},this.fromBufferGeometry(new Xr(a,t,e,r)),this.mergeVertices()}function Xr(c,T,S,n){Dr.call(this),this.type="PlaneBufferGeometry",this.parameters={width:c,height:T,widthSegments:S,heightSegments:n};var i=(c=c||1)/2,s=(T=T||1)/2,o=Tm(S)||1,l=Tm(n)||1,h=o+1,u=c/o,p=T/l,f=[],d=[],m=[],g=[],v,M;for(M=0;M<l+1;M++){var A=M*p-s;for(v=0;v<h;v++){var y=v*u-i;d.push(y,-A,0),m.push(0,0,1),g.push(v/o),g.push(1-M/l)}}for(M=0;M<l;M++)for(v=0;v<o;v++){var _=v+h*M,x=v+h*(M+1),b=v+1+h*(M+1),E=v+1+h*M;f.push(_,x,E),f.push(x,b,E)}this.setIndex(f),this.setAttribute("position",new Tr(d,3)),this.setAttribute("normal",new Tr(m,3)),this.setAttribute("uv",new Tr(g,2))}function qr(){Object.defineProperty(this,"id",{value:ds++}),this.uuid=eg.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.blending=1,this.side=0,this.flatShading=!1,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=100,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=7680,this.stencilZFail=7680,this.stencilZPass=7680,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0}function Zr(a){var t={};for(var e in a)for(var n in t[e]={},a[e]){var i=a[e][n];t[e][n]=i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture)?i.clone():Array.isArray(i)?i.slice():i}return t}function Qr(a){for(var t={},e=0,o;e<a.length;e++)for(var s in o=Zr(a[e]),o)t[s]=o[s];return t}function gn(e){qr.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="\nvoid main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}\n",this.fragmentShader="\nvoid main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}\n",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,void 0!==e&&(void 0!==e.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}function bn(a,t){this.origin=void 0===a?new At:a,this.direction=void 0===t?new At(0,0,-1):t}function En(a,t,e){this.a=void 0===a?new At:a,this.b=void 0===t?new At:t,this.c=void 0===e?new At:e}function _i(e){qr.call(this),this.type="MeshBasicMaterial",this.color=new ua(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.setValues(e)}function xi(a,t){wa.call(this),this.type="Mesh",this.geometry=void 0===a?new Dr:a,this.material=void 0===t?new _i:t,this.updateMorphTargets()}function so(d,t,e,n,i,r,a,s){if(null===(1===t.side?n.intersectTriangle(a,r,i,!0,s):n.intersectTriangle(i,r,a,2!==t.side,s)))return null;ro.copy(s),ro.applyMatrix4(d.matrixWorld);var o=e.ray.origin.distanceTo(ro);return o<e.near||o>e.far?null:{distance:o,point:ro.clone(),object:d}}function oo(_,t,e,n,i,r,a,s,o,l,h,u){Ws.fromBufferAttribute(i,l),Xs.fromBufferAttribute(i,h),qs.fromBufferAttribute(i,u);var c=_.morphTargetInfluences;if(t.morphTargets&&r&&c){Ks.set(0,0,0),$s.set(0,0,0),Qs.set(0,0,0);for(var p=0,x=r.length;p<x;p++){var d=c[p],m=r[p];0!==d&&(Ys.fromBufferAttribute(m,l),Zs.fromBufferAttribute(m,h),Js.fromBufferAttribute(m,u),a?(Ks.addScaledVector(Ys,d),$s.addScaledVector(Zs,d),Qs.addScaledVector(Js,d)):(Ks.addScaledVector(Ys.sub(Ws),d),$s.addScaledVector(Zs.sub(Xs),d),Qs.addScaledVector(Js.sub(qs),d)))}Ws.add(Ks),Xs.add($s),qs.add(Qs)}_.isSkinnedMesh&&(_.boneTransform(l,Ws),_.boneTransform(h,Xs),_.boneTransform(u,qs));var g=so(_,t,e,n,Ws,Xs,qs,io);if(g){s&&(to.fromBufferAttribute(s,l),eo.fromBufferAttribute(s,h),no.fromBufferAttribute(s,u),g.uv=En.getUV(io,Ws,Xs,qs,to,eo,no,new j)),o&&(to.fromBufferAttribute(o,l),eo.fromBufferAttribute(o,h),no.fromBufferAttribute(o,u),g.uv2=En.getUV(io,Ws,Xs,qs,to,eo,no,new j));var v=new Ua(l,h,u);En.getNormal(Ws,Xs,qs,v.normal),g.face=v}return g}function lo(y,d,t,e){function n(a,t){d.buffers.color.setClear(a.r,a.g,a.b,t,e)}var c=new ua(0),s=0,_=null,x=0,b=null,E,i;return{getClearColor:function(){return c},setClearColor:function(a,t){c.set(a),n(c,s=void 0===t?1:t)},getClearAlpha:function(){return s},setClearAlpha:function(e){n(c,s=e)},render:function(a,e,r,o){var l=e.background,p=y.xr,m=p.getSession&&p.getSession();if(m&&"additive"===m.environmentBlendMode&&(l=null),null===l?n(c,s):l&&l.isColor&&(n(l,1),o=!0),(y.autoClear||o)&&y.clear(y.autoClearColor,y.autoClearDepth,y.autoClearStencil),l&&(l.isCubeTexture||l.isWebGLCubeRenderTarget||306===l.mapping)){void 0===i&&((i=new xi(new ps(1,1,1),new gn({type:"BackgroundCubeMaterial",uniforms:Zr(ho.cube.uniforms),vertexShader:ho.cube.vertexShader,fragmentShader:ho.cube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),i.geometry.deleteAttribute("uv"),i.onBeforeRender=function(a,t,e){this.matrixWorld.copyPosition(e.matrixWorld)},Object.defineProperty(i.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),t.update(i));var u=l.isWebGLCubeRenderTarget?l.texture:l;i.material.uniforms.envMap.value=u,i.material.uniforms.flipEnvMap.value=u.isCubeTexture?-1:1,_===l&&x===u.version&&b===y.toneMapping||(i.material.needsUpdate=!0,_=l,x=u.version,b=y.toneMapping),a.unshift(i,i.geometry,i.material,0,0,null)}else l&&l.isTexture&&(void 0===E&&((E=new xi(new Xr(2,2),new gn({type:"BackgroundMaterial",uniforms:Zr(ho.background.uniforms),vertexShader:ho.background.vertexShader,fragmentShader:ho.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),Object.defineProperty(E.material,"map",{get:function(){return this.uniforms.t2D.value}}),t.update(E)),E.material.uniforms.t2D.value=l,!0===l.matrixAutoUpdate&&l.updateMatrix(),E.material.uniforms.uvTransform.value.copy(l.matrix),_===l&&x===l.version&&b===y.toneMapping||(E.material.needsUpdate=!0,_=l,x=l.version,b=y.toneMapping),a.unshift(E,E.geometry,E.material,0,0,null))}}}function co(d,t,p,e){var n=e.isWebGL2,a;this.setMode=function(e){a=e},this.render=function(t,e){d.drawArrays(a,t,e),p.update(e,a)},this.renderInstances=function(e,r,i,o){if(0!==o){var s,l;if(n)s=d,l="drawArraysInstanced";else if(l="drawArraysInstancedANGLE",null===(s=t.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");s[l](a,r,i,o),p.update(i,a,o)}}}function po(_,t,e){function n(t){if("highp"===t){if(0<_.getShaderPrecisionFormat(_.VERTEX_SHADER,_.HIGH_FLOAT).precision&&0<_.getShaderPrecisionFormat(_.FRAGMENT_SHADER,_.HIGH_FLOAT).precision)return"highp";t="mediump"}return"mediump"===t&&0<_.getShaderPrecisionFormat(_.VERTEX_SHADER,_.MEDIUM_FLOAT).precision&&0<_.getShaderPrecisionFormat(_.FRAGMENT_SHADER,_.MEDIUM_FLOAT).precision?"mediump":"lowp"}var r="undefined"!=typeof WebGL2RenderingContext&&_ instanceof WebGL2RenderingContext||"undefined"!=typeof WebGL2ComputeRenderingContext&&_ instanceof WebGL2ComputeRenderingContext,a=void 0===e.precision?"highp":e.precision,x=n(a),o;x!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",x,"instead."),a=x);var b=!0===e.logarithmicDepthBuffer,l=_.getParameter(_.MAX_TEXTURE_IMAGE_UNITS),h=_.getParameter(_.MAX_VERTEX_TEXTURE_IMAGE_UNITS),u=_.getParameter(_.MAX_TEXTURE_SIZE),c=_.getParameter(_.MAX_CUBE_MAP_TEXTURE_SIZE),p=_.getParameter(_.MAX_VERTEX_ATTRIBS),f=_.getParameter(_.MAX_VERTEX_UNIFORM_VECTORS),d=_.getParameter(_.MAX_VARYING_VECTORS),m=_.getParameter(_.MAX_FRAGMENT_UNIFORM_VECTORS),g=0<h,v=r||!!t.get("OES_texture_float");return{isWebGL2:r,getMaxAnisotropy:function(){if(void 0!==o)return o;var e=t.get("EXT_texture_filter_anisotropic");return o=null===e?0:_.getParameter(e.MAX_TEXTURE_MAX_ANISOTROPY_EXT)},getMaxPrecision:n,precision:a,logarithmicDepthBuffer:b,maxTextures:l,maxVertexTextures:h,maxTextureSize:u,maxCubemapSize:c,maxAttributes:p,maxVertexUniforms:f,maxVaryings:d,maxFragmentUniforms:m,vertexTextures:g,floatFragmentTextures:v,floatVertexTextures:g&&v,maxSamples:r?_.getParameter(_.MAX_SAMPLES):0}}function fo(){function y(){s.value!==p&&(s.value=p,s.needsUpdate=0<h),d.numPlanes=h,d.numIntersection=0}function l(o,e,n,i){var r=null===o?0:o.length,l=null;if(0!==r){if(l=s.value,!0!==i||null===l){var m=n+4*r,u=e.matrixWorldInverse;a.getNormalMatrix(u),(null===l||l.length<m)&&(l=new Float32Array(m));for(var c=0,g=n;c!==r;++c,g+=4)t.copy(o[c]).applyMatrix4(u,a),t.normal.toArray(l,g),l[g+3]=t.constant}s.value=l,s.needsUpdate=!0}return d.numPlanes=r,d.numIntersection=0,l}var d=this,p=null,h=0,v=!1,_=!1,t=new It,a=new W,s={value:null,needsUpdate:!1};this.uniform=s,this.numPlanes=0,this.numIntersection=0,this.init=function(e,t,r){var a=0!==e.length||t||0!==h||v;return v=t,p=l(e,r,0),h=e.length,a},this.beginShadows=function(){_=!0,l(null)},this.endShadows=function(){_=!1,y()},this.setState=function(e,t,a,r,n,i){if(!v||null===e||0===e.length||_&&!a)_?l(null):y();else{var o=_?0:h,c=4*o,d=n.clippingState||null;s.value=d,d=l(e,r,c,i);for(var u=0;u!=c;++u)d[u]=p[u];n.clippingState=d,this.numIntersection=t?this.numPlanes:0,this.numPlanes+=o}}}function mo(a){var t={};return{get:function(e){if(void 0!==t[e])return t[e];var r;return r="WEBGL_depth_texture"===e?a.getExtension("WEBGL_depth_texture")||a.getExtension("MOZ_WEBGL_depth_texture")||a.getExtension("WEBKIT_WEBGL_depth_texture"):"EXT_texture_filter_anisotropic"===e?a.getExtension("EXT_texture_filter_anisotropic")||a.getExtension("MOZ_EXT_texture_filter_anisotropic")||a.getExtension("WEBKIT_EXT_texture_filter_anisotropic"):"WEBGL_compressed_texture_s3tc"===e?a.getExtension("WEBGL_compressed_texture_s3tc")||a.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||a.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc"):"WEBGL_compressed_texture_pvrtc"===e?a.getExtension("WEBGL_compressed_texture_pvrtc")||a.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"):a.getExtension(e),null===r&&console.warn("THREE.WebGLRenderer: "+e+" extension not supported."),t[e]=r,r}}}function go(g,y,d){function n(e){var t=e.target,a=p.get(t);for(var r in null!==a.index&&y.remove(a.index),a.attributes)y.remove(a.attributes[r]);t.removeEventListener("dispose",n),p.delete(t);var i=v.get(a);i&&(y.remove(i),v.delete(a)),d.memory.geometries--}function a(e){var t=[],r=e.index,a=e.attributes.position,n=0;if(null!==r){var i=r.array;n=r.version;for(var s=0,_=i.length;s<_;s+=3){var x=i[s+0],b=i[s+1],E=i[s+2];t.push(x,b,b,E,E,x)}}else for(i=a.array,n=a.version,(s=0,_=i.length/3-1);s<_;s+=3)x=s+0,b=s+1,E=s+2,t.push(x,b,b,E,E,x);var T=new(65535<Cr(t)?Er:$a)(t,1);T.version=n,y.update(T,g.ELEMENT_ARRAY_BUFFER);var d=v.get(e);d&&y.remove(d),v.set(e,T)}var p=new WeakMap,v=new WeakMap;return{get:function(a,t){var e=p.get(t);return e||(t.addEventListener("dispose",n),t.isBufferGeometry?e=t:t.isGeometry&&(void 0===t._bufferGeometry&&(t._bufferGeometry=new Dr().setFromObject(a)),e=t._bufferGeometry),p.set(t,e),d.memory.geometries++,e)},update:function(e){var t=e.index,n=e.attributes;for(var r in null!==t&&y.update(t,g.ELEMENT_ARRAY_BUFFER),n)y.update(n[r],g.ARRAY_BUFFER);var i=e.morphAttributes;for(var r in i)for(var s=i[r],o=0,d=s.length;o<d;o++)y.update(s[o],g.ARRAY_BUFFER)},getWireframeAttribute:function(r){var t=v.get(r);if(t){var e=r.index;null!==e&&t.version<e.version&&a(r)}else a(r);return v.get(r)}}}function vo(d,t,m,e){var n=e.isWebGL2,o,g,f;this.setMode=function(e){o=e},this.setIndex=function(e){g=e.type,f=e.bytesPerElement},this.render=function(t,e){d.drawElements(o,e,g,t*f),m.update(e,o)},this.renderInstances=function(e,a,r,i){if(0!==i){var s,l;if(n)s=d,l="drawElementsInstanced";else if(l="drawElementsInstancedANGLE",null===(s=t.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");s[l](o,r,g,a*f,i),m.update(r,o,i)}}}function yo(a){var t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(e,n,i){switch(i=i||1,t.calls++,n){case a.TRIANGLES:t.triangles+=i*(e/3);break;case a.LINES:t.lines+=i*(e/2);break;case a.LINE_STRIP:t.lines+=i*(e-1);break;case a.LINE_LOOP:t.lines+=i*e;break;case a.POINTS:t.points+=i*e;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",n);}}}}function _o(a,t){return vm(t[1])-vm(a[1])}function xo(y){var t={},e=new Float32Array(8);return{update:function(n,i,r,a){var s=n.morphTargetInfluences,o=void 0===s?0:s.length,l=t[i.id];if(void 0===l){l=[];for(var _=0;_<o;_++)l[_]=[_,0];t[i.id]=l}var x=r.morphTargets&&i.morphAttributes.position,c=r.morphNormals&&i.morphAttributes.normal;for(_=0;_<o;_++)0!==(b=l[_])[1]&&(x&&i.deleteAttribute("morphTarget"+_),c&&i.deleteAttribute("morphNormal"+_));for(_=0;_<o;_++)(b=l[_])[0]=_,b[1]=s[_];l.sort(_o);var p=0;for(_=0;8>_;_++){var b;if(b=l[_]){var E=b[0],m=b[1];if(m){x&&i.setAttribute("morphTarget"+_,x[E]),c&&i.setAttribute("morphNormal"+_,c[E]),e[_]=m,p+=m;continue}}e[_]=0}var g=i.morphTargetsRelative?1:1-p;a.getUniforms().setValue(y,"morphTargetBaseInfluence",g),a.getUniforms().setValue(y,"morphTargetInfluences",e)}}}function bo(d,t,e,n){var i=new WeakMap;return{update:function(r){var a=n.render.frame,s=r.geometry,o=t.get(r,s);return i.get(o)!==a&&(s.isGeometry&&o.updateFromObject(r),t.update(o),i.set(o,a)),r.isInstancedMesh&&e.update(r.instanceMatrix,d.ARRAY_BUFFER),o},dispose:function(){i=new WeakMap}}}function Eo(d,p,c,n,i,r,a,m,o,l){d=void 0===d?[]:d,p=void 0===p?301:p,a=void 0===a?1022:a,X.call(this,d,p,c,n,i,r,a,m,o,l),this.flipY=!1}function wo(a,t,e,r){X.call(this,null),this.image={data:a||null,width:t||1,height:e||1,depth:r||1},this.magFilter=1003,this.minFilter=1003,this.wrapR=1001,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}function Do(a,t,e,r){X.call(this,null),this.image={data:a||null,width:t||1,height:e||1,depth:r||1},this.magFilter=1003,this.minFilter=1003,this.wrapR=1001,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}function Mo(l,t,e){var n=l[0];if(0>=n||0<n)return l;var i=t*e,r=Co[i];if(void 0===r&&(r=new Float32Array(i),Co[i]=r),0!==t){n.toArray(r,0);for(var d=1,p=0;d!==t;++d)p+=e,l[d].toArray(r,p)}return r}function ko(a,t){if(a.length!==t.length)return!1;for(var e=0,r=a.length;e<r;e++)if(a[e]!==t[e])return!1;return!0}function Oo(a,t){for(var e=0,r=t.length;e<r;e++)a[e]=t[e]}function No(a,t){var e=Po[t];void 0===e&&(e=new Int32Array(t),Po[t]=e);for(var r=0;r!==t;++r)e[r]=a.allocateTextureUnit();return e}function Bo(a,t){var e=this.cache;e[0]!==t&&(a.uniform1f(this.addr,t),e[0]=t)}function zo(a,t){var e=this.cache;if(void 0!==t.x)e[0]===t.x&&e[1]===t.y||(a.uniform2f(this.addr,t.x,t.y),e[0]=t.x,e[1]=t.y);else{if(ko(e,t))return;a.uniform2fv(this.addr,t),Oo(e,t)}}function Uo(a,t){var e=this.cache;if(void 0!==t.x)e[0]===t.x&&e[1]===t.y&&e[2]===t.z||(a.uniform3f(this.addr,t.x,t.y,t.z),e[0]=t.x,e[1]=t.y,e[2]=t.z);else if(void 0!==t.r)e[0]===t.r&&e[1]===t.g&&e[2]===t.b||(a.uniform3f(this.addr,t.r,t.g,t.b),e[0]=t.r,e[1]=t.g,e[2]=t.b);else{if(ko(e,t))return;a.uniform3fv(this.addr,t),Oo(e,t)}}function Vo(a,t){var e=this.cache;if(void 0!==t.x)e[0]===t.x&&e[1]===t.y&&e[2]===t.z&&e[3]===t.w||(a.uniform4f(this.addr,t.x,t.y,t.z,t.w),e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.w);else{if(ko(e,t))return;a.uniform4fv(this.addr,t),Oo(e,t)}}function Go(a,t){var e=this.cache,r=t.elements;if(void 0===r){if(ko(e,t))return;a.uniformMatrix2fv(this.addr,!1,t),Oo(e,t)}else{if(ko(e,r))return;Ro.set(r),a.uniformMatrix2fv(this.addr,!1,Ro),Oo(e,r)}}function Ho(a,t){var e=this.cache,r=t.elements;if(void 0===r){if(ko(e,t))return;a.uniformMatrix3fv(this.addr,!1,t),Oo(e,t)}else{if(ko(e,r))return;Lo.set(r),a.uniformMatrix3fv(this.addr,!1,Lo),Oo(e,r)}}function jo(a,t){var e=this.cache,r=t.elements;if(void 0===r){if(ko(e,t))return;a.uniformMatrix4fv(this.addr,!1,t),Oo(e,t)}else{if(ko(e,r))return;Fo.set(r),a.uniformMatrix4fv(this.addr,!1,Fo),Oo(e,r)}}function Wo(a,t,e){var n=this.cache,i=e.allocateTextureUnit();n[0]!==i&&(a.uniform1i(this.addr,i),n[0]=i),e.safeSetTexture2D(t||uo,i)}function Xo(a,t,e){var n=this.cache,i=e.allocateTextureUnit();n[0]!==i&&(a.uniform1i(this.addr,i),n[0]=i),e.setTexture2DArray(t||So,i)}function qo(a,t,e){var n=this.cache,i=e.allocateTextureUnit();n[0]!==i&&(a.uniform1i(this.addr,i),n[0]=i),e.setTexture3D(t||To,i)}function Yo(a,t,e){var n=this.cache,i=e.allocateTextureUnit();n[0]!==i&&(a.uniform1i(this.addr,i),n[0]=i),e.safeSetTextureCube(t||Ao,i)}function Zo(a,t){var e=this.cache;e[0]!==t&&(a.uniform1i(this.addr,t),e[0]=t)}function Jo(a,t){var e=this.cache;ko(e,t)||(a.uniform2iv(this.addr,t),Oo(e,t))}function Ko(a,t){var e=this.cache;ko(e,t)||(a.uniform3iv(this.addr,t),Oo(e,t))}function $o(a,t){var e=this.cache;ko(e,t)||(a.uniform4iv(this.addr,t),Oo(e,t))}function Qo(a,t){var e=this.cache;e[0]!==t&&(a.uniform1ui(this.addr,t),e[0]=t)}function es(a,t){a.uniform1fv(this.addr,t)}function ts(a,t){a.uniform1iv(this.addr,t)}function as(a,t){a.uniform2iv(this.addr,t)}function rs(a,t){a.uniform3iv(this.addr,t)}function ns(a,t){a.uniform4iv(this.addr,t)}function is(a,t){var e=Mo(t,this.size,2);a.uniform2fv(this.addr,e)}function ms(a,t){var e=Mo(t,this.size,3);a.uniform3fv(this.addr,e)}function gs(a,t){var e=Mo(t,this.size,4);a.uniform4fv(this.addr,e)}function fs(a,t){var e=Mo(t,this.size,4);a.uniformMatrix2fv(this.addr,!1,e)}function ys(a,t){var e=Mo(t,this.size,9);a.uniformMatrix3fv(this.addr,!1,e)}function _s(a,t){var e=Mo(t,this.size,16);a.uniformMatrix4fv(this.addr,!1,e)}function xs(o,t,e){var n=t.length,i=No(e,n);o.uniform1iv(this.addr,i);for(var r=0;r!==n;++r)e.safeSetTexture2D(t[r]||uo,i[r])}function Es(o,t,e){var n=t.length,i=No(e,n);o.uniform1iv(this.addr,i);for(var r=0;r!==n;++r)e.safeSetTextureCube(t[r]||Ao,i[r])}function Ps(a,t,e){this.id=a,this.addr=e,this.cache=[],this.setValue=function(e){return 5126===e?Bo:35664===e?zo:35665===e?Uo:35666===e?Vo:35674===e?Go:35675===e?Ho:35676===e?jo:5124===e||35670===e?Zo:35667===e||35671===e?Jo:35668===e||35672===e?Ko:35669===e||35673===e?$o:5125===e?Qo:35678===e||36198===e||36298===e||36306===e||35682===e?Wo:35679===e||36299===e||36307===e?qo:35680===e||36300===e||36308===e||36293===e?Yo:36289===e||36303===e||36311===e||36292===e?Xo:void 0}(t.type)}function Vs(a,t,e){this.id=a,this.addr=e,this.cache=[],this.size=t.size,this.setValue=function(e){return 5126===e?es:35664===e?is:35665===e?ms:35666===e?gs:35674===e?fs:35675===e?ys:35676===e?_s:5124===e||35670===e?ts:35667===e||35671===e?as:35668===e||35672===e?rs:35669===e||35673===e?ns:35678===e||36198===e||36298===e||36306===e||35682===e?xs:35680===e||36300===e||36308===e||36293===e?Es:void 0}(t.type)}function Gs(e){this.id=e,this.seq=[],this.map={}}function el(a,t){a.seq.push(t),a.map[t.id]=t}function tl(d,t,e){var p=d.name,i=p.length;for(Io.lastIndex=0;;){var r=Io.exec(p),a=Io.lastIndex,s=r[1],c="]"===r[2],l=r[3];if(c&&(s|=0),void 0===l||"["===l&&a+2===i){el(e,void 0===l?new Ps(s,d,t):new Vs(s,d,t));break}var m=e.map[s];void 0===m&&el(e,m=new Gs(s)),e=m}}function al(a,t){this.seq=[],this.map={};for(var e=a.getProgramParameter(t,a.ACTIVE_UNIFORMS),n=0,o;n<e;++n)o=a.getActiveUniform(t,n),tl(o,a.getUniformLocation(t,o.name),this)}function rl(a,t,e){var r=a.createShader(t);return a.shaderSource(r,e),a.compileShader(r),r}function nl(e){switch(e){case 3e3:return["Linear","( value )"];case 3001:return["sRGB","( value )"];case 3002:return["RGBE","( value )"];case 3004:return["RGBM","( value, 7.0 )"];case 3005:return["RGBM","( value, 16.0 )"];case 3006:return["RGBD","( value, 256.0 )"];case 3007:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case 3003:return["LogLuv","( value )"];default:throw new Error("unsupported encoding: "+e);}}function il(a,t,e){var n=a.getShaderParameter(t,a.COMPILE_STATUS),i=a.getShaderInfoLog(t).trim();return n&&""===i?"":"THREE.WebGLShader: gl.getShaderInfoLog() "+e+"\n"+i+function(a){for(var t=a.split("\n"),e=0;e<t.length;e++)t[e]=e+1+": "+t[e];return t.join("\n")}(a.getShaderSource(t))}function ol(a,t){var e=nl(t);return"vec4 "+a+"( vec4 value ) { return "+e[0]+"ToLinear"+e[1]+"; }"}function sl(a,t){var e;switch(t){case 1:e="Linear";break;case 2:e="Reinhard";break;case 3:e="Uncharted2";break;case 4:e="OptimizedCineon";break;case 5:e="ACESFilmic";break;default:throw new Error("unsupported toneMapping: "+t);}return"vec3 "+a+"( vec3 color ) { return "+e+"ToneMapping( color ); }"}function ll(e){return""!==e}function dl(a,t){return a.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function pl(a,t){return a.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}function cl(e){return e.replace(sg,ml)}function ml(a,t){var e=ao[t];if(void 0===e)throw new Error("Can not resolve #include <"+t+">");return cl(e)}function ul(e){return e.replace(Rl,fl).replace(Pl,gl)}function gl(a,t,e,r){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),fl(a,t,e,r)}function fl(o,t,e,n){for(var i="",s=parseInt(t);s<parseInt(e);s++)i+=n.replace(/\[ i \]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return i}function hl(a){var t="precision "+a.precision+" float;\nprecision "+a.precision+" int;";return"highp"===a.precision?t+="\n#define HIGH_PRECISION":"mediump"===a.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===a.precision&&(t+="\n#define LOW_PRECISION"),t}function yl(k,t,e){var n=k.getContext(),l=e.defines,h=e.vertexShader,N=e.fragmentShader,z=function(a){var t="SHADOWMAP_TYPE_BASIC";return 1===a.shadowMapType?t="SHADOWMAP_TYPE_PCF":2===a.shadowMapType?t="SHADOWMAP_TYPE_PCF_SOFT":3===a.shadowMapType&&(t="SHADOWMAP_TYPE_VSM"),t}(e),p=function(a){var t="ENVMAP_TYPE_CUBE";if(a.envMap)switch(a.envMapMode){case 301:case 302:t="ENVMAP_TYPE_CUBE";break;case 306:case 307:t="ENVMAP_TYPE_CUBE_UV";break;case 303:case 304:t="ENVMAP_TYPE_EQUIREC";break;case 305:t="ENVMAP_TYPE_SPHERE";}return t}(e),f=function(a){var t="ENVMAP_MODE_REFLECTION";if(a.envMap)switch(a.envMapMode){case 302:case 304:t="ENVMAP_MODE_REFRACTION";}return t}(e),d=function(a){var t="ENVMAP_BLENDING_NONE";if(a.envMap)switch(a.combine){case 0:t="ENVMAP_BLENDING_MULTIPLY";break;case 1:t="ENVMAP_BLENDING_MIX";break;case 2:t="ENVMAP_BLENDING_ADD";}return t}(e),m=0<k.gammaFactor?k.gammaFactor:1,g=e.isWebGL2?"":function(e){return[e.extensionDerivatives||e.envMapCubeUV||e.bumpMap||e.tangentSpaceNormalMap||e.clearcoatNormalMap||e.flatShading||"physical"===e.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(e.extensionFragDepth||e.logarithmicDepthBuffer)&&e.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",e.extensionDrawBuffers&&e.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(e.extensionShaderTextureLOD||e.envMap)&&e.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(ll).join("\n")}(e),v=function(a){var t=[];for(var e in a){var r=a[e];!1!==r&&t.push("#define "+e+" "+r)}return t.join("\n")}(l),y=n.createProgram(),_,O,U,B,V;if(e.isRawShaderMaterial?(0<(_=[v].filter(ll).join("\n")).length&&(_+="\n"),0<(O=[g,v].filter(ll).join("\n")).length&&(O+="\n")):(_=[hl(e),"#define SHADER_NAME "+e.shaderName,v,e.instancing?"#define USE_INSTANCING":"",e.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+m,"#define MAX_BONES "+e.maxBones,e.useFog&&e.fog?"#define USE_FOG":"",e.useFog&&e.fogExp2?"#define FOG_EXP2":"",e.map?"#define USE_MAP":"",e.envMap?"#define USE_ENVMAP":"",e.envMap?"#define "+f:"",e.lightMap?"#define USE_LIGHTMAP":"",e.aoMap?"#define USE_AOMAP":"",e.emissiveMap?"#define USE_EMISSIVEMAP":"",e.bumpMap?"#define USE_BUMPMAP":"",e.normalMap?"#define USE_NORMALMAP":"",e.normalMap&&e.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",e.normalMap&&e.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",e.clearcoatMap?"#define USE_CLEARCOATMAP":"",e.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",e.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",e.displacementMap&&e.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",e.specularMap?"#define USE_SPECULARMAP":"",e.roughnessMap?"#define USE_ROUGHNESSMAP":"",e.metalnessMap?"#define USE_METALNESSMAP":"",e.alphaMap?"#define USE_ALPHAMAP":"",e.vertexTangents?"#define USE_TANGENT":"",e.vertexColors?"#define USE_COLOR":"",e.vertexUvs?"#define USE_UV":"",e.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",e.flatShading?"#define FLAT_SHADED":"",e.skinning?"#define USE_SKINNING":"",e.useVertexTexture?"#define BONE_TEXTURE":"",e.morphTargets?"#define USE_MORPHTARGETS":"",e.morphNormals&&!1===e.flatShading?"#define USE_MORPHNORMALS":"",e.doubleSided?"#define DOUBLE_SIDED":"",e.flipSided?"#define FLIP_SIDED":"",e.shadowMapEnabled?"#define USE_SHADOWMAP":"",e.shadowMapEnabled?"#define "+z:"",e.sizeAttenuation?"#define USE_SIZEATTENUATION":"",e.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",e.logarithmicDepthBuffer&&e.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING"," attribute mat4 instanceMatrix;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(ll).join("\n"),O=[g,hl(e),"#define SHADER_NAME "+e.shaderName,v,e.alphaTest?"#define ALPHATEST "+e.alphaTest+(e.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+m,e.useFog&&e.fog?"#define USE_FOG":"",e.useFog&&e.fogExp2?"#define FOG_EXP2":"",e.map?"#define USE_MAP":"",e.matcap?"#define USE_MATCAP":"",e.envMap?"#define USE_ENVMAP":"",e.envMap?"#define "+p:"",e.envMap?"#define "+f:"",e.envMap?"#define "+d:"",e.lightMap?"#define USE_LIGHTMAP":"",e.aoMap?"#define USE_AOMAP":"",e.emissiveMap?"#define USE_EMISSIVEMAP":"",e.bumpMap?"#define USE_BUMPMAP":"",e.normalMap?"#define USE_NORMALMAP":"",e.normalMap&&e.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",e.normalMap&&e.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",e.clearcoatMap?"#define USE_CLEARCOATMAP":"",e.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",e.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",e.specularMap?"#define USE_SPECULARMAP":"",e.roughnessMap?"#define USE_ROUGHNESSMAP":"",e.metalnessMap?"#define USE_METALNESSMAP":"",e.alphaMap?"#define USE_ALPHAMAP":"",e.sheen?"#define USE_SHEEN":"",e.vertexTangents?"#define USE_TANGENT":"",e.vertexColors?"#define USE_COLOR":"",e.vertexUvs?"#define USE_UV":"",e.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",e.gradientMap?"#define USE_GRADIENTMAP":"",e.flatShading?"#define FLAT_SHADED":"",e.doubleSided?"#define DOUBLE_SIDED":"",e.flipSided?"#define FLIP_SIDED":"",e.shadowMapEnabled?"#define USE_SHADOWMAP":"",e.shadowMapEnabled?"#define "+z:"",e.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",e.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",e.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",e.logarithmicDepthBuffer&&e.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(e.extensionShaderTextureLOD||e.envMap)&&e.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",0===e.toneMapping?"":"#define TONE_MAPPING",0===e.toneMapping?"":ao.tonemapping_pars_fragment,0===e.toneMapping?"":sl("toneMapping",e.toneMapping),e.dithering?"#define DITHERING":"",e.outputEncoding||e.mapEncoding||e.matcapEncoding||e.envMapEncoding||e.emissiveMapEncoding||e.lightMapEncoding?ao.encodings_pars_fragment:"",e.mapEncoding?ol("mapTexelToLinear",e.mapEncoding):"",e.matcapEncoding?ol("matcapTexelToLinear",e.matcapEncoding):"",e.envMapEncoding?ol("envMapTexelToLinear",e.envMapEncoding):"",e.emissiveMapEncoding?ol("emissiveMapTexelToLinear",e.emissiveMapEncoding):"",e.lightMapEncoding?ol("lightMapTexelToLinear",e.lightMapEncoding):"",e.outputEncoding?(U="linearToOutputTexel",B=e.outputEncoding,V=nl(B),"vec4 "+U+"( vec4 value ) { return LinearTo"+V[0]+V[1]+"; }"):"",e.depthPacking?"#define DEPTH_PACKING "+e.depthPacking:"","\n"].filter(ll).join("\n")),h=pl(h=dl(h=cl(h),e),e),N=pl(N=dl(N=cl(N),e),e),h=ul(h),N=ul(N),e.isWebGL2&&!e.isRawShaderMaterial){var G=!1,H=/^\s*#version\s+300\s+es\s*\n/;e.isShaderMaterial&&null!==h.match(H)&&null!==N.match(H)&&(G=!0,h=h.replace(H,""),N=N.replace(H,"")),_="#version 300 es\n\n#define attribute in\n#define varying out\n#define texture2D texture"+"\n"+_,O=["#version 300 es\n","#define varying in",G?"":"out highp vec4 pc_fragColor;",G?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+O}var b=_+h,D=O+N,M=rl(n,n.VERTEX_SHADER,b),S=rl(n,n.FRAGMENT_SHADER,D),T,W;if(n.attachShader(y,M),n.attachShader(y,S),void 0===e.index0AttributeName?!0===e.morphTargets&&n.bindAttribLocation(y,0,"position"):n.bindAttribLocation(y,0,e.index0AttributeName),n.linkProgram(y),k.debug.checkShaderErrors){var X=n.getProgramInfoLog(y).trim(),A=n.getShaderInfoLog(M).trim(),C=n.getShaderInfoLog(S).trim(),P=!0,j=!0;if(!1===n.getProgramParameter(y,n.LINK_STATUS)){P=!1;var Y=il(n,M,"vertex"),R=il(n,S,"fragment");console.error("THREE.WebGLProgram: shader error: ",n.getError(),"gl.VALIDATE_STATUS",n.getProgramParameter(y,n.VALIDATE_STATUS),"gl.getProgramInfoLog",X,Y,R)}else""===X?""!==A&&""!==C||(j=!1):console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",X);j&&(this.diagnostics={runnable:P,programLog:X,vertexShader:{log:A,prefix:_},fragmentShader:{log:C,prefix:O}})}return n.deleteShader(M),n.deleteShader(S),this.getUniforms=function(){return void 0===T&&(T=new al(n,y)),T},this.getAttributes=function(){return void 0===W&&(W=function(o,t){for(var e={},n=o.getProgramParameter(t,o.ACTIVE_ATTRIBUTES),i=0,s;i<n;i++)s=o.getActiveAttrib(t,i).name,e[s]=o.getAttribLocation(t,s);return e}(n,y)),W},this.destroy=function(){n.deleteProgram(y),this.program=void 0},this.name=e.shaderName,this.id=vl++,this.cacheKey=t,this.usedTimes=1,this.program=y,this.vertexShader=M,this.fragmentShader=S,this}function _l(T,t,e){function n(a){var t;return a?a.isTexture?t=a.encoding:a.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),t=a.texture.encoding):t=3e3,t}var d=[],p=e.isWebGL2,r=e.logarithmicDepthBuffer,a=e.floatVertexTextures,s=e.precision,m=e.maxVertexUniforms,l=e.vertexTextures,h={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},i=["precision","isWebGL2","supportsVertexTextures","outputEncoding","instancing","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","envMapCubeUV","lightMap","lightMapEncoding","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","tangentSpaceNormalMap","clearcoatMap","clearcoatRoughnessMap","clearcoatNormalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","vertexTangents","vertexUvs","uvsVertexOnly","fog","useFog","fogExp2","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","numDirLightShadows","numPointLightShadows","numSpotLightShadows","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering","sheen"];this.getParameters=function(o,i,c,u,d,f,g){var v=u.fog,y=o.isMeshStandardMaterial?u.environment:null,_=o.envMap||y,x=h[o.type],b=g.isSkinnedMesh?function(n){var t=n.skeleton.bones;if(a)return 1024;var e=Tm((m-20)/4),i=bm(e,t.length);return i<t.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+t.length+" bones. This GPU supports "+i+"."),0):i}(g):0;null!==o.precision&&(s=e.getMaxPrecision(o.precision))!==o.precision&&console.warn("THREE.WebGLProgram.getParameters:",o.precision,"not supported, using",s,"instead.");var E=function(a,t){var e;if(t){var r=ho[t];e={name:a.type,uniforms:og.clone(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader}}else e={name:a.type,uniforms:a.uniforms,vertexShader:a.vertexShader,fragmentShader:a.fragmentShader};return e}(o,x);o.onBeforeCompile(E,T);var S=T.getRenderTarget();return{isWebGL2:p,shaderID:x,shaderName:E.name,uniforms:E.uniforms,vertexShader:E.vertexShader,fragmentShader:E.fragmentShader,defines:o.defines,isRawShaderMaterial:o.isRawShaderMaterial,isShaderMaterial:o.isShaderMaterial,precision:s,instancing:!0===g.isInstancedMesh,supportsVertexTextures:l,outputEncoding:null===S?T.outputEncoding:n(S.texture),map:!!o.map,mapEncoding:n(o.map),matcap:!!o.matcap,matcapEncoding:n(o.matcap),envMap:!!_,envMapMode:_&&_.mapping,envMapEncoding:n(_),envMapCubeUV:!!_&&(306===_.mapping||307===_.mapping),lightMap:!!o.lightMap,lightMapEncoding:n(o.lightMap),aoMap:!!o.aoMap,emissiveMap:!!o.emissiveMap,emissiveMapEncoding:n(o.emissiveMap),bumpMap:!!o.bumpMap,normalMap:!!o.normalMap,objectSpaceNormalMap:1===o.normalMapType,tangentSpaceNormalMap:0===o.normalMapType,clearcoatMap:!!o.clearcoatMap,clearcoatRoughnessMap:!!o.clearcoatRoughnessMap,clearcoatNormalMap:!!o.clearcoatNormalMap,displacementMap:!!o.displacementMap,roughnessMap:!!o.roughnessMap,metalnessMap:!!o.metalnessMap,specularMap:!!o.specularMap,alphaMap:!!o.alphaMap,gradientMap:!!o.gradientMap,sheen:!!o.sheen,combine:o.combine,vertexTangents:o.normalMap&&o.vertexTangents,vertexColors:o.vertexColors,vertexUvs:!!(o.map||o.bumpMap||o.normalMap||o.specularMap||o.alphaMap||o.emissiveMap||o.roughnessMap||o.metalnessMap||o.clearcoatMap||o.clearcoatRoughnessMap||o.clearcoatNormalMap||o.displacementMap),uvsVertexOnly:!(o.map||o.bumpMap||o.normalMap||o.specularMap||o.alphaMap||o.emissiveMap||o.roughnessMap||o.metalnessMap||o.clearcoatNormalMap||!o.displacementMap),fog:!!v,useFog:o.fog,fogExp2:v&&v.isFogExp2,flatShading:o.flatShading,sizeAttenuation:o.sizeAttenuation,logarithmicDepthBuffer:r,skinning:o.skinning&&0<b,maxBones:b,useVertexTexture:a,morphTargets:o.morphTargets,morphNormals:o.morphNormals,maxMorphTargets:T.maxMorphTargets,maxMorphNormals:T.maxMorphNormals,numDirLights:i.directional.length,numPointLights:i.point.length,numSpotLights:i.spot.length,numRectAreaLights:i.rectArea.length,numHemiLights:i.hemi.length,numDirLightShadows:i.directionalShadowMap.length,numPointLightShadows:i.pointShadowMap.length,numSpotLightShadows:i.spotShadowMap.length,numClippingPlanes:d,numClipIntersection:f,dithering:o.dithering,shadowMapEnabled:T.shadowMap.enabled&&0<c.length,shadowMapType:T.shadowMap.type,toneMapping:o.toneMapped?T.toneMapping:0,physicallyCorrectLights:T.physicallyCorrectLights,premultipliedAlpha:o.premultipliedAlpha,alphaTest:o.alphaTest,doubleSided:2===o.side,flipSided:1===o.side,depthPacking:void 0!==o.depthPacking&&o.depthPacking,index0AttributeName:o.index0AttributeName,extensionDerivatives:o.extensions&&o.extensions.derivatives,extensionFragDepth:o.extensions&&o.extensions.fragDepth,extensionDrawBuffers:o.extensions&&o.extensions.drawBuffers,extensionShaderTextureLOD:o.extensions&&o.extensions.shaderTextureLOD,rendererExtensionFragDepth:p||null!==t.get("EXT_frag_depth"),rendererExtensionDrawBuffers:p||null!==t.get("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:p||null!==t.get("EXT_shader_texture_lod"),onBeforeCompile:o.onBeforeCompile}},this.getProgramCacheKey=function(t){var e=[];if(t.shaderID?e.push(t.shaderID):(e.push(t.fragmentShader),e.push(t.vertexShader)),void 0!==t.defines)for(var a in t.defines)e.push(a),e.push(t.defines[a]);if(void 0===t.isRawShaderMaterial){for(var n=0;n<i.length;n++)e.push(t[i[n]]);e.push(T.outputEncoding),e.push(T.gammaFactor)}return e.push(t.onBeforeCompile.toString()),e.join()},this.acquireProgram=function(t,e){for(var n=0,i=d.length,s,l;n<i;n++)if(l=d[n],l.cacheKey===e){++(s=l).usedTimes;break}return void 0===s&&(s=new yl(T,e,t),d.push(s)),s},this.releaseProgram=function(a){if(0==--a.usedTimes){var t=d.indexOf(a);d[t]=d[d.length-1],d.pop(),a.destroy()}},this.programs=d}function xl(){var a=new WeakMap;return{get:function(t){var e=a.get(t);return void 0===e&&(e={},a.set(t,e)),e},remove:function(t){a.delete(t)},update:function(t,e,r){a.get(t)[e]=r},dispose:function(){a=new WeakMap}}}function bl(a,t){return a.groupOrder===t.groupOrder?a.renderOrder===t.renderOrder?a.program===t.program?a.material.id===t.material.id?a.z===t.z?a.id-t.id:a.z-t.z:a.material.id-t.material.id:a.program.id-t.program.id:a.renderOrder-t.renderOrder:a.groupOrder-t.groupOrder}function Tl(a,t){return a.groupOrder===t.groupOrder?a.renderOrder===t.renderOrder?a.z===t.z?a.id-t.id:t.z-a.z:a.renderOrder-t.renderOrder:a.groupOrder-t.groupOrder}function Sl(){function d(e,r,n,a,i,o){var s=p[t];return void 0===s?(s={id:e.id,object:e,geometry:r,material:n,program:n.program||c,groupOrder:a,renderOrder:e.renderOrder,z:i,group:o},p[t]=s):(s.id=e.id,s.object=e,s.geometry=r,s.material=n,s.program=n.program||c,s.groupOrder=a,s.renderOrder=e.renderOrder,s.z=i,s.group=o),t++,s}var p=[],t=0,a=[],n=[],c={id:-1};return{opaque:a,transparent:n,init:function(){t=0,a.length=0,n.length=0},push:function(i,t,e,r,s,o){var l=d(i,t,e,r,s,o);(!0===e.transparent?n:a).push(l)},unshift:function(i,t,e,r,s,o){var l=d(i,t,e,r,s,o);(!0===e.transparent?n:a).unshift(l)},finish:function(){for(var e=t,a=p.length,i;e<a&&(i=p[e],null!==i.id);e++)i.id=null,i.object=null,i.geometry=null,i.material=null,i.program=null,i.group=null},sort:function(r,t){1<a.length&&a.sort(r||bl),1<n.length&&n.sort(t||Tl)}}}function Ml(){function o(t){var a=t.target;a.removeEventListener("dispose",o),e.delete(a)}var e=new WeakMap;return{get:function(t,n){var i=e.get(t),a;return void 0===i?(a=new Sl,e.set(t,new WeakMap),e.get(t).set(n,a),t.addEventListener("dispose",o)):void 0===(a=i.get(n))&&(a=new Sl,i.set(n,a)),a},dispose:function(){e=new WeakMap}}}function Al(){var a={};return{get:function(t){if(void 0!==a[t.id])return a[t.id];var e;switch(t.type){case"DirectionalLight":e={direction:new At,color:new ua};break;case"SpotLight":e={position:new At,direction:new At,color:new ua,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":e={position:new At,color:new ua,distance:0,decay:0};break;case"HemisphereLight":e={direction:new At,skyColor:new ua,groundColor:new ua};break;case"RectAreaLight":e={color:new ua,position:new At,halfWidth:new At,halfHeight:new At};}return a[t.id]=e,e}}}function wl(a,t){return(t.castShadow?1:0)-(a.castShadow?1:0)}function Cl(){for(var l=new Al,e=(d={},{get:function(t){if(void 0!==d[t.id])return d[t.id];var e;switch(t.type){case"DirectionalLight":case"SpotLight":e={shadowBias:0,shadowRadius:1,shadowMapSize:new j};break;case"PointLight":e={shadowBias:0,shadowRadius:1,shadowMapSize:new j,shadowCameraNear:1,shadowCameraFar:1e3};}return d[t.id]=e,e}}),n={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},i=0,d;9>i;i++)n.probe.push(new At);var c=new At,a=new na,s=new na;return{setup:function(i,t,r){for(var o=0,R=0,k=0,I=0;9>I;I++)n.probe[I].set(0,0,0);var N=0,z=0,O=0,U=0,B=0,V=0,G=0,H=0,W=r.matrixWorldInverse;i.sort(wl),I=0;for(var b=i.length;I<b;I++){var E=i[I],w=E.color,D=E.intensity,M=E.distance,S=E.shadow&&E.shadow.map?E.shadow.map.texture:null;if(E.isAmbientLight)o+=w.r*D,R+=w.g*D,k+=w.b*D;else if(E.isLightProbe)for(var T=0;9>T;T++)n.probe[T].addScaledVector(E.sh.coefficients[T],D);else if(E.isDirectionalLight){if((Y=l.get(E)).color.copy(E.color).multiplyScalar(E.intensity),Y.direction.setFromMatrixPosition(E.matrixWorld),c.setFromMatrixPosition(E.target.matrixWorld),Y.direction.sub(c),Y.direction.transformDirection(W),E.castShadow){var X=E.shadow;(j=e.get(E)).shadowBias=X.bias,j.shadowRadius=X.radius,j.shadowMapSize=X.mapSize,n.directionalShadow[N]=j,n.directionalShadowMap[N]=S,n.directionalShadowMatrix[N]=E.shadow.matrix,V++}n.directional[N]=Y,N++}else if(E.isSpotLight)((Y=l.get(E)).position.setFromMatrixPosition(E.matrixWorld),Y.position.applyMatrix4(W),Y.color.copy(w).multiplyScalar(D),Y.distance=M,Y.direction.setFromMatrixPosition(E.matrixWorld),c.setFromMatrixPosition(E.target.matrixWorld),Y.direction.sub(c),Y.direction.transformDirection(W),Y.coneCos=hm(E.angle),Y.penumbraCos=hm(E.angle*(1-E.penumbra)),Y.decay=E.decay,E.castShadow)&&(X=E.shadow,(j=e.get(E)).shadowBias=X.bias,j.shadowRadius=X.radius,j.shadowMapSize=X.mapSize,n.spotShadow[O]=j,n.spotShadowMap[O]=S,n.spotShadowMatrix[O]=E.shadow.matrix,H++),n.spot[O]=Y,O++;else if(E.isRectAreaLight)(Y=l.get(E)).color.copy(w).multiplyScalar(D),Y.position.setFromMatrixPosition(E.matrixWorld),Y.position.applyMatrix4(W),s.identity(),a.copy(E.matrixWorld),a.premultiply(W),s.extractRotation(a),Y.halfWidth.set(.5*E.width,0,0),Y.halfHeight.set(0,.5*E.height,0),Y.halfWidth.applyMatrix4(s),Y.halfHeight.applyMatrix4(s),n.rectArea[U]=Y,U++;else if(E.isPointLight){if((Y=l.get(E)).position.setFromMatrixPosition(E.matrixWorld),Y.position.applyMatrix4(W),Y.color.copy(E.color).multiplyScalar(E.intensity),Y.distance=E.distance,Y.decay=E.decay,E.castShadow){var j;X=E.shadow,(j=e.get(E)).shadowBias=X.bias,j.shadowRadius=X.radius,j.shadowMapSize=X.mapSize,j.shadowCameraNear=X.camera.near,j.shadowCameraFar=X.camera.far,n.pointShadow[z]=j,n.pointShadowMap[z]=S,n.pointShadowMatrix[z]=E.shadow.matrix,G++}n.point[z]=Y,z++}else if(E.isHemisphereLight){var Y;(Y=l.get(E)).direction.setFromMatrixPosition(E.matrixWorld),Y.direction.transformDirection(W),Y.direction.normalize(),Y.skyColor.copy(E.color).multiplyScalar(D),Y.groundColor.copy(E.groundColor).multiplyScalar(D),n.hemi[B]=Y,B++}}n.ambient[0]=o,n.ambient[1]=R,n.ambient[2]=k;var q=n.hash;q.directionalLength===N&&q.pointLength===z&&q.spotLength===O&&q.rectAreaLength===U&&q.hemiLength===B&&q.numDirectionalShadows===V&&q.numPointShadows===G&&q.numSpotShadows===H||(n.directional.length=N,n.spot.length=O,n.rectArea.length=U,n.point.length=z,n.hemi.length=B,n.directionalShadow.length=V,n.directionalShadowMap.length=V,n.pointShadow.length=G,n.pointShadowMap.length=G,n.spotShadow.length=H,n.spotShadowMap.length=H,n.directionalShadowMatrix.length=V,n.pointShadowMatrix.length=G,n.spotShadowMatrix.length=H,q.directionalLength=N,q.pointLength=z,q.spotLength=O,q.rectAreaLength=U,q.hemiLength=B,q.numDirectionalShadows=V,q.numPointShadows=G,q.numSpotShadows=H,n.version=Il++)},state:n}}function Dl(){var a=new Cl,r=[],e=[];return{init:function(){r.length=0,e.length=0},state:{lightsArray:r,shadowsArray:e,lights:a},setupLights:function(t){a.setup(r,e,t)},pushLight:function(e){r.push(e)},pushShadow:function(a){e.push(a)}}}function Ll(){function a(t){var r=t.target;r.removeEventListener("dispose",a),e.delete(r)}var e=new WeakMap;return{get:function(t,n){var i;return!1===e.has(t)?(i=new Dl,e.set(t,new WeakMap),e.get(t).set(n,i),t.addEventListener("dispose",a)):!1===e.get(t).has(n)?(i=new Dl,e.get(t).set(n,i)):i=e.get(t).get(n),i},dispose:function(){e=new WeakMap}}}function kl(a,t,e){this.width=a,this.height=t,this.scissor=new va(0,0,a,t),this.scissorTest=!1,this.viewport=new va(0,0,a,t),e=e||{},this.texture=new X(void 0,e.mapping,e.wrapS,e.wrapT,e.magFilter,e.minFilter,e.format,e.type,e.anisotropy,e.encoding),this.texture.image={},this.texture.image.width=a,this.texture.image.height=t,this.texture.generateMipmaps=void 0!==e.generateMipmaps&&e.generateMipmaps,this.texture.minFilter=void 0===e.minFilter?1006:e.minFilter,this.depthBuffer=void 0===e.depthBuffer||e.depthBuffer,this.stencilBuffer=void 0===e.stencilBuffer||e.stencilBuffer,this.depthTexture=void 0===e.depthTexture?null:e.depthTexture}function Fl(e){qr.call(this),this.type="MeshDepthMaterial",this.depthPacking=3200,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(e)}function Nl(e){qr.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new At,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(e)}function zl(T,t,e){function n(e,a){var n=t.update(u);l.uniforms.shadow_pass.value=e.map.texture,l.uniforms.resolution.value=e.mapSize,l.uniforms.radius.value=e.radius,T.setRenderTarget(e.mapPass),T.clear(),T.renderBufferDirect(a,null,n,l,u,null),c.uniforms.shadow_pass.value=e.mapPass.texture,c.uniforms.resolution.value=e.mapSize,c.uniforms.radius.value=e.radius,T.setRenderTarget(e.map),T.clear(),T.renderBufferDirect(a,null,n,c,u,null)}function b(a,t,e){var n=a<<0|t<<1|e<<2,i=s[n];return void 0===i&&(i=new Fl({depthPacking:3201,morphTargets:a,skinning:t}),s[n]=i),i}function v(a,t,e){var n=a<<0|t<<1|e<<2,i=o[n];return void 0===i&&(i=new Nl({morphTargets:a,skinning:t}),o[n]=i),i}function g(t,e,n,i,r,a,s){var o=null,u=b,E=t.customDepthMaterial;if(!0===i.isPointLight&&(u=v,E=t.customDistanceMaterial),void 0===E){var S=!1;!0===n.morphTargets&&(S=e.morphAttributes&&e.morphAttributes.position&&0<e.morphAttributes.position.length);var M=!1;!0===t.isSkinnedMesh&&(!0===n.skinning?M=!0:console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",t)),o=u(S,M,!0===t.isInstancedMesh)}else o=E;if(T.localClippingEnabled&&!0===n.clipShadows&&0!==n.clippingPlanes.length){var A=o.uuid,m=n.uuid,g=y[A];void 0===g&&(g={},y[A]=g);var w=g[m];void 0===w&&(w=o.clone(),g[m]=w),o=w}return o.visible=n.visible,o.wireframe=n.wireframe,o.side=3===s?null===n.shadowSide?n.side:n.shadowSide:null===n.shadowSide?h[n.side]:n.shadowSide,o.clipShadows=n.clipShadows,o.clippingPlanes=n.clippingPlanes,o.clipIntersection=n.clipIntersection,o.wireframeLinewidth=n.wireframeLinewidth,o.linewidth=n.linewidth,!0===i.isPointLight&&!0===o.isMeshDistanceMaterial&&(o.referencePosition.setFromMatrixPosition(i.matrixWorld),o.nearDistance=r,o.farDistance=a),o}function _(e,n,r,a,i){if(!1!==e.visible){if(e.layers.test(n.layers)&&(e.isMesh||e.isLine||e.isPoints)&&(e.castShadow||e.receiveShadow&&3===i)&&(!e.frustumCulled||x.intersectsObject(e))){e.modelViewMatrix.multiplyMatrices(r.matrixWorldInverse,e.matrixWorld);var o=t.update(e),s=e.material;if(Array.isArray(s))for(var l=o.groups,u=0,h=l.length;u<h;u++){var p=l[u],f=s[p.materialIndex];if(f&&f.visible){var d=g(e,o,f,a,r.near,r.far,i);T.renderBufferDirect(r,null,o,d,e,p)}}else s.visible&&(d=g(e,o,s,a,r.near,r.far,i),T.renderBufferDirect(r,null,o,d,e,null))}for(var b=e.children,E=0,S=b.length;E<S;E++)_(b[E],n,r,a,i)}}var x=new Yt,S=new j,r=new j,a=new va,s=[],o=[],y={},h={0:1,1:0,2:2},l=new gn({defines:{SAMPLE_RATE:2/8,HALF_SAMPLE_RATE:1/8},uniforms:{shadow_pass:{value:null},resolution:{value:new j},radius:{value:4}},vertexShader:"\n\nvoid main() {\n\n\tgl_Position = vec4( position, 1.0 );\n\n}\n\n",fragmentShader:"\nuniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n\n#include <packing>\n\nvoid main() {\n\n  float mean = 0.0;\n  float squared_mean = 0.0;\n\n\t// This seems totally useless but it's a crazy work around for a Adreno compiler bug\n\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy  ) / resolution ) );\n\n  for ( float i = -1.0; i < 1.0 ; i += SAMPLE_RATE) {\n\n    #ifdef HORIZONAL_PASS\n\n      vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( i, 0.0 ) * radius ) / resolution ) );\n      mean += distribution.x;\n      squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\n    #else\n\n      float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0,  i )  * radius ) / resolution ) );\n      mean += depth;\n      squared_mean += depth * depth;\n\n    #endif\n\n  }\n\n  mean = mean * HALF_SAMPLE_RATE;\n  squared_mean = squared_mean * HALF_SAMPLE_RATE;\n\n  float std_dev = sqrt( squared_mean - mean * mean );\n\n  gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n\n}\n"}),c=l.clone();c.defines.HORIZONAL_PASS=1;var p=new Dr;p.setAttribute("position",new Xa(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));var u=new xi(p,l),M=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1,this.render=function(t,i,o){if(!1!==M.enabled&&(!1!==M.autoUpdate||!1!==M.needsUpdate)&&0!==t.length){var s=T.getRenderTarget(),l=T.getActiveCubeFace(),m=T.getActiveMipmapLevel(),c=T.state;c.setBlending(0),c.buffers.color.setClear(1,1,1,1),c.buffers.depth.setTest(!0),c.setScissorTest(!1);for(var p=0,u=t.length;p<u;p++){var d=t[p],g=d.shadow;if(void 0!==g){S.copy(g.mapSize);var h=g.getFrameExtents();if(S.multiply(h),r.copy(g.mapSize),(S.x>e||S.y>e)&&(S.x>e&&(r.x=Tm(e/h.x),S.x=r.x*h.x,g.mapSize.x=r.x),S.y>e&&(r.y=Tm(e/h.y),S.y=r.y*h.y,g.mapSize.y=r.y)),null===g.map&&!g.isPointLightShadow&&3===this.type){var y={minFilter:1006,magFilter:1006,format:1023};g.map=new kl(S.x,S.y,y),g.map.texture.name=d.name+".shadowMap",g.mapPass=new kl(S.x,S.y,y),g.camera.updateProjectionMatrix()}null===g.map&&(y={minFilter:1003,magFilter:1003,format:1023},g.map=new kl(S.x,S.y,y),g.map.texture.name=d.name+".shadowMap",g.camera.updateProjectionMatrix()),T.setRenderTarget(g.map),T.clear();for(var v=g.getViewportCount(),E=0,A;E<v;E++)A=g.getViewport(E),a.set(r.x*A.x,r.y*A.y,r.x*A.z,r.y*A.w),c.viewport(a),g.updateMatrices(d,E),x=g.getFrustum(),_(i,o,g.camera,d,this.type);g.isPointLightShadow||3!==this.type||n(g,o)}else console.warn("THREE.WebGLShadowMap:",d,"has no shadow.")}M.needsUpdate=!1,T.setRenderTarget(s,l,m)}}}function Ol(Y,t,e){function n(t,e,n){var i=new Uint8Array(4),r=Y.createTexture();Y.bindTexture(t,r),Y.texParameteri(t,Y.TEXTURE_MIN_FILTER,Y.NEAREST),Y.texParameteri(t,Y.TEXTURE_MAG_FILTER,Y.NEAREST);for(var a=0;a<n;a++)Y.texImage2D(e+a,0,Y.RGBA,1,1,0,Y.RGBA,Y.UNSIGNED_BYTE,i);return r}function k(e,a){(o[e]=1,0===s[e]&&(Y.enableVertexAttribArray(e),s[e]=1),l[e]!==a)&&((q?Y:t.get("ANGLE_instanced_arrays"))[q?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](e,a),l[e]=a)}function N(t){!0!==u[t]&&(Y.enable(t),u[t]=!0)}function B(t){!1!==u[t]&&(Y.disable(t),u[t]=!1)}function z(t,e,n,i,r,d,p,c){0===t?J&&(B(Y.BLEND),J=!1):(J||(N(Y.BLEND),J=!0),5===t)?(r=r||e,d=d||n,p=p||i,e===Q&&r===te||(Y.blendEquationSeparate(O[e],O[r]),Q=e,te=r),n===$&&i===ee&&d===ae&&p===re||(Y.blendFuncSeparate(V[n],V[i],V[d],V[p]),$=n,ee=i,ae=d,re=p),K=t,ne=null):(t!==K||c!==ne)&&((100===Q&&100===te||(Y.blendEquation(Y.FUNC_ADD),Q=100,te=100),c)?1===t?Y.blendFuncSeparate(Y.ONE,Y.ONE_MINUS_SRC_ALPHA,Y.ONE,Y.ONE_MINUS_SRC_ALPHA):2===t?Y.blendFunc(Y.ONE,Y.ONE):3===t?Y.blendFuncSeparate(Y.ZERO,Y.ZERO,Y.ONE_MINUS_SRC_COLOR,Y.ONE_MINUS_SRC_ALPHA):4===t?Y.blendFuncSeparate(Y.ZERO,Y.SRC_COLOR,Y.ZERO,Y.SRC_ALPHA):console.error("THREE.WebGLState: Invalid blending: ",t):1===t?Y.blendFuncSeparate(Y.SRC_ALPHA,Y.ONE_MINUS_SRC_ALPHA,Y.ONE,Y.ONE_MINUS_SRC_ALPHA):2===t?Y.blendFunc(Y.SRC_ALPHA,Y.ONE):3===t?Y.blendFunc(Y.ZERO,Y.ONE_MINUS_SRC_COLOR):4===t?Y.blendFunc(Y.ZERO,Y.SRC_COLOR):console.error("THREE.WebGLState: Invalid blending: ",t),$=null,ee=null,ae=null,re=null,K=t,ne=c)}function H(t){ie!==t&&(t?Y.frontFace(Y.CW):Y.frontFace(Y.CCW),ie=t)}function j(t){0===t?B(Y.CULL_FACE):(N(Y.CULL_FACE),t!==oe&&(1===t?Y.cullFace(Y.BACK):2===t?Y.cullFace(Y.FRONT):Y.cullFace(Y.FRONT_AND_BACK))),oe=t}function W(t,e,a){t?(N(Y.POLYGON_OFFSET_FILL),le===e&&de===a||(Y.polygonOffset(e,a),le=e,de=a)):B(Y.POLYGON_OFFSET_FILL)}function X(t){void 0===t&&(t=Y.TEXTURE0+pe-1),P!==t&&(Y.activeTexture(t),P=t)}var q=e.isWebGL2,Z=new function(){var a=!1,t=new va,o=null,n=new va(0,0,0,0);return{setMask:function(e){o===e||a||(Y.colorMask(e,e,e,e),o=e)},setLocked:function(e){a=e},setClear:function(r,l,d,p,s){!0===s&&(r*=p,l*=p,d*=p),t.set(r,l,d,p),!1===n.equals(t)&&(Y.clearColor(r,l,d,p),n.copy(t))},reset:function(){a=!1,o=null,n.set(-1,0,0,0)}}},r=new function(){var a=!1,t=null,o=null,s=null;return{setTest:function(t){t?N(Y.DEPTH_TEST):B(Y.DEPTH_TEST)},setMask:function(e){t===e||a||(Y.depthMask(e),t=e)},setFunc:function(t){o!==t&&(t?0===t?Y.depthFunc(Y.NEVER):1===t?Y.depthFunc(Y.ALWAYS):2===t?Y.depthFunc(Y.LESS):3===t?Y.depthFunc(Y.LEQUAL):4===t?Y.depthFunc(Y.EQUAL):5===t?Y.depthFunc(Y.GEQUAL):6===t?Y.depthFunc(Y.GREATER):7===t?Y.depthFunc(Y.NOTEQUAL):Y.depthFunc(Y.LEQUAL):Y.depthFunc(Y.LEQUAL),o=t)},setLocked:function(e){a=e},setClear:function(t){s!==t&&(Y.clearDepth(t),s=t)},reset:function(){a=!1,t=null,o=null,s=null}}},a=new function(){var d=!1,t=null,p=null,c=null,m=null,u=null,g=null,f=null,y=null;return{setTest:function(e){d||(e?N(Y.STENCIL_TEST):B(Y.STENCIL_TEST))},setMask:function(e){t===e||d||(Y.stencilMask(e),t=e)},setFunc:function(t,e,a){p===t&&c===e&&m===a||(Y.stencilFunc(t,e,a),p=t,c=e,m=a)},setOp:function(t,e,a){u===t&&g===e&&f===a||(Y.stencilOp(t,e,a),u=t,g=e,f=a)},setLocked:function(e){d=e},setClear:function(t){y!==t&&(Y.clearStencil(t),y=t)},reset:function(){d=!1,t=null,p=null,c=null,m=null,u=null,g=null,f=null,y=null}}},i=Y.getParameter(Y.MAX_VERTEX_ATTRIBS),o=new Uint8Array(i),s=new Uint8Array(i),l=new Uint8Array(i),u={},h=null,J=null,K=null,Q=null,$=null,ee=null,te=null,ae=null,re=null,ne=!1,ie=null,oe=null,se=null,le=null,de=null,pe=Y.getParameter(Y.MAX_COMBINED_TEXTURE_IMAGE_UNITS),T=!1,ce=0,me=Y.getParameter(Y.VERSION);-1===me.indexOf("WebGL")?-1!==me.indexOf("OpenGL ES")&&(ce=parseFloat(/^OpenGL\ ES\ ([0-9])/.exec(me)[1]),T=2<=ce):(ce=parseFloat(/^WebGL\ ([0-9])/.exec(me)[1]),T=1<=ce);var P=null,ue={},ge=new va,R=new va,I={};I[Y.TEXTURE_2D]=n(Y.TEXTURE_2D,Y.TEXTURE_2D,1),I[Y.TEXTURE_CUBE_MAP]=n(Y.TEXTURE_CUBE_MAP,Y.TEXTURE_CUBE_MAP_POSITIVE_X,6),Z.setClear(0,0,0,1),r.setClear(1),a.setClear(0),N(Y.DEPTH_TEST),r.setFunc(3),H(!1),j(1),N(Y.CULL_FACE),z(0);var O={100:Y.FUNC_ADD,101:Y.FUNC_SUBTRACT,102:Y.FUNC_REVERSE_SUBTRACT};if(q)O[103]=Y.MIN,O[104]=Y.MAX;else{var U=t.get("EXT_blend_minmax");null!==U&&(O[103]=U.MIN_EXT,O[104]=U.MAX_EXT)}var V={200:Y.ZERO,201:Y.ONE,202:Y.SRC_COLOR,204:Y.SRC_ALPHA,210:Y.SRC_ALPHA_SATURATE,208:Y.DST_COLOR,206:Y.DST_ALPHA,203:Y.ONE_MINUS_SRC_COLOR,205:Y.ONE_MINUS_SRC_ALPHA,209:Y.ONE_MINUS_DST_COLOR,207:Y.ONE_MINUS_DST_ALPHA};return{buffers:{color:Z,depth:r,stencil:a},initAttributes:function(){for(var a=0,r=o.length;a<r;a++)o[a]=0},enableAttribute:function(e){k(e,0)},enableAttributeAndDivisor:k,disableUnusedAttributes:function(){for(var t=0,a=s.length;t!==a;++t)s[t]!==o[t]&&(Y.disableVertexAttribArray(t),s[t]=0)},vertexAttribPointer:function(t,e,n,r,a,i){!0!==q||n!==Y.INT&&n!==Y.UNSIGNED_INT?Y.vertexAttribPointer(t,e,n,r,a,i):Y.vertexAttribIPointer(t,e,n,r,a,i)},enable:N,disable:B,useProgram:function(t){return h!==t&&(Y.useProgram(t),h=t,!0)},setBlending:z,setMaterial:function(t,e){2===t.side?B(Y.CULL_FACE):N(Y.CULL_FACE);var n=1===t.side;e&&(n=!n),H(n),1===t.blending&&!1===t.transparent?z(0):z(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.premultipliedAlpha),r.setFunc(t.depthFunc),r.setTest(t.depthTest),r.setMask(t.depthWrite),Z.setMask(t.colorWrite);var s=t.stencilWrite;a.setTest(s),s&&(a.setMask(t.stencilWriteMask),a.setFunc(t.stencilFunc,t.stencilRef,t.stencilFuncMask),a.setOp(t.stencilFail,t.stencilZFail,t.stencilZPass)),W(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits)},setFlipSided:H,setCullFace:j,setLineWidth:function(t){t!==se&&(T&&Y.lineWidth(t),se=t)},setPolygonOffset:W,setScissorTest:function(t){t?N(Y.SCISSOR_TEST):B(Y.SCISSOR_TEST)},activeTexture:X,bindTexture:function(t,e){null===P&&X();var a=ue[P];void 0===a&&(a={type:void 0,texture:void 0},ue[P]=a),a.type===t&&a.texture===e||(Y.bindTexture(t,e||I[t]),a.type=t,a.texture=e)},unbindTexture:function(){var t=ue[P];void 0!==t&&void 0!==t.type&&(Y.bindTexture(t.type,null),t.type=void 0,t.texture=void 0)},compressedTexImage2D:function(){try{Y.compressedTexImage2D.apply(Y,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage2D:function(){try{Y.texImage2D.apply(Y,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage3D:function(){try{Y.texImage3D.apply(Y,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},scissor:function(t){!1===ge.equals(t)&&(Y.scissor(t.x,t.y,t.z,t.w),ge.copy(t))},viewport:function(t){!1===R.equals(t)&&(Y.viewport(t.x,t.y,t.z,t.w),R.copy(t))},reset:function(){for(var t=0;t<s.length;t++)1===s[t]&&(Y.disableVertexAttribArray(t),s[t]=0);u={},P=null,ue={},h=null,K=null,ie=null,oe=null,Z.reset(),r.reset(),a.reset()}}}function Ul(z,t,U,V,e,G,a){function i(a,t){return u?new OffscreenCanvas(a,t):document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function n(o,t,e,n){var d=1;if((o.width>n||o.height>n)&&(d=n/Em(o.width,o.height)),1>d||!0===t){if("undefined"!=typeof HTMLImageElement&&o instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&o instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&o instanceof ImageBitmap){var p=t?eg.floorPowerOfTwo:Tm,a=p(d*o.width),s=p(d*o.height);void 0===f&&(f=i(a,s));var l=e?i(a,s):f;return l.width=a,l.height=s,l.getContext("2d").drawImage(o,0,0,a,s),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+o.width+"x"+o.height+") to ("+a+"x"+s+")."),l}return"data"in o&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+o.width+"x"+o.height+")."),o}return o}function H(e){return eg.isPowerOfTwo(e.width)&&eg.isPowerOfTwo(e.height)}function v(a,t){return a.generateMipmaps&&t&&1003!==a.minFilter&&1006!==a.minFilter}function y(t,e,n,r){z.generateMipmap(t),V.get(e).__maxMipLevel=lm(Em(n,r))*Math.LOG2E}function _(e,n,i){if(!1===R)return n;if(null!==e){if(void 0!==z[e])return z[e];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+e+"'")}var r=n;return n===z.RED&&(i===z.FLOAT&&(r=z.R32F),i===z.HALF_FLOAT&&(r=z.R16F),i===z.UNSIGNED_BYTE&&(r=z.R8)),n===z.RGB&&(i===z.FLOAT&&(r=z.RGB32F),i===z.HALF_FLOAT&&(r=z.RGB16F),i===z.UNSIGNED_BYTE&&(r=z.RGB8)),n===z.RGBA&&(i===z.FLOAT&&(r=z.RGBA32F),i===z.HALF_FLOAT&&(r=z.RGBA16F),i===z.UNSIGNED_BYTE&&(r=z.RGBA8)),r!==z.R16F&&r!==z.R32F&&r!==z.RGBA16F&&r!==z.RGBA32F||t.get("EXT_color_buffer_float"),r}function r(t){return 1003===t||1004===t||1005===t?z.NEAREST:z.LINEAR}function s(t){var e=t.target;e.removeEventListener("dispose",s),function(t){var e=V.get(t);void 0===e.__webglInit||(z.deleteTexture(e.__webglTexture),V.remove(t))}(e),e.isVideoTexture&&p.delete(e),a.memory.textures--}function x(t){var e=t.target;e.removeEventListener("dispose",x),function(t){var e=V.get(t),n=V.get(t.texture);if(t){if(void 0!==n.__webglTexture&&z.deleteTexture(n.__webglTexture),t.depthTexture&&t.depthTexture.dispose(),t.isWebGLCubeRenderTarget)for(var r=0;6>r;r++)z.deleteFramebuffer(e.__webglFramebuffer[r]),e.__webglDepthbuffer&&z.deleteRenderbuffer(e.__webglDepthbuffer[r]);else z.deleteFramebuffer(e.__webglFramebuffer),e.__webglDepthbuffer&&z.deleteRenderbuffer(e.__webglDepthbuffer),e.__webglMultisampledFramebuffer&&z.deleteFramebuffer(e.__webglMultisampledFramebuffer),e.__webglColorRenderbuffer&&z.deleteRenderbuffer(e.__webglColorRenderbuffer),e.__webglDepthRenderbuffer&&z.deleteRenderbuffer(e.__webglDepthRenderbuffer);V.remove(t.texture),V.remove(t)}}(e),a.memory.textures--}function m(t,e){var r=V.get(t);if(t.isVideoTexture&&function(r){var t=a.render.frame;p.get(r)!==t&&(p.set(r,t),r.update())}(t),0<t.version&&r.__version!==t.version){var n=t.image;if(void 0===n)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else{if(!1!==n.complete)return void E(r,t,e);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}U.activeTexture(z.TEXTURE0+e),U.bindTexture(z.TEXTURE_2D,r.__webglTexture)}function g(t,e){if(6===t.image.length){var a=V.get(t);if(0<t.version&&a.__version!==t.version){P(a,t),U.activeTexture(z.TEXTURE0+e),U.bindTexture(z.TEXTURE_CUBE_MAP,a.__webglTexture),z.pixelStorei(z.UNPACK_FLIP_Y_WEBGL,t.flipY);for(var r=t&&(t.isCompressedTexture||t.image[0].isCompressedTexture),i=t.image[0]&&t.image[0].isDataTexture,o=[],s=0;6>s;s++)o[s]=r||i?i?t.image[s].image:t.image[s]:n(t.image[s],!1,!0,k);var l=o[0],d=H(l)||R,c=G.convert(t.format),m=G.convert(t.type),u=_(t.internalFormat,c,m),g;if(T(z.TEXTURE_CUBE_MAP,t,d),r){for(s=0;6>s;s++){g=o[s].mipmaps;for(var h=0,x;h<g.length;h++)x=g[h],1023!==t.format&&1022!==t.format?null===c?console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):U.compressedTexImage2D(z.TEXTURE_CUBE_MAP_POSITIVE_X+s,h,u,x.width,x.height,0,x.data):U.texImage2D(z.TEXTURE_CUBE_MAP_POSITIVE_X+s,h,u,x.width,x.height,0,c,m,x.data)}a.__maxMipLevel=g.length-1}else{for(g=t.mipmaps,s=0;6>s;s++)if(i)for(U.texImage2D(z.TEXTURE_CUBE_MAP_POSITIVE_X+s,0,u,o[s].width,o[s].height,0,c,m,o[s].data),h=0;h<g.length;h++){var b=(x=g[h]).image[s].image;U.texImage2D(z.TEXTURE_CUBE_MAP_POSITIVE_X+s,h+1,u,b.width,b.height,0,c,m,b.data)}else for(U.texImage2D(z.TEXTURE_CUBE_MAP_POSITIVE_X+s,0,u,c,m,o[s]),h=0;h<g.length;h++)x=g[h],U.texImage2D(z.TEXTURE_CUBE_MAP_POSITIVE_X+s,h+1,u,c,m,x.image[s]);a.__maxMipLevel=g.length}v(t,d)&&y(z.TEXTURE_CUBE_MAP,t,l.width,l.height),a.__version=t.version,t.onUpdate&&t.onUpdate(t)}else U.activeTexture(z.TEXTURE0+e),U.bindTexture(z.TEXTURE_CUBE_MAP,a.__webglTexture)}}function b(t,e){U.activeTexture(z.TEXTURE0+e),U.bindTexture(z.TEXTURE_CUBE_MAP,V.get(t).__webglTexture)}function T(i,n,a){a?(z.texParameteri(i,z.TEXTURE_WRAP_S,I[n.wrapS]),z.texParameteri(i,z.TEXTURE_WRAP_T,I[n.wrapT]),i!==z.TEXTURE_3D&&i!==z.TEXTURE_2D_ARRAY||z.texParameteri(i,z.TEXTURE_WRAP_R,I[n.wrapR]),z.texParameteri(i,z.TEXTURE_MAG_FILTER,A[n.magFilter]),z.texParameteri(i,z.TEXTURE_MIN_FILTER,A[n.minFilter])):(z.texParameteri(i,z.TEXTURE_WRAP_S,z.CLAMP_TO_EDGE),z.texParameteri(i,z.TEXTURE_WRAP_T,z.CLAMP_TO_EDGE),i!==z.TEXTURE_3D&&i!==z.TEXTURE_2D_ARRAY||z.texParameteri(i,z.TEXTURE_WRAP_R,z.CLAMP_TO_EDGE),1001===n.wrapS&&1001===n.wrapT||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),z.texParameteri(i,z.TEXTURE_MAG_FILTER,r(n.magFilter)),z.texParameteri(i,z.TEXTURE_MIN_FILTER,r(n.minFilter)),1003!==n.minFilter&&1006!==n.minFilter&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter."));var s=t.get("EXT_texture_filter_anisotropic");if(s){if(1015===n.type&&null===t.get("OES_texture_float_linear"))return;if(1016===n.type&&null===(R||t.get("OES_texture_half_float_linear")))return;(1<n.anisotropy||V.get(n).__currentAnisotropy)&&(z.texParameterf(i,s.TEXTURE_MAX_ANISOTROPY_EXT,bm(n.anisotropy,e.getMaxAnisotropy())),V.get(n).__currentAnisotropy=n.anisotropy)}}function P(t,e){void 0===t.__webglInit&&(t.__webglInit=!0,e.addEventListener("dispose",s),t.__webglTexture=z.createTexture(),a.memory.textures++)}function E(t,e,a){var r=z.TEXTURE_2D;e.isDataTexture2DArray&&(r=z.TEXTURE_2D_ARRAY),e.isDataTexture3D&&(r=z.TEXTURE_3D),P(t,e),U.activeTexture(z.TEXTURE0+a),U.bindTexture(r,t.__webglTexture),z.pixelStorei(z.UNPACK_FLIP_Y_WEBGL,e.flipY),z.pixelStorei(z.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.premultiplyAlpha),z.pixelStorei(z.UNPACK_ALIGNMENT,e.unpackAlignment);var i=function(e){return!R&&(1001!==e.wrapS||1001!==e.wrapT||1003!==e.minFilter&&1006!==e.minFilter)}(e)&&!1===H(e.image),o=n(e.image,i,!1,F),l=H(o)||R,c=G.convert(e.format),p=G.convert(e.type),u=_(e.internalFormat,c,p);T(r,e,l);var g=e.mipmaps,h;if(e.isDepthTexture)u=z.DEPTH_COMPONENT,R?u=1015===e.type?z.DEPTH_COMPONENT32F:1014===e.type?z.DEPTH_COMPONENT24:1020===e.type?z.DEPTH24_STENCIL8:z.DEPTH_COMPONENT16:1015===e.type&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),1026===e.format&&u===z.DEPTH_COMPONENT&&1012!==e.type&&1014!==e.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),e.type=1012,p=G.convert(e.type)),1027===e.format&&u===z.DEPTH_COMPONENT&&(u=z.DEPTH_STENCIL,1020!==e.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),e.type=1020,p=G.convert(e.type))),U.texImage2D(z.TEXTURE_2D,0,u,o.width,o.height,0,c,p,null);else if(e.isDataTexture){if(0<g.length&&l){for(var x=0,b=g.length;x<b;x++)h=g[x],U.texImage2D(z.TEXTURE_2D,x,u,h.width,h.height,0,c,p,h.data);e.generateMipmaps=!1,t.__maxMipLevel=g.length-1}else U.texImage2D(z.TEXTURE_2D,0,u,o.width,o.height,0,c,p,o.data),t.__maxMipLevel=0;}else if(e.isCompressedTexture){for(x=0,b=g.length;x<b;x++)h=g[x],1023!==e.format&&1022!==e.format?null===c?console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):U.compressedTexImage2D(z.TEXTURE_2D,x,u,h.width,h.height,0,h.data):U.texImage2D(z.TEXTURE_2D,x,u,h.width,h.height,0,c,p,h.data);t.__maxMipLevel=g.length-1}else if(e.isDataTexture2DArray)U.texImage3D(z.TEXTURE_2D_ARRAY,0,u,o.width,o.height,o.depth,0,c,p,o.data),t.__maxMipLevel=0;else if(e.isDataTexture3D)U.texImage3D(z.TEXTURE_3D,0,u,o.width,o.height,o.depth,0,c,p,o.data),t.__maxMipLevel=0;else if(0<g.length&&l){for(x=0,b=g.length;x<b;x++)h=g[x],U.texImage2D(z.TEXTURE_2D,x,u,c,p,h);e.generateMipmaps=!1,t.__maxMipLevel=g.length-1}else U.texImage2D(z.TEXTURE_2D,0,u,c,p,o),t.__maxMipLevel=0;v(e,l)&&y(r,e,o.width,o.height),t.__version=e.version,e.onUpdate&&e.onUpdate(e)}function S(t,e,a,r){var n=G.convert(e.texture.format),i=G.convert(e.texture.type),o=_(e.texture.internalFormat,n,i);U.texImage2D(r,0,o,e.width,e.height,0,n,i,null),z.bindFramebuffer(z.FRAMEBUFFER,t),z.framebufferTexture2D(z.FRAMEBUFFER,a,r,V.get(e.texture).__webglTexture,0),z.bindFramebuffer(z.FRAMEBUFFER,null)}function M(t,e,a){if(z.bindRenderbuffer(z.RENDERBUFFER,t),e.depthBuffer&&!e.stencilBuffer){var n=z.DEPTH_COMPONENT16;if(a){var i=e.depthTexture;i&&i.isDepthTexture&&(1015===i.type?n=z.DEPTH_COMPONENT32F:1014===i.type&&(n=z.DEPTH_COMPONENT24));var s=L(e);z.renderbufferStorageMultisample(z.RENDERBUFFER,s,n,e.width,e.height)}else z.renderbufferStorage(z.RENDERBUFFER,n,e.width,e.height);z.framebufferRenderbuffer(z.FRAMEBUFFER,z.DEPTH_ATTACHMENT,z.RENDERBUFFER,t)}else if(e.depthBuffer&&e.stencilBuffer)a?(s=L(e),z.renderbufferStorageMultisample(z.RENDERBUFFER,s,z.DEPTH24_STENCIL8,e.width,e.height)):z.renderbufferStorage(z.RENDERBUFFER,z.DEPTH_STENCIL,e.width,e.height),z.framebufferRenderbuffer(z.FRAMEBUFFER,z.DEPTH_STENCIL_ATTACHMENT,z.RENDERBUFFER,t);else{var d=G.convert(e.texture.format),l=G.convert(e.texture.type);n=_(e.texture.internalFormat,d,l),a?(s=L(e),z.renderbufferStorageMultisample(z.RENDERBUFFER,s,n,e.width,e.height)):z.renderbufferStorage(z.RENDERBUFFER,n,e.width,e.height)}z.bindRenderbuffer(z.RENDERBUFFER,null)}function w(t){var e=V.get(t),n=!0===t.isWebGLCubeRenderTarget;if(t.depthTexture){if(n)throw new Error("target.depthTexture not supported in Cube render targets");!function(t,e){if(e&&e.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(z.bindFramebuffer(z.FRAMEBUFFER,t),!e.depthTexture||!e.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");V.get(e.depthTexture).__webglTexture&&e.depthTexture.image.width===e.width&&e.depthTexture.image.height===e.height||(e.depthTexture.image.width=e.width,e.depthTexture.image.height=e.height,e.depthTexture.needsUpdate=!0),m(e.depthTexture,0);var a=V.get(e.depthTexture).__webglTexture;if(1026===e.depthTexture.format)z.framebufferTexture2D(z.FRAMEBUFFER,z.DEPTH_ATTACHMENT,z.TEXTURE_2D,a,0);else{if(1027!==e.depthTexture.format)throw new Error("Unknown depthTexture format");z.framebufferTexture2D(z.FRAMEBUFFER,z.DEPTH_STENCIL_ATTACHMENT,z.TEXTURE_2D,a,0)}}(e.__webglFramebuffer,t)}else if(n){e.__webglDepthbuffer=[];for(var r=0;6>r;r++)z.bindFramebuffer(z.FRAMEBUFFER,e.__webglFramebuffer[r]),e.__webglDepthbuffer[r]=z.createRenderbuffer(),M(e.__webglDepthbuffer[r],t,!1)}else z.bindFramebuffer(z.FRAMEBUFFER,e.__webglFramebuffer),e.__webglDepthbuffer=z.createRenderbuffer(),M(e.__webglDepthbuffer,t,!1);z.bindFramebuffer(z.FRAMEBUFFER,null)}function L(e){return R&&e.isWebGLMultisampleRenderTarget?bm(c,e.samples):0}var R=e.isWebGL2,l=e.maxTextures,k=e.maxCubemapSize,F=e.maxTextureSize,c=e.maxSamples,p=new WeakMap,u=!1,f;try{u="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(e){}var h=0,I={1e3:z.REPEAT,1001:z.CLAMP_TO_EDGE,1002:z.MIRRORED_REPEAT},A={1003:z.NEAREST,1004:z.NEAREST_MIPMAP_NEAREST,1005:z.NEAREST_MIPMAP_LINEAR,1006:z.LINEAR,1007:z.LINEAR_MIPMAP_NEAREST,1008:z.LINEAR_MIPMAP_LINEAR},C=!1,O=!1;this.allocateTextureUnit=function(){var e=h;return e>=l&&console.warn("THREE.WebGLTextures: Trying to use "+e+" texture units while this GPU supports only "+l),h+=1,e},this.resetTextureUnits=function(){h=0},this.setTexture2D=m,this.setTexture2DArray=function(t,e){var r=V.get(t);0<t.version&&r.__version!==t.version?E(r,t,e):(U.activeTexture(z.TEXTURE0+e),U.bindTexture(z.TEXTURE_2D_ARRAY,r.__webglTexture))},this.setTexture3D=function(t,e){var r=V.get(t);0<t.version&&r.__version!==t.version?E(r,t,e):(U.activeTexture(z.TEXTURE0+e),U.bindTexture(z.TEXTURE_3D,r.__webglTexture))},this.setTextureCube=g,this.setTextureCubeDynamic=b,this.setupRenderTarget=function(t){var e=V.get(t),r=V.get(t.texture);t.addEventListener("dispose",x),r.__webglTexture=z.createTexture(),a.memory.textures++;var n=!0===t.isWebGLCubeRenderTarget,i=!0===t.isWebGLMultisampleRenderTarget,o=H(t)||R;if(!R||1022!==t.texture.format||1015!==t.texture.type&&1016!==t.texture.type||(t.texture.format=1023,console.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.")),n){e.__webglFramebuffer=[];for(var s=0;6>s;s++)e.__webglFramebuffer[s]=z.createFramebuffer()}else if(e.__webglFramebuffer=z.createFramebuffer(),i)if(R){e.__webglMultisampledFramebuffer=z.createFramebuffer(),e.__webglColorRenderbuffer=z.createRenderbuffer(),z.bindRenderbuffer(z.RENDERBUFFER,e.__webglColorRenderbuffer);var l=G.convert(t.texture.format),c=G.convert(t.texture.type),d=_(t.texture.internalFormat,l,c),m=L(t);z.renderbufferStorageMultisample(z.RENDERBUFFER,m,d,t.width,t.height),z.bindFramebuffer(z.FRAMEBUFFER,e.__webglMultisampledFramebuffer),z.framebufferRenderbuffer(z.FRAMEBUFFER,z.COLOR_ATTACHMENT0,z.RENDERBUFFER,e.__webglColorRenderbuffer),z.bindRenderbuffer(z.RENDERBUFFER,null),t.depthBuffer&&(e.__webglDepthRenderbuffer=z.createRenderbuffer(),M(e.__webglDepthRenderbuffer,t,!0)),z.bindFramebuffer(z.FRAMEBUFFER,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(n){for(U.bindTexture(z.TEXTURE_CUBE_MAP,r.__webglTexture),T(z.TEXTURE_CUBE_MAP,t.texture,o),s=0;6>s;s++)S(e.__webglFramebuffer[s],t,z.COLOR_ATTACHMENT0,z.TEXTURE_CUBE_MAP_POSITIVE_X+s);v(t.texture,o)&&y(z.TEXTURE_CUBE_MAP,t.texture,t.width,t.height),U.bindTexture(z.TEXTURE_CUBE_MAP,null)}else U.bindTexture(z.TEXTURE_2D,r.__webglTexture),T(z.TEXTURE_2D,t.texture,o),S(e.__webglFramebuffer,t,z.COLOR_ATTACHMENT0,z.TEXTURE_2D),v(t.texture,o)&&y(z.TEXTURE_2D,t.texture,t.width,t.height),U.bindTexture(z.TEXTURE_2D,null);t.depthBuffer&&w(t)},this.updateRenderTargetMipmap=function(t){var e=t.texture;if(v(e,H(t)||R)){var r=t.isWebGLCubeRenderTarget?z.TEXTURE_CUBE_MAP:z.TEXTURE_2D,a=V.get(e).__webglTexture;U.bindTexture(r,a),y(r,e,t.width,t.height),U.bindTexture(r,null)}},this.updateMultisampleRenderTarget=function(t){if(t.isWebGLMultisampleRenderTarget)if(R){var e=V.get(t);z.bindFramebuffer(z.READ_FRAMEBUFFER,e.__webglMultisampledFramebuffer),z.bindFramebuffer(z.DRAW_FRAMEBUFFER,e.__webglFramebuffer);var n=t.width,r=t.height,a=z.COLOR_BUFFER_BIT;t.depthBuffer&&(a|=z.DEPTH_BUFFER_BIT),t.stencilBuffer&&(a|=z.STENCIL_BUFFER_BIT),z.blitFramebuffer(0,0,n,r,0,0,n,r,a,z.NEAREST),z.bindFramebuffer(z.FRAMEBUFFER,e.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")},this.safeSetTexture2D=function(a,r){a&&a.isWebGLRenderTarget&&(!1===C&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),C=!0),a=a.texture),m(a,r)},this.safeSetTextureCube=function(a,r){a&&a.isWebGLCubeRenderTarget&&(!1===O&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),O=!0),a=a.texture),a&&a.isCubeTexture||Array.isArray(a.image)&&6===a.image.length?g(a,r):b(a,r)}}function Bl(a,t,e){var o=e.isWebGL2;return{convert:function(e){var n;if(1009===e)return a.UNSIGNED_BYTE;if(1017===e)return a.UNSIGNED_SHORT_4_4_4_4;if(1018===e)return a.UNSIGNED_SHORT_5_5_5_1;if(1019===e)return a.UNSIGNED_SHORT_5_6_5;if(1010===e)return a.BYTE;if(1011===e)return a.SHORT;if(1012===e)return a.UNSIGNED_SHORT;if(1013===e)return a.INT;if(1014===e)return a.UNSIGNED_INT;if(1015===e)return a.FLOAT;if(1016===e)return o?a.HALF_FLOAT:null===(n=t.get("OES_texture_half_float"))?null:n.HALF_FLOAT_OES;if(1021===e)return a.ALPHA;if(1022===e)return a.RGB;if(1023===e)return a.RGBA;if(1024===e)return a.LUMINANCE;if(1025===e)return a.LUMINANCE_ALPHA;if(1026===e)return a.DEPTH_COMPONENT;if(1027===e)return a.DEPTH_STENCIL;if(1028===e)return a.RED;if(1029===e)return a.RED_INTEGER;if(1030===e)return a.RG;if(1031===e)return a.RG_INTEGER;if(1032===e)return a.RGB_INTEGER;if(1033===e)return a.RGBA_INTEGER;if(33776===e||33777===e||33778===e||33779===e){if(null===(n=t.get("WEBGL_compressed_texture_s3tc")))return null;if(33776===e)return n.COMPRESSED_RGB_S3TC_DXT1_EXT;if(33777===e)return n.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(33778===e)return n.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(33779===e)return n.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(35840===e||35841===e||35842===e||35843===e){if(null===(n=t.get("WEBGL_compressed_texture_pvrtc")))return null;if(35840===e)return n.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===e)return n.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===e)return n.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===e)return n.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===e)return null===(n=t.get("WEBGL_compressed_texture_etc1"))?null:n.COMPRESSED_RGB_ETC1_WEBGL;if((37492===e||37496===e)&&null!==(n=t.get("WEBGL_compressed_texture_etc"))){if(37492===e)return n.COMPRESSED_RGB8_ETC2;if(37496===e)return n.COMPRESSED_RGBA8_ETC2_EAC}return 37808===e||37809===e||37810===e||37811===e||37812===e||37813===e||37814===e||37815===e||37816===e||37817===e||37818===e||37819===e||37820===e||37821===e||37840===e||37841===e||37842===e||37843===e||37844===e||37845===e||37846===e||37847===e||37848===e||37849===e||37850===e||37851===e||37852===e||37853===e?null===(n=t.get("WEBGL_compressed_texture_astc"))?null:e:36492===e?null===(n=t.get("EXT_texture_compression_bptc"))?null:e:1020===e?o?a.UNSIGNED_INT_24_8:null===(n=t.get("WEBGL_depth_texture"))?null:n.UNSIGNED_INT_24_8_WEBGL:void 0}}}function Vl(){wa.call(this),this.type="Camera",this.matrixWorldInverse=new na,this.projectionMatrix=new na,this.projectionMatrixInverse=new na}function Gl(a,t,e,r){Vl.call(this),this.type="PerspectiveCamera",this.fov=void 0===a?50:a,this.zoom=1,this.near=void 0===e?.1:e,this.far=void 0===r?2e3:r,this.focus=10,this.aspect=void 0===t?1:t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}function Hl(e){Gl.call(this),this.cameras=e||[]}function Wl(){wa.call(this),this.type="Group"}function Xl(){this._targetRay=null,this._grip=null}function jl(T,t){function e(a){var t=l.get(a.inputSource);t&&t.dispatchEvent({type:a.type})}function g(){l.forEach(function(a,t){a.disconnect(t)}),l.clear(),T.setFramebuffer(null),T.setRenderTarget(T.getRenderTarget()),k.stop(),E.isPresenting=!1,E.dispatchEvent({type:"sessionend"})}function v(e){A=e,k.setContext(S),k.start(),E.isPresenting=!0,E.dispatchEvent({type:"sessionstart"})}function y(i){for(var t=S.inputSources,e=0;e<L.length;e++)l.set(t[e],L[e]);for(e=0;e<i.removed.length;e++){var o=i.removed[e];(s=l.get(o))&&(s.dispatchEvent({type:"disconnected",data:o}),l.delete(o))}for(e=0;e<i.added.length;e++){var s;o=i.added[e],(s=l.get(o))&&s.dispatchEvent({type:"connected",data:o})}}function _(a,t){null===t?a.matrixWorld.copy(a.matrix):a.matrixWorld.multiplyMatrices(t.matrixWorld,a.matrix),a.matrixWorldInverse.getInverse(a.matrixWorld)}var E=this,S=null,M=1,A=null,P="local-floor",C=null,L=[],l=new Map,h=new Gl;h.layers.enable(1),h.viewport=new va;var u=new Gl;u.layers.enable(2),u.viewport=new va;var n=[h,u],p=new Hl;p.layers.enable(1),p.layers.enable(2);var c=null,f=null;this.enabled=!1,this.isPresenting=!1,this.getController=function(a){var t=L[a];return void 0===t&&(t=new Xl,L[a]=t),t.getTargetRaySpace()},this.getControllerGrip=function(a){var t=L[a];return void 0===t&&(t=new Xl,L[a]=t),t.getGripSpace()},this.setFramebufferScaleFactor=function(e){M=e,!0===E.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(e){P=e,!0===E.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return A},this.getSession=function(){return S},this.setSession=function(r){if(null!==(S=r)){S.addEventListener("select",e),S.addEventListener("selectstart",e),S.addEventListener("selectend",e),S.addEventListener("squeeze",e),S.addEventListener("squeezestart",e),S.addEventListener("squeezeend",e),S.addEventListener("end",g);var i=t.getContextAttributes(),n={antialias:i.antialias,alpha:i.alpha,depth:i.depth,stencil:i.stencil,framebufferScaleFactor:M},a=new XRWebGLLayer(S,t,n);S.updateRenderState({baseLayer:a}),S.requestReferenceSpace(P).then(v),S.addEventListener("inputsourceschange",y)}};var R=new At,x=new At;this.getCamera=function(i){p.near=u.near=h.near=i.near,p.far=u.far=h.far=i.far,c===p.near&&f===p.far||(S.updateRenderState({depthNear:p.near,depthFar:p.far}),c=p.near,f=p.far);var t=i.parent,e=p.cameras;_(p,t);for(var n=0;n<e.length;n++)_(e[n],t);i.matrixWorld.copy(p.matrixWorld);for(var o=i.children,a=(n=0,o.length);n<a;n++)o[n].updateMatrixWorld(!0);return 2===e.length?function(p,t,e){R.setFromMatrixPosition(t.matrixWorld),x.setFromMatrixPosition(e.matrixWorld);var n=R.distanceTo(x),i=t.projectionMatrix.elements,r=e.projectionMatrix.elements,a=i[14]/(i[10]-1),s=i[14]/(i[10]+1),o=(i[9]+1)/i[5],l=(i[9]-1)/i[5],f=(i[8]-1)/i[0],u=(r[8]+1)/r[0],c=n/(-f+u),d=c*-f;t.matrixWorld.decompose(p.position,p.quaternion,p.scale),p.translateX(d),p.translateZ(c),p.matrixWorld.compose(p.position,p.quaternion,p.scale),p.matrixWorldInverse.getInverse(p.matrixWorld);var m=a+c,g=s+c;p.projectionMatrix.makePerspective(a*f-d,a*u+(n-d),o*s/g*m,l*s/g*m,m,g)}(p,h,u):p.projectionMatrix.copy(h.projectionMatrix),p};var b=null,k=new Ba;k.setAnimationLoop(function(t,e){if(null!==(C=e.getViewerPose(A))){var a=C.views,r=S.renderState.baseLayer;T.setFramebuffer(r.framebuffer);var i=!1;a.length!==p.cameras.length&&(p.cameras.length=0,i=!0);for(var o=0;o<a.length;o++){var s=a[o],l=r.getViewport(s),d=n[o];d.matrix.fromArray(s.transform.matrix),d.projectionMatrix.fromArray(s.projectionMatrix),d.viewport.set(l.x,l.y,l.width,l.height),0==o&&p.matrix.copy(d.matrix),!0===i&&p.cameras.push(d)}}var c=S.inputSources;for(o=0;o<L.length;o++){var m=L[o],g=c[o];m.update(g,e,A)}b&&b(t,e)}),this.setAnimationLoop=function(e){b=e},this.dispose=function(){}}function Yl(ee){function te(){return null===xe?Pe:1}function ae(){Oe=new mo(ze),!1===(Ue=new po(ze,Oe,ee)).isWebGL2&&(Oe.get("WEBGL_depth_texture"),Oe.get("OES_texture_float"),Oe.get("OES_texture_half_float"),Oe.get("OES_texture_half_float_linear"),Oe.get("OES_standard_derivatives"),Oe.get("OES_element_index_uint"),Oe.get("ANGLE_instanced_arrays")),Oe.get("OES_texture_float_linear"),tt=new Bl(ze,Oe,Ue),(Be=new Ol(ze,Oe,Ue)).scissor(G.copy(J).multiplyScalar(Pe).floor()),Be.viewport(Me.copy(Le).multiplyScalar(Pe).floor()),Ve=new yo(ze),Ge=new xl,He=new Ul(ze,Oe,Be,Ge,Ue,tt,Ve),We=new za(ze,Ue),Xe=new go(ze,We,Ve),je=new bo(ze,Xe,We,Ve),Ke=new xo(ze),Ye=new _l(ye,Oe,Ue),qe=new Ml,Ze=new Ll,Je=new lo(ye,Be,je,s),Qe=new co(ze,Oe,Ve,Ue),$e=new vo(ze,Oe,Ve,Ue),Ve.programs=Ye.programs,ye.capabilities=Ue,ye.extensions=Oe,ye.properties=Ge,ye.renderLists=qe,ye.state=Be,ye.info=Ve}function re(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),u=!0}function ne(){console.log("THREE.WebGLRenderer: Context Restored."),u=!1,ae()}function ie(a){var t=a.target;t.removeEventListener("dispose",ie),function(e){oe(e),Ge.remove(e)}(t)}function oe(a){var t=Ge.get(a).program;a.program=void 0,void 0!==t&&Ye.releaseProgram(t)}function se(d,t,e,p){if(!1!==d.visible){if(d.layers.test(t.layers))if(d.isGroup)e=d.renderOrder;else if(d.isLOD)!0===d.autoUpdate&&d.update(t);else if(d.isLight)he.pushLight(d),d.castShadow&&he.pushShadow(d);else if(d.isSprite){if(!d.frustumCulled||Re.intersectsSprite(d)){p&&Ne.setFromMatrixPosition(d.matrixWorld).applyMatrix4(Ie);var i=je.update(d);(c=d.material).visible&&fe.push(d,i,c,e,Ne.z,null)}}else if(d.isImmediateRenderObject)p&&Ne.setFromMatrixPosition(d.matrixWorld).applyMatrix4(Ie),fe.push(d,null,d.material,e,Ne.z,null);else if((d.isMesh||d.isLine||d.isPoints)&&(d.isSkinnedMesh&&d.skeleton.frame!==Ve.render.frame&&(d.skeleton.update(),d.skeleton.frame=Ve.render.frame),!d.frustumCulled||Re.intersectsObject(d))){p&&Ne.setFromMatrixPosition(d.matrixWorld).applyMatrix4(Ie),i=je.update(d);var c=d.material;if(Array.isArray(c))for(var m=i.groups,s=0,g=m.length;s<g;s++){var y=m[s],h=c[y.materialIndex];h&&h.visible&&fe.push(d,i,h,e,Ne.z,y)}else c.visible&&fe.push(d,i,c,e,Ne.z,null)}var u=d.children;for(s=0,g=u.length;s<g;s++)se(u[s],t,e,p)}}function le(p,t,e,n){for(var i=0,g=p.length;i<g;i++){var a=p[i],s=a.object,o=a.geometry,l=void 0===n?a.material:n,h=a.group;if(e.isArrayCamera){Se=e;for(var u=e.cameras,c=0,y=u.length,d;c<y;c++)d=u[c],s.layers.test(d.layers)&&(Be.viewport(Me.copy(d.viewport)),he.setupLights(d),de(s,t,d,o,l,h))}else Se=null,de(s,t,e,o,l,h)}}function de(o,t,e,n,i,r){if(o.onBeforeRender(ye,t,e,n,i,r),he=Ze.get(t,Se||e),o.modelViewMatrix.multiplyMatrices(e.matrixWorldInverse,o.matrixWorld),o.normalMatrix.getNormalMatrix(o.modelViewMatrix),o.isImmediateRenderObject){var a=ce(e,t,i,o);Be.setMaterial(i),Te.geometry=null,Te.program=null,Te.wireframe=!1,function(a,r){a.render(function(e){ye.renderBufferImmediate(e,r)})}(o,a)}else ye.renderBufferDirect(e,t,n,i,o,r);o.onAfterRender(ye,t,e,n,i,r),he=Ze.get(t,Se||e)}function pe(p,t,e){var n=Ge.get(p),i=he.state.lights,r=he.state.shadowsArray,a=i.state.version,s=Ye.getParameters(p,i.state,r,t,Q.numPlanes,Q.numIntersection,e),o=Ye.getProgramCacheKey(s),l=n.program,y=!0;if(void 0===l)p.addEventListener("dispose",ie);else if(l.cacheKey!==o)oe(p);else if(n.lightsStateVersion!==a)n.lightsStateVersion=a,y=!1;else{if(void 0!==s.shaderID)return;y=!1}y&&(l=Ye.acquireProgram(s,o),n.program=l,n.uniforms=s.uniforms,n.outputEncoding=s.outputEncoding,p.program=l);var v=l.getAttributes();if(p.morphTargets){p.numSupportedMorphTargets=0;for(var c=0;c<ye.maxMorphTargets;c++)0<=v["morphTarget"+c]&&p.numSupportedMorphTargets++}if(p.morphNormals)for(p.numSupportedMorphNormals=0,c=0;c<ye.maxMorphNormals;c++)0<=v["morphNormal"+c]&&p.numSupportedMorphNormals++;var _=n.uniforms;(p.isShaderMaterial||p.isRawShaderMaterial)&&!0!==p.clipping||(n.numClippingPlanes=Q.numPlanes,n.numIntersection=Q.numIntersection,_.clippingPlanes=Q.uniform),n.environment=p.isMeshStandardMaterial?t.environment:null,n.fog=t.fog,n.needsLights=function(e){return e.isMeshLambertMaterial||e.isMeshToonMaterial||e.isMeshPhongMaterial||e.isMeshStandardMaterial||e.isShadowMaterial||e.isShaderMaterial&&!0===e.lights}(p),n.lightsStateVersion=a,n.needsLights&&(_.ambientLightColor.value=i.state.ambient,_.lightProbe.value=i.state.probe,_.directionalLights.value=i.state.directional,_.directionalLightShadows.value=i.state.directionalShadow,_.spotLights.value=i.state.spot,_.spotLightShadows.value=i.state.spotShadow,_.rectAreaLights.value=i.state.rectArea,_.pointLights.value=i.state.point,_.pointLightShadows.value=i.state.pointShadow,_.hemisphereLights.value=i.state.hemi,_.directionalShadowMap.value=i.state.directionalShadowMap,_.directionalShadowMatrix.value=i.state.directionalShadowMatrix,_.spotShadowMap.value=i.state.spotShadowMap,_.spotShadowMatrix.value=i.state.spotShadowMatrix,_.pointShadowMap.value=i.state.pointShadowMap,_.pointShadowMatrix.value=i.state.pointShadowMatrix);var d=n.program.getUniforms(),m=al.seqWithValue(d.seq,_);n.uniformsList=m}function ce(p,t,e,n){He.resetTextureUnits();var i=t.fog,r=e.isMeshStandardMaterial?t.environment:null,a=null===xe?ye.outputEncoding:xe.texture.encoding,s=Ge.get(e),o=he.state.lights;if(ke&&(Fe||p!==z)){var l=p===z&&e.id===Ee;Q.setState(e.clippingPlanes,e.clipIntersection,e.clipShadows,p,s,l)}e.version===s.__version?void 0===s.program||e.fog&&s.fog!==i||s.environment!==r||s.needsLights&&s.lightsStateVersion!==o.state.version?pe(e,t,n):void 0===s.numClippingPlanes||s.numClippingPlanes===Q.numPlanes&&s.numIntersection===Q.numIntersection?s.outputEncoding!==a&&pe(e,t,n):pe(e,t,n):(pe(e,t,n),s.__version=e.version);var m=!1,g=!1,f=!1,h=s.program,y=h.getUniforms(),_=s.uniforms,b,E;if(Be.useProgram(h.program)&&(m=!0,g=!0,f=!0),e.id!==Ee&&(Ee=e.id,g=!0),m||z!==p){if(y.setValue(ze,"projectionMatrix",p.projectionMatrix),Ue.logarithmicDepthBuffer&&y.setValue(ze,"logDepthBufFC",2/(lm(p.far+1)/sm)),z!==p&&(z=p,g=!0,f=!0),e.isShaderMaterial||e.isMeshPhongMaterial||e.isMeshToonMaterial||e.isMeshStandardMaterial||e.envMap){var w=y.map.cameraPosition;void 0!==w&&w.setValue(ze,Ne.setFromMatrixPosition(p.matrixWorld))}(e.isMeshPhongMaterial||e.isMeshToonMaterial||e.isMeshLambertMaterial||e.isMeshBasicMaterial||e.isMeshStandardMaterial||e.isShaderMaterial)&&y.setValue(ze,"isOrthographic",!0===p.isOrthographicCamera),(e.isMeshPhongMaterial||e.isMeshToonMaterial||e.isMeshLambertMaterial||e.isMeshBasicMaterial||e.isMeshStandardMaterial||e.isShaderMaterial||e.skinning)&&y.setValue(ze,"viewMatrix",p.matrixWorldInverse)}if(e.skinning){y.setOptional(ze,n,"bindMatrix"),y.setOptional(ze,n,"bindMatrixInverse");var P=n.skeleton;if(P){var M=P.bones;if(Ue.floatVertexTextures){if(void 0===P.boneTexture){var S=_m(4*M.length);S=eg.ceilPowerOfTwo(S),S=Em(S,4);var D=new Float32Array(4*(S*S));D.set(P.boneMatrices);var A=new q(D,S,S,1023,1015);P.boneMatrices=D,P.boneTexture=A,P.boneTextureSize=S}y.setValue(ze,"boneTexture",P.boneTexture,He),y.setValue(ze,"boneTextureSize",P.boneTextureSize)}else y.setOptional(ze,P,"boneMatrices")}}return(g||s.receiveShadow!==n.receiveShadow)&&(s.receiveShadow=n.receiveShadow,y.setValue(ze,"receiveShadow",n.receiveShadow)),g&&(y.setValue(ze,"toneMappingExposure",ye.toneMappingExposure),y.setValue(ze,"toneMappingWhitePoint",ye.toneMappingWhitePoint),s.needsLights&&(E=f,(b=_).ambientLightColor.needsUpdate=E,b.lightProbe.needsUpdate=E,b.directionalLights.needsUpdate=E,b.directionalLightShadows.needsUpdate=E,b.pointLights.needsUpdate=E,b.pointLightShadows.needsUpdate=E,b.spotLights.needsUpdate=E,b.spotLightShadows.needsUpdate=E,b.rectAreaLights.needsUpdate=E,b.hemisphereLights.needsUpdate=E),i&&e.fog&&function(a,t){a.fogColor.value.copy(t.color),t.isFog?(a.fogNear.value=t.near,a.fogFar.value=t.far):t.isFogExp2&&(a.fogDensity.value=t.density)}(_,i),e.isMeshBasicMaterial?me(_,e):e.isMeshLambertMaterial?(me(_,e),function(a,t){t.emissiveMap&&(a.emissiveMap.value=t.emissiveMap)}(_,e)):e.isMeshToonMaterial?(me(_,e),function(a,t){a.specular.value.copy(t.specular),a.shininess.value=Em(t.shininess,1e-4),t.gradientMap&&(a.gradientMap.value=t.gradientMap),t.emissiveMap&&(a.emissiveMap.value=t.emissiveMap),t.bumpMap&&(a.bumpMap.value=t.bumpMap,a.bumpScale.value=t.bumpScale,1===t.side&&(a.bumpScale.value*=-1)),t.normalMap&&(a.normalMap.value=t.normalMap,a.normalScale.value.copy(t.normalScale),1===t.side&&a.normalScale.value.negate()),t.displacementMap&&(a.displacementMap.value=t.displacementMap,a.displacementScale.value=t.displacementScale,a.displacementBias.value=t.displacementBias)}(_,e)):e.isMeshPhongMaterial?(me(_,e),function(a,t){a.specular.value.copy(t.specular),a.shininess.value=Em(t.shininess,1e-4),t.emissiveMap&&(a.emissiveMap.value=t.emissiveMap),t.bumpMap&&(a.bumpMap.value=t.bumpMap,a.bumpScale.value=t.bumpScale,1===t.side&&(a.bumpScale.value*=-1)),t.normalMap&&(a.normalMap.value=t.normalMap,a.normalScale.value.copy(t.normalScale),1===t.side&&a.normalScale.value.negate()),t.displacementMap&&(a.displacementMap.value=t.displacementMap,a.displacementScale.value=t.displacementScale,a.displacementBias.value=t.displacementBias)}(_,e)):e.isMeshStandardMaterial?(me(_,e,r),e.isMeshPhysicalMaterial?function(a,t,e){ue(a,t,e),a.reflectivity.value=t.reflectivity,a.clearcoat.value=t.clearcoat,a.clearcoatRoughness.value=t.clearcoatRoughness,t.sheen&&a.sheen.value.copy(t.sheen),t.clearcoatMap&&(a.clearcoatMap.value=t.clearcoatMap),t.clearcoatRoughnessMap&&(a.clearcoatRoughnessMap.value=t.clearcoatRoughnessMap),t.clearcoatNormalMap&&(a.clearcoatNormalScale.value.copy(t.clearcoatNormalScale),a.clearcoatNormalMap.value=t.clearcoatNormalMap,1===t.side&&a.clearcoatNormalScale.value.negate()),a.transparency.value=t.transparency}(_,e,r):ue(_,e,r)):e.isMeshMatcapMaterial?(me(_,e),function(a,t){t.matcap&&(a.matcap.value=t.matcap),t.bumpMap&&(a.bumpMap.value=t.bumpMap,a.bumpScale.value=t.bumpScale,1===t.side&&(a.bumpScale.value*=-1)),t.normalMap&&(a.normalMap.value=t.normalMap,a.normalScale.value.copy(t.normalScale),1===t.side&&a.normalScale.value.negate()),t.displacementMap&&(a.displacementMap.value=t.displacementMap,a.displacementScale.value=t.displacementScale,a.displacementBias.value=t.displacementBias)}(_,e)):e.isMeshDepthMaterial?(me(_,e),function(a,t){t.displacementMap&&(a.displacementMap.value=t.displacementMap,a.displacementScale.value=t.displacementScale,a.displacementBias.value=t.displacementBias)}(_,e)):e.isMeshDistanceMaterial?(me(_,e),function(a,t){t.displacementMap&&(a.displacementMap.value=t.displacementMap,a.displacementScale.value=t.displacementScale,a.displacementBias.value=t.displacementBias),a.referencePosition.value.copy(t.referencePosition),a.nearDistance.value=t.nearDistance,a.farDistance.value=t.farDistance}(_,e)):e.isMeshNormalMaterial?(me(_,e),function(a,t){t.bumpMap&&(a.bumpMap.value=t.bumpMap,a.bumpScale.value=t.bumpScale,1===t.side&&(a.bumpScale.value*=-1)),t.normalMap&&(a.normalMap.value=t.normalMap,a.normalScale.value.copy(t.normalScale),1===t.side&&a.normalScale.value.negate()),t.displacementMap&&(a.displacementMap.value=t.displacementMap,a.displacementScale.value=t.displacementScale,a.displacementBias.value=t.displacementBias)}(_,e)):e.isLineBasicMaterial?(function(a,t){a.diffuse.value.copy(t.color),a.opacity.value=t.opacity}(_,e),e.isLineDashedMaterial&&function(a,t){a.dashSize.value=t.dashSize,a.totalSize.value=t.dashSize+t.gapSize,a.scale.value=t.scale}(_,e)):e.isPointsMaterial?function(a,t){a.diffuse.value.copy(t.color),a.opacity.value=t.opacity,a.size.value=t.size*Pe,a.scale.value=.5*we,t.map&&(a.map.value=t.map),t.alphaMap&&(a.alphaMap.value=t.alphaMap);var e;t.map?e=t.map:t.alphaMap&&(e=t.alphaMap),void 0!==e&&(!0===e.matrixAutoUpdate&&e.updateMatrix(),a.uvTransform.value.copy(e.matrix))}(_,e):e.isSpriteMaterial?function(a,t){a.diffuse.value.copy(t.color),a.opacity.value=t.opacity,a.rotation.value=t.rotation,t.map&&(a.map.value=t.map),t.alphaMap&&(a.alphaMap.value=t.alphaMap);var e;t.map?e=t.map:t.alphaMap&&(e=t.alphaMap),void 0!==e&&(!0===e.matrixAutoUpdate&&e.updateMatrix(),a.uvTransform.value.copy(e.matrix))}(_,e):e.isShadowMaterial&&(_.color.value.copy(e.color),_.opacity.value=e.opacity),void 0!==_.ltc_1&&(_.ltc_1.value=fa.LTC_1),void 0!==_.ltc_2&&(_.ltc_2.value=fa.LTC_2),al.upload(ze,s.uniformsList,_,He),e.isShaderMaterial&&(e.uniformsNeedUpdate=!1)),e.isShaderMaterial&&!0===e.uniformsNeedUpdate&&(al.upload(ze,s.uniformsList,_,He),e.uniformsNeedUpdate=!1),e.isSpriteMaterial&&y.setValue(ze,"center",n.center),y.setValue(ze,"modelViewMatrix",n.modelViewMatrix),y.setValue(ze,"normalMatrix",n.normalMatrix),y.setValue(ze,"modelMatrix",n.matrixWorld),h}function me(o,t,e){o.opacity.value=t.opacity,t.color&&o.diffuse.value.copy(t.color),t.emissive&&o.emissive.value.copy(t.emissive).multiplyScalar(t.emissiveIntensity),t.map&&(o.map.value=t.map),t.alphaMap&&(o.alphaMap.value=t.alphaMap),t.specularMap&&(o.specularMap.value=t.specularMap);var n=t.envMap||e,a,s;n&&(o.envMap.value=n,o.flipEnvMap.value=n.isCubeTexture?-1:1,o.reflectivity.value=t.reflectivity,o.refractionRatio.value=t.refractionRatio,o.maxMipLevel.value=Ge.get(n).__maxMipLevel),t.lightMap&&(o.lightMap.value=t.lightMap,o.lightMapIntensity.value=t.lightMapIntensity),t.aoMap&&(o.aoMap.value=t.aoMap,o.aoMapIntensity.value=t.aoMapIntensity),t.map?a=t.map:t.specularMap?a=t.specularMap:t.displacementMap?a=t.displacementMap:t.normalMap?a=t.normalMap:t.bumpMap?a=t.bumpMap:t.roughnessMap?a=t.roughnessMap:t.metalnessMap?a=t.metalnessMap:t.alphaMap?a=t.alphaMap:t.emissiveMap&&(a=t.emissiveMap),void 0!==a&&(a.isWebGLRenderTarget&&(a=a.texture),!0===a.matrixAutoUpdate&&a.updateMatrix(),o.uvTransform.value.copy(a.matrix)),t.aoMap?s=t.aoMap:t.lightMap&&(s=t.lightMap),void 0!==s&&(s.isWebGLRenderTarget&&(s=s.texture),!0===s.matrixAutoUpdate&&s.updateMatrix(),o.uv2Transform.value.copy(s.matrix))}function ue(a,t,e){a.roughness.value=t.roughness,a.metalness.value=t.metalness,t.roughnessMap&&(a.roughnessMap.value=t.roughnessMap),t.metalnessMap&&(a.metalnessMap.value=t.metalnessMap),t.emissiveMap&&(a.emissiveMap.value=t.emissiveMap),t.bumpMap&&(a.bumpMap.value=t.bumpMap,a.bumpScale.value=t.bumpScale,1===t.side&&(a.bumpScale.value*=-1)),t.normalMap&&(a.normalMap.value=t.normalMap,a.normalScale.value.copy(t.normalScale),1===t.side&&a.normalScale.value.negate()),t.displacementMap&&(a.displacementMap.value=t.displacementMap,a.displacementScale.value=t.displacementScale,a.displacementBias.value=t.displacementBias),(t.envMap||e)&&(a.envMapIntensity.value=t.envMapIntensity)}var ge=void 0===(ee=ee||{}).canvas?document.createElementNS("http://www.w3.org/1999/xhtml","canvas"):ee.canvas,e=void 0===ee.context?null:ee.context,n=void 0!==ee.alpha&&ee.alpha,i=void 0===ee.depth||ee.depth,r=void 0===ee.stencil||ee.stencil,a=void 0!==ee.antialias&&ee.antialias,s=void 0===ee.premultipliedAlpha||ee.premultipliedAlpha,o=void 0!==ee.preserveDrawingBuffer&&ee.preserveDrawingBuffer,l=void 0===ee.powerPreference?"default":ee.powerPreference,h=void 0!==ee.failIfMajorPerformanceCaveat&&ee.failIfMajorPerformanceCaveat,fe=null,he=null;this.domElement=ge,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.outputEncoding=3e3,this.physicallyCorrectLights=!1,this.toneMapping=0,this.toneMappingExposure=1,this.toneMappingWhitePoint=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var ye=this,u=!1,F=null,ve=0,_e=0,xe=null,be=null,Ee=-1,Te={geometry:null,program:null,wireframe:!1},z=null,Se=null,Me=new va,G=new va,H=null,Ae=ge.width,we=ge.height,Pe=1,Ce=null,De=null,Le=new va(0,0,Ae,we),J=new va(0,0,Ae,we),K=!1,Re=new Yt,Q=new fo,ke=!1,Fe=!1,Ie=new na,Ne=new At,ze,Oe,Ue,Be,Ve,Ge,He,We,Xe,je,Ye,qe,Ze,Je,Ke,Qe,$e,tt;try{var at={alpha:n,depth:i,stencil:r,antialias:a,premultipliedAlpha:s,preserveDrawingBuffer:o,powerPreference:l,failIfMajorPerformanceCaveat:h,xrCompatible:!0};if(ge.addEventListener("webglcontextlost",re,!1),ge.addEventListener("webglcontextrestored",ne,!1),null===(ze=e||ge.getContext("webgl",at)||ge.getContext("experimental-webgl",at)))throw null===ge.getContext("webgl")?new Error("Error creating WebGL context."):new Error("Error creating WebGL context with your selected attributes.");void 0===ze.getShaderPrecisionFormat&&(ze.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(e){throw console.error("THREE.WebGLRenderer: "+e.message),e}ae();var rt=new jl(ye,ze);this.xr=rt;var it=new zl(ye,je,Ue.maxTextureSize);this.shadowMap=it,this.getContext=function(){return ze},this.getContextAttributes=function(){return ze.getContextAttributes()},this.forceContextLoss=function(){var e=Oe.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){var e=Oe.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return Pe},this.setPixelRatio=function(e){void 0!==e&&(Pe=e,this.setSize(Ae,we,!1))},this.getSize=function(e){return void 0===e&&(console.warn("WebGLRenderer: .getsize() now requires a Vector2 as an argument"),e=new j),e.set(Ae,we)},this.setSize=function(e,t,a){rt.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(Ae=e,we=t,ge.width=Tm(e*Pe),ge.height=Tm(t*Pe),!1!==a&&(ge.style.width=e+"px",ge.style.height=t+"px"),this.setViewport(0,0,e,t))},this.getDrawingBufferSize=function(e){return void 0===e&&(console.warn("WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument"),e=new j),e.set(Ae*Pe,we*Pe).floor()},this.setDrawingBufferSize=function(e,t,a){Ae=e,we=t,Pe=a,ge.width=Tm(e*a),ge.height=Tm(t*a),this.setViewport(0,0,e,t)},this.getCurrentViewport=function(e){return void 0===e&&(console.warn("WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument"),e=new va),e.copy(Me)},this.getViewport=function(e){return e.copy(Le)},this.setViewport=function(a,t,e,r){a.isVector4?Le.set(a.x,a.y,a.z,a.w):Le.set(a,t,e,r),Be.viewport(Me.copy(Le).multiplyScalar(Pe).floor())},this.getScissor=function(e){return e.copy(J)},this.setScissor=function(a,t,e,r){a.isVector4?J.set(a.x,a.y,a.z,a.w):J.set(a,t,e,r),Be.scissor(G.copy(J).multiplyScalar(Pe).floor())},this.getScissorTest=function(){return K},this.setScissorTest=function(e){Be.setScissorTest(K=e)},this.setOpaqueSort=function(e){Ce=e},this.setTransparentSort=function(e){De=e},this.getClearColor=function(){return Je.getClearColor()},this.setClearColor=function(){Je.setClearColor.apply(Je,arguments)},this.getClearAlpha=function(){return Je.getClearAlpha()},this.setClearAlpha=function(){Je.setClearAlpha.apply(Je,arguments)},this.clear=function(a,t,e){var r=0;(void 0===a||a)&&(r|=ze.COLOR_BUFFER_BIT),(void 0===t||t)&&(r|=ze.DEPTH_BUFFER_BIT),(void 0===e||e)&&(r|=ze.STENCIL_BUFFER_BIT),ze.clear(r)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){ge.removeEventListener("webglcontextlost",re,!1),ge.removeEventListener("webglcontextrestored",ne,!1),qe.dispose(),Ze.dispose(),Ge.dispose(),je.dispose(),rt.dispose(),lt.stop()},this.renderBufferImmediate=function(a,t){Be.initAttributes();var e=Ge.get(a);a.hasPositions&&!e.position&&(e.position=ze.createBuffer()),a.hasNormals&&!e.normal&&(e.normal=ze.createBuffer()),a.hasUvs&&!e.uv&&(e.uv=ze.createBuffer()),a.hasColors&&!e.color&&(e.color=ze.createBuffer());var r=t.getAttributes();a.hasPositions&&(ze.bindBuffer(ze.ARRAY_BUFFER,e.position),ze.bufferData(ze.ARRAY_BUFFER,a.positionArray,ze.DYNAMIC_DRAW),Be.enableAttribute(r.position),ze.vertexAttribPointer(r.position,3,ze.FLOAT,!1,0,0)),a.hasNormals&&(ze.bindBuffer(ze.ARRAY_BUFFER,e.normal),ze.bufferData(ze.ARRAY_BUFFER,a.normalArray,ze.DYNAMIC_DRAW),Be.enableAttribute(r.normal),ze.vertexAttribPointer(r.normal,3,ze.FLOAT,!1,0,0)),a.hasUvs&&(ze.bindBuffer(ze.ARRAY_BUFFER,e.uv),ze.bufferData(ze.ARRAY_BUFFER,a.uvArray,ze.DYNAMIC_DRAW),Be.enableAttribute(r.uv),ze.vertexAttribPointer(r.uv,2,ze.FLOAT,!1,0,0)),a.hasColors&&(ze.bindBuffer(ze.ARRAY_BUFFER,e.color),ze.bufferData(ze.ARRAY_BUFFER,a.colorArray,ze.DYNAMIC_DRAW),Be.enableAttribute(r.color),ze.vertexAttribPointer(r.color,3,ze.FLOAT,!1,0,0)),Be.disableUnusedAttributes(),ze.drawArrays(ze.TRIANGLES,0,a.count),a.count=0};var ot=new Na;this.renderBufferDirect=function(d,t,m,n,i,r){null===t&&(t=ot);var a=i.isMesh&&0>i.matrixWorld.determinant(),s=ce(d,t,n,i);Be.setMaterial(n,a);var o=!1;Te.geometry===m.id&&Te.program===s.id&&Te.wireframe===(!0===n.wireframe)||(Te.geometry=m.id,Te.program=s.id,Te.wireframe=!0===n.wireframe,o=!0),(n.morphTargets||n.morphNormals)&&(Ke.update(i,m,n,s),o=!0),!0===i.isInstancedMesh&&(o=!0);var g=m.index,f=m.attributes.position;if(null===g){if(void 0===f||0===f.count)return;}else if(0===g.count)return;var u=1,x;!0===n.wireframe&&(g=Xe.getWireframeAttribute(m),u=2);var b=Qe;null!==g&&(x=We.get(g),(b=$e).setIndex(x)),o&&(!function(d,t,e,n){if(!(!1===Ue.isWebGL2&&(d.isInstancedMesh||t.isInstancedBufferGeometry)&&null===Oe.get("ANGLE_instanced_arrays"))){Be.initAttributes();var i=t.attributes,r=n.getAttributes(),a=e.defaultAttributeValues;for(var s in r){var o=r[s];if(0<=o){var l=i[s];if(void 0!==l){var m=l.normalized,u=l.itemSize;if(void 0===(x=We.get(l)))continue;var c=x.buffer,g=x.type,f=x.bytesPerElement;if(l.isInterleavedBufferAttribute){var h=l.data,y=h.stride,_=l.offset;h&&h.isInstancedInterleavedBuffer?(Be.enableAttributeAndDivisor(o,h.meshPerAttribute),void 0===t.maxInstancedCount&&(t.maxInstancedCount=h.meshPerAttribute*h.count)):Be.enableAttribute(o),ze.bindBuffer(ze.ARRAY_BUFFER,c),Be.vertexAttribPointer(o,u,g,m,y*f,_*f)}else l.isInstancedBufferAttribute?(Be.enableAttributeAndDivisor(o,l.meshPerAttribute),void 0===t.maxInstancedCount&&(t.maxInstancedCount=l.meshPerAttribute*l.count)):Be.enableAttribute(o),ze.bindBuffer(ze.ARRAY_BUFFER,c),Be.vertexAttribPointer(o,u,g,m,0,0)}else if("instanceMatrix"===s){var x;if(void 0===(x=We.get(d.instanceMatrix)))continue;c=x.buffer,g=x.type,Be.enableAttributeAndDivisor(o+0,1),Be.enableAttributeAndDivisor(o+1,1),Be.enableAttributeAndDivisor(o+2,1),Be.enableAttributeAndDivisor(o+3,1),ze.bindBuffer(ze.ARRAY_BUFFER,c),ze.vertexAttribPointer(o+0,4,g,!1,64,0),ze.vertexAttribPointer(o+1,4,g,!1,64,16),ze.vertexAttribPointer(o+2,4,g,!1,64,32),ze.vertexAttribPointer(o+3,4,g,!1,64,48)}else if(void 0!==a){var b=a[s];if(void 0!==b)switch(b.length){case 2:ze.vertexAttrib2fv(o,b);break;case 3:ze.vertexAttrib3fv(o,b);break;case 4:ze.vertexAttrib4fv(o,b);break;default:ze.vertexAttrib1fv(o,b);}}}}Be.disableUnusedAttributes()}}(i,m,n,s),null!==g&&ze.bindBuffer(ze.ELEMENT_ARRAY_BUFFER,x.buffer));var T=null===g?f.count:g.count,y=m.drawRange.start*u,_=m.drawRange.count*u,E=null===r?0:r.start*u,A=null===r?1/0:r.count*u,w=Em(y,E),M=bm(T,y+_,E+A)-1,S=Em(0,M-w+1);if(0!==S){if(i.isMesh)!0===n.wireframe?(Be.setLineWidth(n.wireframeLinewidth*te()),b.setMode(ze.LINES)):b.setMode(ze.TRIANGLES);else if(i.isLine){var P=n.linewidth;void 0===P&&(P=1),Be.setLineWidth(P*te()),i.isLineSegments?b.setMode(ze.LINES):i.isLineLoop?b.setMode(ze.LINE_LOOP):b.setMode(ze.LINE_STRIP)}else i.isPoints?b.setMode(ze.POINTS):i.isSprite&&b.setMode(ze.TRIANGLES);i.isInstancedMesh?b.renderInstances(m,w,S,i.count):m.isInstancedBufferGeometry?b.renderInstances(m,w,S,m.maxInstancedCount):b.render(w,S)}},this.compile=function(a,t){(he=Ze.get(a,t)).init(),a.traverse(function(e){e.isLight&&(he.pushLight(e),e.castShadow&&he.pushShadow(e))}),he.setupLights(t);var r={};a.traverse(function(t){if(t.material)if(Array.isArray(t.material))for(var e=0;e<t.material.length;e++)!1==t.material[e].uuid in r&&(pe(t.material[e],a,t),r[t.material[e].uuid]=!0);else!1==t.material.uuid in r&&(pe(t.material,a,t),r[t.material.uuid]=!0)})};var st=null,lt=new Ba;lt.setAnimationLoop(function(e){rt.isPresenting||st&&st(e)}),"undefined"!=typeof window&&lt.setContext(window),this.setAnimationLoop=function(e){st=e,rt.setAnimationLoop(e),lt.start()},this.render=function(l,t){var d,p;if(!(void 0!==arguments[2]&&(console.warn("THREE.WebGLRenderer.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead."),d=arguments[2]),void 0!==arguments[3]&&(console.warn("THREE.WebGLRenderer.render(): the forceClear argument has been removed. Use .clear() instead."),p=arguments[3]),t&&t.isCamera))console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");else if(!u){Te.geometry=null,Te.program=null,Te.wireframe=!1,Ee=-1,z=null,!0===l.autoUpdate&&l.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld(),rt.enabled&&rt.isPresenting&&(t=rt.getCamera(t)),l.onBeforeRender(ye,l,t,d||xe),(he=Ze.get(l,t)).init(),Ie.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),Re.setFromProjectionMatrix(Ie),Fe=this.localClippingEnabled,ke=Q.init(this.clippingPlanes,Fe,t),(fe=qe.get(l,t)).init(),se(l,t,0,ye.sortObjects),fe.finish(),!0===ye.sortObjects&&fe.sort(Ce,De),ke&&Q.beginShadows();var c=he.state.shadowsArray;it.render(c,l,t),he.setupLights(t),ke&&Q.endShadows(),this.info.autoReset&&this.info.reset(),void 0!==d&&this.setRenderTarget(d),Je.render(fe,l,t,p);var r=fe.opaque,a=fe.transparent;if(l.overrideMaterial){var s=l.overrideMaterial;r.length&&le(r,l,t,s),a.length&&le(a,l,t,s)}else r.length&&le(r,l,t),a.length&&le(a,l,t);l.onAfterRender(ye,l,t),null!==xe&&(He.updateRenderTargetMipmap(xe),He.updateMultisampleRenderTarget(xe)),Be.buffers.depth.setTest(!0),Be.buffers.depth.setMask(!0),Be.buffers.color.setMask(!0),Be.setPolygonOffset(!1),fe=null,he=null}},this.setFramebuffer=function(e){F!==e&&null===xe&&ze.bindFramebuffer(ze.FRAMEBUFFER,e),F=e},this.getActiveCubeFace=function(){return ve},this.getActiveMipmapLevel=function(){return _e},this.getRenderTarget=function(){return xe},this.setRenderTarget=function(o,t,e){xe=o,ve=t,_e=e,o&&void 0===Ge.get(o).__webglFramebuffer&&He.setupRenderTarget(o);var n=F,l=!1;if(o){var d=Ge.get(o).__webglFramebuffer;o.isWebGLCubeRenderTarget?(n=d[t||0],l=!0):n=o.isWebGLMultisampleRenderTarget?Ge.get(o).__webglMultisampledFramebuffer:d,Me.copy(o.viewport),G.copy(o.scissor),H=o.scissorTest}else Me.copy(Le).multiplyScalar(Pe).floor(),G.copy(J).multiplyScalar(Pe).floor(),H=K;if(be!==n&&(ze.bindFramebuffer(ze.FRAMEBUFFER,n),be=n),Be.viewport(Me),Be.scissor(G),Be.setScissorTest(H),l){var a=Ge.get(o.texture);ze.framebufferTexture2D(ze.FRAMEBUFFER,ze.COLOR_ATTACHMENT0,ze.TEXTURE_CUBE_MAP_POSITIVE_X+(t||0),a.__webglTexture,e||0)}},this.readRenderTargetPixels=function(d,t,e,n,i,r,a){if(d&&d.isWebGLRenderTarget){var s=Ge.get(d).__webglFramebuffer;if(d.isWebGLCubeRenderTarget&&void 0!==a&&(s=s[a]),s){var p=!1;s!==be&&(ze.bindFramebuffer(ze.FRAMEBUFFER,s),p=!0);try{var m=d.texture,g=m.format,u=m.type;if(1023!==g&&tt.convert(g)!==ze.getParameter(ze.IMPLEMENTATION_COLOR_READ_FORMAT))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!(1009===u||tt.convert(u)===ze.getParameter(ze.IMPLEMENTATION_COLOR_READ_TYPE)||1015===u&&(Ue.isWebGL2||Oe.get("OES_texture_float")||Oe.get("WEBGL_color_buffer_float"))||1016===u&&(Ue.isWebGL2?Oe.get("EXT_color_buffer_float"):Oe.get("EXT_color_buffer_half_float"))))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");ze.checkFramebufferStatus(ze.FRAMEBUFFER)===ze.FRAMEBUFFER_COMPLETE?0<=t&&t<=d.width-n&&0<=e&&e<=d.height-i&&ze.readPixels(t,e,n,i,tt.convert(g),tt.convert(u),r):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{p&&ze.bindFramebuffer(ze.FRAMEBUFFER,be)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")},this.copyFramebufferToTexture=function(o,t,e){void 0===e&&(e=0);var l=xm(2,-e),i=Tm(t.image.width*l),r=Tm(t.image.height*l),a=tt.convert(t.format);He.setTexture2D(t,0),ze.copyTexImage2D(ze.TEXTURE_2D,e,a,o.x,o.y,i,r,0),Be.unbindTexture()},this.copyTextureToTexture=function(l,t,e,n){void 0===n&&(n=0);var d=t.image.width,r=t.image.height,a=tt.convert(e.format),s=tt.convert(e.type);He.setTexture2D(e,0),t.isDataTexture?ze.texSubImage2D(ze.TEXTURE_2D,n,l.x,l.y,d,r,a,s,t.image.data):t.isCompressedTexture?ze.compressedTexSubImage2D(ze.TEXTURE_2D,n,l.x,l.y,t.mipmaps[0].width,t.mipmaps[0].height,a,t.mipmaps[0].data):ze.texSubImage2D(ze.TEXTURE_2D,n,l.x,l.y,a,s,t.image),0===n&&e.generateMipmaps&&ze.generateMipmap(ze.TEXTURE_2D),Be.unbindTexture()},this.initTexture=function(e){He.setTexture2D(e,0),Be.unbindTexture()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}function Zl(o,t,e,n,i,r){Vl.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=void 0===o?-1:o,this.right=void 0===t?1:t,this.top=void 0===e?1:e,this.bottom=void 0===n?-1:n,this.near=void 0===i?.1:i,this.far=void 0===r?2e3:r,this.updateProjectionMatrix()}function Jl(e){return function(e){if(Array.isArray(e))return Kl(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(a,t){if(a){if("string"==typeof a)return Kl(a,t);var e=Object.prototype.toString.call(a).slice(8,-1);return"Object"===e&&a.constructor&&(e=a.constructor.name),"Map"===e||"Set"===e?Array.from(a):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?Kl(a,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Kl(a,t){(null==t||t>a.length)&&(t=a.length);for(var r=0,o=Array(t);r<t;r++)o[r]=a[r];return o}function Ql(a,t){for(var e=0,r;e<t.length;e++)r=t[e],r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(a,r.key,r)}function $l(a,t,e){return t in a?Object.defineProperty(a,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):a[t]=e,a}function ed(e){return(ed="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function td(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}function ad(a,t){for(var e=0,r;e<t.length;e++)r=t[e],r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(a,r.key,r)}function rd(a,t){return(rd=Object.setPrototypeOf||function(a,t){return a.__proto__=t,a})(a,t)}function nd(a){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e=od(a),i;if(t){var o=od(this).constructor;i=Reflect.construct(e,arguments,o)}else i=e.apply(this,arguments);return id(this,i)}}function id(a,t){return t&&("object"===ed(t)||"function"==typeof t)?t:function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(a)}function od(e){return(od=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function sd(a,t,e){return t in a?Object.defineProperty(a,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):a[t]=e,a}function ld(e){return(ld="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function dd(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}function pd(a,t){for(var e=0,r;e<t.length;e++)r=t[e],r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(a,r.key,r)}function cd(a,t,e){return(cd="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(a,t,e){var n=function(a,r){for(;!Object.prototype.hasOwnProperty.call(a,r)&&null!==(a=hd(a)););return a}(a,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(e):i.value}})(a,t,e||a)}function md(a,t){return(md=Object.setPrototypeOf||function(a,t){return a.__proto__=t,a})(a,t)}function ud(a){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e=hd(a),i;if(t){var o=hd(this).constructor;i=Reflect.construct(e,arguments,o)}else i=e.apply(this,arguments);return gd(this,i)}}function gd(a,t){return t&&("object"===ld(t)||"function"==typeof t)?t:fd(a)}function fd(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function hd(e){return(hd=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function yd(a,t,e){return t in a?Object.defineProperty(a,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):a[t]=e,a}function vd(e){return(vd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _d(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}function xd(a,t){for(var e=0,r;e<t.length;e++)r=t[e],r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(a,r.key,r)}function bd(a,t,e){return(bd="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(a,t,e){var n=function(a,r){for(;!Object.prototype.hasOwnProperty.call(a,r)&&null!==(a=Md(a)););return a}(a,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(e):i.value}})(a,t,e||a)}function Ed(a,t){return(Ed=Object.setPrototypeOf||function(a,t){return a.__proto__=t,a})(a,t)}function Td(a){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e=Md(a),i;if(t){var o=Md(this).constructor;i=Reflect.construct(e,arguments,o)}else i=e.apply(this,arguments);return Sd(this,i)}}function Sd(a,t){return t&&("object"===vd(t)||"function"==typeof t)?t:function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(a)}function Md(e){return(Md=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ad(e){return function(e){if(Array.isArray(e))return wd(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(a,t){if(a){if("string"==typeof a)return wd(a,t);var e=Object.prototype.toString.call(a).slice(8,-1);return"Object"===e&&a.constructor&&(e=a.constructor.name),"Map"===e||"Set"===e?Array.from(a):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?wd(a,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wd(a,t){(null==t||t>a.length)&&(t=a.length);for(var r=0,o=Array(t);r<t;r++)o[r]=a[r];return o}function Pd(a,t){for(var e=0,r;e<t.length;e++)r=t[e],r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(a,r.key,r)}function Cd(a,t){for(var e=0,r;e<t.length;e++)r=t[e],r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(a,r.key,r)}function Dd(a,t,e){return t in a?Object.defineProperty(a,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):a[t]=e,a}function Ld(a,t){for(var e=0,r;e<t.length;e++)r=t[e],r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(a,r.key,r)}function Rd(a,t){for(var e=0,r;e<t.length;e++)r=t[e],r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(a,r.key,r)}function kd(a,t,e){return t in a?Object.defineProperty(a,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):a[t]=e,a}function Fd(a,t){for(var e=0,r;e<t.length;e++)r=t[e],r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(a,r.key,r)}function Id(a,t,e){return t in a?Object.defineProperty(a,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):a[t]=e,a}function Nd(a,t){for(var e=0,r;e<t.length;e++)r=t[e],r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(a,r.key,r)}function zd(a,t,e){return t in a?Object.defineProperty(a,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):a[t]=e,a}function Od(e){return function(e){if(Array.isArray(e))return Ud(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(a,t){if(a){if("string"==typeof a)return Ud(a,t);var e=Object.prototype.toString.call(a).slice(8,-1);return"Object"===e&&a.constructor&&(e=a.constructor.name),"Map"===e||"Set"===e?Array.from(a):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?Ud(a,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ud(a,t){(null==t||t>a.length)&&(t=a.length);for(var r=0,o=Array(t);r<t;r++)o[r]=a[r];return o}function Bd(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}function Vd(a,t){for(var e=0,r;e<t.length;e++)r=t[e],r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(a,r.key,r)}function Gd(a,t,e){return t in a?Object.defineProperty(a,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):a[t]=e,a}function Hd(a,t){for(var e=0,r;e<t.length;e++)r=t[e],r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(a,r.key,r)}function Wd(e){return function(e){if(Array.isArray(e))return Xd(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(a,t){if(a){if("string"==typeof a)return Xd(a,t);var e=Object.prototype.toString.call(a).slice(8,-1);return"Object"===e&&a.constructor&&(e=a.constructor.name),"Map"===e||"Set"===e?Array.from(a):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?Xd(a,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Xd(a,t){(null==t||t>a.length)&&(t=a.length);for(var r=0,o=Array(t);r<t;r++)o[r]=a[r];return o}function jd(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}function Yd(a,t){for(var e=0,r;e<t.length;e++)r=t[e],r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(a,r.key,r)}function qd(a,t,e){return t in a?Object.defineProperty(a,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):a[t]=e,a}function Zd(e){return function(e){if(Array.isArray(e))return Jd(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(a,t){if(a){if("string"==typeof a)return Jd(a,t);var e=Object.prototype.toString.call(a).slice(8,-1);return"Object"===e&&a.constructor&&(e=a.constructor.name),"Map"===e||"Set"===e?Array.from(a):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?Jd(a,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Jd(a,t){(null==t||t>a.length)&&(t=a.length);for(var r=0,o=Array(t);r<t;r++)o[r]=a[r];return o}function Kd(a,t){for(var e=0,r;e<t.length;e++)r=t[e],r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(a,r.key,r)}function Qd(e){return function(e){if(Array.isArray(e))return $d(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(a,t){if(a){if("string"==typeof a)return $d(a,t);var e=Object.prototype.toString.call(a).slice(8,-1);return"Object"===e&&a.constructor&&(e=a.constructor.name),"Map"===e||"Set"===e?Array.from(a):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?$d(a,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $d(a,t){(null==t||t>a.length)&&(t=a.length);for(var r=0,o=Array(t);r<t;r++)o[r]=a[r];return o}function nc(a,t){for(var e=0,r;e<t.length;e++)r=t[e],r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(a,r.key,r)}function ic(a,t,e){return t in a?Object.defineProperty(a,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):a[t]=e,a}function oc(a,t){var e=Object.keys(a);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(a);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(a,t).enumerable})),e.push.apply(e,r)}return e}function sc(a){for(var t=1,r;t<arguments.length;t++)r=null==arguments[t]?{}:arguments[t],t%2?oc(Object(r),!0).forEach(function(t){hc(a,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):oc(Object(r)).forEach(function(t){Object.defineProperty(a,t,Object.getOwnPropertyDescriptor(r,t))});return a}function lc(e){return function(e){if(Array.isArray(e))return mc(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(a,t){if(a){if("string"==typeof a)return mc(a,t);var e=Object.prototype.toString.call(a).slice(8,-1);return"Object"===e&&a.constructor&&(e=a.constructor.name),"Map"===e||"Set"===e?Array.from(a):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?mc(a,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mc(a,t){(null==t||t>a.length)&&(t=a.length);for(var r=0,o=Array(t);r<t;r++)o[r]=a[r];return o}function uc(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}function gc(a,t){for(var e=0,r;e<t.length;e++)r=t[e],r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(a,r.key,r)}function hc(a,t,e){return t in a?Object.defineProperty(a,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):a[t]=e,a}function yc(e){return function(e){if(Array.isArray(e))return vc(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(a,t){if(a){if("string"==typeof a)return vc(a,t);var e=Object.prototype.toString.call(a).slice(8,-1);return"Object"===e&&a.constructor&&(e=a.constructor.name),"Map"===e||"Set"===e?Array.from(a):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?vc(a,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vc(a,t){(null==t||t>a.length)&&(t=a.length);for(var r=0,o=Array(t);r<t;r++)o[r]=a[r];return o}function _c(a,t){for(var e=0,r;e<t.length;e++)r=t[e],r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(a,r.key,r)}function xc(a,t,e){return t in a?Object.defineProperty(a,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):a[t]=e,a}function bc(e){return function(e){if(Array.isArray(e))return np(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(a,t){if(a){if("string"==typeof a)return np(a,t);var e=Object.prototype.toString.call(a).slice(8,-1);return"Object"===e&&a.constructor&&(e=a.constructor.name),"Map"===e||"Set"===e?Array.from(a):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?np(a,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function np(a,t){(null==t||t>a.length)&&(t=a.length);for(var r=0,o=Array(t);r<t;r++)o[r]=a[r];return o}function ip(a,t){for(var e=0,r;e<t.length;e++)r=t[e],r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(a,r.key,r)}function rp(a,t,e){return t in a?Object.defineProperty(a,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):a[t]=e,a}function ap(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}function Mp(a,t){for(var e=0,r;e<t.length;e++)r=t[e],r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(a,r.key,r)}function Sp(a,t,e){return t in a?Object.defineProperty(a,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):a[t]=e,a}function Tp(e){return function(e){if(Array.isArray(e))return Pp(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(a,t){if(a){if("string"==typeof a)return Pp(a,t);var e=Object.prototype.toString.call(a).slice(8,-1);return"Object"===e&&a.constructor&&(e=a.constructor.name),"Map"===e||"Set"===e?Array.from(a):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?Pp(a,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pp(a,t){(null==t||t>a.length)&&(t=a.length);for(var r=0,o=Array(t);r<t;r++)o[r]=a[r];return o}function Fp(a,t){for(var e=0,r;e<t.length;e++)r=t[e],r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(a,r.key,r)}function Lp(a,t,e){return t in a?Object.defineProperty(a,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):a[t]=e,a}function Rp(e){return function(e){if(Array.isArray(e))return Op(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(a,t){if(a){if("string"==typeof a)return Op(a,t);var e=Object.prototype.toString.call(a).slice(8,-1);return"Object"===e&&a.constructor&&(e=a.constructor.name),"Map"===e||"Set"===e?Array.from(a):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?Op(a,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Op(a,t){(null==t||t>a.length)&&(t=a.length);for(var r=0,o=Array(t);r<t;r++)o[r]=a[r];return o}function Np(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}function Bp(a,t){for(var e=0,r;e<t.length;e++)r=t[e],r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(a,r.key,r)}function zp(e){return function(e){if(Array.isArray(e))return Gp(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(a,t){if(a){if("string"==typeof a)return Gp(a,t);var e=Object.prototype.toString.call(a).slice(8,-1);return"Object"===e&&a.constructor&&(e=a.constructor.name),"Map"===e||"Set"===e?Array.from(a):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?Gp(a,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Gp(a,t){(null==t||t>a.length)&&(t=a.length);for(var r=0,o=Array(t);r<t;r++)o[r]=a[r];return o}function Hp(a,t){for(var e=0,r;e<t.length;e++)r=t[e],r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(a,r.key,r)}function jp(a,t,e){return t in a?Object.defineProperty(a,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):a[t]=e,a}function Wp(a,t){for(var e=0,r;e<t.length;e++)r=t[e],r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(a,r.key,r)}function Yp(e){return(Yp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ec(e){return function(e){if(Array.isArray(e))return Kp(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(a,t){if(a){if("string"==typeof a)return Kp(a,t);var e=Object.prototype.toString.call(a).slice(8,-1);return"Object"===e&&a.constructor&&(e=a.constructor.name),"Map"===e||"Set"===e?Array.from(a):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?Kp(a,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Kp(a,t){(null==t||t>a.length)&&(t=a.length);for(var r=0,o=Array(t);r<t;r++)o[r]=a[r];return o}function $p(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}function Qp(a,t){for(var e=0,r;e<t.length;e++)r=t[e],r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(a,r.key,r)}function Sc(a,t){return(Sc=Object.setPrototypeOf||function(a,t){return a.__proto__=t,a})(a,t)}function Mc(a){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e=Pc(a),i;if(t){var o=Pc(this).constructor;i=Reflect.construct(e,arguments,o)}else i=e.apply(this,arguments);return wc(this,i)}}function wc(a,t){return t&&("object"===Yp(t)||"function"==typeof t)?t:function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(a)}function Pc(e){return(Pc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Cc(e){return(Cc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Dc(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}function kc(a,t){for(var e=0,r;e<t.length;e++)r=t[e],r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(a,r.key,r)}function Fc(a,t,e){return(Fc="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(a,t,e){var n=function(a,r){for(;!Object.prototype.hasOwnProperty.call(a,r)&&null!==(a=Gc(a)););return a}(a,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(e):i.value}})(a,t,e||a)}function Ic(a,t){return(Ic=Object.setPrototypeOf||function(a,t){return a.__proto__=t,a})(a,t)}function Nc(a){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e=Gc(a),i;if(t){var o=Gc(this).constructor;i=Reflect.construct(e,arguments,o)}else i=e.apply(this,arguments);return Oc(this,i)}}function Oc(a,t){return t&&("object"===Cc(t)||"function"==typeof t)?t:Vc(a)}function Vc(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Gc(e){return(Gc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Hc(a,t,e){return t in a?Object.defineProperty(a,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):a[t]=e,a}function Wc(e){return(Wc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Xc(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}function jc(a,t){for(var e=0,r;e<t.length;e++)r=t[e],r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(a,r.key,r)}function qc(a,t){return(qc=Object.setPrototypeOf||function(a,t){return a.__proto__=t,a})(a,t)}function Zc(a){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e=Kc(a),i;if(t){var o=Kc(this).constructor;i=Reflect.construct(e,arguments,o)}else i=e.apply(this,arguments);return Jc(this,i)}}function Jc(a,t){return t&&("object"===Wc(t)||"function"==typeof t)?t:function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(a)}function Kc(e){return(Kc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $c(e){return($c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function em(a,t){for(var e=0,r;e<t.length;e++)r=t[e],r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(a,r.key,r)}function tm(a,t,e){return(tm="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(a,t,e){var n=function(a,r){for(;!Object.prototype.hasOwnProperty.call(a,r)&&null!==(a=im(a)););return a}(a,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(e):i.value}})(a,t,e||a)}function am(a,t){return(am=Object.setPrototypeOf||function(a,t){return a.__proto__=t,a})(a,t)}function rm(a){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e=im(a),i;if(t){var o=im(this).constructor;i=Reflect.construct(e,arguments,o)}else i=e.apply(this,arguments);return nm(this,i)}}function nm(a,t){return t&&("object"===$c(t)||"function"==typeof t)?t:function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(a)}function im(e){return(im=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}e.r(t);var Mm={};e.r(Mm),e.d(Mm,"HeroSlide",function(){return xg}),e.d(Mm,"PlaneVideo",function(){return iu}),e(5),e(6),n.prototype={on:function(a,t,e){var r=this.e||(this.e={});return(r[a]||(r[a]=[])).push({fn:t,ctx:e}),this},once:function(a,t,e){function n(){r.off(a,n),t.apply(e,arguments)}var r=this;return n._=t,this.on(a,n,e)},emit:function(a){for(var t=[].slice.call(arguments,1),e=((this.e||(this.e={}))[a]||[]).slice(),n=0,o=e.length;n<o;n++)e[n].fn.apply(e[n].ctx,t);return this},off:function(o,t){var e=this.e||(this.e={}),n=e[o],i=[];if(n&&t)for(var r=0,l=n.length;r<l;r++)n[r].fn!==t&&n[r].fn._!==t&&i.push(n[r]);return i.length?e[o]=i:delete e[o],this}};var i=n;i.TinyEmitter=n;var a=function(e){this.wrap=document.querySelector("[data-router-wrapper]"),this.properties=e,this.Transition=e.transition?new e.transition.class(this.wrap,e.transition.name):null};a.prototype.setup=function(){this.onEnter&&this.onEnter(),this.onEnterCompleted&&this.onEnterCompleted()},a.prototype.add=function(){this.wrap.insertAdjacentHTML("beforeend",this.properties.view.outerHTML)},a.prototype.update=function(){document.title=this.properties.page.title},a.prototype.show=function(a){var t=this;return new Promise(function(e){try{function r(){t.onEnterCompleted&&t.onEnterCompleted(),e()}return t.update(),t.onEnter&&t.onEnter(),Promise.resolve(t.Transition?Promise.resolve(t.Transition.show(a)).then(r):r())}catch(e){return Promise.reject(e)}})},a.prototype.hide=function(a){var t=this;return new Promise(function(e){try{function r(){t.onLeaveCompleted&&t.onLeaveCompleted(),e()}return t.onLeave&&t.onLeave(),Promise.resolve(t.Transition?Promise.resolve(t.Transition.hide(a)).then(r):r())}catch(e){return Promise.reject(e)}})};var s=new window.DOMParser,o=function(a,t){this.renderers=a,this.transitions=t};o.prototype.getOrigin=function(a){var t=a.match(/(https?:\/\/[\w\-.]+)/);return t?t[1].replace(/https?:\/\//,""):null},o.prototype.getPathname=function(a){var t=a.match(/https?:\/\/.*?(\/[\w_\-./]+)/);return t?t[1]:"/"},o.prototype.getAnchor=function(a){var t=a.match(/(#.*)$/);return t?t[1]:null},o.prototype.getParams=function(o){var t=o.match(/\?([\w_\-.=&]+)/);if(!t)return null;for(var e=t[1].split("&"),n={},i=0,s;i<e.length;i++)s=e[i].split("="),n[s[0]]=s[1];return n},o.prototype.getDOM=function(e){return"string"==typeof e?s.parseFromString(e,"text/html"):e},o.prototype.getView=function(e){return e.querySelector("[data-router-view]")},o.prototype.getSlug=function(e){return e.getAttribute("data-router-view")},o.prototype.getRenderer=function(r){if(!this.renderers)return Promise.resolve(a);if(r in this.renderers){var t=this.renderers[r];return"function"!=typeof t||a.isPrototypeOf(t)?"function"==typeof t.then?Promise.resolve(t).then(function(e){return e.default}):Promise.resolve(t):Promise.resolve(t()).then(function(e){return e.default})}return Promise.resolve(a)},o.prototype.getTransition=function(e){return this.transitions?e in this.transitions?{class:this.transitions[e],name:e}:"default"in this.transitions?{class:this.transitions.default,name:"default"}:null:null},o.prototype.getProperties=function(a){var t=this.getDOM(a),e=this.getView(t),r=this.getSlug(e);return{page:t,view:e,slug:r,renderer:this.getRenderer(r,this.renderers),transition:this.getTransition(r,this.transitions)}},o.prototype.getLocation=function(e){return{href:e,anchor:this.getAnchor(e),origin:this.getOrigin(e),params:this.getParams(e),pathname:this.getPathname(e)}};var l=function(a){function t(t){var s=this;void 0===t&&(t={});var n=t.renderers,i=t.transitions;a.call(this),this.Helpers=new o(n,i),this.Transitions=i,this.Contextual=!1,this.location=this.Helpers.getLocation(window.location.href),this.properties=this.Helpers.getProperties(document.cloneNode(!0)),this.popping=!1,this.running=!1,this.trigger=null,this.cache=new Map,this.cache.set(this.location.href,this.properties),this.properties.renderer.then(function(e){s.From=new e(s.properties),s.From.setup()}),this._navigate=this.navigate.bind(this),window.addEventListener("popstate",this.popState.bind(this)),this.links=document.querySelectorAll("a:not([target]):not([data-router-disabled])"),this.attach(this.links)}return a&&(t.__proto__=a),(t.prototype=Object.create(a&&a.prototype)).constructor=t,t.prototype.attach=function(a){for(var t=0,r=a;t<r.length;t+=1)r[t].addEventListener("click",this._navigate)},t.prototype.detach=function(a){for(var t=0,r=a;t<r.length;t+=1)r[t].removeEventListener("click",this._navigate)},t.prototype.navigate=function(a){if(!a.metaKey&&!a.ctrlKey){a.preventDefault();var t=!!a.currentTarget.hasAttribute("data-transition")&&a.currentTarget.dataset.transition;this.redirect(a.currentTarget.href,t,a.currentTarget)}},t.prototype.redirect=function(a,t,r){if(void 0===t&&(t=!1),void 0===r&&(r="script"),this.trigger=r,!this.running&&a!==this.location.href){var o=this.Helpers.getLocation(a);this.Contextual=!1,t&&(this.Contextual=this.Transitions.contextual[t].prototype,this.Contextual.name=t),o.origin!==this.location.origin||o.anchor&&o.pathname===this.location.pathname?window.location.href=a:(this.location=o,this.beforeFetch())}},t.prototype.popState=function(){this.trigger="popstate",this.Contextual=!1;var e=this.Helpers.getLocation(window.location.href);this.location.pathname===e.pathname&&(this.location.anchor||e.anchor)?this.location=e:(this.popping=!0,this.location=e,this.beforeFetch())},t.prototype.pushState=function(){this.popping||window.history.pushState(this.location,"",this.location.href)},t.prototype.fetch=function(){try{var a=this;return Promise.resolve(fetch(a.location.href,{mode:"same-origin",method:"GET",headers:{"X-Requested-With":"Highway"},credentials:"same-origin"})).then(function(t){return 200<=t.status&&300>t.status?t.text():void(window.location.href=a.location.href)})}catch(e){return Promise.reject(e)}},t.prototype.beforeFetch=function(){try{function n(){a.afterFetch()}var a=this;a.pushState(),a.running=!0,a.emit("NAVIGATE_OUT",{from:{page:a.From.properties.page,view:a.From.properties.view},trigger:a.trigger,location:a.location});var t={trigger:a.trigger,contextual:a.Contextual},r=a.cache.has(a.location.href)?Promise.resolve(a.From.hide(t)).then(function(){a.properties=a.cache.get(a.location.href)}):Promise.resolve(Promise.all([a.fetch(),a.From.hide(t)])).then(function(t){a.properties=a.Helpers.getProperties(t[0]),a.cache.set(a.location.href,a.properties)});return Promise.resolve(r&&r.then?r.then(n):n())}catch(e){return Promise.reject(e)}},t.prototype.afterFetch=function(){try{var a=this;return Promise.resolve(a.properties.renderer).then(function(t){return a.To=new t(a.properties),a.To.add(),a.emit("NAVIGATE_IN",{to:{page:a.To.properties.page,view:a.To.wrap.lastElementChild},trigger:a.trigger,location:a.location}),Promise.resolve(a.To.show({trigger:a.trigger,contextual:a.Contextual})).then(function(){a.popping=!1,a.running=!1,a.detach(a.links),a.links=document.querySelectorAll("a:not([target]):not([data-router-disabled])"),a.attach(a.links),a.emit("NAVIGATE_END",{to:{page:a.To.properties.page,view:a.To.wrap.lastElementChild},from:{page:a.From.properties.page,view:a.From.properties.view},trigger:a.trigger,location:a.location}),a.From=a.To,a.trigger=null})})}catch(e){return Promise.reject(e)}},t}(i),h=function(a,t){this.wrap=a,this.name=t};h.prototype.show=function(o){var s=this,e=o.trigger,n=o.contextual,i=this.wrap.lastElementChild,r=this.wrap.firstElementChild;return new Promise(function(a){n?(i.setAttribute("data-transition-in",n.name),i.removeAttribute("data-transition-out",n.name),n.in&&n.in({to:i,from:r,trigger:e,done:a})):(i.setAttribute("data-transition-in",s.name),i.removeAttribute("data-transition-out",s.name),s.in&&s.in({to:i,from:r,trigger:e,done:a}))})},h.prototype.hide=function(a){var o=this,e=a.trigger,n=a.contextual,i=this.wrap.firstElementChild;return new Promise(function(a){n?(i.setAttribute("data-transition-out",n.name),i.removeAttribute("data-transition-in",n.name),n.out&&n.out({from:i,trigger:e,done:a})):(i.setAttribute("data-transition-out",o.name),i.removeAttribute("data-transition-in",o.name),o.out&&o.out({from:i,trigger:e,done:a}))})};var u={Core:l,Helpers:o,Renderer:a,Transition:h},c=e(1),p=e.n(c),f={dom:{doc:document.documentElement,body:document.body,scroll:document.querySelector("[data-router-wrapper]"),gl:document.querySelector(".js-gl"),lastClicked:null},bounds:{ww:window.innerWidth,wh:window.innerHeight,vh:0,scroll:0,hero:{w:0,h:0}},flags:function(a){for(var t=1,i;t<arguments.length;t++)i=null==arguments[t]?{}:arguments[t],t%2?r(Object(i),!0).forEach(function(t){d(a,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(i)):r(Object(i)).forEach(function(t){Object.defineProperty(a,t,Object.getOwnPropertyDescriptor(i,t))});return a}({locked:!0,resize:!1,dragging:!1,loaded:!1,small:window.matchMedia("(max-width: 639px)").matches,hover:window.matchMedia("(hover: hover)").matches,windows:-1!==["Win32","Win64","Windows","WinCE"].indexOf(window.navigator.platform)},p.a.getInfos()),addClasses:function(){p.a.addClasses(this.dom.body),this.flags.windows&&this.dom.body.classList.add("is-windows")}},g=function(a){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:document;return t.querySelector(a)},y=function(a){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:document;return t.querySelectorAll(a)},_=window.document.documentElement,E=_.matches||_.webkitMatchesSelector||_.mozMatchesSelector||_.oMatchesSelector||_.msMatchesSelector;x.prototype.matchesSelector=function(a,t){return E.call(a,t)},x.prototype.querySelectorAll=function(a,t){return t.querySelectorAll(a)},x.prototype.indexes=[];x.prototype.indexes.push({name:"ID",selector:function(a){var t;if(t=a.match(/^#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/g))return t[0].slice(1)},element:function(e){if(e.id)return[e.id]}});x.prototype.indexes.push({name:"CLASS",selector:function(a){var t;if(t=a.match(/^\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/g))return t[0].slice(1)},element:function(a){var t=a.className;if(t){if("string"==typeof t)return t.split(/\s/);if("object"==typeof t&&"baseVal"in t)return t.baseVal.split(/\s/)}}});var w;x.prototype.indexes.push({name:"TAG",selector:function(a){var t;if(t=a.match(/^((?:[\w\u00c0-\uFFFF\-]|\\.)+)/g))return t[0].toUpperCase()},element:function(e){return[e.nodeName.toUpperCase()]}}),x.prototype.indexes.default={name:"UNIVERSAL",selector:function(){return!0},element:function(){return[!0]}},w="function"==typeof window.Map?window.Map:function(){function e(){this.map={}}return e.prototype.get=function(e){return this.map[e+" "]},e.prototype.set=function(a,t){this.map[a+" "]=t},e}();var Am=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g;x.prototype.logDefaultIndexUsed=function(){},x.prototype.add=function(d,t){var e=this.activeIndexes,m=this.selectors,c=this.selectorObjects,p,u,g,f,y,v,_,x;if("string"==typeof d){for(c[(p={id:this.uid++,selector:d,data:t}).id]=p,_=b(this.indexes,d),u=0;u<_.length;u++)f=(x=_[u]).key,(y=M(e,g=x.index))||((y=Object.create(g)).map=new w,e.push(y)),g===this.indexes.default&&this.logDefaultIndexUsed(p),(v=y.map.get(f))||(v=[],y.map.set(f,v)),v.push(p);this.size++,m.push(d)}},x.prototype.remove=function(m,t){if("string"==typeof m){var e=this.activeIndexes,u=this.selectors=[],c=this.selectorObjects,p={},g=1===arguments.length,d,f,y,v,_,x,E,T;for(d=b(this.indexes,m),y=0;y<d.length;y++)for(f=d[y],v=e.length;v--;)if(x=e[v],f.index.isPrototypeOf(x)){if(E=x.map.get(f.key))for(_=E.length;_--;)(T=E[_]).selector===m&&(g||T.data===t)&&(E.splice(_,1),p[T.id]=!0);break}for(y in p)delete c[y],this.size--;for(y in c)u.push(c[y].selector)}},x.prototype.queryAll=function(d){if(!this.selectors.length)return[];var t={},p=[],m=this.querySelectorAll(this.selectors.join(", "),d),c,u,g,f,h,y,v,_;for(c=0,g=m.length;c<g;c++)for(h=m[c],u=0,f=(y=this.matches(h)).length;u<f;u++)t[(_=y[u]).id]?v=t[_.id]:(v={id:_.id,selector:_.selector,data:_.data,elements:[]},t[_.id]=v,p.push(v)),v.elements.push(h);return p.sort(P)},x.prototype.matches=function(m){if(!m)return[];var t=this.activeIndexes,p={},g=[],d,f,y,v,_,x,b,E,T,S,M;for(d=0,v=t.length;d<v;d++)if(E=(b=t[d]).element(m))for(f=0,_=E.length;f<_;f++)if(T=b.map.get(E[f]))for(y=0,x=T.length;y<x;y++)!p[M=(S=T[y]).id]&&this.matchesSelector(m,S.selector)&&(p[M]=!0,g.push(S));return g.sort(P)};const A={},L={},R=["mouseenter","mouseleave"];var I=new class{bindAll(a,t){void 0===t&&(t=Object.getOwnPropertyNames(Object.getPrototypeOf(a)));for(let e=0;e<t.length;e++)a[t[e]]=a[t[e]].bind(a)}on(a,o,s,n){if("function"==typeof o&&void 0===s)return C(a),void L[a].push(o);const i=a.split(" ");for(let e=0;e<i.length;e++)if(o.nodeType&&1===o.nodeType||o===window||o===document)o.addEventListener(i[e],s,n);else{o=D(o);for(let t=0;t<o.length;t++)o[t].addEventListener(i[e],s,n)}}delegate(a,o,e){const n=a.split(" ");for(let i=0,t;i<n.length;i++)t=A[n[i]],void 0===t&&(t=new x,A[n[i]]=t,-1===R.indexOf(n[i])?document.addEventListener(n[i],k):document.addEventListener(n[i],k,!0)),t.add(o,e)}off(a,o,s){if(void 0===o)return void(L[a]=[]);if("function"==typeof o){C(a);for(let e=0;e<L[a].length;e++)L[a][e]===o&&L[a].splice(e,1);return}const n=a.split(" ");for(let e=0;e<n.length;e++){const t=A[n[e]];if(!(void 0===t||(t.remove(o,s),0!==t.size)))delete A[n[e]],document.removeEventListener(n[e],k);else if(void 0===o.removeEventListener){o=D(o);for(let t=0;t<o.length;t++)o[t].removeEventListener(n[e],s)}else o.removeEventListener(n[e],s)}}emit(a,...t){!function(a,t){if(L[a])for(let e=0;e<L[a].length;e++)L[a][e](...t)}(a,t)}debugDelegated(){return N(A)}debugBus(){return N(L)}},U=32,Y="ontouchstart"in window||window.TouchEvent||window.DocumentTouch&&document instanceof DocumentTouch,Z=("onkeydown"in document),J=f.flags,K=f.bounds,$=J.windows,Q=J.isFirefox,tt=function(){function a(){var o=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};z(this,a),B(this,"wheel",function(e){var t=o.opts,n=t.mm,i=t.fm,r=o.evt;r.deltaY=e.wheelDeltaY||-1*e.deltaY,Q&&1==e.deltaMode&&(r.deltaY*=i),r.deltaY*=n,o.notify(e)}),B(this,"touchStart",function(e){var t=e.targetTouches?e.targetTouches[0]:e;o.touchStartY=t.pageY}),B(this,"touchMove",function(e){var t=o.opts.tm,a=o.evt,n=e.targetTouches?e.targetTouches[0]:e;a.deltaY=.1*((n.pageY-o.touchStartY)*t),o.touchStartY=n.pageY,o.notify(e)}),B(this,"keyDown",function(e){if("INPUT"!==document.activeElement.nodeName){var t=o.evt,a=o.opts.ks,n=K.wh-40;switch(t.deltaY=0,e.keyCode){case 37:case 38:t.deltaY=a;break;case 39:case 40:t.deltaY=-a;break;case U&&e.shiftKey:t.deltaY=n;break;case U:t.deltaY=-n;break;default:return;}o.notify(e)}}),this.el=window,this.opts=Object.assign({mm:$?1.1:.45,tm:2.75,fm:$?40:90,ks:120},e),this.evt={y:0,deltaY:0},this.touchStartY=null,this.init()}var t,r,o;return t=a,(r=[{key:"init",value:function(){this.notify(),this.addEvents()}},{key:"addEvents",value:function(){I.on("wheel",this.el,this.wheel,{passive:!0}),Y&&(I.on("touchstart",this.el,this.touchStart,{passive:!0}),I.on("touchmove",this.el,this.touchMove,{passive:!0})),Z&&I.on("keydown",document,this.keyDown)}},{key:"notify",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,t=this.evt;t.y+=t.deltaY,I.emit("vs",{y:t.y,deltaY:t.deltaY,originalEvent:a})}}])&&O(t.prototype,r),o&&O(t,o),a}(),et=f.flags;new function a(){var t,r,o;!function(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),o=function(a){var t=a.deltaY;et.locked||(Tu.run(),I.emit("scroll",{y:-1*t}))},(r="onVS")in(t=this)?Object.defineProperty(t,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[r]=o,et.isDesktop&&(new tt,I.on("vs",this.onVS))};var nt={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},St={duration:.5,overwrite:!1,delay:0},Tt=2*ym,Ct=0,wm=_m,Lt=function(e){return"string"==typeof e},kt=function(e){return"function"==typeof e},Ot=function(e){return"number"==typeof e},Nt=function(e){return void 0===e},Bt=function(e){return"object"==typeof e},zt=function(e){return!1!==e},Ut=function(){return"undefined"!=typeof window},Vt=function(e){return kt(e)||Lt(e)},Gt=Array.isArray,Ht=/(?:-?\.?\d|\.)+/gi,jt=/[-+=.]*\d+[.e\-+]*\d*[e\-\+]*\d*/g,Wt=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,Xt=/[-+=.]*\d+(?:\.|e-|e)*\d*/gi,qt=/[+-]=-?[\.\d]+/,Zt=/[#\-+.]*\b[a-z\d-=+%.]+/gi,Jt={},Kt={},Pm=function(e){return(Kt=De(e,Jt))&&ri},Qt=function(a,t){return console.warn("Invalid property",a,"set to",t,"Missing plugin? gsap.registerPlugin()")},te=function(a,t){return!t&&console.warn(a)},ee=function(a,t){return a&&(Jt[a]=t)&&Kt&&(Kt[a]=t)||Jt},ne=function(){return 0},ie={},re=[],ae={},Cm={},oe={},le=30,Dm=[],ue="",Lm=function(a){var r=a[0],i,o;if(Bt(r)||kt(r)||(a=[a]),!(i=(r._gsap||{}).harness)){for(o=Dm.length;o--&&!Dm[o].targetTest(r););i=Dm[o]}for(o=a.length;o--;)a[o]&&(a[o]._gsap||(a[o]._gsap=new Qm(a[o],i)))||a.splice(o,1);return a},pe=function(e){return e._gsap||Lm(Ze(e))[0]._gsap},fe=function(a,t){var e=a[t];return kt(e)?a[t]():Nt(e)&&a.getAttribute(t)||e},de=function(a,r){return(a=a.split(",")).forEach(r)||a},me=function(e){return Sm(1e5*e)/1e5||0},ge=function(a,t){for(var e=t.length,r=0;0>a.indexOf(t[r])&&++r<e;);return r<e},ve=function(o,t,e){var l=Ot(o[1]),r=(l?2:1)+(2>t?0:1),a=o[r],s;if(l&&(a.duration=o[1]),a.parent=e,t){for(s=a;e&&!("immediateRender"in s);)s=e.vars.defaults||{},e=zt(e.vars.inherit)&&e.parent;a.immediateRender=zt(s.immediateRender),2>t?a.runBackwards=1:a.startAt=o[r-1]}return a},ye=function(){var a=re.length,r=re.slice(0),n,i;for(ae={},re.length=0,n=0;n<a;n++)(i=r[n])&&i._lazy&&(i.render(i._lazy[0],i._lazy[1],!0)._lazy=0)},_e=function(a,t,e,r){re.length&&ye(),a.render(t,e,r),re.length&&ye()},xe=function(a){var t=parseFloat(a);return(t||0===t)&&2>(a+"").match(Zt).length?t:a},be=function(e){return e},Ee=function(a,t){for(var e in t)e in a||(a[e]=t[e]);return a},we=function(a,t){for(var e in t)e in a||"duration"===e||"ease"===e||(a[e]=t[e])},De=function(a,t){for(var e in t)a[e]=t[e];return a},Me=function a(t,e){for(var r in e)t[r]=Bt(e[r])?a(t[r]||(t[r]={}),e[r]):e[r];return t},Se=function(a,t){var e={},r;for(r in a)r in t||(e[r]=a[r]);return e},Te=function(a){var t=a.parent||Cn,r=a.keyframes?we:Ee;if(zt(a.inherit))for(;t;)r(a,t.vars.defaults),t=t.parent;return a},Ae=function(o,t,e,s){void 0===e&&(e="_first"),void 0===s&&(s="_last");var l=t._prev,r=t._next;l?l._next=r:o[e]===t&&(o[e]=r),r?r._prev=l:o[s]===t&&(o[s]=l),t._next=t._prev=t.parent=null},Ce=function(a,t){a.parent&&(!t||a.parent.autoRemoveChildren)&&a.parent.remove(a),a._act=0},Pe=function(a){for(var t=a;t;)t._dirty=1,t=t.parent;return a},Fe=function(a){for(var t=a.parent;t&&t.parent;)t._dirty=1,t.totalDuration(),t=t.parent;return a},Le=function(e){return e._repeat?Re(e._tTime,e=e.duration()+e._rDelay)*e:0},Re=function(a,r){return(a/=r)&&~~a===a?~~a-1:~~a},Ie=function(a,t){return(a-t._start)*t._ts+(0<=t._ts?0:t._dirty?t.totalDuration():t._tDur)},ke=function(e){return e._end=me(e._start+(e._tDur/vm(e._ts||e._rts||1e-8)||0))},Oe=function(a,t){var e;if((t._time||t._initted&&!t._dur)&&(e=Ie(a.rawTime(),t),(!t._dur||1e-8<je(0,t.totalDuration(),e)-t._tTime)&&t.render(e,!0)),Pe(a)._dp&&a._initted&&a._time>=a._dur&&a._ts){if(a._dur<a.duration())for(e=a;e._dp;)0<=e.rawTime()&&e.totalTime(e._tTime),e=e._dp;a._zTime=-1e-8}},Ne=function(a,t,e,r){return t.parent&&Ce(t),t._start=me(e+t._delay),t._end=me(t._start+(t.totalDuration()/vm(t.timeScale())||0)),function(o,t,e,l,d){void 0===e&&(e="_first"),void 0===l&&(l="_last");var r=o[l],p;if(d)for(p=t[d];r&&r[d]>p;)r=r._prev;r?(t._next=r._next,r._next=t):(t._next=o[e],o[e]=t),t._next?t._next._prev=t:o[l]=t,t._prev=r,t.parent=t._dp=o}(a,t,"_first","_last",a._sort?"_start":0),a._recent=t,r||Oe(a,t),a},Be=function(a,t,e,r){return On(a,t),a._initted?!e&&a._pt&&(a._dur&&!1!==a.vars.lazy||!a._dur&&a.vars.lazy)&&Nm!==vn.frame?(re.push(a),a._lazy=[t,r],1):void 0:1},ze=function(a,t,e){var n=a._repeat,i=me(t)||0;return a._dur=i,a._tDur=n?0>n?1e12:me(i*(n+1)+a._rDelay*n):i,a._time>i&&(a._time=i,a._tTime=bm(a._tTime,a._tDur)),!e&&Pe(a.parent),a.parent&&ke(a),a},Ue=function(e){return e instanceof Fn?Pe(e):ze(e,e._dur)},Ve={_start:0,endTime:ne},Ge=function l(t,e){var n=t.labels,a=t._recent||Ve,s=t.duration()>=100000000?a.endTime(!1):t._dur,o,d;return Lt(e)&&(isNaN(e)||e in n)?"<"===(o=e.charAt(0))||">"===o?("<"===o?a._start:a.endTime(0<=a._repeat))+(parseFloat(e.substr(1))||0):0>(o=e.indexOf("="))?(e in n||(n[e]=s),n[e]):(d=+(e.charAt(o-1)+e.substr(o+1)),1<o?l(t,e.substr(0,o-1))+d:s+d):null==e?s:+e},He=function(a,t){return a||0===a?t(a):t},je=function(a,t,e){return e<a?a:e>t?t:e},We=function(e){return(e+"").substr((parseFloat(e)+"").length)},Xe=[].slice,qe=function(a,t){return a&&Bt(a)&&"length"in a&&(!t&&!a.length||a.length-1 in a&&Bt(a[0]))&&!a.nodeType&&a!==Rm},Ye=function(a,r,e){return void 0===e&&(e=[]),a.forEach(function(a){var t;return Lt(a)&&!r||qe(a,1)?(t=e).push.apply(t,Ze(a)):e.push(a)})||e},Ze=function(a,t){return!Lt(a)||t||!km&&yn()?Gt(a)?Ye(a,t):qe(a)?Xe.call(a,0):a?[a]:[]:Xe.call(Fm.querySelectorAll(a),0)},Je=function(e){return e.sort(function(){return .5-Math.random()})},Ke=function(d){if(kt(d))return d;var T=Bt(d)?d:{each:d},e=Dn(T.ease),t=T.from||0,i=parseFloat(T.base)||0,r={},a=0<t&&1>t,s=isNaN(t)||a,o=T.axis,l=t,c=t;return Lt(t)?l=c={center:.5,edges:.5,end:1}[t]||0:!a&&s&&(l=t[0],c=t[1]),function(a,n,u){var h=(u||T).length,S=r[h],M,A,w,P,C,D,L,R,k;if(!S){if(!(k="auto"===T.grid?0:(T.grid||[1,100000000])[1])){for(L=-100000000;L<(L=u[k++].getBoundingClientRect().left)&&k<h;);k--}for(S=r[h]=[],M=s?bm(k,h)*l-.5:t%k,A=s?h*c/k-.5:0|t/k,L=0,R=100000000,D=0;D<h;D++)w=D%k-M,P=A-(0|D/k),S[D]=C=o?vm("y"===o?P:w):wm(w*w+P*P),C>L&&(L=C),C<R&&(R=C);"random"===t&&Je(S),S.max=L-R,S.min=R,S.v=h=(parseFloat(T.amount)||parseFloat(T.each)*(k>h?h-1:o?"y"===o?h/k:k:Em(k,h/k))||0)*("edges"===t?-1:1),S.b=0>h?i-h:i,S.u=We(T.amount||T.each)||0,e=e&&0>h?wn(e):e}return h=(S[a]-S.min)/S.max||0,me(S.b+(e?e(h):h)*S.v)+S.u}},$e=function(a){var t=1>a?xm(10,(a+"").length-2):1;return function(e){return~~(Sm(parseFloat(e)/a)*a*t)/t+(Ot(e)?0:We(e))}},Qe=function(d,a){var e=Gt(d),p,c;return!e&&Bt(d)&&(p=e=d.radius||100000000,d.values?(d=Ze(d.values),(c=!Ot(d[0]))&&(p*=p)):d=$e(d.increment)),He(a,e?kt(d)?function(t){return c=d(t),vm(c-t)<=p?c:t}:function(t){for(var e=parseFloat(c?t.x:t),n=parseFloat(c?t.y:0),i=100000000,o=0,s=d.length,m,g;s--;)(m=c?(m=d[s].x-e)*m+(g=d[s].y-n)*g:vm(d[s]-e))<i&&(i=m,o=s);return o=!p||i<=p?d[o]:t,c||o===t||Ot(t)?o:o+We(t)}:$e(d))},tn=function(a,t,e,r){return He(Gt(a)?!t:!0===e?!!(e=0):!r,function(){return Gt(a)?a[~~(Math.random()*a.length)]:(e=e||1e-5)&&(r=1>e?xm(10,(e+"").length-2):1)&&~~(Sm((a+Math.random()*(t-a))/e)*e*r)/r})},en=function(a,t,e){return He(e,function(e){return a[~~t(e)]})},nn=function(o){for(var t=0,l="",d,p,c,m;~(d=o.indexOf("random(",t));)c=o.indexOf(")",d),m="["===o.charAt(d+7),p=o.substr(d+7,c-d-7).match(m?Zt:Ht),l+=o.substr(t,d-t)+tn(m?p:+p[0],+p[1],+p[2]||1e-5),t=c+1;return l+o.substr(t,o.length-t)},rn=function(a,t,o,n,e){return He(e,function(t){return o+(t-a)/(t-a)*(n-o)})},an=function(l,t,e){var n=l.labels,s=100000000,d,p,c;for(d in n)0>(p=n[d]-t)==!!e&&p&&s>(p=vm(p))&&(c=d,s=p);return c},sn=function(o,t,e){var n=o.vars,a=n[t],s,l;if(a)return s=n[t+"Params"],l=n.callbackScope||o,e&&re.length&&ye(),s?a.apply(l,s):a.call(l)},on=function(e){return Ce(e),1>e.progress()&&sn(e,"onInterrupt"),e},ln=function(o){var s=(o=!o.name&&o.default||o).name,l=kt(o),n=s&&!l&&o.init?function(){this._props=[]}:o,i={init:ne,render:Zn,add:In,kill:Kn,modifier:Jn,rawVars:0},r={targetTest:0,get:0,getSetter:Wn,aliases:{},register:0};if(yn(),o!==n){if(Cm[s])return;Ee(n,Ee(Se(o,i),r)),De(n.prototype,De(i,Se(o,r))),Cm[n.prop=s]=n,o.targetTest&&(Dm.push(n),ie[s]=1),s=("css"===s?"CSS":s.charAt(0).toUpperCase()+s.substr(1))+"Plugin"}ee(s,n),o.register&&o.register(ri,n,ti)},hn={aqua:[0,255,255],lime:[0,255,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,255],navy:[0,0,128],white:[255,255,255],olive:[128,128,0],yellow:[255,255,0],orange:[255,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[255,0,0],pink:[255,192,203],cyan:[0,255,255],transparent:[255,255,255,0]},un=function(a,r,e){return 0|255*(1>6*(a=0>a?a+1:1<a?a-1:a)?r+6*((e-r)*a):.5>a?e:2>3*a?r+6*((e-r)*(2/3-a)):r)+.5},cn=function(d,m,e){var n=d?Ot(d)?[d>>16,255&d>>8,255&d]:0:hn.black,g,y,v,_,x,b,E,T,S,M;if(!n){if(","===d.substr(-1)&&(d=d.substr(0,d.length-1)),hn[d])n=hn[d];else if("#"===d.charAt(0))4===d.length&&(g=d.charAt(1),y=d.charAt(2),v=d.charAt(3),d="#"+g+g+y+y+v+v),n=[(d=parseInt(d.substr(1),16))>>16,255&d>>8,255&d];else if(!("hsl"===d.substr(0,3)))n=d.match(Ht)||hn.transparent;else if(!(n=M=d.match(Ht),m))_=+n[0]%360/360,x=+n[1]/100,g=2*(b=+n[2]/100)-(y=.5>=b?b*(x+1):b+x-b*x),3<n.length&&(n[3]*=1),n[0]=un(_+1/3,g,y),n[1]=un(_,g,y),n[2]=un(_-1/3,g,y);else if(~d.indexOf("="))return n=d.match(jt),e&&4>n.length&&(n[3]=1),n;n=n.map(Number)}return m&&!M&&(g=n[0]/255,y=n[1]/255,v=n[2]/255,b=((E=Em(g,y,v))+(T=bm(g,y,v)))/2,E===T?_=x=0:(S=E-T,x=.5<b?S/(2-E-T):S/(E+T),_=E===g?(y-v)/S+(y<v?6:0):E===y?(v-g)/S+2:(g-y)/S+4,_*=60),n[0]=~~(_+.5),n[1]=~~(100*x+.5),n[2]=~~(100*b+.5)),e&&4>n.length&&(n[3]=1),n},pn=function(a){var o=[],e=[],n=-1;return a.split(dn).forEach(function(a){var t=a.match(Wt)||[];o.push.apply(o,t),e.push(n+=t.length+1)}),o.c=e,o},fn=function(d,p,e){var t="",n=(d+t).match(dn),c=p?"hsla(":"rgba(",m=0,g,f,h,y;if(!n)return d;if(n=n.map(function(e){return(e=cn(e,p,1))&&c+(p?e[0]+","+e[1]+"%,"+e[2]+"%,"+e[3]:e.join(","))+")"}),e&&(h=pn(d),(g=e.c).join(t)!==h.c.join(t)))for(y=(f=d.replace(dn,"1").split(Wt)).length-1;m<y;m++)t+=f[m]+(~g.indexOf(m)?n.shift()||c+"0,0,0,0)":(h.length?h:n.length?n:e).shift());if(!f)for(y=(f=d.split(dn)).length-1;m<y;m++)t+=f[m]+n[m];return t+f[y]},dn=function(){var a="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3}){1,2}\\b",r;for(r in hn)a+="|"+r+"\\b";return new RegExp(a+")","gi")}(),mn=function(a){var t=a.join(" "),r;if(dn.lastIndex=0,dn.test(t))return r=/hsl[a]?\(/.test(t),a[1]=fn(a[1],r),a[0]=fn(a[0],r,pn(a[1])),!0},vn=(Hm=Date.now,Wm=500,Xm=33,jm=Hm(),Ym=jm,Zm=qm=1/240,Km=function o(s){var e=Hm()-Ym,t=!0===s,a,r;e>Wm&&(jm+=e-Xm),Ym+=e,Gm.time=(Ym-jm)/1e3,(0<(a=Gm.time-Zm)||t)&&(Gm.frame++,Zm+=a+(a>=qm?.004:qm-a),r=1),t||(Um=Bm(o)),r&&Jm.forEach(function(a){return a(Gm.time,e,Gm.frame,s)})},Gm={time:0,frame:0,tick:function(){Km(!0)},wake:function(){Im&&(!km&&Ut()&&(Rm=km=window,Fm=Rm.document||{},Jt.gsap=ri,(Rm.gsapVersions||(Rm.gsapVersions=[])).push(ri.version),Pm(Kt||Rm.GreenSockGlobals||!Rm.gsap&&Rm||{}),Vm=Rm.requestAnimationFrame),Um&&Gm.sleep(),Bm=Vm||function(e){return setTimeout(e,0|1e3*(Zm-Gm.time)+1)},Om=1,Km(2))},sleep:function(){(Vm?Rm.cancelAnimationFrame:clearTimeout)(Um),Om=0,Bm=ne},lagSmoothing:function(a,t){Wm=a||100000000,Xm=bm(t,Wm,0)},fps:function(e){qm=1/(e||240),Zm=Gm.time+qm},add:function(e){0>Jm.indexOf(e)&&Jm.push(e),yn()},remove:function(a){var t;~(t=Jm.indexOf(a))&&Jm.splice(t,1)},_listeners:Jm=[]}),yn=function(){return!Om&&vn.wake()},_n={},xn=function(d){for(var t={},r=d.substr(1,d.length-3).split(":"),a=r[0],p=1,c=r.length,l,m,u;p<c;p++)m=r[p],l=p==c-1?m.length:m.lastIndexOf(","),u=m.substr(0,l),t[a]=isNaN(u)?u.replace(/["']/g,"").trim():+u,a=m.substr(l+1).trim();return t},wn=function(a){return function(t){return 1-a(1-t)}},Dn=function(a,t){return a&&(kt(a)?a:_n[a]||function(a){var t=(a+"").split("("),e=_n[t[0]];return e&&1<t.length&&e.config?e.config.apply(null,~a.indexOf("{")?[xn(t[1])]:/\(([^()]+)\)/i.exec(a)[1].split(",").map(xe)):_n._CE&&/^[\d.\-M][\d.\-,\s]/.test(a)?_n._CE("",a):e}(a))||t},Mn=function(o,s,l,e){void 0===l&&(l=function(e){return 1-s(1-e)}),void 0===e&&(e=function(e){return .5>e?s(2*e)/2:1-s(2*(1-e))/2});var d={easeIn:s,easeOut:l,easeInOut:e},a;return de(o,function(r){for(var t in _n[r]=Jt[r]=d,_n[a=r.toLowerCase()]=l,d)_n[a+("easeIn"==t?".in":"easeOut"===t?".out":".inOut")]=_n[r+"."+t]=d[t]}),d},Sn=function(a){return function(t){return .5>t?(1-a(1-2*t))/2:.5+a(2*(t-.5))/2}},Tn=function d(t,e,n){var i=1<=e?e:1,r=(n||(t?.3:.45))/(1>e?e:1),p=r/Tt*(mm(1/i)||0),s=function(e){return 1===e?1:i*xm(2,-10*e)*fm((e-p)*r)+1},o="out"===t?s:"in"===t?function(e){return 1-s(1-e)}:Sn(s);return r=Tt/r,o.config=function(e,a){return d(t,e,a)},o},An=function a(t,e){void 0===e&&(e=1.70158);var o=function(a){return a?--a*a*((e+1)*a+e)+1:0},i="out"===t?o:"in"===t?function(e){return 1-o(1-e)}:Sn(o);return i.config=function(e){return a(t,e)},i},Cn,Rm,km,Fm,Im,Nm,zm,Om,Um,Bm,Vm,Gm,Hm,Wm,Xm,jm,Ym,qm,Zm,Jm,Km;de("Linear,Quad,Cubic,Quart,Quint,Strong",function(a,t){var e=5>t?t+1:t;Mn(a+",Power"+(e-1),t?function(a){return xm(a,e)}:function(e){return e},function(a){return 1-xm(1-a,e)},function(a){return .5>a?xm(2*a,e)/2:1-xm(2*(1-a),e)/2})}),_n.Linear.easeNone=_n.none=_n.Linear.easeIn,Mn("Elastic",Tn("in"),Tn("out"),Tn()),function(a,t){var e=function(e){return e<1/t?a*e*e:.7272727272727273>e?a*xm(e-1.5/t,2)+.75:.9090909090909092>e?a*(e-=2.25/t)*e+.9375:a*xm(e-2.625/t,2)+.984375};Mn("Bounce",function(a){return 1-e(1-a)},e)}(7.5625,2.75),Mn("Expo",function(e){return e?xm(2,10*(e-1)):0}),Mn("Circ",function(e){return-(wm(1-e*e)-1)}),Mn("Sine",function(e){return 1-hm(e*(Tt/4))}),Mn("Back",An("in"),An("out"),An()),_n.SteppedEase=_n.steps=Jt.SteppedEase={config:function(a,o){void 0===a&&(a=1);var e=1/a,n=a+(o?0:1),i=o?1:0;return function(a){return((0|n*je(0,1-1e-8,a))+i)*e}}},St.ease=_n["quad.out"],de("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(e){return ue+=e+","+e+"Params,"});var Qm=function(a,t){this.id=Ct++,a._gsap=this,this.target=a,this.harness=t,this.get=t?t.get:fe,this.set=t?t.getSetter:Wn},Pn=function(){function a(a,t){var e=a.parent||Cn;this.vars=a,this._delay=+a.delay||0,(this._repeat=a.repeat||0)&&(this._rDelay=a.repeatDelay||0,this._yoyo=!!a.yoyo||!!a.yoyoEase),this._ts=1,ze(this,+a.duration,1),this.data=a.data,Om||vn.wake(),e&&Ne(e,this,t||0===t?t:e._time,1),a.reversed&&this.reverse(),a.paused&&this.paused(!0)}var t=a.prototype;return t.delay=function(e){return e||0===e?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+e-this._delay),this._delay=e,this):this._delay},t.duration=function(e){return arguments.length?this.totalDuration(0<this._repeat?e+(e+this._rDelay)*this._repeat:e):this.totalDuration()&&this._dur},t.totalDuration=function(e){return arguments.length?(this._dirty=0,ze(this,0>this._repeat?e:(e-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},t.totalTime=function(a,t){if(yn(),!arguments.length)return this._tTime;var e=this.parent||this._dp;if(e&&e.smoothChildTiming&&this._ts){for(this._start=me(e._time-(0<this._ts?a/this._ts:((this._dirty?this.totalDuration():this._tDur)-a)/-this._ts)),ke(this),e._dirty||Pe(e);e.parent;)e.parent._time!==e._start+(0<=e._ts?e._tTime/e._ts:(e.totalDuration()-e._tTime)/-e._ts)&&e.totalTime(e._tTime,!0),e=e.parent;!this.parent&&this._dp.autoRemoveChildren&&Ne(this._dp,this,this._start-this._delay)}return(this._tTime!==a||!this._dur&&!t||this._initted&&1e-8===vm(this._zTime))&&(this._ts||(this._pTime=a),_e(this,a,t)),this},t.time=function(a,t){return arguments.length?this.totalTime(bm(this.totalDuration(),a+Le(this))%this._dur||(a?this._dur:0),t):this._time},t.totalProgress=function(a,t){return arguments.length?this.totalTime(this.totalDuration()*a,t):this.totalDuration()?bm(1,this._tTime/this._tDur):this.ratio},t.progress=function(a,t){return arguments.length?this.totalTime(this.duration()*(!this._yoyo||1&this.iteration()?a:1-a)+Le(this),t):this.duration()?bm(1,this._time/this._dur):this.ratio},t.iteration=function(a,t){var e=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(a-1)*e,t):this._repeat?Re(this._tTime,e)+1:1},t.timeScale=function(a){if(!arguments.length)return-1e-8===this._rts?0:this._rts;if(this._rts===a)return this;var t=this.parent&&this._ts?Ie(this.parent._time,this):this._tTime;return this._rts=+a||0,this._ts=this._ps||-1e-8===a?0:this._rts,Fe(this.totalTime(je(0,this._tDur,t),!0))},t.paused=function(e){return arguments.length?(this._ps!==e&&(this._ps=e,e?(this._pTime=this._tTime||Em(-this._delay,this.rawTime()),this._ts=this._act=0):(yn(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,1===this.progress()&&(this._tTime-=1e-8)&&1e-8!==vm(this._zTime)))),this):this._ps},t.startTime=function(a){if(arguments.length){this._start=a;var t=this.parent||this._dp;return t&&(t._sort||!this.parent)&&Ne(t,this,a-this._delay),this}return this._start},t.endTime=function(e){return this._start+(zt(e)?this.totalDuration():this.duration())/vm(this._ts)},t.rawTime=function(a){var t=this.parent||this._dp;return t?a&&(!this._ts||this._repeat&&this._time&&1>this.totalProgress())?this._tTime%(this._dur+this._rDelay):this._ts?Ie(t.rawTime(a),this):this._tTime:this._tTime},t.repeat=function(e){return arguments.length?(this._repeat=e,Ue(this)):this._repeat},t.repeatDelay=function(e){return arguments.length?(this._rDelay=e,Ue(this)):this._rDelay},t.yoyo=function(e){return arguments.length?(this._yoyo=e,this):this._yoyo},t.seek=function(a,t){return this.totalTime(Ge(this,a),zt(t))},t.restart=function(a,t){return this.play().totalTime(a?-this._delay:0,zt(t))},t.play=function(a,t){return null!=a&&this.seek(a,t),this.reversed(!1).paused(!1)},t.reverse=function(a,t){return null!=a&&this.seek(a||this.totalDuration(),t),this.reversed(!0).paused(!1)},t.pause=function(a,t){return null!=a&&this.seek(a,t),this.paused(!0)},t.resume=function(){return this.paused(!1)},t.reversed=function(e){return arguments.length?(!!e!==this.reversed()&&this.timeScale(-this._rts||(e?-1e-8:0)),this):0>this._rts},t.invalidate=function(){return this._initted=0,this._zTime=-1e-8,this},t.isActive=function(a){var t=this.parent||this._dp,r=this._start,n;return!t||this._ts&&(this._initted||!a)&&t.isActive(a)&&(n=t.rawTime(!0))>=r&&n<this.endTime(!0)-1e-8},t.eventCallback=function(a,t,e){var r=this.vars;return 1<arguments.length?(t?(r[a]=t,e&&(r[a+"Params"]=e),"onUpdate"===a&&(this._onUpdate=t)):delete r[a],this):r[a]},t.then=function(a){var o=this;return new Promise(function(e){var n=kt(a)?a:be,t=function(){var a=o.then;o.then=null,kt(n)&&(n=n(o))&&(n.then||n===o)&&(o.then=a),e(n),o.then=a};o._initted&&1===o.totalProgress()&&0<=o._ts||!o._tTime&&0>o._ts?t():o._prom=t})},t.kill=function(){on(this)},a}();Ee(Pn.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-1e-8,_prom:0,_ps:!1,_rts:1});var Fn=function(a){function t(t,r){var n;return void 0===t&&(t={}),(n=a.call(this,t,r)||this).labels={},n.smoothChildTiming=!!t.smoothChildTiming,n.autoRemoveChildren=!!t.autoRemoveChildren,n._sort=zt(t.sortChildren),n.parent&&Oe(n.parent,V(n)),n}G(t,a);var e=t.prototype;return e.to=function(a,t,e){return new Un(a,ve(arguments,0,this),Ge(this,Ot(t)?arguments[3]:e)),this},e.from=function(a,t,e){return new Un(a,ve(arguments,1,this),Ge(this,Ot(t)?arguments[3]:e)),this},e.fromTo=function(a,t,e,r){return new Un(a,ve(arguments,2,this),Ge(this,Ot(t)?arguments[4]:r)),this},e.set=function(a,t,e){return t.duration=0,t.parent=this,Te(t).repeatDelay||(t.repeat=0),t.immediateRender=!!t.immediateRender,new Un(a,t,Ge(this,e),1),this},e.call=function(a,t,e){return Ne(this,Un.delayedCall(0,a,t),Ge(this,e))},e.staggerTo=function(o,t,e,n,i,r,a){return e.duration=t,e.stagger=e.stagger||n,e.onComplete=r,e.onCompleteParams=a,e.parent=this,new Un(o,e,Ge(this,i)),this},e.staggerFrom=function(o,t,e,n,i,r,a){return e.runBackwards=1,Te(e).immediateRender=zt(e.immediateRender),this.staggerTo(o,t,e,n,i,r,a)},e.staggerFromTo=function(l,t,e,n,i,r,a,s){return n.startAt=e,Te(n).immediateRender=zt(n.immediateRender),this.staggerTo(l,t,n,i,r,a,s)},e.render=function(T,S,e){var n=this._time,M=this._dirty?this.totalDuration():this._tDur,g=this._dur,v=this!==Cn&&T>M-1e-8&&0<=T?M:1e-8>T?0:T,A=0>this._zTime!=0>T&&(this._initted||!g),_,w,P,C,D,L,R,k,F,I,N,z;if(v!==this._tTime||e||A){if(n!==this._time&&g&&(v+=this._time-n,T+=this._time-n),_=v,F=this._start,L=!(k=this._ts),A&&(g||(n=this._zTime),!T&&S||(this._zTime=T)),this._repeat&&(N=this._yoyo,D=g+this._rDelay,((_=me(v%D))>g||M===v)&&(_=g),(C=~~(v/D))&&C===v/D&&(_=g,C--),N&&1&C&&(_=g-_,z=1),C!==(I=Re(this._tTime,D))&&!this._lock)){var O=N&&1&I,U=O===(N&&1&C);if(C<I&&(O=!O),n=O?0:g,this._lock=1,this.render(n,S,!g)._lock=0,!S&&this.parent&&sn(this,"onRepeat"),this.vars.repeatRefresh&&!z&&(this.invalidate()._lock=1),n!==this._time||L!==!this._ts)return this;if(U&&(this._lock=2,n=O?g+1e-4:-1e-4,this.render(n,!0),this.vars.repeatRefresh&&!z&&this.invalidate()),this._lock=0,!this._ts&&!L)return this}if(this._hasPause&&!this._forcing&&2>this._lock&&(R=function(a,t,e){var r;if(e>t)for(r=a._first;r&&r._start<=e;){if(!r._dur&&"isPause"===r.data&&r._start>t)return r;r=r._next}else for(r=a._last;r&&r._start>=e;){if(!r._dur&&"isPause"===r.data&&r._start<t)return r;r=r._prev}}(this,me(n),me(_)))&&(v-=_-(_=R._start)),this._tTime=v,this._time=_,this._act=!k,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=T),n||!_||S||sn(this,"onStart"),_>=n&&0<=T)for(w=this._first;w;){if(P=w._next,(w._act||_>=w._start)&&w._ts&&R!==w){if(w.parent!==this)return this.render(T,S,e);if(w.render(0<w._ts?(_-w._start)*w._ts:(w._dirty?w.totalDuration():w._tDur)+(_-w._start)*w._ts,S,e),_!==this._time||!this._ts&&!L){R=0,P&&(v+=this._zTime=-1e-8);break}}w=P}else{w=this._last;for(var b=0>T?T:_;w;){if(P=w._prev,(w._act||b<=w._end)&&w._ts&&R!==w){if(w.parent!==this)return this.render(T,S,e);if(w.render(0<w._ts?(b-w._start)*w._ts:(w._dirty?w.totalDuration():w._tDur)+(b-w._start)*w._ts,S,e),_!==this._time||!this._ts&&!L){R=0,P&&(v+=this._zTime=b?-1e-8:1e-8);break}}w=P}}if(R&&!S&&(this.pause(),R.render(_>=n?0:-1e-8)._zTime=_>=n?1:-1,this._ts))return this._start=F,ke(this),this.render(T,S,e);this._onUpdate&&!S&&sn(this,"onUpdate",!0),(v===M&&M>=this.totalDuration()||!v&&0>this._ts)&&(F!==this._start&&vm(k)===vm(this._ts)||this._lock||((T||!g)&&(T&&0<this._ts||!v&&0>this._ts)&&Ce(this,1),S||0>T&&!n||(sn(this,v===M?"onComplete":"onReverseComplete",!0),this._prom&&this._prom())))}return this},e.add=function(a,r){var i=this;if(Ot(r)||(r=Ge(this,r)),!(a instanceof Pn)){if(Gt(a))return a.forEach(function(e){return i.add(e,r)}),Pe(this);if(Lt(a))return this.addLabel(a,r);if(!kt(a))return this;a=Un.delayedCall(0,a)}return this===a?this:Ne(this,a,r)},e.getChildren=function(o,s,l,d){void 0===o&&(o=!0),void 0===s&&(s=!0),void 0===l&&(l=!0),void 0===d&&(d=-100000000);for(var p=[],r=this._first;r;)r._start>=d&&(r instanceof Un?s&&p.push(r):(l&&p.push(r),o&&p.push.apply(p,r.getChildren(!0,s,l)))),r=r._next;return p},e.getById=function(a){for(var t=this.getChildren(1,1,1),e=t.length;e--;)if(t[e].vars.id===a)return t[e]},e.remove=function(e){return Lt(e)?this.removeLabel(e):kt(e)?this.killTweensOf(e):(Ae(this,e),e===this._recent&&(this._recent=this._last),Pe(this))},e.totalTime=function(t,e){return arguments.length?(this._forcing=1,this.parent||this._dp||!this._ts||(this._start=me(vn.time-(0<this._ts?t/this._ts:(this.totalDuration()-t)/-this._ts))),a.prototype.totalTime.call(this,t,e),this._forcing=0,this):this._tTime},e.addLabel=function(a,t){return this.labels[a]=Ge(this,t),this},e.removeLabel=function(e){return delete this.labels[e],this},e.addPause=function(a,t,e){var r=Un.delayedCall(0,t||ne,e);return r.data="isPause",this._hasPause=1,Ne(this,r,Ge(this,a))},e.removePause=function(a){var r=this._first;for(a=Ge(this,a);r;)r._start===a&&"isPause"===r.data&&Ce(r),r=r._next},e.killTweensOf=function(a,t,e){for(var n=this.getTweensOf(a,e),i=n.length;i--;)Vn!==n[i]&&n[i].kill(a,t);return this},e.getTweensOf=function(o,t){for(var e=[],i=Ze(o),r=this._first,s;r;)r instanceof Un?!ge(r._targets,i)||t&&!r.isActive("started"===t)||e.push(r):(s=r.getTweensOf(i,t)).length&&e.push.apply(e,s),r=r._next;return e},e.tweenTo=function(d,p){p=p||{};var c=this,n=Ge(c,d),t=p,r=t.startAt,a=t.onStart,i=t.onStartParams,o=Un.to(c,Ee(p,{ease:"none",lazy:!1,time:n,duration:p.duration||vm((n-(r&&"time"in r?r.time:c._time))/c.timeScale())||1e-8,onStart:function(){c.pause();var e=p.duration||vm((n-c._time)/c.timeScale());o._dur!==e&&ze(o,e).render(o._time,!0,!0),a&&a.apply(o,i||[])}}));return o},e.tweenFromTo=function(a,t,e){return this.tweenTo(t,Ee({startAt:{time:Ge(this,a)}},e))},e.recent=function(){return this._recent},e.nextLabel=function(e){return void 0===e&&(e=this._time),an(this,Ge(this,e))},e.previousLabel=function(e){return void 0===e&&(e=this._time),an(this,Ge(this,e),1)},e.currentLabel=function(e){return arguments.length?this.seek(e,!0):this.previousLabel(this._time+1e-8)},e.shiftChildren=function(o,t,e){void 0===e&&(e=0);for(var s=this._first,l=this.labels,a;s;)s._start>=e&&(s._start+=o),s=s._next;if(t)for(a in l)l[a]>=e&&(l[a]+=o);return Pe(this)},e.invalidate=function(){var t=this._first;for(this._lock=0;t;)t.invalidate(),t=t._next;return a.prototype.invalidate.call(this)},e.clear=function(a){void 0===a&&(a=!0);for(var r=this._first,i;r;)i=r._next,this.remove(r),r=i;return this._time=this._tTime=0,a&&(this.labels={}),Pe(this)},e.totalDuration=function(d){var t=0,p=this,s=p._last,c=100000000,m,u,g,f;if(arguments.length)return p.timeScale((0>p._repeat?p.duration():p.totalDuration())/(p.reversed()?-d:d));if(p._dirty){for(f=p.parent;s;)m=s._prev,s._dirty&&s.totalDuration(),(g=s._start)>c&&p._sort&&s._ts&&!p._lock?(p._lock=1,Ne(p,s,g-s._delay,1)._lock=0):c=g,0>g&&s._ts&&(t-=g,(!f&&!p._dp||f&&f.smoothChildTiming)&&(p._start+=g/p._ts,p._time-=g,p._tTime-=g),p.shiftChildren(-g,!1,-1e20),c=0),(u=ke(s))>t&&s._ts&&(t=u),s=m;ze(p,p===Cn&&p._time>t?p._time:bm(100000000,t),1),p._dirty=0}return p._tDur},t.updateRoot=function(a){if(Cn._ts&&(_e(Cn,Ie(a,Cn)),Nm=vn.frame),vn.frame>=le){le+=nt.autoSleep||120;var t=Cn._first;if((!t||!t._ts)&&nt.autoSleep&&2>vn._listeners.length){for(;t&&!t._ts;)t=t._next;t||vn.sleep()}}},t}(Pn);Ee(Fn.prototype,{_lock:0,_hasPause:0,_forcing:0});var Ln=function(y,t,e,_,x,r,a){var s=new ti(this._pt,y,t,0,1,Yn,null,x),m=0,b=0,E,T,S,M,A,w,P,C;for(s.b=e,s.e=_,e+="",(P=~(_+="").indexOf("random("))&&(_=nn(_)),r&&(r(C=[e,_],y,t),e=C[0],_=C[1]),T=e.match(Xt)||[];E=Xt.exec(_);)M=E[0],A=_.substring(m,E.index),S?S=(S+1)%5:"rgba("===A.substr(-5)&&(S=1),M!==T[b++]&&(w=parseFloat(T[b-1])||0,s._pt={_next:s._pt,p:A||1===b?A:",",s:w,c:"="===M.charAt(1)?parseFloat(M.substr(2))*("-"===M.charAt(0)?-1:1):parseFloat(M)-w,m:S&&4>S?Sm:0},m=Xt.lastIndex);return s.c=m<_.length?_.substring(m,_.length):"",s.fp=a,(qt.test(_)||P)&&(s.e=0),this._pt=s,s},In=function(d,t,e,n,m,r,a,s,o){kt(n)&&(n=n(m||0,d,r));var l=d[t],u="get"===e?kt(l)?o?d[t.indexOf("set")||!kt(d["get"+t.substr(3)])?t:"get"+t.substr(3)](o):d[t]():l:e,c=kt(l)?o?Hn:Gn:$m,p;if(Lt(n)&&(~n.indexOf("random(")&&(n=nn(n)),"="===n.charAt(1)&&(n=parseFloat(u)+parseFloat(n.substr(2))*("-"===n.charAt(0)?-1:1)+(We(u)||0))),u!==n)return isNaN(u+n)?(!l&&!(t in d)&&Qt(t,n),Ln.call(this,d,t,u,n,c,s||nt.stringFilter,o)):(p=new ti(this._pt,d,t,+u||0,n-(u||0),"boolean"==typeof l?qn:Xn,0,c),o&&(p.fp=o),a&&p.modifier(a,this,d),this._pt=p)},kn=function(d,t,e,n,i,r){var a,p,c,m;if(Cm[d]&&!1!==(a=new Cm[d]).init(i,a.rawVars?t[d]:function(o,l,e,n,i){if(kt(o)&&(o=Nn(o,i,l,e,n)),!Bt(o)||o.style&&o.nodeType||Gt(o))return Lt(o)?Nn(o,i,l,e,n):o;var r={},s;for(s in o)r[s]=Nn(o[s],i,l,e,n);return r}(t[d],n,i,r,e),e,n,r)&&(e._pt=p=new ti(e._pt,i,d,0,1,a.render,a,0,a.priority),e!==zm))for(c=e._ptLookup[e._targets.indexOf(i)],m=a._props.length;m--;)c[a._props[m]]=p;return a},On=function k(t,e){var n=t.vars,m=n.ease,I=n.startAt,v=n.immediateRender,N=n.lazy,z=n.onUpdate,x=n.onUpdateParams,b=n.callbackScope,E=n.runBackwards,w=n.yoyoEase,O=n.keyframes,M=n.autoRevert,S=t._dur,T=t._startAt,A=t._targets,C=t.parent,P=C&&"nested"===C.data?C.parent._targets:A,F="auto"===t._overwrite,L=t.timeline,R,U,B,V,G,H,W,X,j,Y,q,Z;if(!L||O&&m||(m="none"),t._ease=Dn(m,St.ease),t._yEase=w?wn(Dn(!0===w?m:w,St.ease)):0,w&&t._yoyo&&!t._repeat&&(w=t._yEase,t._yEase=t._ease,t._ease=w),!L){if(T&&T.render(-1,!0).kill(),I){if(Ce(t._startAt=Un.set(A,Ee({data:"isStart",overwrite:!1,parent:C,immediateRender:!0,lazy:zt(N),startAt:null,delay:0,onUpdate:z,onUpdateParams:x,callbackScope:b,stagger:0},I))),v)if(0<e)M||(t._startAt=0);else if(S)return;}else if(E&&S)if(T)M||(t._startAt=0);else if(!(e&&(v=!1),Ce(t._startAt=Un.set(A,De(Se(n,ie),{overwrite:!1,data:"isFromStart",lazy:v&&zt(N),immediateRender:v,stagger:0,parent:C}))),v))k(t._startAt,1e-8);else if(!e)return;for(R=Se(n,ie),t._pt=0,Z=(X=A[0]?pe(A[0]).harness:0)&&n[X.prop],N=S&&zt(N)||N&&!S,U=0;U<A.length;U++){if(W=(G=A[U])._gsap||Lm(A)[U]._gsap,t._ptLookup[U]=Y={},ae[W.id]&&ye(),q=P===A?U:P.indexOf(G),X&&!1!==(j=new X).init(G,Z||R,t,q,P)&&(t._pt=V=new ti(t._pt,G,j.name,0,1,j.render,j,0,j.priority),j._props.forEach(function(e){Y[e]=V}),j.priority&&(H=1)),!X||Z)for(B in R)Cm[B]&&(j=kn(B,R,t,q,G,P))?j.priority&&(H=1):Y[B]=V=In.call(t,G,B,"get",R[B],q,P,0,n.stringFilter);t._op&&t._op[U]&&t.kill(G,t._op[U]),F&&t._pt&&(Vn=t,Cn.killTweensOf(G,Y,"started"),Vn=0),t._pt&&N&&(ae[W.id]=1)}H&&Qn(t),t._onInit&&t._onInit(t)}t._from=!L&&!!n.runBackwards,t._onUpdate=z,t._initted=1},Nn=function(a,t,e,n,i){return kt(a)?a.call(t,e,n,i):Lt(a)&&~a.indexOf("random(")?nn(a):a},Bn=ue+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase",zn=(Bn+",id,stagger,delay,duration,paused").split(","),Un=function(T){function a(t,e,S,M){var r;"number"==typeof e&&(S.duration=e,e=S,S=null);var A=(r=T.call(this,M?e:Te(e),S)||this).vars,d=A.duration,P=A.delay,C=A.immediateRender,v=A.stagger,y=A.overwrite,_=A.keyframes,x=A.defaults,b=r.parent,E=(Gt(t)?Ot(t[0]):"length"in e)?[t]:Ze(t),w,D,L,R,k,F,I,N;if(r._targets=E.length?Lm(E):te("GSAP target "+t+" not found. https://greensock.com",!nt.nullTargetWarn)||[],r._ptLookup=[],r._overwrite=y,_||v||Vt(d)||Vt(P)){if(e=r.vars,(w=r.timeline=new Fn({data:"nested",defaults:x||{}})).kill(),w.parent=V(r),_)Ee(w.vars.defaults,{ease:"none"}),_.forEach(function(e){return w.to(E,e,">")});else{if(R=E.length,I=v?Ke(v):ne,Bt(v))for(k in v)~Bn.indexOf(k)&&(N||(N={}),N[k]=v[k]);for(D=0;D<R;D++){for(k in L={},e)0>zn.indexOf(k)&&(L[k]=e[k]);L.stagger=0,N&&De(L,N),e.yoyoEase&&!e.repeat&&(L.yoyoEase=e.yoyoEase),F=E[D],L.duration=+Nn(d,V(r),D,F,E),L.delay=(+Nn(P,V(r),D,F,E)||0)-r._delay,!v&&1===R&&L.delay&&(r._delay=P=L.delay,r._start+=P,L.delay=0),w.to(F,L,I(D,F,E))}d=P=0}d||r.duration(d=w.duration())}else r.timeline=0;return!0===y&&(Vn=V(r),Cn.killTweensOf(E),Vn=0),b&&Oe(b,V(r)),(C||!d&&!_&&r._start===b._time&&zt(C)&&function a(t){return!t||t._ts&&a(t.parent)}(V(r))&&"nested"!==b.data)&&(r._tTime=-1e-8,r.render(Em(0,-P))),r}G(a,T);var e=a.prototype;return e.render=function(g,t,e){var y=this._time,p=this._tDur,f=this._dur,d=g>p-1e-8&&0<=g?p:1e-8>g?0:g,m,v,_,x,b,E,T,S,M;if(!f)!function(d,t,e,n){var i=0>d._zTime?0:1,p=0>t?0:1,c=d._rDelay,o=0,m;if(c&&d._repeat&&(o=je(0,d._tDur,t),Re(o,c)!==Re(d._tTime,c)&&(i=1-p,d.vars.repeatRefresh&&d._initted&&d.invalidate())),(d._initted||!Be(d,t,n,e))&&(p!==i||n||1e-8===d._zTime||!t&&d._zTime)){for(d._zTime=t||(e?1e-8:0),d.ratio=p,d._from&&(p=1-p),d._time=0,d._tTime=o,e||sn(d,"onStart"),m=d._pt;m;)m.r(p,m.d),m=m._next;!p&&d._startAt&&!d._onUpdate&&d._start&&d._startAt.render(t,!0,n),d._onUpdate&&(e||sn(d,"onUpdate")),o&&d._repeat&&!e&&d.parent&&sn(d,"onRepeat"),(t>=d._tDur||0>t)&&d.ratio===p&&(d.ratio&&Ce(d,1),e||(sn(d,d.ratio?"onComplete":"onReverseComplete",!0),d._prom&&d._prom()))}}(this,g,t,e);else if(d!==this._tTime||!g||e||this._startAt&&0>this._zTime!=0>g){if(m=d,S=this.timeline,this._repeat){if(x=f+this._rDelay,((m=me(d%x))>f||p===d)&&(m=f),(_=~~(d/x))&&_===d/x&&(m=f,_--),(E=this._yoyo&&1&_)&&(M=this._yEase,m=f-m),b=Re(this._tTime,x),m===y&&!e&&this._initted)return this;_!==b&&(!this.vars.repeatRefresh||E||this._lock||(this._lock=e=1,this.render(x*_,!0).invalidate()._lock=0))}if(!this._initted){if(Be(this,m,e,t))return this._tTime=0,this;if(f!==this._dur)return this.render(g,t,e)}for(this._tTime=d,this._time=m,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=T=(M||this._ease)(m/f),this._from&&(this.ratio=T=1-T),y||!m||t||sn(this,"onStart"),v=this._pt;v;)v.r(T,v.d),v=v._next;S&&S.render(0>g?g:!m&&E?-1e-8:S._dur*T,t,e)||this._startAt&&(this._zTime=g),this._onUpdate&&!t&&(0>g&&this._startAt&&this._startAt.render(g,!0,e),sn(this,"onUpdate")),this._repeat&&_!==b&&this.vars.onRepeat&&!t&&this.parent&&sn(this,"onRepeat"),d!==this._tDur&&d||this._tTime!==d||(0>g&&this._startAt&&!this._onUpdate&&this._startAt.render(g,!0,e),(g||!f)&&(g&&0<this._ts||!d&&0>this._ts)&&Ce(this,1),t||0>g&&!y||d<p&&0<this.timeScale()||(sn(this,d===p?"onComplete":"onReverseComplete",!0),this._prom&&this._prom()))}return this},e.targets=function(){return this._targets},e.invalidate=function(){return this._pt=this._op=this._startAt=this._onUpdate=this._act=this._lazy=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(),T.prototype.invalidate.call(this)},e.kill=function(d,t){if(void 0===t&&(t="all"),!(d||t&&"all"!==t)&&(this._lazy=0,this.parent))return on(this);if(this.timeline)return this.timeline.killTweensOf(d,t,Vn&&!0!==Vn.vars.overwrite),this;var m=this._targets,g=d?Ze(d):m,u=this._ptLookup,c=this._pt,p,f,h,y,v,_,x;if((!t||"all"===t)&&function(a,t){for(var e=a.length,r=e===t.length;r&&e--&&a[e]===t[e];);return 0>e}(m,g))return on(this);for(p=this._op=this._op||[],"all"!==t&&(Lt(t)&&(v={},de(t,function(e){return v[e]=1}),t=v),t=function(l,t){var e=l[0]?pe(l[0]).harness:0,s=e&&e.aliases,o,d,p,c;if(!s)return t;for(d in o=De({},t),s)if((d in o))for(p=(c=s[d].split(",")).length;p--;)o[c[p]]=o[d];return o}(m,t)),x=m.length;x--;)if(~g.indexOf(m[x]))for(v in f=u[x],"all"===t?(p[x]=t,y=f,h={}):(h=p[x]=p[x]||{},y=t),y)(_=f&&f[v])&&("kill"in _.d&&!0!==_.d.kill(v)||Ae(this,_,"_pt"),delete f[v]),"all"!==h&&(h[v]=1);return this._initted&&!this._pt&&c&&on(this),this},a.to=function(e,t){return new a(e,t,arguments[2])},a.from=function(e){return new a(e,ve(arguments,1))},a.delayedCall=function(e,t,n,i){return new a(t,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:e,onComplete:t,onReverseComplete:t,onCompleteParams:n,onReverseCompleteParams:n,callbackScope:i})},a.fromTo=function(e){return new a(e,ve(arguments,2))},a.set=function(e,t){return t.duration=0,t.repeatDelay||(t.repeat=0),new a(e,t)},a.killTweensOf=function(a,t,e){return Cn.killTweensOf(a,t,e)},a}(Pn),Vn;Ee(Un.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0}),de("staggerTo,staggerFrom,staggerFromTo",function(a){Un[a]=function(){var t=new Fn,e=Xe.call(arguments,0);return e.splice("staggerFromTo"===a?5:4,0,0),t[a].apply(t,e)}});var $m=function(a,t,e){return a[t]=e},Gn=function(a,t,e){return a[t](e)},Hn=function(a,t,e,r){return a[t](r.fp,e)},jn=function(a,t,e){return a.setAttribute(t,e)},Wn=function(a,t){return kt(a[t])?Gn:Nt(a[t])&&a.setAttribute?jn:$m},Xn=function(a,t){return t.set(t.t,t.p,Sm(1e4*(t.s+t.c*a))/1e4,t)},qn=function(a,t){return t.set(t.t,t.p,!!(t.s+t.c*a),t)},Yn=function(a,t){var e=t._pt,r="";if(!a&&t.b)r=t.b;else if(1===a&&t.e)r=t.e;else{for(;e;)r=e.p+(e.m?e.m(e.s+e.c*a):Sm(1e4*(e.s+e.c*a))/1e4)+r,e=e._next;r+=t.c}t.set(t.t,t.p,r,t)},Zn=function(a,t){for(var e=t._pt;e;)e.r(a,e.d),e=e._next},Jn=function(o,t,e,n){for(var i=this._pt,s;i;)s=i._next,i.p===n&&i.modifier(o,t,e),i=s},Kn=function(a){for(var t=this._pt,r,o;t;)o=t._next,(t.p!==a||t.op)&&t.op!==a?t.dep||(r=1):Ae(this,t,"_pt"),t=o;return!r},$n=function(a,t,e,r){r.mSet(a,t,r.m.call(r.tween,e,r.mt),r)},Qn=function(o){for(var t=o._pt,s,l,d,p;t;){for(s=t._next,l=d;l&&l.pr>t.pr;)l=l._next;(t._prev=l?l._prev:p)?t._prev._next=t:d=t,(t._next=l)?l._prev=t:p=t,t=s}o._pt=d},ti=function(){function e(d,t,e,n,i,r,a,s,o){this.t=t,this.s=n,this.c=i,this.p=e,this.r=r||Xn,this.d=a||this,this.set=s||$m,this.pr=o||0,this._next=d,d&&(d._prev=this)}return e.prototype.modifier=function(a,t,e){this.mSet=this.mSet||this.set,this.set=$n,this.m=a,this.mt=e,this.tween=t},e}();de(ue+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert",function(e){return ie[e]=1}),Jt.TweenMax=Jt.TweenLite=Un,Jt.TimelineLite=Jt.TimelineMax=Fn,Cn=new Fn({sortChildren:!1,defaults:St,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0}),nt.stringFilter=mn;var ei={registerPlugin:function(){for(var a=arguments.length,t=Array(a),e=0;e<a;e++)t[e]=arguments[e];t.forEach(function(e){return ln(e)})},timeline:function(e){return new Fn(e)},getTweensOf:function(a,t){return Cn.getTweensOf(a,t)},getProperty:function(o,s,e,l){Lt(o)&&(o=Ze(o)[0]);var d=pe(o||{}).get,r=e?be:xe;return"native"===e&&(e=""),o?s?r((Cm[s]&&Cm[s].get||d)(o,s,e,l)):function(t,e,a){return r((Cm[t]&&Cm[t].get||d)(o,t,e,a))}:o},quickSetter:function(l,d,p){if(1<(l=Ze(l)).length){var n=l.map(function(e){return ri.quickSetter(e,d,p)}),i=n.length;return function(a){for(var t=i;t--;)n[t](a)}}l=l[0]||{};var r=Cm[d],e=pe(l),a=r?function(t){var e=new r;zm._pt=0,e.init(l,p?t+p:t,zm,0,[l]),e.render(1,e),zm._pt&&Zn(1,zm)}:e.set(l,d);return r?a:function(t){return a(l,d,p?t+p:t,e,1)}},isTweening:function(e){return 0<Cn.getTweensOf(e,!0).length},defaults:function(e){return e&&e.ease&&(e.ease=Dn(e.ease,St.ease)),Me(St,e||{})},config:function(e){return Me(nt,e||{})},registerEffect:function(o){var s=o.name,l=o.effect,e=o.plugins,n=o.defaults,t=o.extendTimeline;(e||"").split(",").forEach(function(e){return e&&!Cm[e]&&!Jt[e]&&te(s+" effect requires "+e+" plugin.")}),oe[s]=function(a,t,e){return l(Ze(a),Ee(t||{},n),e)},t&&(Fn.prototype[s]=function(e,t,a){return this.add(oe[s](e,Bt(t)?t:(a=t)&&{},this),a)})},registerEase:function(a,t){_n[a]=Dn(t)},parseEase:function(a,t){return arguments.length?Dn(a,t):_n},getById:function(e){return Cn.getById(e)},exportRoot:function(a,o){void 0===a&&(a={});var e=new Fn(a),r,s;for(e.smoothChildTiming=zt(a.smoothChildTiming),Cn.remove(e),e._dp=0,e._time=e._tTime=Cn._time,r=Cn._first;r;)s=r._next,(o||r._dur||!(r instanceof Un)||r.vars.onComplete!==r._targets[0])&&Ne(e,r,r._start-r._delay),r=s;return Ne(Cn,e,0),e},utils:{wrap:function a(o,e,t){var n=e-o;return Gt(o)?en(o,a(0,o.length),e):He(t,function(e){return(n+(e-o)%n)%n+o})},wrapYoyo:function o(s,e,t){var n=e-s,r=2*n;return Gt(s)?en(s,o(0,s.length-1),e):He(t,function(e){return s+((e=(r+(e-s)%r)%r)>n?r-e:e)})},distribute:Ke,random:tn,snap:Qe,normalize:function(a,t,e){return rn(a,t,0,1,e)},getUnit:We,clamp:function(a,t,e){return He(e,function(e){return je(a,t,e)})},splitColor:cn,toArray:Ze,mapRange:rn,pipe:function(){for(var a=arguments.length,r=Array(a),e=0;e<a;e++)r[e]=arguments[e];return function(e){return r.reduce(function(a,t){return t(a)},e)}},unitize:function(a,t){return function(e){return a(parseFloat(e))+(t||We(e))}},interpolate:function d(m,g,t,f){var y=isNaN(m+g)?0:function(e){return(1-e)*m+e*g};if(!y){var v=Lt(m),c={},p,_,x,b,E;if(!0===t&&(f=1)&&(t=null),v)m={p:m},g={p:g};else if(Gt(m)&&!Gt(g)){for(x=[],b=m.length,E=b-2,_=1;_<b;_++)x.push(d(m[_-1],m[_]));b--,y=function(a){a*=b;var r=bm(E,~~a);return x[r](a-r)},t=g}else f||(m=De(Gt(m)?[]:{},m));if(!x){for(p in g)In.call(c,m,p,"get",g[p]);y=function(e){return Zn(e,c)||(v?m.p:m)}}}return He(t,y)},shuffle:Je},install:Pm,effects:oe,ticker:vn,updateRoot:Fn.updateRoot,plugins:Cm,globalTimeline:Cn,core:{PropTween:ti,globals:ee,Tween:Un,Timeline:Fn,Animation:Pn,getCache:pe,_removeLinkedListItem:Ae}};de("to,from,fromTo,delayedCall,set,killTweensOf",function(e){return ei[e]=Un[e]}),vn.add(Fn.updateRoot),zm=ei.to({},{duration:0});var ni=function(a,t){for(var e=a._pt;e&&e.p!==t&&e.op!==t&&e.fp!==t;)e=e._next;return e},ii=function(a,o){return{name:a,rawVars:1,init:function(e,a,t){t._onInit=function(e){var n,t;if(Lt(a)&&(n={},de(a,function(e){return n[e]=1}),a=n),o){for(t in n={},a)n[t]=o(a[t]);a=n}!function(o,t){var e=o._targets,a,s,l;for(a in t)for(s=e.length;s--;)(l=o._ptLookup[s][a])&&(l=l.d)&&(l._pt&&(l=ni(l,a)),l&&l.modifier&&l.modifier(t[a],o,e[s],a))}(e,a)}}}},ri=ei.registerPlugin({name:"attr",init:function(o,t,e,n,i){for(var r in t)this.add(o,"setAttribute",(o.getAttribute(r)||0)+"",t[r],n,i,0,0,r),this._props.push(r)}},{name:"endArray",init:function(a,t){for(var e=t.length;e--;)this.add(a,e,a[e]||0,t[e])}},ii("roundProps",$e),ii("modifiers"),ii("snap",Qe))||ei;Un.version=Fn.version=ri.version="3.2.6",Im=1,Ut()&&yn(),_n.Power0,_n.Power1,_n.Power2,_n.Power3,_n.Power4,_n.Linear,_n.Quad,_n.Cubic,_n.Quart,_n.Quint,_n.Strong,_n.Elastic,_n.Back,_n.SteppedEase,_n.Bounce,_n.Sine,_n.Expo,_n.Circ;var ai={},di=180/ym,mi=ym/180,gi=um,vi=/([A-Z])/g,yi={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},bi=function(a,t){return t.set(t.t,t.p,Sm(1e4*(t.s+t.c*a))/1e4+t.u,t)},Ei=function(a,t){return t.set(t.t,t.p,1===a?t.e:Sm(1e4*(t.s+t.c*a))/1e4+t.u,t)},wi=function(a,t){return t.set(t.t,t.p,a?Sm(1e4*(t.s+t.c*a))/1e4+t.u:t.b,t)},Di=function(a,t){var e=t.s+t.c*a;t.set(t.t,t.p,~~(e+(0>e?-.5:.5))+t.u,t)},Mi=function(a,t){return t.set(t.t,t.p,a?t.e:t.b,t)},Si=function(a,t){return t.set(t.t,t.p,1===a?t.e:t.b,t)},Ti=function(a,t,e){return a.style[t]=e},Ai=function(a,t,e){return a.style.setProperty(t,e)},Ci=function(a,t,e){return a._gsap[t]=e},Pi=function(a,t,e){return a._gsap.scaleX=a._gsap.scaleY=e},Fi=function(o,t,e,n,i){var r=o._gsap;r.scaleX=r.scaleY=e,r.renderTransform(i,r)},Li=function(o,t,e,n,i){var r=o._gsap;r[t]=e,r.renderTransform(i,r)},Ri="transform",tu=Ri+"Origin",au=function(a,t){var e=ou.createElementNS?ou.createElementNS((t||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),a):ou.createElement(a);return e.style?e:ou.createElement(a)},Oi=function a(t,e,n){var i=getComputedStyle(t);return i[e]||i.getPropertyValue(e.replace(vi,"-$1").toLowerCase())||i.getPropertyValue(e)||!n&&a(t,Bi(e)||e,1)||""},Ni=["O","Moz","ms","Ms","Webkit"],Bi=function(a,o,e){var n=(o||cu).style,i=5;if(a in n&&!e)return a;for(a=a.charAt(0).toUpperCase()+a.substr(1);i--&&!(Ni[i]+a in n););return 0>i?null:(3===i?"ms":0<=i?Ni[i]:"")+a},zi=function(){"undefined"!=typeof window&&(fr=window,ou=fr.document,su=ou.documentElement,cu=au("div")||{style:{}},xu=au("div"),Ri=Bi(Ri),tu=Bi(tu),cu.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",Au=!!Bi("perspective"),pu=1)},Ui=function o(t){var e=au("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),i=this.parentNode,r=this.nextSibling,a=this.style.cssText,s;if(su.appendChild(e),e.appendChild(this),this.style.display="block",t)try{s=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=o}catch(e){}else this._gsapBBox&&(s=this._gsapBBox());return i&&(r?i.insertBefore(this,r):i.appendChild(this)),su.removeChild(e),this.style.cssText=a,s},Vi=function(a,t){for(var e=t.length;e--;)if(a.hasAttribute(t[e]))return a.getAttribute(t[e])},Gi=function(a){var t;try{t=a.getBBox()}catch(e){t=Ui.call(a,!0)}return t&&(t.width||t.height)||a.getBBox===Ui||(t=Ui.call(a,!0)),!t||t.width||t.x||t.y?t:{x:+Vi(a,["x","cx","x1"])||0,y:+Vi(a,["y","cy","y1"])||0,width:0,height:0}},Hi=function(e){return e.getCTM&&(!e.parentNode||e.ownerSVGElement)&&Gi(e)},ji=function(a,t){if(t){var r=a.style;t in ai&&(t=Ri),r.removeProperty?("ms"!==t.substr(0,2)&&"webkit"!==t.substr(0,6)||(t="-"+t),r.removeProperty(t.replace(vi,"-$1").toLowerCase())):r.removeAttribute(t)}},Wi=function(o,t,e,n,i,r){var a=new ti(o._pt,t,e,0,1,r?Si:Mi);return o._pt=a,a.b=n,a.e=i,o._props.push(e),a},Xi={deg:1,rad:1,turn:1},qi=function y(t,e,n,i){var r=parseFloat(n)||0,v=(n+"").trim().substr((r+"").length)||"px",u=cu.style,c=/(?:left|right|width|margin|padding|x)/i.test(e),p="svg"===t.tagName.toLowerCase(),f=(p?"client":"offset")+(c?"Width":"Height"),d="px"===i,m="%"===i,g,_,x,b;return i===v||!r||Xi[i]||Xi[v]?r:("px"!==v&&!d&&(r=y(t,e,n,"px")),b=t.getCTM&&Hi(t),m&&(ai[e]||~e.indexOf("adius"))?me(100*(r/(b?t.getBBox()[c?"width":"height"]:t[f]))):(u[c?"width":"height"]=100+(d?v:i),_=~e.indexOf("adius")||"em"===i&&t.appendChild&&!p?t:t.parentNode,b&&(_=(t.ownerSVGElement||{}).parentNode),_&&_!==ou&&_.appendChild||(_=ou.body),(x=_._gsap)&&m&&x.width&&c&&x.time===vn.time?me(100*(r/x.width)):((m||"%"===v)&&(u.position=Oi(t,"position")),_===t&&(u.position="static"),_.appendChild(cu),g=cu[f],_.removeChild(cu),u.position="absolute",c&&m&&((x=pe(_)).time=vn.time,x.width=_[f]),me(d?g*r/100:g&&r?100/g*r:0))))},Yi=function(a,t,o,n){var i;return pu||zi(),t in yi&&"transform"!==t&&~(t=yi[t]).indexOf(",")&&(t=t.split(",")[0]),ai[t]&&"transform"!==t?(i=ar(a,n),i="transformOrigin"===t?sr(Oi(a,tu))+" "+i.zOrigin+"px":i[t]):(!(i=a.style[t])||"auto"===i||n||~(i+"").indexOf("calc("))&&(i=$i[t]&&$i[t](a,t,o)||Oi(a,t)||fe(a,t)||("opacity"===t?1:0)),o&&!~(i+"").indexOf(" ")?qi(a,t,i,o)+o:i},Zi=function(b,t,E,T){if(!E||"none"===E){var S=Bi(t,b,1),r=S&&Oi(b,S,1);r&&r!==E&&(t=S,E=r)}var a=new ti(this._pt,b.style,t,0,1,Yn),y=0,M=0,A,w,P,C,D,L,R,k,F,I,N,z;if(a.b=E,a.e=T,E+="","auto"==(T+="")&&(b.style[t]=T,T=Oi(b,t)||T,b.style[t]=E),mn(A=[E,T]),T=A[1],P=(E=A[0]).match(Wt)||[],(T.match(Wt)||[]).length){for(;w=Wt.exec(T);)R=w[0],F=T.substring(y,w.index),D?D=(D+1)%5:"rgba("!==F.substr(-5)&&"hsla("!==F.substr(-5)||(D=1),R!==(L=P[M++]||"")&&(C=parseFloat(L)||0,N=L.substr((C+"").length),(z="="===R.charAt(1)?+(R.charAt(0)+"1"):0)&&(R=R.substr(2)),k=parseFloat(R),I=R.substr((k+"").length),y=Wt.lastIndex-I.length,I||(I=I||nt.units[t]||N,y===T.length&&(T+=I,a.e+=I)),N!==I&&(C=qi(b,t,L,I)||0),a._pt={_next:a._pt,p:F||1===M?F:",",s:C,c:z?z*k:k-C,m:D&&4>D?Sm:0});a.c=y<T.length?T.substring(y,T.length):""}else a.r="display"===t&&"none"===T?Si:Mi;return qt.test(T)&&(a.e=0),this._pt=a,a},Ji={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},Ki=function(d,t){if(t.tween&&t.tween._time===t.tween._dur){var e=t.t,a=e.style,s=t.u,p=e._gsap,l,c,m;if("all"===s||!0===s)a.cssText="",c=1;else for(m=(s=s.split(",")).length;-1<--m;)l=s[m],ai[l]&&(c=1,l="transformOrigin"===l?tu:Ri),ji(e,l);c&&(ji(e,Ri),p&&(p.svg&&e.removeAttribute("transform"),ar(e,1),p.uncache=1))}},$i={clearProps:function(o,t,e,n,i){if("isFromStart"!==i.data){var r=o._pt=new ti(o._pt,t,e,0,0,Ki);return r.u=n,r.pr=-10,r.tween=i,o._props.push(e),1}}},Qi=[1,0,0,1,0,0],tr={},er=function(e){return"matrix(1, 0, 0, 1, 0, 0)"===e||"none"===e||!e},nr=function(a){var t=Oi(a,Ri);return er(t)?Qi:t.substr(7).match(jt).map(me)},ir=function(d,t){var e=d._gsap||pe(d),s=d.style,o=nr(d),p,c,m,u;return e.svg&&d.getAttribute("transform")?"1,0,0,1,0,0"===(o=[(m=d.transform.baseVal.consolidate().matrix).a,m.b,m.c,m.d,m.e,m.f]).join(",")?Qi:o:(o!==Qi||d.offsetParent||d===su||e.svg||(m=s.display,s.display="block",(p=d.parentNode)&&d.offsetParent||(u=1,c=d.nextSibling,su.appendChild(d)),o=nr(d),m?s.display=m:ji(d,"display"),u&&(c?p.insertBefore(d,c):p?p.appendChild(d):su.removeChild(d))),t&&6<o.length?[o[0],o[1],o[4],o[5],o[12],o[13]]:o)},rr=function(T,t,e,n,i,r){var a=T._gsap,h=i||ir(T,!0),u=a.xOrigin||0,c=a.yOrigin||0,p=a.xOffset||0,f=a.yOffset||0,d=h[0],m=h[1],g=h[2],v=h[3],y=h[4],S=h[5],M=t.split(" "),b=parseFloat(M[0])||0,A=parseFloat(M[1])||0,P,C,D;e?h!==Qi&&(C=d*v-m*g)&&(D=b*(-m/C)+A*(d/C)-(d*S-m*y)/C,b=b*(v/C)+A*(-g/C)+(g*S-v*y)/C,A=D):(b=(P=Gi(T)).x+(~M[0].indexOf("%")?b/100*P.width:b),A=P.y+(~(M[1]||M[0]).indexOf("%")?A/100*P.height:A)),n||!1!==n&&a.smooth?(y=b-u,S=A-c,a.xOffset=p+(y*d+S*g)-y,a.yOffset=f+(y*m+S*v)-S):a.xOffset=a.yOffset=0,a.xOrigin=b,a.yOrigin=A,a.smooth=!!n,a.origin=t,a.originIsAbsolute=!!e,T.style[tu]="0px 0px",r&&(Wi(r,a,"xOrigin",u,b),Wi(r,a,"yOrigin",c,A),Wi(r,a,"xOffset",p,a.xOffset),Wi(r,a,"yOffset",f,a.yOffset)),T.setAttribute("data-svg-origin",b+" "+A)},ar=function(z,t){var e=z._gsap||new Qm(z);if("x"in e&&!t&&!e.uncache)return e;var n=z.style,k=0>e.scaleX,O=Oi(z,tu)||"0",N,U,B,V,G,H,W,X,j,Y,q,Z,J,K,Q,$,ee,te,ae,re,ne,ie,oe,se,le,de,pe,ce,ue,ge,fe,he;return N=U=B=H=W=X=j=Y=q=0,V=G=1,e.svg=z.getCTM&&Hi(z),K=ir(z,e.svg),e.svg&&(se=!e.uncache&&z.getAttribute("data-svg-origin"),rr(z,se||O,!!se||e.originIsAbsolute,!1!==e.smooth,K)),Z=e.xOrigin||0,J=e.yOrigin||0,K!==Qi&&(te=K[0],ae=K[1],re=K[2],ne=K[3],N=ie=K[4],U=oe=K[5],6===K.length?(V=_m(te*te+ae*ae),G=_m(ne*ne+re*re),H=te||ae?gi(ae,te)*di:0,(j=re||ne?gi(re,ne)*di+H:0)&&(G*=hm(j*mi)),e.svg&&(N-=Z-(Z*te+J*re),U-=J-(Z*ae+J*ne))):(he=K[6],ge=K[7],pe=K[8],ce=K[9],ue=K[10],fe=K[11],N=K[12],U=K[13],B=K[14],W=(Q=gi(he,ue))*di,Q&&(se=ie*($=hm(-Q))+pe*(ee=fm(-Q)),le=oe*$+ce*ee,de=he*$+ue*ee,pe=ie*-ee+pe*$,ce=oe*-ee+ce*$,ue=he*-ee+ue*$,fe=ge*-ee+fe*$,ie=se,oe=le,he=de),X=(Q=gi(-re,ue))*di,Q&&($=hm(-Q),fe=ne*(ee=fm(-Q))+fe*$,te=se=te*$-pe*ee,ae=le=ae*$-ce*ee,re=de=re*$-ue*ee),H=(Q=gi(ae,te))*di,Q&&(se=te*($=hm(Q))+ae*(ee=fm(Q)),le=ie*$+oe*ee,ae=ae*$-te*ee,oe=oe*$-ie*ee,te=se,ie=le),W&&359.9<vm(W)+vm(H)&&(W=H=0,X=180-X),V=me(_m(te*te+ae*ae+re*re)),G=me(_m(oe*oe+he*he)),Q=gi(ie,oe),j=2e-4<vm(Q)?Q*di:0,q=fe?1/(0>fe?-fe:fe):0),e.svg&&(K=z.getAttribute("transform"),e.forceCSS=z.setAttribute("transform","")||!er(Oi(z,Ri)),K&&z.setAttribute("transform",K))),90<vm(j)&&270>vm(j)&&(k?(V*=-1,j+=0>=H?180:-180,H+=0>=H?180:-180):(G*=-1,j+=0>=j?180:-180)),e.x=((e.xPercent=N&&Sm(z.offsetWidth/2)===Sm(-N)?-50:0)?0:N)+"px",e.y=((e.yPercent=U&&Sm(z.offsetHeight/2)===Sm(-U)?-50:0)?0:U)+"px",e.z=B+"px",e.scaleX=me(V),e.scaleY=me(G),e.rotation=me(H)+"deg",e.rotationX=me(W)+"deg",e.rotationY=me(X)+"deg",e.skewX=j+"deg",e.skewY=Y+"deg",e.transformPerspective=q+"px",(e.zOrigin=parseFloat(O.split(" ")[2])||0)&&(n[tu]=sr(O)),e.xOffset=e.yOffset=0,e.force3D=nt.force3D,e.renderTransform=e.svg?ur:Au?hr:lr,e.uncache=0,e},sr=function(e){return(e=e.split(" "))[0]+" "+e[1]},or=function(a,t,e){var r=We(t);return me(parseFloat(t)+parseFloat(qi(a,"x",e+"px",r)))+r},lr=function(a,t){t.z="0px",t.rotationY=t.rotationX="0deg",t.force3D=0,hr(a,t)},hr=function(T,t){var e=t||this,n=e.xPercent,i=e.yPercent,r=e.x,S=e.y,M=e.z,A=e.rotation,l=e.rotationY,h=e.rotationX,u=e.skewX,c=e.skewY,p=e.scaleX,f=e.scaleY,d=e.transformPerspective,m=e.force3D,g=e.target,v=e.zOrigin,y="",P="auto"===m&&T&&1!==T||!0===m;if(v&&("0deg"!==h||"0deg"!==l)){var x=parseFloat(l)*mi,C=fm(x),w=hm(x),D;x=parseFloat(h)*mi,D=hm(x),r=or(g,r,C*D*-v),S=or(g,S,-fm(x)*-v),M=or(g,M,w*D*-v+v)}"0px"!==d&&(y+="perspective("+d+") "),(n||i)&&(y+="translate("+n+"%, "+i+"%) "),(P||"0px"!==r||"0px"!==S||"0px"!==M)&&(y+="0px"!==M||P?"translate3d("+r+", "+S+", "+M+") ":"translate("+r+", "+S+") "),"0deg"!==A&&(y+="rotate("+A+") "),"0deg"!==l&&(y+="rotateY("+l+") "),"0deg"!==h&&(y+="rotateX("+h+") "),"0deg"===u&&"0deg"===c||(y+="skew("+u+", "+c+") "),1===p&&1===f||(y+="scale("+p+", "+f+") "),g.style[Ri]=y||"translate(0, 0)"},ur=function(T,t){var e=t||this,o=e.xPercent,l=e.yPercent,h=e.x,u=e.y,c=e.rotation,S=e.skewX,M=e.skewY,A=e.scaleX,m=e.scaleY,g=e.target,v=e.xOrigin,y=e.yOrigin,_=e.xOffset,x=e.yOffset,b=e.forceCSS,E=parseFloat(h),P=parseFloat(u),C,L,R,k,F;c=parseFloat(c),S=parseFloat(S),(M=parseFloat(M))&&(S+=M=parseFloat(M),c+=M),c||S?(c*=mi,S*=mi,C=hm(c)*A,L=fm(c)*A,R=fm(c-S)*-m,k=hm(c-S)*m,S&&(M*=mi,F=gm(S-M),R*=F=_m(1+F*F),k*=F,M&&(F=gm(M),C*=F=_m(1+F*F),L*=F)),C=me(C),L=me(L),R=me(R),k=me(k)):(C=A,k=m,L=R=0),(E&&!~(h+"").indexOf("px")||P&&!~(u+"").indexOf("px"))&&(E=qi(g,"x",h,"px"),P=qi(g,"y",u,"px")),(v||y||_||x)&&(E=me(E+v-(v*C+y*R)+_),P=me(P+y-(v*L+y*k)+x)),(o||l)&&(F=g.getBBox(),E=me(E+o/100*F.width),P=me(P+l/100*F.height)),F="matrix("+C+","+L+","+R+","+k+","+E+","+P+")",g.setAttribute("transform",F),b&&(g.style[Ri]=F)},cr=function(d,t,e,n,i,r){var a=Lt(i),l=parseFloat(i)*(a&&~i.indexOf("rad")?di:1),p=r?l*r:l-n,m=n+p+"deg",c,g;return a&&("short"===(c=i.split("_")[1])&&(p%=360)!=p%180&&(p+=0>p?360:-360),"cw"===c&&0>p?p=(p+36e9)%360-360*~~(p/360):"ccw"===c&&0<p&&(p=(p-36e9)%360-360*~~(p/360))),d._pt=g=new ti(d._pt,t,e,n,p,Ei),g.e=m,g.u="deg",d._props.push(e),g},pr=function(d,t,e){var n=xu.style,p=e._gsap,c,m,u,g,f,y,v;for(m in n.cssText=getComputedStyle(e).cssText+";position:absolute;display:block;",n[Ri]=t,ou.body.appendChild(xu),c=ar(xu,1),ai)(u=p[m])!==(g=c[m])&&0>"perspective,force3D,transformOrigin,svgOrigin".indexOf(m)&&(f=We(u)===(v=We(g))?parseFloat(u):qi(e,m,u,v),y=parseFloat(g),d._pt=new ti(d._pt,p,m,f,y-f,bi),d._pt.u=v||0,d._props.push(m));ou.body.removeChild(xu)},fr,ou,su,pu,cu,xu,Mu,Au;de("padding,margin,Width,Radius",function(a,t){var l=(3>t?["Top","Right","Bottom","Left"]:["TopLeft","TopRight","BottomRight","BottomLeft"]).map(function(e){return 2>t?a+e:"border"+e+a});$i[1<t?"border"+a:a]=function(s,t,d,e,n){var r,i;return 4>arguments.length?(r=l.map(function(t){return Yi(s,t,d)}),5===(i=r.join(" ")).split(r[0]).length?r[0]:i):void(r=(e+"").split(" "),i={},l.forEach(function(a,t){return i[a]=r[t]=r[t]||r[0|(t-1)/2]}),s.init(t,i,n))}});var Pu={name:"css",register:zi,targetTest:function(e){return e.style&&e.nodeType},init:function(T,t,e,n,i){var r=this._props,S=T.style,M,A,P,C,D,L,R,k,F,I,N,z,O,U,B,V,G,H,W;for(R in pu||zi(),t)if("autoRound"!==R&&(A=t[R],!Cm[R]||!kn(R,t,e,n,T,i)))if(D=typeof A,L=$i[R],"function"===D&&(D=typeof(A=A.call(e,n,T,i))),"string"===D&&~A.indexOf("random(")&&(A=nn(A)),L)L(this,T,R,A,e)&&(B=1);else if("--"===R.substr(0,2))this.add(S,"setProperty",getComputedStyle(T).getPropertyValue(R)+"",A+"",n,i,0,0,R);else{if(!(M=Yi(T,R),C=parseFloat(M),(I="string"===D&&"="===A.charAt(1)?+(A.charAt(0)+"1"):0)&&(A=A.substr(2)),P=parseFloat(A),R in yi&&("autoAlpha"===R&&(1===C&&"hidden"===Yi(T,"visibility")&&P&&(C=0),Wi(this,S,"visibility",C?"inherit":"hidden",P?"inherit":"hidden",!P)),"scale"!==R&&"transform"!==R&&~(R=yi[R]).indexOf(",")&&(R=R.split(",")[0])),N=R in ai))R in S||(R=Bi(R)||R);else if(z||((O=T._gsap).renderTransform||ar(T),U=!1!==t.smoothOrigin&&O.smooth,(z=this._pt=new ti(this._pt,S,Ri,0,1,O.renderTransform,O,0,-1)).dep=1),"scale"===R)this._pt=new ti(this._pt,O,"scaleY",O.scaleY,I?I*P:P-O.scaleY),r.push("scaleY",R),R+="X";else{if("transformOrigin"===R){G=void 0,H=void 0,W=void 0,G=(V=A).split(" "),H=G[0],W=G[1]||"50%","top"!==H&&"bottom"!==H&&"left"!==W&&"right"!==W||(V=H,H=W,W=V),G[0]=Ji[H]||H,G[1]=Ji[W]||W,A=G.join(" "),O.svg?rr(T,A,0,U,0,this):((F=parseFloat(A.split(" ")[2])||0)!==O.zOrigin&&Wi(this,O,"zOrigin",O.zOrigin,F),Wi(this,S,R,sr(M),sr(A)));continue}if("svgOrigin"===R){rr(T,A,1,U,0,this);continue}if(R in tr){cr(this,O,R,C,A,I);continue}if("smoothOrigin"===R){Wi(this,O,"smooth",O.smooth,A);continue}if("force3D"===R){O[R]=A;continue}if("transform"===R){pr(this,A,T);continue}}if(N||(P||0===P)&&(C||0===C)&&!/[\s,\(]\S/.test(A)&&R in S)P||(P=0),(k=(M+"").substr((C+"").length))!==(F=(A+"").substr((P+"").length)||(R in nt.units?nt.units[R]:k))&&(C=qi(T,R,M,F)),this._pt=new ti(this._pt,N?O:S,R,C,I?I*P:P-C,"px"!==F||!1===t.autoRound||N?bi:Di),this._pt.u=F||0,k!==F&&(this._pt.b=M,this._pt.r=wi);else if(R in S)Zi.call(this,T,R,M,A);else{if(!(R in T)){Qt(R,A);continue}this.add(T,R,T[R],A,n,i)}r.push(R)}B&&Qn(this)},get:Yi,aliases:yi,getSetter:function(a,t,r){var n=yi[t];return n&&0>n.indexOf(",")&&(t=n),t in ai&&t!==tu&&(a._gsap.x||Yi(a,"x"))?r&&Mu===r?"scale"===t?Pi:Ci:(Mu=r||{})&&("scale"===t?Fi:Li):a.style&&!Nt(a.style[t])?Ti:~t.indexOf("-")?Ai:Wn(a,t)},core:{_removeProperty:ji,_getMatrix:ir}},gr,Du;ri.utils.checkPrefix=Bi,Du=de("x,y,z,scale,scaleX,scaleY,xPercent,yPercent,"+(gr="rotation,rotationX,rotationY,skewX,skewY")+",transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective",function(e){ai[e]=1}),de(gr,function(e){nt.units[e]="deg",tr[e]=1}),yi[Du[13]]="x,y,z,scale,scaleX,scaleY,xPercent,yPercent,"+gr,de("0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY",function(a){var t=a.split(":");yi[t[1]]=Du[t[0]]}),de("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(e){nt.units[e]="px"}),ri.registerPlugin(Pu);for(var Hu=ri.registerPlugin(Pu)||ri,vr=(Hu.core.Tween,[]),yr=0;256>yr;yr++)vr[yr]=(16>yr?"0":"")+yr.toString(16);var eg={DEG2RAD:ym/180,RAD2DEG:180/ym,generateUUID:function(){var a=0|4294967295*Math.random(),t=0|4294967295*Math.random(),e=0|4294967295*Math.random(),r=0|4294967295*Math.random();return(vr[255&a]+vr[255&a>>8]+vr[255&a>>16]+vr[255&a>>24]+"-"+vr[255&t]+vr[255&t>>8]+"-"+vr[64|15&t>>16]+vr[255&t>>24]+"-"+vr[128|63&e]+vr[255&e>>8]+"-"+vr[255&e>>16]+vr[255&e>>24]+vr[255&r]+vr[255&r>>8]+vr[255&r>>16]+vr[255&r>>24]).toUpperCase()},clamp:function(a,t,e){return Em(t,bm(e,a))},euclideanModulo:function(a,t){return(a%t+t)%t},mapLinear:function(a,t,e,n,i){return n+(a-t)*(i-n)/(e-t)},lerp:function(a,t,e){return(1-e)*a+e*t},smoothstep:function(a,r,e){return a<=r?0:a>=e?1:(a=(a-r)/(e-r))*a*(3-2*a)},smootherstep:function(a,r,e){return a<=r?0:a>=e?1:(a=(a-r)/(e-r))*a*a*(a*(6*a-15)+10)},randInt:function(a,t){return a+Tm(Math.random()*(t-a+1))},randFloat:function(a,t){return a+Math.random()*(t-a)},randFloatSpread:function(e){return e*(.5-Math.random())},degToRad:function(e){return e*eg.DEG2RAD},radToDeg:function(e){return e*eg.RAD2DEG},isPowerOfTwo:function(e){return 0==(e&e-1)&&0!==e},ceilPowerOfTwo:function(e){return xm(2,pm(lm(e)/sm))},floorPowerOfTwo:function(e){return xm(2,Tm(lm(e)/sm))},setQuaternionFromProperEuler:function(m,t,e,n,i){var r=hm,a=fm,s=r(e/2),o=a(e/2),l=r((t+n)/2),g=a((t+n)/2),u=r((t-n)/2),c=a((t-n)/2),p=r((n-t)/2),f=a((n-t)/2);"XYX"===i?m.set(s*g,o*u,o*c,s*l):"YZY"===i?m.set(o*c,s*g,o*u,s*l):"ZXZ"===i?m.set(o*u,o*c,s*g,s*l):"XZX"===i?m.set(s*g,o*f,o*p,s*l):"YXY"===i?m.set(o*p,s*g,o*f,s*l):"ZYZ"===i?m.set(o*f,o*p,s*g,s*l):console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}},br;Object.assign(H.prototype,{addEventListener:function(a,t){void 0===this._listeners&&(this._listeners={});var e=this._listeners;void 0===e[a]&&(e[a]=[]),-1===e[a].indexOf(t)&&e[a].push(t)},hasEventListener:function(a,t){if(void 0===this._listeners)return!1;var e=this._listeners;return void 0!==e[a]&&-1!==e[a].indexOf(t)},removeEventListener:function(a,t){if(void 0!==this._listeners){var e=this._listeners[a];if(void 0!==e){var r=e.indexOf(t);-1!==r&&e.splice(r,1)}}},dispatchEvent:function(a){if(void 0!==this._listeners){var t=this._listeners[a.type];if(void 0!==t){a.target=this;for(var e=t.slice(0),n=0,o=e.length;n<o;n++)e[n].call(this,a)}}}}),Object.defineProperties(j.prototype,{width:{get:function(){return this.x},set:function(e){this.x=e}},height:{get:function(){return this.y},set:function(e){this.y=e}}}),Object.assign(j.prototype,{isVector2:!0,set:function(a,t){return this.x=a,this.y=t,this},setScalar:function(e){return this.x=e,this.y=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setComponent:function(a,t){switch(a){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+a);}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e);}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(e){return this.x=e.x,this.y=e.y,this},add:function(a,t){return void 0===t?(this.x+=a.x,this.y+=a.y,this):(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(a,t))},addScalar:function(e){return this.x+=e,this.y+=e,this},addVectors:function(a,t){return this.x=a.x+t.x,this.y=a.y+t.y,this},addScaledVector:function(a,t){return this.x+=a.x*t,this.y+=a.y*t,this},sub:function(a,t){return void 0===t?(this.x-=a.x,this.y-=a.y,this):(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(a,t))},subScalar:function(e){return this.x-=e,this.y-=e,this},subVectors:function(a,t){return this.x=a.x-t.x,this.y=a.y-t.y,this},multiply:function(e){return this.x*=e.x,this.y*=e.y,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this},divide:function(e){return this.x/=e.x,this.y/=e.y,this},divideScalar:function(e){return this.multiplyScalar(1/e)},applyMatrix3:function(a){var t=this.x,e=this.y,r=a.elements;return this.x=r[0]*t+r[3]*e+r[6],this.y=r[1]*t+r[4]*e+r[7],this},min:function(e){return this.x=bm(this.x,e.x),this.y=bm(this.y,e.y),this},max:function(e){return this.x=Em(this.x,e.x),this.y=Em(this.y,e.y),this},clamp:function(a,t){return this.x=Em(a.x,bm(t.x,this.x)),this.y=Em(a.y,bm(t.y,this.y)),this},clampScalar:function(a,t){return this.x=Em(a,bm(t,this.x)),this.y=Em(a,bm(t,this.y)),this},clampLength:function(a,t){var e=this.length();return this.divideScalar(e||1).multiplyScalar(Em(a,bm(t,e)))},floor:function(){return this.x=Tm(this.x),this.y=Tm(this.y),this},ceil:function(){return this.x=pm(this.x),this.y=pm(this.y),this},round:function(){return this.x=Sm(this.x),this.y=Sm(this.y),this},roundToZero:function(){return this.x=0>this.x?pm(this.x):Tm(this.x),this.y=0>this.y?pm(this.y):Tm(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(e){return this.x*e.x+this.y*e.y},cross:function(e){return this.x*e.y-this.y*e.x},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return _m(this.x*this.x+this.y*this.y)},manhattanLength:function(){return vm(this.x)+vm(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){return um(-this.y,-this.x)+ym},distanceTo:function(e){return _m(this.distanceToSquared(e))},distanceToSquared:function(a){var t=this.x-a.x,e=this.y-a.y;return t*t+e*e},manhattanDistanceTo:function(e){return vm(this.x-e.x)+vm(this.y-e.y)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(a,t){return this.x+=(a.x-this.x)*t,this.y+=(a.y-this.y)*t,this},lerpVectors:function(a,t,e){return this.subVectors(t,a).multiplyScalar(e).add(a)},equals:function(e){return e.x===this.x&&e.y===this.y},fromArray:function(a,t){return void 0===t&&(t=0),this.x=a[t],this.y=a[t+1],this},toArray:function(a,r){return void 0===a&&(a=[]),void 0===r&&(r=0),a[r]=this.x,a[r+1]=this.y,a},fromBufferAttribute:function(a,t,e){return void 0!==e&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=a.getX(t),this.y=a.getY(t),this},rotateAround:function(o,t){var e=hm(t),n=fm(t),i=this.x-o.x,r=this.y-o.y;return this.x=i*e-r*n+o.x,this.y=i*n+r*e+o.y,this},random:function(){return this.x=Math.random(),this.y=Math.random(),this}}),Object.assign(W.prototype,{isMatrix3:!0,set:function(d,t,e,n,i,r,a,s,o){var l=this.elements;return l[0]=d,l[1]=n,l[2]=a,l[3]=t,l[4]=i,l[5]=s,l[6]=e,l[7]=r,l[8]=o,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return new this.constructor().fromArray(this.elements)},copy:function(a){var t=this.elements,e=a.elements;return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],this},extractBasis:function(a,t,e){return a.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),e.setFromMatrix3Column(this,2),this},setFromMatrix4:function(a){var t=a.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this},multiply:function(e){return this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(T,t){var e=T.elements,n=t.elements,i=this.elements,r=e[0],a=e[3],s=e[6],o=e[1],l=e[4],h=e[7],u=e[2],c=e[5],p=e[8],f=n[0],d=n[3],m=n[6],g=n[1],v=n[4],y=n[7],_=n[2],x=n[5],b=n[8];return i[0]=r*f+a*g+s*_,i[3]=r*d+a*v+s*x,i[6]=r*m+a*y+s*b,i[1]=o*f+l*g+h*_,i[4]=o*d+l*v+h*x,i[7]=o*m+l*y+h*b,i[2]=u*f+c*g+p*_,i[5]=u*d+c*v+p*x,i[8]=u*m+c*y+p*b,this},multiplyScalar:function(a){var t=this.elements;return t[0]*=a,t[3]*=a,t[6]*=a,t[1]*=a,t[4]*=a,t[7]*=a,t[2]*=a,t[5]*=a,t[8]*=a,this},determinant:function(){var d=this.elements,t=d[0],e=d[1],n=d[2],i=d[3],r=d[4],a=d[5],s=d[6],o=d[7],l=d[8];return t*r*l-t*a*o-e*i*l+e*a*s+n*i*o-n*r*s},getInverse:function(y,t){void 0!==t&&console.warn("THREE.Matrix3: .getInverse() can no longer be configured to throw on degenerate.");var e=y.elements,n=this.elements,i=e[0],r=e[1],a=e[2],s=e[3],o=e[4],l=e[5],h=e[6],u=e[7],c=e[8],p=c*o-l*u,f=l*h-c*s,d=u*s-o*h,m=i*p+r*f+a*d;if(0==m)return this.set(0,0,0,0,0,0,0,0,0);var g=1/m;return n[0]=p*g,n[1]=(a*u-c*r)*g,n[2]=(l*r-a*o)*g,n[3]=f*g,n[4]=(c*i-a*h)*g,n[5]=(a*s-l*i)*g,n[6]=d*g,n[7]=(r*h-u*i)*g,n[8]=(o*i-r*s)*g,this},transpose:function(){var a=this.elements,e;return e=a[1],a[1]=a[3],a[3]=e,e=a[2],a[2]=a[6],a[6]=e,e=a[5],a[5]=a[7],a[7]=e,this},getNormalMatrix:function(e){return this.setFromMatrix4(e).getInverse(this).transpose()},transposeIntoArray:function(a){var t=this.elements;return a[0]=t[0],a[1]=t[3],a[2]=t[6],a[3]=t[1],a[4]=t[4],a[5]=t[7],a[6]=t[2],a[7]=t[5],a[8]=t[8],this},setUvTransform:function(d,t,e,n,i,r,a){var s=hm(i),o=fm(i);this.set(e*s,e*o,-e*(s*r+o*a)+r+d,-n*o,n*s,-n*(-o*r+s*a)+a+t,0,0,1)},scale:function(a,t){var e=this.elements;return e[0]*=a,e[3]*=a,e[6]*=a,e[1]*=t,e[4]*=t,e[7]*=t,this},rotate:function(d){var t=hm(d),e=fm(d),n=this.elements,i=n[0],r=n[3],a=n[6],s=n[1],o=n[4],l=n[7];return n[0]=t*i+e*s,n[3]=t*r+e*o,n[6]=t*a+e*l,n[1]=-e*i+t*s,n[4]=-e*r+t*o,n[7]=-e*a+t*l,this},translate:function(a,t){var e=this.elements;return e[0]+=a*e[2],e[3]+=a*e[5],e[6]+=a*e[8],e[1]+=t*e[2],e[4]+=t*e[5],e[7]+=t*e[8],this},equals:function(a){for(var t=this.elements,e=a.elements,r=0;9>r;r++)if(t[r]!==e[r])return!1;return!0},fromArray:function(a,t){void 0===t&&(t=0);for(var r=0;9>r;r++)this.elements[r]=a[r+t];return this},toArray:function(a,r){void 0===a&&(a=[]),void 0===r&&(r=0);var i=this.elements;return a[r]=i[0],a[r+1]=i[1],a[r+2]=i[2],a[r+3]=i[3],a[r+4]=i[4],a[r+5]=i[5],a[r+6]=i[6],a[r+7]=i[7],a[r+8]=i[8],a}});var tg=function(a){var t;if("undefined"==typeof HTMLCanvasElement)return a.src;if(a instanceof HTMLCanvasElement)t=a;else{void 0===br&&(br=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),br.width=a.width,br.height=a.height;var r=br.getContext("2d");a instanceof ImageData?r.putImageData(a,0,0):r.drawImage(a,0,0,a.width,a.height),t=br}return 2048<t.width||2048<t.height?t.toDataURL("image/jpeg",.6):t.toDataURL("image/png")},Mr=0;X.DEFAULT_IMAGE=void 0,X.DEFAULT_MAPPING=300,X.prototype=Object.assign(Object.create(H.prototype),{constructor:X,isTexture:!0,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.name=e.name,this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this},toJSON:function(o){var t=void 0===o||"string"==typeof o;if(!t&&void 0!==o.textures[this.uuid])return o.textures[this.uuid];var e={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(void 0!==this.image){var n=this.image;if(void 0===n.uuid&&(n.uuid=eg.generateUUID()),!t&&void 0===o.images[n.uuid]){var i;if(Array.isArray(n)){i=[];for(var l=0,d=n.length;l<d;l++)i.push(tg(n[l]))}else i=tg(n);o.images[n.uuid]={uuid:n.uuid,url:i}}e.image=n.uuid}return t||(o.textures[this.uuid]=e),e},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(e){if(300!==this.mapping)return e;if(e.applyMatrix3(this.matrix),0>e.x||1<e.x)switch(this.wrapS){case 1e3:e.x-=Tm(e.x);break;case 1001:e.x=0>e.x?0:1;break;case 1002:1===vm(Tm(e.x)%2)?e.x=pm(e.x)-e.x:e.x-=Tm(e.x);}if(0>e.y||1<e.y)switch(this.wrapT){case 1e3:e.y-=Tm(e.y);break;case 1001:e.y=0>e.y?0:1;break;case 1002:1===vm(Tm(e.y)%2)?e.y=pm(e.y)-e.y:e.y-=Tm(e.y);}return this.flipY&&(e.y=1-e.y),e}}),Object.defineProperty(X.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),q.prototype=Object.create(X.prototype),q.prototype.constructor=q,q.prototype.isDataTexture=!0,Object.assign(rt,{slerp:function(a,t,e,r){return e.copy(a).slerp(t,r)},slerpFlat:function(T,t,e,n,i,r,a){var S=e[n+0],M=e[n+1],A=e[n+2],w=e[n+3],P=i[r+0],c=i[r+1],p=i[r+2],f=i[r+3];if(w!==f||S!==P||M!==c||A!==p){var d=1-a,C=S*P+M*c+A*p+w*f,g=0<=C?1:-1,v=1-C*C;if(v>om){var y=_m(v),_=um(y,C*g);d=fm(d*_)/y,a=fm(a*_)/y}var x=a*g;if(S=S*d+P*x,M=M*d+c*x,A=A*d+p*x,w=w*d+f*x,d==1-a){var b=1/_m(S*S+M*M+A*A+w*w);S*=b,M*=b,A*=b,w*=b}}T[t]=S,T[t+1]=M,T[t+2]=A,T[t+3]=w},multiplyQuaternionsFlat:function(d,t,e,n,i,r){var a=e[n],s=e[n+1],o=e[n+2],l=e[n+3],m=i[r],u=i[r+1],c=i[r+2],p=i[r+3];return d[t]=a*p+l*m+s*c-o*u,d[t+1]=s*p+l*u+o*m-a*c,d[t+2]=o*p+l*c+a*u-s*m,d[t+3]=l*p-a*m-s*u-o*c,d}}),Object.defineProperties(rt.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e,this._onChangeCallback()}},w:{get:function(){return this._w},set:function(e){this._w=e,this._onChangeCallback()}}}),Object.assign(rt.prototype,{isQuaternion:!0,set:function(a,t,e,r){return this._x=a,this._y=t,this._z=e,this._w=r,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this},setFromEuler:function(d,t){if(!d||!d.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var e=d._x,n=d._y,i=d._z,r=d.order,a=hm,s=fm,o=a(e/2),l=a(n/2),m=a(i/2),u=s(e/2),c=s(n/2),p=s(i/2);return"XYZ"===r?(this._x=u*l*m+o*c*p,this._y=o*c*m-u*l*p,this._z=o*l*p+u*c*m,this._w=o*l*m-u*c*p):"YXZ"===r?(this._x=u*l*m+o*c*p,this._y=o*c*m-u*l*p,this._z=o*l*p-u*c*m,this._w=o*l*m+u*c*p):"ZXY"===r?(this._x=u*l*m-o*c*p,this._y=o*c*m+u*l*p,this._z=o*l*p+u*c*m,this._w=o*l*m-u*c*p):"ZYX"===r?(this._x=u*l*m-o*c*p,this._y=o*c*m+u*l*p,this._z=o*l*p-u*c*m,this._w=o*l*m+u*c*p):"YZX"===r?(this._x=u*l*m+o*c*p,this._y=o*c*m+u*l*p,this._z=o*l*p-u*c*m,this._w=o*l*m-u*c*p):"XZY"===r?(this._x=u*l*m-o*c*p,this._y=o*c*m-u*l*p,this._z=o*l*p+u*c*m,this._w=o*l*m+u*c*p):console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+r),!1!==t&&this._onChangeCallback(),this},setFromAxisAngle:function(a,t){var e=t/2,r=fm(e);return this._x=a.x*r,this._y=a.y*r,this._z=a.z*r,this._w=hm(e),this._onChangeCallback(),this},setFromRotationMatrix:function(d){var t=d.elements,n=t[0],i=t[4],r=t[8],a=t[1],s=t[5],o=t[9],l=t[2],m=t[6],u=t[10],c=n+s+u,p;return 0<c?(p=.5/_m(c+1),this._w=.25/p,this._x=(m-o)*p,this._y=(r-l)*p,this._z=(a-i)*p):n>s&&n>u?(p=2*_m(1+n-s-u),this._w=(m-o)/p,this._x=.25*p,this._y=(i+a)/p,this._z=(r+l)/p):s>u?(p=2*_m(1+s-n-u),this._w=(r-l)/p,this._x=(i+a)/p,this._y=.25*p,this._z=(o+m)/p):(p=2*_m(1+u-n-s),this._w=(a-i)/p,this._x=(r+l)/p,this._y=(o+m)/p,this._z=.25*p),this._onChangeCallback(),this},setFromUnitVectors:function(a,t){var e=a.dot(t)+1;return 1e-6>e?(e=0,vm(a.x)>vm(a.z)?(this._x=-a.y,this._y=a.x,this._z=0,this._w=e):(this._x=0,this._y=-a.z,this._z=a.y,this._w=e)):(this._x=a.y*t.z-a.z*t.y,this._y=a.z*t.x-a.x*t.z,this._z=a.x*t.y-a.y*t.x,this._w=e),this.normalize()},angleTo:function(e){return 2*cm(vm(eg.clamp(this.dot(e),-1,1)))},rotateTowards:function(a,t){var e=this.angleTo(a);if(0===e)return this;var r=bm(1,t/e);return this.slerp(a,r),this},inverse:function(){return this.conjugate()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this},dot:function(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return _m(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x*=e,this._y*=e,this._z*=e,this._w*=e),this._onChangeCallback(),this},multiply:function(a,t){return void 0===t?this.multiplyQuaternions(this,a):(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(a,t))},premultiply:function(e){return this.multiplyQuaternions(e,this)},multiplyQuaternions:function(d,t){var e=d._x,n=d._y,i=d._z,r=d._w,a=t._x,s=t._y,o=t._z,l=t._w;return this._x=e*l+r*a+n*o-i*s,this._y=n*l+r*s+i*a-e*o,this._z=i*l+r*o+e*s-n*a,this._w=r*l-e*a-n*s-i*o,this._onChangeCallback(),this},slerp:function(d,t){if(0===t)return this;if(1===t)return this.copy(d);var e=this._x,n=this._y,i=this._z,r=this._w,a=r*d._w+e*d._x+n*d._y+i*d._z;if(0>a?(this._w=-d._w,this._x=-d._x,this._y=-d._y,this._z=-d._z,a=-a):this.copy(d),1<=a)return this._w=r,this._x=e,this._y=n,this._z=i,this;var m=1-a*a;if(m<=om){var o=1-t;return this._w=o*r+t*this._w,this._x=o*e+t*this._x,this._y=o*n+t*this._y,this._z=o*i+t*this._z,this.normalize(),this._onChangeCallback(),this}var l=_m(m),g=um(l,a),u=fm((1-t)*g)/l,c=fm(t*g)/l;return this._w=r*u+this._w*c,this._x=e*u+this._x*c,this._y=n*u+this._y*c,this._z=i*u+this._z*c,this._onChangeCallback(),this},equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w},fromArray:function(a,t){return void 0===t&&(t=0),this._x=a[t],this._y=a[t+1],this._z=a[t+2],this._w=a[t+3],this._onChangeCallback(),this},toArray:function(a,r){return void 0===a&&(a=[]),void 0===r&&(r=0),a[r]=this._x,a[r+1]=this._y,a[r+2]=this._z,a[r+3]=this._w,a},fromBufferAttribute:function(a,t){return this._x=a.getX(t),this._y=a.getY(t),this._z=a.getZ(t),this._w=a.getW(t),this},_onChange:function(e){return this._onChangeCallback=e,this},_onChangeCallback:function(){}});var ag=new At,Pr=new rt;Object.assign(At.prototype,{isVector3:!0,set:function(a,t,e){return this.x=a,this.y=t,this.z=e,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setComponent:function(a,t){switch(a){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+a);}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e);}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this},add:function(a,t){return void 0===t?(this.x+=a.x,this.y+=a.y,this.z+=a.z,this):(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(a,t))},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this},addVectors:function(a,t){return this.x=a.x+t.x,this.y=a.y+t.y,this.z=a.z+t.z,this},addScaledVector:function(a,t){return this.x+=a.x*t,this.y+=a.y*t,this.z+=a.z*t,this},sub:function(a,t){return void 0===t?(this.x-=a.x,this.y-=a.y,this.z-=a.z,this):(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(a,t))},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this},subVectors:function(a,t){return this.x=a.x-t.x,this.y=a.y-t.y,this.z=a.z-t.z,this},multiply:function(a,t){return void 0===t?(this.x*=a.x,this.y*=a.y,this.z*=a.z,this):(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(a,t))},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this},multiplyVectors:function(a,t){return this.x=a.x*t.x,this.y=a.y*t.y,this.z=a.z*t.z,this},applyEuler:function(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(Pr.setFromEuler(e))},applyAxisAngle:function(a,t){return this.applyQuaternion(Pr.setFromAxisAngle(a,t))},applyMatrix3:function(a){var t=this.x,e=this.y,n=this.z,i=a.elements;return this.x=i[0]*t+i[3]*e+i[6]*n,this.y=i[1]*t+i[4]*e+i[7]*n,this.z=i[2]*t+i[5]*e+i[8]*n,this},applyNormalMatrix:function(e){return this.applyMatrix3(e).normalize()},applyMatrix4:function(o){var t=this.x,e=this.y,n=this.z,i=o.elements,r=1/(i[3]*t+i[7]*e+i[11]*n+i[15]);return this.x=(i[0]*t+i[4]*e+i[8]*n+i[12])*r,this.y=(i[1]*t+i[5]*e+i[9]*n+i[13])*r,this.z=(i[2]*t+i[6]*e+i[10]*n+i[14])*r,this},applyQuaternion:function(d){var t=this.x,e=this.y,n=this.z,i=d.x,r=d.y,a=d.z,s=d.w,o=s*t+r*n-a*e,l=s*e+a*t-i*n,p=s*n+i*e-r*t,m=-i*t-r*e-a*n;return this.x=o*s+m*-i+l*-a-p*-r,this.y=l*s+m*-r+p*-i-o*-a,this.z=p*s+m*-a+o*-r-l*-i,this},project:function(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)},unproject:function(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)},transformDirection:function(a){var t=this.x,e=this.y,n=this.z,i=a.elements;return this.x=i[0]*t+i[4]*e+i[8]*n,this.y=i[1]*t+i[5]*e+i[9]*n,this.z=i[2]*t+i[6]*e+i[10]*n,this.normalize()},divide:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this},divideScalar:function(e){return this.multiplyScalar(1/e)},min:function(e){return this.x=bm(this.x,e.x),this.y=bm(this.y,e.y),this.z=bm(this.z,e.z),this},max:function(e){return this.x=Em(this.x,e.x),this.y=Em(this.y,e.y),this.z=Em(this.z,e.z),this},clamp:function(a,t){return this.x=Em(a.x,bm(t.x,this.x)),this.y=Em(a.y,bm(t.y,this.y)),this.z=Em(a.z,bm(t.z,this.z)),this},clampScalar:function(a,t){return this.x=Em(a,bm(t,this.x)),this.y=Em(a,bm(t,this.y)),this.z=Em(a,bm(t,this.z)),this},clampLength:function(a,t){var e=this.length();return this.divideScalar(e||1).multiplyScalar(Em(a,bm(t,e)))},floor:function(){return this.x=Tm(this.x),this.y=Tm(this.y),this.z=Tm(this.z),this},ceil:function(){return this.x=pm(this.x),this.y=pm(this.y),this.z=pm(this.z),this},round:function(){return this.x=Sm(this.x),this.y=Sm(this.y),this.z=Sm(this.z),this},roundToZero:function(){return this.x=0>this.x?pm(this.x):Tm(this.x),this.y=0>this.y?pm(this.y):Tm(this.y),this.z=0>this.z?pm(this.z):Tm(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return _m(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return vm(this.x)+vm(this.y)+vm(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(a,t){return this.x+=(a.x-this.x)*t,this.y+=(a.y-this.y)*t,this.z+=(a.z-this.z)*t,this},lerpVectors:function(a,t,e){return this.subVectors(t,a).multiplyScalar(e).add(a)},cross:function(a,t){return void 0===t?this.crossVectors(this,a):(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(a,t))},crossVectors:function(l,t){var e=l.x,n=l.y,i=l.z,r=t.x,a=t.y,s=t.z;return this.x=n*s-i*a,this.y=i*r-e*s,this.z=e*a-n*r,this},projectOnVector:function(a){var t=a.lengthSq();if(0===t)return this.set(0,0,0);var e=a.dot(this)/t;return this.copy(a).multiplyScalar(e)},projectOnPlane:function(e){return ag.copy(this).projectOnVector(e),this.sub(ag)},reflect:function(e){return this.sub(ag.copy(e).multiplyScalar(2*this.dot(e)))},angleTo:function(a){var t=_m(this.lengthSq()*a.lengthSq());if(0===t)return ym/2;var e=this.dot(a)/t;return cm(eg.clamp(e,-1,1))},distanceTo:function(e){return _m(this.distanceToSquared(e))},distanceToSquared:function(a){var t=this.x-a.x,e=this.y-a.y,r=this.z-a.z;return t*t+e*e+r*r},manhattanDistanceTo:function(e){return vm(this.x-e.x)+vm(this.y-e.y)+vm(this.z-e.z)},setFromSpherical:function(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)},setFromSphericalCoords:function(a,t,e){var r=fm(t)*a;return this.x=r*fm(e),this.y=hm(t)*a,this.z=r*hm(e),this},setFromCylindrical:function(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)},setFromCylindricalCoords:function(a,t,e){return this.x=a*fm(t),this.y=e,this.z=a*hm(t),this},setFromMatrixPosition:function(a){var t=a.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this},setFromMatrixScale:function(a){var t=this.setFromMatrixColumn(a,0).length(),e=this.setFromMatrixColumn(a,1).length(),r=this.setFromMatrixColumn(a,2).length();return this.x=t,this.y=e,this.z=r,this},setFromMatrixColumn:function(a,t){return this.fromArray(a.elements,4*t)},setFromMatrix3Column:function(a,t){return this.fromArray(a.elements,3*t)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z},fromArray:function(a,t){return void 0===t&&(t=0),this.x=a[t],this.y=a[t+1],this.z=a[t+2],this},toArray:function(a,r){return void 0===a&&(a=[]),void 0===r&&(r=0),a[r]=this.x,a[r+1]=this.y,a[r+2]=this.z,a},fromBufferAttribute:function(a,t,e){return void 0!==e&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=a.getX(t),this.y=a.getY(t),this.z=a.getZ(t),this},random:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}});var Fr=[new At,new At,new At,new At,new At,new At,new At,new At],Rr=new At,Ir=new it,kr=new At,Or=new At,Nr=new At,Br=new At,zr=new At,Ur=new At,Vr=new At,Gr=new At,Hr=new At,jr=new At;Object.assign(it.prototype,{isBox3:!0,set:function(a,t){return this.min.copy(a),this.max.copy(t),this},setFromArray:function(d){for(var t=1/0,p=1/0,m=1/0,g=-1/0,f=-1/0,y=-1/0,v=0,_=d.length;v<_;v+=3){var l=d[v],h=d[v+1],u=d[v+2];l<t&&(t=l),h<p&&(p=h),u<m&&(m=u),l>g&&(g=l),h>f&&(f=h),u>y&&(y=u)}return this.min.set(t,p,m),this.max.set(g,f,y),this},setFromBufferAttribute:function(d){for(var t=1/0,p=1/0,m=1/0,g=-1/0,f=-1/0,y=-1/0,v=0,_=d.count;v<_;v++){var l=d.getX(v),h=d.getY(v),u=d.getZ(v);l<t&&(t=l),h<p&&(p=h),u<m&&(m=u),l>g&&(g=l),h>f&&(f=h),u>y&&(y=u)}return this.min.set(t,p,m),this.max.set(g,f,y),this},setFromPoints:function(a){this.makeEmpty();for(var t=0,r=a.length;t<r;t++)this.expandByPoint(a[t]);return this},setFromCenterAndSize:function(a,t){var e=Rr.copy(t).multiplyScalar(.5);return this.min.copy(a).sub(e),this.max.copy(a).add(e),this},setFromObject:function(e){return this.makeEmpty(),this.expandByObject(e)},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(e){return void 0===e&&(console.warn("THREE.Box3: .getCenter() target is now required"),e=new At),this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){return void 0===e&&(console.warn("THREE.Box3: .getSize() target is now required"),e=new At),this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},expandByObject:function(a){a.updateWorldMatrix(!1,!1);var t=a.geometry;void 0!==t&&(null===t.boundingBox&&t.computeBoundingBox(),Ir.copy(t.boundingBox),Ir.applyMatrix4(a.matrixWorld),this.union(Ir));for(var e=a.children,n=0,o=e.length;n<o;n++)this.expandByObject(e[n]);return this},containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z},getParameter:function(a,t){return void 0===t&&(console.warn("THREE.Box3: .getParameter() target is now required"),t=new At),t.set((a.x-this.min.x)/(this.max.x-this.min.x),(a.y-this.min.y)/(this.max.y-this.min.y),(a.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)},intersectsSphere:function(e){return this.clampPoint(e.center,Rr),Rr.distanceToSquared(e.center)<=e.radius*e.radius},intersectsPlane:function(a){var t,r;return 0<a.normal.x?(t=a.normal.x*this.min.x,r=a.normal.x*this.max.x):(t=a.normal.x*this.max.x,r=a.normal.x*this.min.x),0<a.normal.y?(t+=a.normal.y*this.min.y,r+=a.normal.y*this.max.y):(t+=a.normal.y*this.max.y,r+=a.normal.y*this.min.y),0<a.normal.z?(t+=a.normal.z*this.min.z,r+=a.normal.z*this.max.z):(t+=a.normal.z*this.max.z,r+=a.normal.z*this.min.z),t<=-a.constant&&r>=-a.constant},intersectsTriangle:function(a){if(this.isEmpty())return!1;this.getCenter(Vr),Gr.subVectors(this.max,Vr),kr.subVectors(a.a,Vr),Or.subVectors(a.b,Vr),Nr.subVectors(a.c,Vr),Br.subVectors(Or,kr),zr.subVectors(Nr,Or),Ur.subVectors(kr,Nr);var t=[0,-Br.z,Br.y,0,-zr.z,zr.y,0,-Ur.z,Ur.y,Br.z,0,-Br.x,zr.z,0,-zr.x,Ur.z,0,-Ur.x,-Br.y,Br.x,0,-zr.y,zr.x,0,-Ur.y,Ur.x,0];return!!Pt(t,kr,Or,Nr,Gr)&&!!Pt(t=[1,0,0,0,1,0,0,0,1],kr,Or,Nr,Gr)&&(Hr.crossVectors(Br,zr),Pt(t=[Hr.x,Hr.y,Hr.z],kr,Or,Nr,Gr))},clampPoint:function(a,t){return void 0===t&&(console.warn("THREE.Box3: .clampPoint() target is now required"),t=new At),t.copy(a).clamp(this.min,this.max)},distanceToPoint:function(e){return Rr.copy(e).clamp(this.min,this.max).sub(e).length()},getBoundingSphere:function(e){return void 0===e&&console.error("THREE.Box3: .getBoundingSphere() target is now required"),this.getCenter(e.center),e.radius=.5*this.getSize(Rr).length(),e},intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},applyMatrix4:function(e){return this.isEmpty()||(Fr[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Fr[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Fr[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Fr[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Fr[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Fr[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Fr[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Fr[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Fr)),this},translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}});var Wr=new it;Object.assign(Rt.prototype,{set:function(a,t){return this.center.copy(a),this.radius=t,this},setFromPoints:function(o,t){var e=this.center;void 0===t?Wr.setFromPoints(o).getCenter(e):e.copy(t);for(var n=0,s=0,l=o.length;s<l;s++)n=Em(n,e.distanceToSquared(o[s]));return this.radius=_m(n),this},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.center.copy(e.center),this.radius=e.radius,this},isEmpty:function(){return 0>this.radius},makeEmpty:function(){return this.center.set(0,0,0),this.radius=-1,this},containsPoint:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(e){return e.distanceTo(this.center)-this.radius},intersectsSphere:function(a){var t=this.radius+a.radius;return a.center.distanceToSquared(this.center)<=t*t},intersectsBox:function(e){return e.intersectsSphere(this)},intersectsPlane:function(e){return vm(e.distanceToPoint(this.center))<=this.radius},clampPoint:function(a,t){var r=this.center.distanceToSquared(a);return void 0===t&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),t=new At),t.copy(a),r>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t},getBoundingBox:function(e){return void 0===e&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),e=new it),this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)},applyMatrix4:function(e){return this.center.applyMatrix4(e),this.radius*=e.getMaxScaleOnAxis(),this},translate:function(e){return this.center.add(e),this},equals:function(e){return e.center.equals(this.center)&&e.radius===this.radius}});var Yr=new At,Jr=new At,Kr=new W;Object.assign(It.prototype,{isPlane:!0,set:function(a,t){return this.normal.copy(a),this.constant=t,this},setComponents:function(a,t,e,r){return this.normal.set(a,t,e),this.constant=r,this},setFromNormalAndCoplanarPoint:function(a,t){return this.normal.copy(a),this.constant=-t.dot(this.normal),this},setFromCoplanarPoints:function(a,t,e){var r=Yr.subVectors(e,t).cross(Jr.subVectors(a,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,a),this},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.normal.copy(e.normal),this.constant=e.constant,this},normalize:function(){var e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(e){return this.normal.dot(e)+this.constant},distanceToSphere:function(e){return this.distanceToPoint(e.center)-e.radius},projectPoint:function(a,t){return void 0===t&&(console.warn("THREE.Plane: .projectPoint() target is now required"),t=new At),t.copy(this.normal).multiplyScalar(-this.distanceToPoint(a)).add(a)},intersectLine:function(a,t){void 0===t&&(console.warn("THREE.Plane: .intersectLine() target is now required"),t=new At);var o=a.delta(Yr),n=this.normal.dot(o);if(0===n)return 0===this.distanceToPoint(a.start)?t.copy(a.start):void 0;var i=-(a.start.dot(this.normal)+this.constant)/n;return 0>i||1<i?void 0:t.copy(o).multiplyScalar(i).add(a.start)},intersectsLine:function(a){var t=this.distanceToPoint(a.start),e=this.distanceToPoint(a.end);return 0>t&&0<e||0>e&&0<t},intersectsBox:function(e){return e.intersectsPlane(this)},intersectsSphere:function(e){return e.intersectsPlane(this)},coplanarPoint:function(e){return void 0===e&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),e=new At),e.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(a,t){var e=t||Kr.getNormalMatrix(a),n=this.coplanarPoint(Yr).applyMatrix4(a),i=this.normal.applyMatrix3(e).normalize();return this.constant=-n.dot(i),this},translate:function(e){return this.constant-=e.dot(this.normal),this},equals:function(e){return e.normal.equals(this.normal)&&e.constant===this.constant}});var $r=new Rt,ta=new At;Object.assign(Yt.prototype,{set:function(o,t,e,n,i,r){var a=this.planes;return a[0].copy(o),a[1].copy(t),a[2].copy(e),a[3].copy(n),a[4].copy(i),a[5].copy(r),this},clone:function(){return new this.constructor().copy(this)},copy:function(a){for(var t=this.planes,e=0;6>e;e++)t[e].copy(a.planes[e]);return this},setFromProjectionMatrix:function(_){var t=this.planes,e=_.elements,n=e[0],i=e[1],r=e[2],a=e[3],s=e[4],o=e[5],l=e[6],h=e[7],u=e[8],c=e[9],p=e[10],f=e[11],d=e[12],m=e[13],g=e[14],v=e[15];return t[0].setComponents(a-n,h-s,f-u,v-d).normalize(),t[1].setComponents(a+n,h+s,f+u,v+d).normalize(),t[2].setComponents(a+i,h+o,f+c,v+m).normalize(),t[3].setComponents(a-i,h-o,f-c,v-m).normalize(),t[4].setComponents(a-r,h-l,f-p,v-g).normalize(),t[5].setComponents(a+r,h+l,f+p,v+g).normalize(),this},intersectsObject:function(a){var t=a.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),$r.copy(t.boundingSphere).applyMatrix4(a.matrixWorld),this.intersectsSphere($r)},intersectsSprite:function(e){return $r.center.set(0,0,0),$r.radius=.7071067811865476,$r.applyMatrix4(e.matrixWorld),this.intersectsSphere($r)},intersectsSphere:function(a){for(var t=this.planes,e=a.center,n=-a.radius,i=0;6>i;i++)if(t[i].distanceToPoint(e)<n)return!1;return!0},intersectsBox:function(a){for(var t=this.planes,e=0,r;6>e;e++)if(r=t[e],ta.x=0<r.normal.x?a.max.x:a.min.x,ta.y=0<r.normal.y?a.max.y:a.min.y,ta.z=0<r.normal.z?a.max.z:a.min.z,0>r.distanceToPoint(ta))return!1;return!0},containsPoint:function(a){for(var t=this.planes,e=0;6>e;e++)if(0>t[e].distanceToPoint(a))return!1;return!0}});var ea=new At,ia=new na,ra=new At(0,0,0),aa=new At(1,1,1),sa=new At,oa=new At,la=new At;Object.assign(na.prototype,{isMatrix4:!0,set:function(y,t,e,n,i,r,a,s,o,l,h,u,c,p,f,d){var m=this.elements;return m[0]=y,m[4]=t,m[8]=e,m[12]=n,m[1]=i,m[5]=r,m[9]=a,m[13]=s,m[2]=o,m[6]=l,m[10]=h,m[14]=u,m[3]=c,m[7]=p,m[11]=f,m[15]=d,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return new na().fromArray(this.elements)},copy:function(a){var t=this.elements,e=a.elements;return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],this},copyPosition:function(a){var t=this.elements,e=a.elements;return t[12]=e[12],t[13]=e[13],t[14]=e[14],this},extractBasis:function(a,t,e){return a.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),e.setFromMatrixColumn(this,2),this},makeBasis:function(a,t,e){return this.set(a.x,t.x,e.x,0,a.y,t.y,e.y,0,a.z,t.z,e.z,0,0,0,0,1),this},extractRotation:function(o){var t=this.elements,e=o.elements,n=1/ea.setFromMatrixColumn(o,0).length(),i=1/ea.setFromMatrixColumn(o,1).length(),r=1/ea.setFromMatrixColumn(o,2).length();return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=0,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=0,t[8]=e[8]*r,t[9]=e[9]*r,t[10]=e[10]*r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},makeRotationFromEuler:function(T){T&&T.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var t=this.elements,e=T.x,n=T.y,i=T.z,r=hm(e),a=fm(e),s=hm(n),o=fm(n),l=hm(i),h=fm(i);if("XYZ"===T.order){var u=r*l,S=r*h,M=a*l,A=a*h;t[0]=s*l,t[4]=-s*h,t[8]=o,t[1]=S+M*o,t[5]=u-A*o,t[9]=-a*s,t[2]=A-u*o,t[6]=M+S*o,t[10]=r*s}else if("YXZ"===T.order){var w=s*l,P=s*h,C=o*l,D=o*h;t[0]=w+D*a,t[4]=C*a-P,t[8]=r*o,t[1]=r*h,t[5]=r*l,t[9]=-a,t[2]=P*a-C,t[6]=D+w*a,t[10]=r*s}else if("ZXY"===T.order)w=s*l,P=s*h,C=o*l,D=o*h,t[0]=w-D*a,t[4]=-r*h,t[8]=C+P*a,t[1]=P+C*a,t[5]=r*l,t[9]=D-w*a,t[2]=-r*o,t[6]=a,t[10]=r*s;else if("ZYX"===T.order)u=r*l,S=r*h,M=a*l,A=a*h,t[0]=s*l,t[4]=M*o-S,t[8]=u*o+A,t[1]=s*h,t[5]=A*o+u,t[9]=S*o-M,t[2]=-o,t[6]=a*s,t[10]=r*s;else if("YZX"===T.order){var L=r*s,R=r*o,k=a*s,F=a*o;t[0]=s*l,t[4]=F-L*h,t[8]=k*h+R,t[1]=h,t[5]=r*l,t[9]=-a*l,t[2]=-o*l,t[6]=R*h+k,t[10]=L-F*h}else"XZY"===T.order&&(L=r*s,R=r*o,k=a*s,F=a*o,t[0]=s*l,t[4]=-h,t[8]=o*l,t[1]=L*h+F,t[5]=r*l,t[9]=R*h-k,t[2]=k*h-R,t[6]=a*l,t[10]=F*h+L);return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},makeRotationFromQuaternion:function(e){return this.compose(ra,e,aa)},lookAt:function(a,t,e){var r=this.elements;return la.subVectors(a,t),0===la.lengthSq()&&(la.z=1),la.normalize(),sa.crossVectors(e,la),0===sa.lengthSq()&&(1===vm(e.z)?la.x+=1e-4:la.z+=1e-4,la.normalize(),sa.crossVectors(e,la)),sa.normalize(),oa.crossVectors(la,sa),r[0]=sa.x,r[4]=oa.x,r[8]=la.x,r[1]=sa.y,r[5]=oa.y,r[9]=la.y,r[2]=sa.z,r[6]=oa.z,r[10]=la.z,this},multiply:function(a,t){return void 0===t?this.multiplyMatrices(this,a):(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(a,t))},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(N,t){var e=N.elements,n=t.elements,i=this.elements,r=e[0],a=e[4],s=e[8],o=e[12],l=e[1],h=e[5],u=e[9],c=e[13],p=e[2],f=e[6],d=e[10],m=e[14],g=e[3],v=e[7],y=e[11],_=e[15],x=n[0],b=n[4],E=n[8],w=n[12],D=n[1],M=n[5],S=n[9],T=n[13],A=n[2],C=n[6],P=n[10],F=n[14],L=n[3],R=n[7],I=n[11],k=n[15];return i[0]=r*x+a*D+s*A+o*L,i[4]=r*b+a*M+s*C+o*R,i[8]=r*E+a*S+s*P+o*I,i[12]=r*w+a*T+s*F+o*k,i[1]=l*x+h*D+u*A+c*L,i[5]=l*b+h*M+u*C+c*R,i[9]=l*E+h*S+u*P+c*I,i[13]=l*w+h*T+u*F+c*k,i[2]=p*x+f*D+d*A+m*L,i[6]=p*b+f*M+d*C+m*R,i[10]=p*E+f*S+d*P+m*I,i[14]=p*w+f*T+d*F+m*k,i[3]=g*x+v*D+y*A+_*L,i[7]=g*b+v*M+y*C+_*R,i[11]=g*E+v*S+y*P+_*I,i[15]=g*w+v*T+y*F+_*k,this},multiplyScalar:function(a){var t=this.elements;return t[0]*=a,t[4]*=a,t[8]*=a,t[12]*=a,t[1]*=a,t[5]*=a,t[9]*=a,t[13]*=a,t[2]*=a,t[6]*=a,t[10]*=a,t[14]*=a,t[3]*=a,t[7]*=a,t[11]*=a,t[15]*=a,this},determinant:function(){var d=this.elements,t=d[0],e=d[4],n=d[8],i=d[12],r=d[1],a=d[5],s=d[9],o=d[13],l=d[2],m=d[6],u=d[10],c=d[14];return d[3]*(+i*s*m-n*o*m-i*a*u+e*o*u+n*a*c-e*s*c)+d[7]*(+t*s*c-t*o*u+i*r*u-n*r*c+n*o*l-i*s*l)+d[11]*(+t*o*m-t*a*c-i*r*m+e*r*c+i*a*l-e*o*l)+d[15]*(-n*a*l-t*s*m+t*a*u+n*r*m-e*r*u+e*s*l)},transpose:function(){var a=this.elements,e;return e=a[1],a[1]=a[4],a[4]=e,e=a[2],a[2]=a[8],a[8]=e,e=a[6],a[6]=a[9],a[9]=e,e=a[3],a[3]=a[12],a[12]=e,e=a[7],a[7]=a[13],a[13]=e,e=a[11],a[11]=a[14],a[14]=e,this},setPosition:function(a,t,e){var r=this.elements;return a.isVector3?(r[12]=a.x,r[13]=a.y,r[14]=a.z):(r[12]=a,r[13]=t,r[14]=e),this},getInverse:function(T,t){void 0!==t&&console.warn("THREE.Matrix4: .getInverse() can no longer be configured to throw on degenerate.");var e=this.elements,n=T.elements,i=n[0],r=n[1],a=n[2],s=n[3],o=n[4],l=n[5],h=n[6],u=n[7],c=n[8],p=n[9],f=n[10],d=n[11],m=n[12],g=n[13],v=n[14],y=n[15],_=p*v*u-g*f*u+g*h*d-l*v*d-p*h*y+l*f*y,x=m*f*u-c*v*u-m*h*d+o*v*d+c*h*y-o*f*y,b=c*g*u-m*p*u+m*l*d-o*g*d-c*l*y+o*p*y,E=m*p*h-c*g*h-m*l*f+o*g*f+c*l*v-o*p*v,S=i*_+r*x+a*b+s*E;if(0==S)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);var A=1/S;return e[0]=_*A,e[1]=(g*f*s-p*v*s-g*a*d+r*v*d+p*a*y-r*f*y)*A,e[2]=(l*v*s-g*h*s+g*a*u-r*v*u-l*a*y+r*h*y)*A,e[3]=(p*h*s-l*f*s-p*a*u+r*f*u+l*a*d-r*h*d)*A,e[4]=x*A,e[5]=(c*v*s-m*f*s+m*a*d-i*v*d-c*a*y+i*f*y)*A,e[6]=(m*h*s-o*v*s-m*a*u+i*v*u+o*a*y-i*h*y)*A,e[7]=(o*f*s-c*h*s+c*a*u-i*f*u-o*a*d+i*h*d)*A,e[8]=b*A,e[9]=(m*p*s-c*g*s-m*r*d+i*g*d+c*r*y-i*p*y)*A,e[10]=(o*g*s-m*l*s+m*r*u-i*g*u-o*r*y+i*l*y)*A,e[11]=(c*l*s-o*p*s-c*r*u+i*p*u+o*r*d-i*l*d)*A,e[12]=E*A,e[13]=(c*g*a-m*p*a+m*r*f-i*g*f-c*r*v+i*p*v)*A,e[14]=(m*l*a-o*g*a-m*r*h+i*g*h+o*r*v-i*l*v)*A,e[15]=(o*p*a-c*l*a+c*r*h-i*p*h-o*r*f+i*l*f)*A,this},scale:function(a){var t=this.elements,e=a.x,n=a.y,i=a.z;return t[0]*=e,t[4]*=n,t[8]*=i,t[1]*=e,t[5]*=n,t[9]*=i,t[2]*=e,t[6]*=n,t[10]*=i,t[3]*=e,t[7]*=n,t[11]*=i,this},getMaxScaleOnAxis:function(){var a=this.elements,t=a[0]*a[0]+a[1]*a[1]+a[2]*a[2],e=a[4]*a[4]+a[5]*a[5]+a[6]*a[6],r=a[8]*a[8]+a[9]*a[9]+a[10]*a[10];return _m(Em(t,e,r))},makeTranslation:function(a,t,e){return this.set(1,0,0,a,0,1,0,t,0,0,1,e,0,0,0,1),this},makeRotationX:function(a){var t=hm(a),e=fm(a);return this.set(1,0,0,0,0,t,-e,0,0,e,t,0,0,0,0,1),this},makeRotationY:function(a){var t=hm(a),e=fm(a);return this.set(t,0,e,0,0,1,0,0,-e,0,t,0,0,0,0,1),this},makeRotationZ:function(a){var t=hm(a),e=fm(a);return this.set(t,-e,0,0,e,t,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(d,t){var e=hm(t),n=fm(t),i=1-e,r=d.x,a=d.y,s=d.z,o=i*r,l=i*a;return this.set(o*r+e,o*a-n*s,o*s+n*a,0,o*a+n*s,l*a+e,l*s-n*r,0,o*s-n*a,l*s+n*r,i*s*s+e,0,0,0,0,1),this},makeScale:function(a,t,e){return this.set(a,0,0,0,0,t,0,0,0,0,e,0,0,0,0,1),this},makeShear:function(a,t,e){return this.set(1,t,e,0,a,1,e,0,a,t,1,0,0,0,0,1),this},compose:function(T,t,e){var n=this.elements,i=t._x,r=t._y,a=t._z,s=t._w,o=i+i,l=r+r,h=a+a,u=i*o,c=i*l,p=i*h,f=r*l,d=r*h,m=a*h,g=s*o,v=s*l,y=s*h,_=e.x,x=e.y,b=e.z;return n[0]=(1-(f+m))*_,n[1]=(c+y)*_,n[2]=(p-v)*_,n[3]=0,n[4]=(c-y)*x,n[5]=(1-(u+m))*x,n[6]=(d+g)*x,n[7]=0,n[8]=(p+v)*b,n[9]=(d-g)*b,n[10]=(1-(u+f))*b,n[11]=0,n[12]=T.x,n[13]=T.y,n[14]=T.z,n[15]=1,this},decompose:function(d,t,e){var n=this.elements,i=ea.set(n[0],n[1],n[2]).length(),p=ea.set(n[4],n[5],n[6]).length(),a=ea.set(n[8],n[9],n[10]).length();0>this.determinant()&&(i=-i),d.x=n[12],d.y=n[13],d.z=n[14],ia.copy(this);var s=1/i,o=1/p,l=1/a;return ia.elements[0]*=s,ia.elements[1]*=s,ia.elements[2]*=s,ia.elements[4]*=o,ia.elements[5]*=o,ia.elements[6]*=o,ia.elements[8]*=l,ia.elements[9]*=l,ia.elements[10]*=l,t.setFromRotationMatrix(ia),e.x=i,e.y=p,e.z=a,this},makePerspective:function(o,t,e,n,i,r){void 0===r&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var a=this.elements;return a[0]=2*i/(t-o),a[4]=0,a[8]=(t+o)/(t-o),a[12]=0,a[1]=0,a[5]=2*i/(e-n),a[9]=(e+n)/(e-n),a[13]=0,a[2]=0,a[6]=0,a[10]=-(r+i)/(r-i),a[14]=-2*r*i/(r-i),a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this},makeOrthographic:function(d,t,e,n,i,r){var a=this.elements,s=1/(t-d),o=1/(e-n),l=1/(r-i);return a[0]=2*s,a[4]=0,a[8]=0,a[12]=-((t+d)*s),a[1]=0,a[5]=2*o,a[9]=0,a[13]=-((e+n)*o),a[2]=0,a[6]=0,a[10]=-2*l,a[14]=-((r+i)*l),a[3]=0,a[7]=0,a[11]=0,a[15]=1,this},equals:function(a){for(var t=this.elements,e=a.elements,r=0;16>r;r++)if(t[r]!==e[r])return!1;return!0},fromArray:function(a,t){void 0===t&&(t=0);for(var r=0;16>r;r++)this.elements[r]=a[r+t];return this},toArray:function(a,r){void 0===a&&(a=[]),void 0===r&&(r=0);var i=this.elements;return a[r]=i[0],a[r+1]=i[1],a[r+2]=i[2],a[r+3]=i[3],a[r+4]=i[4],a[r+5]=i[5],a[r+6]=i[6],a[r+7]=i[7],a[r+8]=i[8],a[r+9]=i[9],a[r+10]=i[10],a[r+11]=i[11],a[r+12]=i[12],a[r+13]=i[13],a[r+14]=i[14],a[r+15]=i[15],a}});var ha={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},ca={h:0,s:0,l:0},pa={h:0,s:0,l:0};Object.assign(ua.prototype,{isColor:!0,r:1,g:1,b:1,set:function(e){return e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e),this},setScalar:function(e){return this.r=e,this.g=e,this.b=e,this},setHex:function(e){return e=Tm(e),this.r=(255&e>>16)/255,this.g=(255&e>>8)/255,this.b=(255&e)/255,this},setRGB:function(a,t,e){return this.r=a,this.g=t,this.b=e,this},setHSL:function(a,o,s){if(a=eg.euclideanModulo(a,1),o=eg.clamp(o,0,1),s=eg.clamp(s,0,1),0===o)this.r=this.g=this.b=s;else{var l=.5>=s?s*(1+o):s+o-s*o,i=2*s-l;this.r=da(i,l,a+1/3),this.g=da(i,l,a),this.b=da(i,l,a-1/3)}return this},setStyle:function(d){function t(t){void 0!==t&&1>parseFloat(t)&&console.warn("THREE.Color: Alpha component of "+d+" will be ignored.")}var e;if(e=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(d)){var p=e[1],r=e[2],a;switch(p){case"rgb":case"rgba":if(a=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(r))return this.r=bm(255,parseInt(a[1],10))/255,this.g=bm(255,parseInt(a[2],10))/255,this.b=bm(255,parseInt(a[3],10))/255,t(a[5]),this;if(a=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(r))return this.r=bm(100,parseInt(a[1],10))/100,this.g=bm(100,parseInt(a[2],10))/100,this.b=bm(100,parseInt(a[3],10))/100,t(a[5]),this;break;case"hsl":case"hsla":if(a=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(r)){var c=parseFloat(a[1])/360,s=parseInt(a[2],10)/100,o=parseInt(a[3],10)/100;return t(a[5]),this.setHSL(c,s,o)}}}else if(e=/^\#([A-Fa-f0-9]+)$/.exec(d)){var l=e[1],m=l.length;if(3===m)return this.r=parseInt(l.charAt(0)+l.charAt(0),16)/255,this.g=parseInt(l.charAt(1)+l.charAt(1),16)/255,this.b=parseInt(l.charAt(2)+l.charAt(2),16)/255,this;if(6===m)return this.r=parseInt(l.charAt(0)+l.charAt(1),16)/255,this.g=parseInt(l.charAt(2)+l.charAt(3),16)/255,this.b=parseInt(l.charAt(4)+l.charAt(5),16)/255,this}return d&&0<d.length?this.setColorName(d):this},setColorName:function(a){var t=ha[a];return void 0===t?console.warn("THREE.Color: Unknown color "+a):this.setHex(t),this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this},copyGammaToLinear:function(a,t){return void 0===t&&(t=2),this.r=xm(a.r,t),this.g=xm(a.g,t),this.b=xm(a.b,t),this},copyLinearToGamma:function(a,t){void 0===t&&(t=2);var r=0<t?1/t:1;return this.r=xm(a.r,r),this.g=xm(a.g,r),this.b=xm(a.b,r),this},convertGammaToLinear:function(e){return this.copyGammaToLinear(this,e),this},convertLinearToGamma:function(e){return this.copyLinearToGamma(this,e),this},copySRGBToLinear:function(e){return this.r=ma(e.r),this.g=ma(e.g),this.b=ma(e.b),this},copyLinearToSRGB:function(e){return this.r=ga(e.r),this.g=ga(e.g),this.b=ga(e.b),this},convertSRGBToLinear:function(){return this.copySRGBToLinear(this),this},convertLinearToSRGB:function(){return this.copyLinearToSRGB(this),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(d){void 0===d&&(console.warn("THREE.Color: .getHSL() target is now required"),d={h:0,s:0,l:0});var p=this.r,i=this.g,r=this.b,a=Em(p,i,r),s=bm(p,i,r),o=(s+a)/2,l,c;if(s===a)l=0,c=0;else{var m=a-s;switch(c=.5>=o?m/(a+s):m/(2-a-s),a){case p:l=(i-r)/m+(i<r?6:0);break;case i:l=(r-p)/m+2;break;case r:l=(p-i)/m+4;}l/=6}return d.h=l,d.s=c,d.l=o,d},getStyle:function(){return"rgb("+(0|255*this.r)+","+(0|255*this.g)+","+(0|255*this.b)+")"},offsetHSL:function(a,t,e){return this.getHSL(ca),ca.h+=a,ca.s+=t,ca.l+=e,this.setHSL(ca.h,ca.s,ca.l),this},add:function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this},addColors:function(a,t){return this.r=a.r+t.r,this.g=a.g+t.g,this.b=a.b+t.b,this},addScalar:function(e){return this.r+=e,this.g+=e,this.b+=e,this},sub:function(e){return this.r=Em(0,this.r-e.r),this.g=Em(0,this.g-e.g),this.b=Em(0,this.b-e.b),this},multiply:function(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this},multiplyScalar:function(e){return this.r*=e,this.g*=e,this.b*=e,this},lerp:function(a,t){return this.r+=(a.r-this.r)*t,this.g+=(a.g-this.g)*t,this.b+=(a.b-this.b)*t,this},lerpHSL:function(a,t){this.getHSL(ca),a.getHSL(pa);var e=eg.lerp(ca.h,pa.h,t),n=eg.lerp(ca.s,pa.s,t),i=eg.lerp(ca.l,pa.l,t);return this.setHSL(e,n,i),this},equals:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b},fromArray:function(a,t){return void 0===t&&(t=0),this.r=a[t],this.g=a[t+1],this.b=a[t+2],this},toArray:function(a,r){return void 0===a&&(a=[]),void 0===r&&(r=0),a[r]=this.r,a[r+1]=this.g,a[r+2]=this.b,a},toJSON:function(){return this.getHex()}}),ua.NAMES=ha;var fa={common:{diffuse:{value:new ua(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new W},uv2Transform:{value:new W},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new j(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new ua(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new ua(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},uvTransform:{value:new W}},sprite:{diffuse:{value:new ua(15658734)},opacity:{value:1},center:{value:new j(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},uvTransform:{value:new W}}};Object.defineProperties(va.prototype,{width:{get:function(){return this.z},set:function(e){this.z=e}},height:{get:function(){return this.w},set:function(e){this.w=e}}}),Object.assign(va.prototype,{isVector4:!0,set:function(a,t,e,r){return this.x=a,this.y=t,this.z=e,this.w=r,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this.w=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setW:function(e){return this.w=e,this},setComponent:function(a,t){switch(a){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+a);}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e);}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0===e.w?1:e.w,this},add:function(a,t){return void 0===t?(this.x+=a.x,this.y+=a.y,this.z+=a.z,this.w+=a.w,this):(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(a,t))},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this},addVectors:function(a,t){return this.x=a.x+t.x,this.y=a.y+t.y,this.z=a.z+t.z,this.w=a.w+t.w,this},addScaledVector:function(a,t){return this.x+=a.x*t,this.y+=a.y*t,this.z+=a.z*t,this.w+=a.w*t,this},sub:function(a,t){return void 0===t?(this.x-=a.x,this.y-=a.y,this.z-=a.z,this.w-=a.w,this):(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(a,t))},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this},subVectors:function(a,t){return this.x=a.x-t.x,this.y=a.y-t.y,this.z=a.z-t.z,this.w=a.w-t.w,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this},applyMatrix4:function(o){var t=this.x,e=this.y,n=this.z,i=this.w,r=o.elements;return this.x=r[0]*t+r[4]*e+r[8]*n+r[12]*i,this.y=r[1]*t+r[5]*e+r[9]*n+r[13]*i,this.z=r[2]*t+r[6]*e+r[10]*n+r[14]*i,this.w=r[3]*t+r[7]*e+r[11]*n+r[15]*i,this},divideScalar:function(e){return this.multiplyScalar(1/e)},setAxisAngleFromQuaternion:function(a){this.w=2*cm(a.w);var t=_m(1-a.w*a.w);return 1e-4>t?(this.x=1,this.y=0,this.z=0):(this.x=a.x/t,this.y=a.y/t,this.z=a.z/t),this},setAxisAngleFromRotationMatrix:function(E){var t=E.elements,a=t[0],s=t[4],o=t[8],l=t[1],h=t[5],u=t[9],c=t[2],p=t[6],f=t[10],d,T,S,M;if(.01>vm(s-l)&&.01>vm(o-c)&&.01>vm(u-p)){if(.1>vm(s+l)&&.1>vm(o+c)&&.1>vm(u+p)&&.1>vm(a+h+f-3))return this.set(1,0,0,0),this;d=ym;var A=(a+1)/2,m=(h+1)/2,g=(f+1)/2,v=(s+l)/4,y=(o+c)/4,_=(u+p)/4;return A>m&&A>g?.01>A?(T=0,S=.707106781,M=.707106781):(S=v/(T=_m(A)),M=y/T):m>g?.01>m?(T=.707106781,S=0,M=.707106781):(T=v/(S=_m(m)),M=_/S):.01>g?(T=.707106781,S=.707106781,M=0):(T=y/(M=_m(g)),S=_/M),this.set(T,S,M,d),this}var x=_m((p-u)*(p-u)+(o-c)*(o-c)+(l-s)*(l-s));return .001>vm(x)&&(x=1),this.x=(p-u)/x,this.y=(o-c)/x,this.z=(l-s)/x,this.w=cm((a+h+f-1)/2),this},min:function(e){return this.x=bm(this.x,e.x),this.y=bm(this.y,e.y),this.z=bm(this.z,e.z),this.w=bm(this.w,e.w),this},max:function(e){return this.x=Em(this.x,e.x),this.y=Em(this.y,e.y),this.z=Em(this.z,e.z),this.w=Em(this.w,e.w),this},clamp:function(a,t){return this.x=Em(a.x,bm(t.x,this.x)),this.y=Em(a.y,bm(t.y,this.y)),this.z=Em(a.z,bm(t.z,this.z)),this.w=Em(a.w,bm(t.w,this.w)),this},clampScalar:function(a,t){return this.x=Em(a,bm(t,this.x)),this.y=Em(a,bm(t,this.y)),this.z=Em(a,bm(t,this.z)),this.w=Em(a,bm(t,this.w)),this},clampLength:function(a,t){var e=this.length();return this.divideScalar(e||1).multiplyScalar(Em(a,bm(t,e)))},floor:function(){return this.x=Tm(this.x),this.y=Tm(this.y),this.z=Tm(this.z),this.w=Tm(this.w),this},ceil:function(){return this.x=pm(this.x),this.y=pm(this.y),this.z=pm(this.z),this.w=pm(this.w),this},round:function(){return this.x=Sm(this.x),this.y=Sm(this.y),this.z=Sm(this.z),this.w=Sm(this.w),this},roundToZero:function(){return this.x=0>this.x?pm(this.x):Tm(this.x),this.y=0>this.y?pm(this.y):Tm(this.y),this.z=0>this.z?pm(this.z):Tm(this.z),this.w=0>this.w?pm(this.w):Tm(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return _m(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return vm(this.x)+vm(this.y)+vm(this.z)+vm(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(a,t){return this.x+=(a.x-this.x)*t,this.y+=(a.y-this.y)*t,this.z+=(a.z-this.z)*t,this.w+=(a.w-this.w)*t,this},lerpVectors:function(a,t,e){return this.subVectors(t,a).multiplyScalar(e).add(a)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w},fromArray:function(a,t){return void 0===t&&(t=0),this.x=a[t],this.y=a[t+1],this.z=a[t+2],this.w=a[t+3],this},toArray:function(a,r){return void 0===a&&(a=[]),void 0===r&&(r=0),a[r]=this.x,a[r+1]=this.y,a[r+2]=this.z,a[r+3]=this.w,a},fromBufferAttribute:function(a,t,e){return void 0!==e&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=a.getX(t),this.y=a.getY(t),this.z=a.getZ(t),this.w=a.getW(t),this},random:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}});var ya=new na,xa=new rt;_a.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],_a.DefaultOrder="XYZ",Object.defineProperties(_a.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e,this._onChangeCallback()}},order:{get:function(){return this._order},set:function(e){this._order=e,this._onChangeCallback()}}}),Object.assign(_a.prototype,{isEuler:!0,set:function(a,t,e,r){return this._x=a,this._y=t,this._z=e,this._order=r||this._order,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this},setFromRotationMatrix:function(d,t,m){var n=eg.clamp,i=d.elements,r=i[0],a=i[4],s=i[8],o=i[1],l=i[5],g=i[9],u=i[2],c=i[6],p=i[10];switch(t=t||this._order){case"XYZ":this._y=mm(n(s,-1,1)),.9999999>vm(s)?(this._x=um(-g,p),this._z=um(-a,r)):(this._x=um(c,l),this._z=0);break;case"YXZ":this._x=mm(-n(g,-1,1)),.9999999>vm(g)?(this._y=um(s,p),this._z=um(o,l)):(this._y=um(-u,r),this._z=0);break;case"ZXY":this._x=mm(n(c,-1,1)),.9999999>vm(c)?(this._y=um(-u,p),this._z=um(-a,l)):(this._y=0,this._z=um(o,r));break;case"ZYX":this._y=mm(-n(u,-1,1)),.9999999>vm(u)?(this._x=um(c,p),this._z=um(o,r)):(this._x=0,this._z=um(-a,l));break;case"YZX":this._z=mm(n(o,-1,1)),.9999999>vm(o)?(this._x=um(-g,l),this._y=um(-u,r)):(this._x=0,this._y=um(s,p));break;case"XZY":this._z=mm(-n(a,-1,1)),.9999999>vm(a)?(this._x=um(c,l),this._y=um(s,r)):(this._x=um(-g,p),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t);}return this._order=t,!1!==m&&this._onChangeCallback(),this},setFromQuaternion:function(a,t,e){return ya.makeRotationFromQuaternion(a),this.setFromRotationMatrix(ya,t,e)},setFromVector3:function(a,t){return this.set(a.x,a.y,a.z,t||this._order)},reorder:function(e){return xa.setFromEuler(this),this.setFromQuaternion(xa,e)},equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order},fromArray:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this},toArray:function(a,r){return void 0===a&&(a=[]),void 0===r&&(r=0),a[r]=this._x,a[r+1]=this._y,a[r+2]=this._z,a[r+3]=this._order,a},toVector3:function(e){return e?e.set(this._x,this._y,this._z):new At(this._x,this._y,this._z)},_onChange:function(e){return this._onChangeCallback=e,this},_onChangeCallback:function(){}}),Object.assign(Ea.prototype,{set:function(e){this.mask=0|1<<e},enable:function(e){this.mask|=0|1<<e},enableAll:function(){this.mask=-1},toggle:function(e){this.mask^=0|1<<e},disable:function(e){this.mask&=~(0|1<<e)},disableAll:function(){this.mask=0},test:function(e){return 0!=(this.mask&e.mask)}});var ba=0,rg=new At,Ma=new rt,Sa=new na,Ta=new At,Aa=new At,Ca=new At,Pa=new rt,Fa=new At(1,0,0),La=new At(0,1,0),Ra=new At(0,0,1),Ia={type:"added"},ka={type:"removed"};wa.DefaultUp=new At(0,1,0),wa.DefaultMatrixAutoUpdate=!0,wa.prototype=Object.assign(Object.create(H.prototype),{constructor:wa,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix4:function(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(e){return this.quaternion.premultiply(e),this},setRotationFromAxisAngle:function(a,t){this.quaternion.setFromAxisAngle(a,t)},setRotationFromEuler:function(e){this.quaternion.setFromEuler(e,!0)},setRotationFromMatrix:function(e){this.quaternion.setFromRotationMatrix(e)},setRotationFromQuaternion:function(e){this.quaternion.copy(e)},rotateOnAxis:function(a,t){return Ma.setFromAxisAngle(a,t),this.quaternion.multiply(Ma),this},rotateOnWorldAxis:function(a,t){return Ma.setFromAxisAngle(a,t),this.quaternion.premultiply(Ma),this},rotateX:function(e){return this.rotateOnAxis(Fa,e)},rotateY:function(e){return this.rotateOnAxis(La,e)},rotateZ:function(e){return this.rotateOnAxis(Ra,e)},translateOnAxis:function(a,t){return rg.copy(a).applyQuaternion(this.quaternion),this.position.add(rg.multiplyScalar(t)),this},translateX:function(e){return this.translateOnAxis(Fa,e)},translateY:function(e){return this.translateOnAxis(La,e)},translateZ:function(e){return this.translateOnAxis(Ra,e)},localToWorld:function(e){return e.applyMatrix4(this.matrixWorld)},worldToLocal:function(e){return e.applyMatrix4(Sa.getInverse(this.matrixWorld))},lookAt:function(a,t,e){a.isVector3?Ta.copy(a):Ta.set(a,t,e);var r=this.parent;this.updateWorldMatrix(!0,!1),Aa.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Sa.lookAt(Aa,Ta,this.up):Sa.lookAt(Ta,Aa,this.up),this.quaternion.setFromRotationMatrix(Sa),r&&(Sa.extractRotation(r.matrixWorld),Ma.setFromRotationMatrix(Sa),this.quaternion.premultiply(Ma.inverse()))},add:function(a){if(1<arguments.length){for(var t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return a===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",a),this):(a&&a.isObject3D?(null!==a.parent&&a.parent.remove(a),a.parent=this,this.children.push(a),a.dispatchEvent(Ia)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",a),this)},remove:function(a){if(1<arguments.length){for(var t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}var r=this.children.indexOf(a);return-1!==r&&(a.parent=null,this.children.splice(r,1),a.dispatchEvent(ka)),this},attach:function(e){return this.updateWorldMatrix(!0,!1),Sa.getInverse(this.matrixWorld),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),Sa.multiply(e.parent.matrixWorld)),e.applyMatrix4(Sa),e.updateWorldMatrix(!1,!1),this.add(e),this},getObjectById:function(e){return this.getObjectByProperty("id",e)},getObjectByName:function(e){return this.getObjectByProperty("name",e)},getObjectByProperty:function(a,t){if(this[a]===t)return this;for(var e=0,o=this.children.length,i;e<o;e++)if(i=this.children[e].getObjectByProperty(a,t),void 0!==i)return i},getWorldPosition:function(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),e=new At),this.updateMatrixWorld(!0),e.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),e=new rt),this.updateMatrixWorld(!0),this.matrixWorld.decompose(Aa,e,Ca),e},getWorldScale:function(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),e=new At),this.updateMatrixWorld(!0),this.matrixWorld.decompose(Aa,Pa,e),e},getWorldDirection:function(a){void 0===a&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),a=new At),this.updateMatrixWorld(!0);var r=this.matrixWorld.elements;return a.set(r[8],r[9],r[10]).normalize()},raycast:function(){},traverse:function(a){a(this);for(var t=this.children,e=0,r=t.length;e<r;e++)t[e].traverse(a)},traverseVisible:function(a){if(!1!==this.visible){a(this);for(var t=this.children,e=0,r=t.length;e<r;e++)t[e].traverseVisible(a)}},traverseAncestors:function(a){var t=this.parent;null!==t&&(a(t),t.traverseAncestors(a))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(a){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||a)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,a=!0);for(var r=this.children,e=0,o=r.length;e<o;e++)r[e].updateMatrixWorld(a)},updateWorldMatrix:function(o,t){var e=this.parent;if(!0===o&&null!==e&&e.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t)for(var n=this.children,i=0,s=n.length;i<s;i++)n[i].updateWorldMatrix(!1,!0)},toJSON:function(g){function y(t,e){return void 0===t[e.uuid]&&(t[e.uuid]=e.toJSON(g)),e.uuid}function r(a){var t=[];for(var e in a){var r=a[e];delete r.metadata,t.push(r)}return t}var m=void 0===g||"string"==typeof g,e={};m&&(g={geometries:{},materials:{},textures:{},images:{},shapes:{}},e.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var n={};if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),!0===this.castShadow&&(n.castShadow=!0),!0===this.receiveShadow&&(n.receiveShadow=!0),!1===this.visible&&(n.visible=!1),!1===this.frustumCulled&&(n.frustumCulled=!1),0!==this.renderOrder&&(n.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),n.layers=this.layers.mask,n.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(n.matrixAutoUpdate=!1),this.isInstancedMesh&&(n.type="InstancedMesh",n.count=this.count,n.instanceMatrix=this.instanceMatrix.toJSON()),this.isMesh||this.isLine||this.isPoints){n.geometry=y(g.geometries,this.geometry);var i=this.geometry.parameters;if(void 0!==i&&void 0!==i.shapes){var a=i.shapes;if(Array.isArray(a))for(var v=0,_=a.length,x;v<_;v++)x=a[v],y(g.shapes,x);else y(g.shapes,a)}}if(void 0!==this.material)if(Array.isArray(this.material)){var b=[];for(v=0,_=this.material.length;v<_;v++)b.push(y(g.materials,this.material[v]));n.material=b}else n.material=y(g.materials,this.material);if(0<this.children.length)for(n.children=[],v=0;v<this.children.length;v++)n.children.push(this.children[v].toJSON(g).object);if(m){var u=r(g.geometries),c=r(g.materials),p=r(g.textures),f=r(g.images);a=r(g.shapes),0<u.length&&(e.geometries=u),0<c.length&&(e.materials=c),0<p.length&&(e.textures=p),0<f.length&&(e.images=f),0<a.length&&(e.shapes=a)}return e.object=n,e},clone:function(e){return new this.constructor().copy(this,e)},copy:function(a,t){if(void 0===t&&(t=!0),this.name=a.name,this.up.copy(a.up),this.position.copy(a.position),this.quaternion.copy(a.quaternion),this.scale.copy(a.scale),this.matrix.copy(a.matrix),this.matrixWorld.copy(a.matrixWorld),this.matrixAutoUpdate=a.matrixAutoUpdate,this.matrixWorldNeedsUpdate=a.matrixWorldNeedsUpdate,this.layers.mask=a.layers.mask,this.visible=a.visible,this.castShadow=a.castShadow,this.receiveShadow=a.receiveShadow,this.frustumCulled=a.frustumCulled,this.renderOrder=a.renderOrder,this.userData=JSON.parse(JSON.stringify(a.userData)),!0===t)for(var r=0,o;r<a.children.length;r++)o=a.children[r],this.add(o.clone());return this}}),Na.prototype=Object.assign(Object.create(wa.prototype),{constructor:Na,isScene:!0,copy:function(a,t){return wa.prototype.copy.call(this,a,t),null!==a.background&&(this.background=a.background.clone()),null!==a.environment&&(this.environment=a.environment.clone()),null!==a.fog&&(this.fog=a.fog.clone()),null!==a.overrideMaterial&&(this.overrideMaterial=a.overrideMaterial.clone()),this.autoUpdate=a.autoUpdate,this.matrixAutoUpdate=a.matrixAutoUpdate,this},toJSON:function(a){var t=wa.prototype.toJSON.call(this,a);return null!==this.background&&(t.object.background=this.background.toJSON(a)),null!==this.environment&&(t.object.environment=this.environment.toJSON(a)),null!==this.fog&&(t.object.fog=this.fog.toJSON()),t},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.assign(Ua.prototype,{clone:function(){return new this.constructor().copy(this)},copy:function(a){this.a=a.a,this.b=a.b,this.c=a.c,this.normal.copy(a.normal),this.color.copy(a.color),this.materialIndex=a.materialIndex;for(var t=0,r=a.vertexNormals.length;t<r;t++)this.vertexNormals[t]=a.vertexNormals[t].clone();for(t=0,r=a.vertexColors.length;t<r;t++)this.vertexColors[t]=a.vertexColors[t].clone();return this}});var Oa=0,ng=new na,Ha=new wa,ja=new At;Va.prototype=Object.assign(Object.create(H.prototype),{constructor:Va,isGeometry:!0,applyMatrix4:function(o){for(var t=new W().getNormalMatrix(o),e=0,l=this.vertices.length;e<l;e++)this.vertices[e].applyMatrix4(o);for(e=0,l=this.faces.length;e<l;e++){var d=this.faces[e];d.normal.applyMatrix3(t).normalize();for(var r=0,p=d.vertexNormals.length;r<p;r++)d.vertexNormals[r].applyMatrix3(t).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(e){return ng.makeRotationX(e),this.applyMatrix4(ng),this},rotateY:function(e){return ng.makeRotationY(e),this.applyMatrix4(ng),this},rotateZ:function(e){return ng.makeRotationZ(e),this.applyMatrix4(ng),this},translate:function(a,t,e){return ng.makeTranslation(a,t,e),this.applyMatrix4(ng),this},scale:function(a,t,e){return ng.makeScale(a,t,e),this.applyMatrix4(ng),this},lookAt:function(e){return Ha.lookAt(e),Ha.updateMatrix(),this.applyMatrix4(Ha.matrix),this},fromBufferGeometry:function(g){function t(e,t,n,i){var r=void 0===a?[]:[y.colors[e].clone(),y.colors[t].clone(),y.colors[n].clone()],l=new Ua(e,t,n,void 0===v?[]:[new At().fromArray(v,3*e),new At().fromArray(v,3*t),new At().fromArray(v,3*n)],r,i);y.faces.push(l),void 0!==s&&y.faceVertexUvs[0].push([new j().fromArray(s,2*e),new j().fromArray(s,2*t),new j().fromArray(s,2*n)]),void 0!==o&&y.faceVertexUvs[1].push([new j().fromArray(o,2*e),new j().fromArray(o,2*t),new j().fromArray(o,2*n)])}var y=this,e=null===g.index?void 0:g.index.array,n=g.attributes;if(void 0===n.position)return console.error("THREE.Geometry.fromBufferGeometry(): Position attribute required for conversion."),this;var i=n.position.array,v=void 0===n.normal?void 0:n.normal.array,a=void 0===n.color?void 0:n.color.array,s=void 0===n.uv?void 0:n.uv.array,o=void 0===n.uv2?void 0:n.uv2.array;void 0!==o&&(this.faceVertexUvs[1]=[]);for(var r=0;r<i.length;r+=3)y.vertices.push(new At().fromArray(i,r)),void 0!==a&&y.colors.push(new ua().fromArray(a,r));var l=g.groups;if(0<l.length)for(r=0;r<l.length;r++)for(var c=l[r],p=c.start,u=p,f=p+c.count;u<f;u+=3)void 0===e?t(u,u+1,u+2,c.materialIndex):t(e[u],e[u+1],e[u+2],c.materialIndex);else if(void 0!==e)for(r=0;r<e.length;r+=3)t(e[r],e[r+1],e[r+2]);else for(r=0;r<i.length/3;r+=3)t(r,r+1,r+2);return this.computeFaceNormals(),null!==g.boundingBox&&(this.boundingBox=g.boundingBox.clone()),null!==g.boundingSphere&&(this.boundingSphere=g.boundingSphere.clone()),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(ja).negate(),this.translate(ja.x,ja.y,ja.z),this},normalize:function(){this.computeBoundingSphere();var a=this.boundingSphere.center,t=this.boundingSphere.radius,e=0===t?1:1/t,r=new na;return r.set(e,0,0,-e*a.x,0,e,0,-e*a.y,0,0,e,-e*a.z,0,0,0,1),this.applyMatrix4(r),this},computeFaceNormals:function(){for(var l=new At,t=new At,e=0,d=this.faces.length;e<d;e++){var i=this.faces[e],r=this.vertices[i.a],a=this.vertices[i.b],s=this.vertices[i.c];l.subVectors(s,a),t.subVectors(r,a),l.cross(t),l.normalize(),i.normal.copy(l)}},computeVertexNormals:function(d){var m,g,f,y,v,_;for(void 0===d&&(d=!0),_=Array(this.vertices.length),m=0,g=this.vertices.length;m<g;m++)_[m]=new At;if(d){var x=new At,u=new At,c,b,E;for(f=0,y=this.faces.length;f<y;f++)v=this.faces[f],c=this.vertices[v.a],b=this.vertices[v.b],E=this.vertices[v.c],x.subVectors(E,b),u.subVectors(c,b),x.cross(u),_[v.a].add(x),_[v.b].add(x),_[v.c].add(x)}else for(this.computeFaceNormals(),f=0,y=this.faces.length;f<y;f++)_[(v=this.faces[f]).a].add(v.normal),_[v.b].add(v.normal),_[v.c].add(v.normal);for(m=0,g=this.vertices.length;m<g;m++)_[m].normalize();for(f=0,y=this.faces.length;f<y;f++){var T=(v=this.faces[f]).vertexNormals;3===T.length?(T[0].copy(_[v.a]),T[1].copy(_[v.b]),T[2].copy(_[v.c])):(T[0]=_[v.a].clone(),T[1]=_[v.b].clone(),T[2]=_[v.c].clone())}0<this.faces.length&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var a,r,o;for(this.computeFaceNormals(),a=0,r=this.faces.length;a<r;a++){var s=(o=this.faces[a]).vertexNormals;3===s.length?(s[0].copy(o.normal),s[1].copy(o.normal),s[2].copy(o.normal)):(s[0]=o.normal.clone(),s[1]=o.normal.clone(),s[2]=o.normal.clone())}0<this.faces.length&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var d,p,c,m,g;for(c=0,m=this.faces.length;c<m;c++)for((g=this.faces[c]).__originalFaceNormal?g.__originalFaceNormal.copy(g.normal):g.__originalFaceNormal=g.normal.clone(),g.__originalVertexNormals||(g.__originalVertexNormals=[]),d=0,p=g.vertexNormals.length;d<p;d++)g.__originalVertexNormals[d]?g.__originalVertexNormals[d].copy(g.vertexNormals[d]):g.__originalVertexNormals[d]=g.vertexNormals[d].clone();var f=new Va;for(f.faces=this.faces,d=0,p=this.morphTargets.length;d<p;d++){if(!this.morphNormals[d]){this.morphNormals[d]={},this.morphNormals[d].faceNormals=[],this.morphNormals[d].vertexNormals=[];var a=this.morphNormals[d].faceNormals,s=this.morphNormals[d].vertexNormals;for(c=0,m=this.faces.length;c<m;c++)u=new At,y={a:new At,b:new At,c:new At},a.push(u),s.push(y)}var o=this.morphNormals[d],u,y;for(f.vertices=this.morphTargets[d].vertices,f.computeFaceNormals(),f.computeVertexNormals(),c=0,m=this.faces.length;c<m;c++)g=this.faces[c],u=o.faceNormals[c],y=o.vertexNormals[c],u.copy(g.normal),y.a.copy(g.vertexNormals[0]),y.b.copy(g.vertexNormals[1]),y.c.copy(g.vertexNormals[2])}for(c=0,m=this.faces.length;c<m;c++)(g=this.faces[c]).normal=g.__originalFaceNormal,g.vertexNormals=g.__originalVertexNormals},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new it),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new Rt),this.boundingSphere.setFromPoints(this.vertices)},merge:function(T,t,e){if(T&&T.isGeometry){var A=this.vertices.length,r=this.vertices,a=T.vertices,s=this.faces,o=T.faces,l=this.colors,h=T.colors,u;void 0===e&&(e=0),void 0!==t&&(u=new W().getNormalMatrix(t));for(var P=0,C=a.length,L;P<C;P++)L=a[P].clone(),void 0!==t&&L.applyMatrix4(t),r.push(L);for(P=0,C=h.length;P<C;P++)l.push(h[P].clone());for(P=0,C=o.length;P<C;P++){var R=o[P],v=R.vertexNormals,y=R.vertexColors,_,k,F;(_=new Ua(R.a+A,R.b+A,R.c+A)).normal.copy(R.normal),void 0!==u&&_.normal.applyMatrix3(u).normalize();for(var I=0,N=v.length;I<N;I++)k=v[I].clone(),void 0!==u&&k.applyMatrix3(u).normalize(),_.vertexNormals.push(k);for(_.color.copy(R.color),I=0,N=y.length;I<N;I++)F=y[I],_.vertexColors.push(F.clone());_.materialIndex=R.materialIndex+e,s.push(_)}for(P=0,C=T.faceVertexUvs.length;P<C;P++){var z=T.faceVertexUvs[P];for(void 0===this.faceVertexUvs[P]&&(this.faceVertexUvs[P]=[]),I=0,N=z.length;I<N;I++){for(var E=z[I],w=[],D=0,O=E.length;D<O;D++)w.push(E[D].clone());this.faceVertexUvs[P].push(w)}}}else console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",T)},mergeMesh:function(e){e&&e.isMesh?(e.matrixAutoUpdate&&e.updateMatrix(),this.merge(e.geometry,e.matrix)):console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",e)},mergeVertices:function(){var g={},l=[],h=[],u=xm(10,4),c,y,v,_,x,b,E,T;for(v=0,_=this.vertices.length;v<_;v++)c=this.vertices[v],void 0===g[y=Sm(c.x*10000)+"_"+Sm(c.y*10000)+"_"+Sm(c.z*10000)]?(g[y]=v,l.push(this.vertices[v]),h[v]=l.length-1):h[v]=h[g[y]];var S=[];for(v=0,_=this.faces.length;v<_;v++){(x=this.faces[v]).a=h[x.a],x.b=h[x.b],x.c=h[x.c],b=[x.a,x.b,x.c];for(var p=0;3>p;p++)if(b[p]===b[(p+1)%3]){S.push(v);break}}for(v=S.length-1;0<=v;v--){var M=S[v];for(this.faces.splice(M,1),E=0,T=this.faceVertexUvs.length;E<T;E++)this.faceVertexUvs[E].splice(M,1)}var d=this.vertices.length-l.length;return this.vertices=l,d},setFromPoints:function(a){this.vertices=[];for(var t=0,r=a.length,n;t<r;t++)n=a[t],this.vertices.push(new At(n.x,n.y,n.z||0));return this},sortFacesByMaterialIndex:function(){for(var l=this.faces,t=l.length,e=0;e<t;e++)l[e]._id=e;l.sort(function(a,t){return a.materialIndex-t.materialIndex});var d=this.faceVertexUvs[0],a=this.faceVertexUvs[1],s,p;for(d&&d.length===t&&(s=[]),a&&a.length===t&&(p=[]),e=0;e<t;e++){var c=l[e]._id;s&&s.push(d[c]),p&&p.push(a[c])}s&&(this.faceVertexUvs[0]=s),p&&(this.faceVertexUvs[1]=p)},toJSON:function(){function T(a,t,e){return e?a|1<<t:a&~(1<<t)}function A(a){var t=a.x.toString()+a.y.toString()+a.z.toString();return void 0!==o[t]||(o[t]=s.length/3,s.push(a.x,a.y,a.z)),o[t]}function w(a){var t=a.r.toString()+a.g.toString()+a.b.toString();return void 0!==h[t]||(h[t]=l.length,l.push(a.getHex())),h[t]}function M(a){var t=a.x.toString()+a.y.toString();return void 0!==c[t]||(c[t]=u.length/2,u.push(a.x,a.y)),c[t]}var S={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(S.uuid=this.uuid,S.type=this.type,""!==this.name&&(S.name=this.name),void 0!==this.parameters){var t=this.parameters;for(var e in t)void 0!==t[e]&&(S[e]=t[e]);return S}for(var n=[],i=0,P;i<this.vertices.length;i++)P=this.vertices[i],n.push(P.x,P.y,P.z);var C=[],s=[],o={},l=[],h={},u=[],c={};for(i=0;i<this.faces.length;i++){var p=this.faces[i],f=void 0!==this.faceVertexUvs[0][i],d=0<p.normal.length(),m=0<p.vertexNormals.length,g=1!==p.color.r||1!==p.color.g||1!==p.color.b,v=0<p.vertexColors.length,y=0;if(y=T(y,0,0),y=T(y,1,!0),y=T(y,2,!1),y=T(y,3,f),y=T(y,4,d),y=T(y,5,m),y=T(y,6,g),y=T(y,7,v),C.push(y),C.push(p.a,p.b,p.c),C.push(p.materialIndex),f){var D=this.faceVertexUvs[0][i];C.push(M(D[0]),M(D[1]),M(D[2]))}if(d&&C.push(A(p.normal)),m){var x=p.vertexNormals;C.push(A(x[0]),A(x[1]),A(x[2]))}if(g&&C.push(w(p.color)),v){var b=p.vertexColors;C.push(w(b[0]),w(b[1]),w(b[2]))}}return S.data={},S.data.vertices=n,S.data.normals=s,0<l.length&&(S.data.colors=l),0<u.length&&(S.data.uvs=[u]),S.data.faces=C,S},clone:function(){return new Va().copy(this)},copy:function(T){var t,S,M,A,P,C;this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=T.name;var L=T.vertices;for(t=0,S=L.length;t<S;t++)this.vertices.push(L[t].clone());var o=T.colors;for(t=0,S=o.length;t<S;t++)this.colors.push(o[t].clone());var l=T.faces;for(t=0,S=l.length;t<S;t++)this.faces.push(l[t].clone());for(t=0,S=T.faceVertexUvs.length;t<S;t++){var h=T.faceVertexUvs[t];for(void 0===this.faceVertexUvs[t]&&(this.faceVertexUvs[t]=[]),M=0,A=h.length;M<A;M++){var u=h[M],c=[];for(P=0,C=u.length;P<C;P++){var p=u[P];c.push(p.clone())}this.faceVertexUvs[t].push(c)}}var f=T.morphTargets;for(t=0,S=f.length;t<S;t++){var d={};if(d.name=f[t].name,void 0!==f[t].vertices)for(d.vertices=[],M=0,A=f[t].vertices.length;M<A;M++)d.vertices.push(f[t].vertices[M].clone());if(void 0!==f[t].normals)for(d.normals=[],M=0,A=f[t].normals.length;M<A;M++)d.normals.push(f[t].normals[M].clone());this.morphTargets.push(d)}var m=T.morphNormals;for(t=0,S=m.length;t<S;t++){var g={};if(void 0!==m[t].vertexNormals)for(g.vertexNormals=[],M=0,A=m[t].vertexNormals.length;M<A;M++){var v=m[t].vertexNormals[M],y={};y.a=v.a.clone(),y.b=v.b.clone(),y.c=v.c.clone(),g.vertexNormals.push(y)}if(void 0!==m[t].faceNormals)for(g.faceNormals=[],M=0,A=m[t].faceNormals.length;M<A;M++)g.faceNormals.push(m[t].faceNormals[M].clone());this.morphNormals.push(g)}var _=T.skinWeights;for(t=0,S=_.length;t<S;t++)this.skinWeights.push(_[t].clone());var x=T.skinIndices;for(t=0,S=x.length;t<S;t++)this.skinIndices.push(x[t].clone());var b=T.lineDistances;for(t=0,S=b.length;t<S;t++)this.lineDistances.push(b[t]);var E=T.boundingBox;null!==E&&(this.boundingBox=E.clone());var w=T.boundingSphere;return null!==w&&(this.boundingSphere=w.clone()),this.elementsNeedUpdate=T.elementsNeedUpdate,this.verticesNeedUpdate=T.verticesNeedUpdate,this.uvsNeedUpdate=T.uvsNeedUpdate,this.normalsNeedUpdate=T.normalsNeedUpdate,this.colorsNeedUpdate=T.colorsNeedUpdate,this.lineDistancesNeedUpdate=T.lineDistancesNeedUpdate,this.groupsNeedUpdate=T.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});var Wa=new At;Object.defineProperty(Xa.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(Xa.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setUsage:function(e){return this.usage=e,this},copy:function(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this},copyAt:function(a,o,e){a*=this.itemSize,e*=o.itemSize;for(var s=0,l=this.itemSize;s<l;s++)this.array[a+s]=o.array[e+s];return this},copyArray:function(e){return this.array.set(e),this},copyColorsArray:function(o){for(var t=this.array,e=0,s=0,l=o.length,r;s<l;s++)r=o[s],void 0===r&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",s),r=new ua),t[e++]=r.r,t[e++]=r.g,t[e++]=r.b;return this},copyVector2sArray:function(o){for(var t=this.array,e=0,s=0,l=o.length,r;s<l;s++)r=o[s],void 0===r&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",s),r=new j),t[e++]=r.x,t[e++]=r.y;return this},copyVector3sArray:function(o){for(var t=this.array,e=0,s=0,l=o.length,r;s<l;s++)r=o[s],void 0===r&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",s),r=new At),t[e++]=r.x,t[e++]=r.y,t[e++]=r.z;return this},copyVector4sArray:function(o){for(var t=this.array,e=0,s=0,l=o.length,r;s<l;s++)r=o[s],void 0===r&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",s),r=new va),t[e++]=r.x,t[e++]=r.y,t[e++]=r.z,t[e++]=r.w;return this},applyMatrix3:function(a){for(var t=0,r=this.count;t<r;t++)Wa.x=this.getX(t),Wa.y=this.getY(t),Wa.z=this.getZ(t),Wa.applyMatrix3(a),this.setXYZ(t,Wa.x,Wa.y,Wa.z);return this},applyMatrix4:function(a){for(var t=0,r=this.count;t<r;t++)Wa.x=this.getX(t),Wa.y=this.getY(t),Wa.z=this.getZ(t),Wa.applyMatrix4(a),this.setXYZ(t,Wa.x,Wa.y,Wa.z);return this},applyNormalMatrix:function(a){for(var t=0,r=this.count;t<r;t++)Wa.x=this.getX(t),Wa.y=this.getY(t),Wa.z=this.getZ(t),Wa.applyNormalMatrix(a),this.setXYZ(t,Wa.x,Wa.y,Wa.z);return this},transformDirection:function(a){for(var t=0,r=this.count;t<r;t++)Wa.x=this.getX(t),Wa.y=this.getY(t),Wa.z=this.getZ(t),Wa.transformDirection(a),this.setXYZ(t,Wa.x,Wa.y,Wa.z);return this},set:function(a,t){return void 0===t&&(t=0),this.array.set(a,t),this},getX:function(e){return this.array[e*this.itemSize]},setX:function(a,t){return this.array[a*this.itemSize]=t,this},getY:function(e){return this.array[e*this.itemSize+1]},setY:function(a,t){return this.array[a*this.itemSize+1]=t,this},getZ:function(e){return this.array[e*this.itemSize+2]},setZ:function(a,t){return this.array[a*this.itemSize+2]=t,this},getW:function(e){return this.array[e*this.itemSize+3]},setW:function(a,t){return this.array[a*this.itemSize+3]=t,this},setXY:function(a,r,e){return a*=this.itemSize,this.array[a+0]=r,this.array[a+1]=e,this},setXYZ:function(a,r,e,n){return a*=this.itemSize,this.array[a+0]=r,this.array[a+1]=e,this.array[a+2]=n,this},setXYZW:function(a,o,e,n,i){return a*=this.itemSize,this.array[a+0]=o,this.array[a+1]=e,this.array[a+2]=n,this.array[a+3]=i,this},onUpload:function(e){return this.onUploadCallback=e,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)},toJSON:function(){return{itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized}}}),Ya.prototype=Object.create(Xa.prototype),Ya.prototype.constructor=Ya,Za.prototype=Object.create(Xa.prototype),Za.prototype.constructor=Za,Ja.prototype=Object.create(Xa.prototype),Ja.prototype.constructor=Ja,Ka.prototype=Object.create(Xa.prototype),Ka.prototype.constructor=Ka,$a.prototype=Object.create(Xa.prototype),$a.prototype.constructor=$a,Qa.prototype=Object.create(Xa.prototype),Qa.prototype.constructor=Qa,Er.prototype=Object.create(Xa.prototype),Er.prototype.constructor=Er,Tr.prototype=Object.create(Xa.prototype),Tr.prototype.constructor=Tr,Ar.prototype=Object.create(Xa.prototype),Ar.prototype.constructor=Ar,Object.assign(wr.prototype,{computeGroups:function(o){for(var t=[],n=void 0,l=o.faces,r=0,d,p;r<l.length;r++)p=l[r],p.materialIndex!==n&&(n=p.materialIndex,void 0!==d&&(d.count=3*r-d.start,t.push(d)),d={start:3*r,materialIndex:n});void 0!==d&&(d.count=3*r-d.start,t.push(d)),this.groups=t},fromGeometry:function(T){var t=T.faces,n=T.vertices,i=T.faceVertexUvs,r=i[0]&&0<i[0].length,a=i[1]&&0<i[1].length,s=T.morphTargets,o=s.length,l;if(0<o){l=[];for(var S=0;S<o;S++)l[S]={name:s[S].name,data:[]};this.morphTargets.position=l}var A=T.morphNormals,c=A.length,p;if(0<c){for(p=[],S=0;S<c;S++)p[S]={name:A[S].name,data:[]};this.morphTargets.normal=p}var P=T.skinIndices,f=T.skinWeights,d=P.length===n.length,m=f.length===n.length;for(0<n.length&&0===t.length&&console.error("THREE.DirectGeometry: Faceless geometries are not supported."),S=0;S<t.length;S++){var g=t[S];this.vertices.push(n[g.a],n[g.b],n[g.c]);var v=g.vertexNormals;if(3===v.length)this.normals.push(v[0],v[1],v[2]);else{var y=g.normal;this.normals.push(y,y,y)}var _=g.vertexColors,b;if(3===_.length)this.colors.push(_[0],_[1],_[2]);else{var C=g.color;this.colors.push(C,C,C)}!0===r&&(void 0===(b=i[0][S])?(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",S),this.uvs.push(new j,new j,new j)):this.uvs.push(b[0],b[1],b[2])),!0===a&&(void 0===(b=i[1][S])?(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",S),this.uvs2.push(new j,new j,new j)):this.uvs2.push(b[0],b[1],b[2]));for(var E=0,L;E<o;E++)L=s[E].vertices,l[E].data.push(L[g.a],L[g.b],L[g.c]);for(E=0;E<c;E++){var R=A[E].vertexNormals[S];p[E].data.push(R.a,R.b,R.c)}d&&this.skinIndices.push(P[g.a],P[g.b],P[g.c]),m&&this.skinWeights.push(f[g.a],f[g.b],f[g.c])}return this.computeGroups(T),this.verticesNeedUpdate=T.verticesNeedUpdate,this.normalsNeedUpdate=T.normalsNeedUpdate,this.colorsNeedUpdate=T.colorsNeedUpdate,this.uvsNeedUpdate=T.uvsNeedUpdate,this.groupsNeedUpdate=T.groupsNeedUpdate,null!==T.boundingSphere&&(this.boundingSphere=T.boundingSphere.clone()),null!==T.boundingBox&&(this.boundingBox=T.boundingBox.clone()),this}});var qa=1,ig=new na,os=new wa,ls=new At,hs=new it,us=new it,cs=new At;Dr.prototype=Object.assign(Object.create(H.prototype),{constructor:Dr,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(e){this.index=Array.isArray(e)?new(65535<Cr(e)?Er:$a)(e,1):e},getAttribute:function(e){return this.attributes[e]},setAttribute:function(a,t){return this.attributes[a]=t,this},deleteAttribute:function(e){return delete this.attributes[e],this},addGroup:function(a,t,e){this.groups.push({start:a,count:t,materialIndex:void 0===e?0:e})},clearGroups:function(){this.groups=[]},setDrawRange:function(a,t){this.drawRange.start=a,this.drawRange.count=t},applyMatrix4:function(a){var t=this.attributes.position;void 0!==t&&(t.applyMatrix4(a),t.needsUpdate=!0);var e=this.attributes.normal;if(void 0!==e){var n=new W().getNormalMatrix(a);e.applyNormalMatrix(n),e.needsUpdate=!0}var i=this.attributes.tangent;return void 0!==i&&(i.transformDirection(a),i.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(e){return ig.makeRotationX(e),this.applyMatrix4(ig),this},rotateY:function(e){return ig.makeRotationY(e),this.applyMatrix4(ig),this},rotateZ:function(e){return ig.makeRotationZ(e),this.applyMatrix4(ig),this},translate:function(a,t,e){return ig.makeTranslation(a,t,e),this.applyMatrix4(ig),this},scale:function(a,t,e){return ig.makeScale(a,t,e),this.applyMatrix4(ig),this},lookAt:function(e){return os.lookAt(e),os.updateMatrix(),this.applyMatrix4(os.matrix),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(ls).negate(),this.translate(ls.x,ls.y,ls.z),this},setFromObject:function(a){var t=a.geometry;if(a.isPoints||a.isLine){var e=new Tr(3*t.vertices.length,3),n=new Tr(3*t.colors.length,3);if(this.setAttribute("position",e.copyVector3sArray(t.vertices)),this.setAttribute("color",n.copyColorsArray(t.colors)),t.lineDistances&&t.lineDistances.length===t.vertices.length){var i=new Tr(t.lineDistances.length,1);this.setAttribute("lineDistance",i.copyArray(t.lineDistances))}null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone())}else a.isMesh&&t&&t.isGeometry&&this.fromGeometry(t);return this},setFromPoints:function(a){for(var t=[],e=0,o=a.length,i;e<o;e++)i=a[e],t.push(i.x,i.y,i.z||0);return this.setAttribute("position",new Tr(t,3)),this},updateFromObject:function(a){var t=a.geometry,r;if(a.isMesh){var o=t.__directGeometry;if(!0===t.elementsNeedUpdate&&(o=void 0,t.elementsNeedUpdate=!1),void 0===o)return this.fromGeometry(t);o.verticesNeedUpdate=t.verticesNeedUpdate,o.normalsNeedUpdate=t.normalsNeedUpdate,o.colorsNeedUpdate=t.colorsNeedUpdate,o.uvsNeedUpdate=t.uvsNeedUpdate,o.groupsNeedUpdate=t.groupsNeedUpdate,t.verticesNeedUpdate=!1,t.normalsNeedUpdate=!1,t.colorsNeedUpdate=!1,t.uvsNeedUpdate=!1,t.groupsNeedUpdate=!1,t=o}return!0===t.verticesNeedUpdate&&(void 0!==(r=this.attributes.position)&&(r.copyVector3sArray(t.vertices),r.needsUpdate=!0),t.verticesNeedUpdate=!1),!0===t.normalsNeedUpdate&&(void 0!==(r=this.attributes.normal)&&(r.copyVector3sArray(t.normals),r.needsUpdate=!0),t.normalsNeedUpdate=!1),!0===t.colorsNeedUpdate&&(void 0!==(r=this.attributes.color)&&(r.copyColorsArray(t.colors),r.needsUpdate=!0),t.colorsNeedUpdate=!1),t.uvsNeedUpdate&&(void 0!==(r=this.attributes.uv)&&(r.copyVector2sArray(t.uvs),r.needsUpdate=!0),t.uvsNeedUpdate=!1),t.lineDistancesNeedUpdate&&(void 0!==(r=this.attributes.lineDistance)&&(r.copyArray(t.lineDistances),r.needsUpdate=!0),t.lineDistancesNeedUpdate=!1),t.groupsNeedUpdate&&(t.computeGroups(a.geometry),this.groups=t.groups,t.groupsNeedUpdate=!1),this},fromGeometry:function(e){return e.__directGeometry=new wr().fromGeometry(e),this.fromDirectGeometry(e.__directGeometry)},fromDirectGeometry:function(m){var t=new Float32Array(3*m.vertices.length);if(this.setAttribute("position",new Xa(t,3).copyVector3sArray(m.vertices)),0<m.normals.length){var e=new Float32Array(3*m.normals.length);this.setAttribute("normal",new Xa(e,3).copyVector3sArray(m.normals))}if(0<m.colors.length){var n=new Float32Array(3*m.colors.length);this.setAttribute("color",new Xa(n,3).copyColorsArray(m.colors))}if(0<m.uvs.length){var i=new Float32Array(2*m.uvs.length);this.setAttribute("uv",new Xa(i,2).copyVector2sArray(m.uvs))}if(0<m.uvs2.length){var r=new Float32Array(2*m.uvs2.length);this.setAttribute("uv2",new Xa(r,2).copyVector2sArray(m.uvs2))}for(var a in this.groups=m.groups,m.morphTargets){for(var s=[],o=m.morphTargets[a],l=0,g=o.length;l<g;l++){var u=o[l],c=new Tr(3*u.data.length,3);c.name=u.name,s.push(c.copyVector3sArray(u.data))}this.morphAttributes[a]=s}if(0<m.skinIndices.length){var p=new Tr(4*m.skinIndices.length,4);this.setAttribute("skinIndex",p.copyVector4sArray(m.skinIndices))}if(0<m.skinWeights.length){var f=new Tr(4*m.skinWeights.length,4);this.setAttribute("skinWeight",f.copyVector4sArray(m.skinWeights))}return null!==m.boundingSphere&&(this.boundingSphere=m.boundingSphere.clone()),null!==m.boundingBox&&(this.boundingBox=m.boundingBox.clone()),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new it);var a=this.attributes.position,t=this.morphAttributes.position;if(!(void 0!==a))this.boundingBox.makeEmpty();else if(this.boundingBox.setFromBufferAttribute(a),t)for(var e=0,o=t.length,i;e<o;e++)i=t[e],hs.setFromBufferAttribute(i),this.morphTargetsRelative?(cs.addVectors(this.boundingBox.min,hs.min),this.boundingBox.expandByPoint(cs),cs.addVectors(this.boundingBox.max,hs.max),this.boundingBox.expandByPoint(cs)):(this.boundingBox.expandByPoint(hs.min),this.boundingBox.expandByPoint(hs.max));(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error("THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The \"position\" attribute is likely to have NaN values.",this)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new Rt);var d=this.attributes.position,t=this.morphAttributes.position;if(d){var e=this.boundingSphere.center;if(hs.setFromBufferAttribute(d),t)for(var n=0,p=t.length,c;n<p;n++)c=t[n],us.setFromBufferAttribute(c),this.morphTargetsRelative?(cs.addVectors(hs.min,us.min),hs.expandByPoint(cs),cs.addVectors(hs.max,us.max),hs.expandByPoint(cs)):(hs.expandByPoint(us.min),hs.expandByPoint(us.max));hs.getCenter(e);var m=0;for(n=0,p=d.count;n<p;n++)cs.fromBufferAttribute(d,n),m=Em(m,e.distanceToSquared(cs));if(t)for(n=0,p=t.length;n<p;n++){c=t[n];for(var u=this.morphTargetsRelative,o=0,g=c.count;o<g;o++)cs.fromBufferAttribute(c,o),u&&(ls.fromBufferAttribute(d,o),cs.add(ls)),m=Em(m,e.distanceToSquared(cs))}this.boundingSphere.radius=_m(m),isNaN(this.boundingSphere.radius)&&console.error("THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The \"position\" attribute is likely to have NaN values.",this)}},computeFaceNormals:function(){},computeVertexNormals:function(){var g=this.index,t=this.attributes;if(t.position){var e=t.position.array;if(void 0===t.normal)this.setAttribute("normal",new Xa(new Float32Array(e.length),3));else for(var n=t.normal.array,i=0,y=n.length;i<y;i++)n[i]=0;var v=t.normal.array,h=new At,u=new At,c=new At,p=new At,f=new At,d,_,x;if(g){var b=g.array;for(i=0,y=g.count;i<y;i+=3)d=3*b[i+0],_=3*b[i+1],x=3*b[i+2],h.fromArray(e,d),u.fromArray(e,_),c.fromArray(e,x),p.subVectors(c,u),f.subVectors(h,u),p.cross(f),v[d]+=p.x,v[d+1]+=p.y,v[d+2]+=p.z,v[_]+=p.x,v[_+1]+=p.y,v[_+2]+=p.z,v[x]+=p.x,v[x+1]+=p.y,v[x+2]+=p.z}else for(i=0,y=e.length;i<y;i+=9)h.fromArray(e,i),u.fromArray(e,i+3),c.fromArray(e,i+6),p.subVectors(c,u),f.subVectors(h,u),p.cross(f),v[i]=p.x,v[i+1]=p.y,v[i+2]=p.z,v[i+3]=p.x,v[i+4]=p.y,v[i+5]=p.z,v[i+6]=p.x,v[i+7]=p.y,v[i+8]=p.z;this.normalizeNormals(),t.normal.needsUpdate=!0}},merge:function(d,t){if(d&&d.isBufferGeometry){void 0===t&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));var p=this.attributes;for(var n in p)if(void 0!==d.attributes[n])for(var i=p[n].array,r=d.attributes[n],a=r.array,s=r.itemSize*t,o=bm(a.length,i.length-s),l=0,c=s;l<o;l++,c++)i[c]=a[l];return this}console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",d)},normalizeNormals:function(){for(var a=this.attributes.normal,t=0,r=a.count;t<r;t++)cs.x=a.getX(t),cs.y=a.getY(t),cs.z=a.getZ(t),cs.normalize(),a.setXYZ(t,cs.x,cs.y,cs.z)},toNonIndexed:function(){function d(d,t){for(var e=d.array,n=d.itemSize,i=new e.constructor(t.length*n),r=0,p=0,c=0,m=t.length;c<m;c++){r=t[c]*n;for(var l=0;l<n;l++)i[p++]=e[r++]}return new Xa(i,n)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var t=new Dr,e=this.index.array,n=this.attributes;for(var i in n){var m=d(n[i],e);t.setAttribute(i,m)}var g=this.morphAttributes;for(i in g){for(var s=[],o=g[i],l=0,y=o.length;l<y;l++)m=d(o[l],e),s.push(m);t.morphAttributes[i]=s}t.morphTargetsRelative=this.morphTargetsRelative;for(var u=this.groups,c=(l=0,u.length),p;l<c;l++)p=u[l],t.addGroup(p.start,p.count,p.materialIndex);return t},toJSON:function(){var m={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(m.uuid=this.uuid,m.type=this.type,""!==this.name&&(m.name=this.name),0<Object.keys(this.userData).length&&(m.userData=this.userData),void 0!==this.parameters){var t=this.parameters;for(var e in t)void 0!==t[e]&&(m[e]=t[e]);return m}m.data={attributes:{}};var g=this.index;null!==g&&(m.data.index={type:g.array.constructor.name,array:Array.prototype.slice.call(g.array)});var i=this.attributes;for(var e in i){var r=(c=i[e]).toJSON();""!==c.name&&(r.name=c.name),m.data.attributes[e]=r}var y={},s=!1;for(var e in this.morphAttributes){for(var v=this.morphAttributes[e],l=[],h=0,_=v.length;h<_;h++){var c;r=(c=v[h]).toJSON(),""!==c.name&&(r.name=c.name),l.push(r)}0<l.length&&(y[e]=l,s=!0)}s&&(m.data.morphAttributes=y,m.data.morphTargetsRelative=this.morphTargetsRelative);var x=this.groups;0<x.length&&(m.data.groups=JSON.parse(JSON.stringify(x)));var f=this.boundingSphere;return null!==f&&(m.data.boundingSphere={center:f.center.toArray(),radius:f.radius}),m},clone:function(){return new Dr().copy(this)},copy:function(d){var t,m,g;this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.name=d.name;var y=d.index;null!==y&&this.setIndex(y.clone());var r=d.attributes;for(t in r){var a=r[t];this.setAttribute(t,a.clone())}var s=d.morphAttributes;for(t in s){var o=[],l=s[t];for(m=0,g=l.length;m<g;m++)o.push(l[m].clone());this.morphAttributes[t]=o}this.morphTargetsRelative=d.morphTargetsRelative;var h=d.groups;for(m=0,g=h.length;m<g;m++){var u=h[m];this.addGroup(u.start,u.count,u.materialIndex)}var c=d.boundingBox;null!==c&&(this.boundingBox=c.clone());var p=d.boundingSphere;return null!==p&&(this.boundingSphere=p.clone()),this.drawRange.start=d.drawRange.start,this.drawRange.count=d.drawRange.count,this.userData=d.userData,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});class ps extends Dr{constructor(d,m,g,y,v,_){function x(p,t,e,n,i,r,a,c,d,m,g){var v=d+1,x=0,E=0,S=new At,M,w;for(w=0;w<m+1;w++){var C=w*(a/m)-a/2;for(M=0;M<v;M++){var P=M*(r/d)-r/2;S[p]=P*n,S[t]=C*i,S[e]=c/2,o.push(S.x,S.y,S.z),S[p]=0,S[t]=0,S[e]=0<c?1:-1,l.push(S.x,S.y,S.z),f.push(M/d),f.push(1-w/m),x+=1}}for(w=0;w<m;w++)for(M=0;M<d;M++){var D=u+M+v*w,L=u+M+v*(w+1),R=u+(M+1)+v*(w+1),F=u+(M+1)+v*w;s.push(D,L,F),s.push(L,R,F),E+=6}b.addGroup(h,E,g),h+=E,u+=x}super(),this.type="BoxBufferGeometry",this.parameters={width:d,height:m,depth:g,widthSegments:y,heightSegments:v,depthSegments:_};var b=this;d=d||1,m=m||1,g=g||1,y=Tm(y)||1,v=Tm(v)||1,_=Tm(_)||1;var s=[],o=[],l=[],f=[],u=0,h=0;x("z","y","x",-1,-1,g,m,d,_,v,0),x("z","y","x",1,-1,g,m,-d,_,v,1),x("x","z","y",1,1,d,g,m,y,_,2),x("x","z","y",1,-1,d,g,-m,y,_,3),x("x","y","z",1,-1,d,m,g,y,v,4),x("x","y","z",-1,-1,d,m,-g,y,v,5),this.setIndex(s),this.setAttribute("position",new Tr(o,3)),this.setAttribute("normal",new Tr(l,3)),this.setAttribute("uv",new Tr(f,2))}}Lr.prototype=Object.create(Va.prototype),Lr.prototype.constructor=Lr,Xr.prototype=Object.create(Dr.prototype),Xr.prototype.constructor=Xr;var ds=0;qr.prototype=Object.assign(Object.create(H.prototype),{constructor:qr,isMaterial:!0,onBeforeCompile:function(){},setValues:function(a){if(void 0!==a)for(var t in a){var e=a[t];if(!(void 0!==e))console.warn("THREE.Material: '"+t+"' parameter is undefined.");else if("shading"!==t){var r=this[t];void 0===r?console.warn("THREE."+this.type+": '"+t+"' is not a property of this material."):r&&r.isColor?r.set(e):r&&r.isVector3&&e&&e.isVector3?r.copy(e):this[t]=e}else console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===e}},toJSON:function(o){function s(a){var t=[];for(var e in a){var r=a[e];delete r.metadata,t.push(r)}return t}var i=void 0===o||"string"==typeof o;i&&(o={textures:{},images:{}});var e={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),this.color&&this.color.isColor&&(e.color=this.color.getHex()),void 0!==this.roughness&&(e.roughness=this.roughness),void 0!==this.metalness&&(e.metalness=this.metalness),this.sheen&&this.sheen.isColor&&(e.sheen=this.sheen.getHex()),this.emissive&&this.emissive.isColor&&(e.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(e.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(e.specular=this.specular.getHex()),void 0!==this.shininess&&(e.shininess=this.shininess),void 0!==this.clearcoat&&(e.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(e.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(e.clearcoatMap=this.clearcoatMap.toJSON(o).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(e.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(o).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(e.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(o).uuid,e.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(e.map=this.map.toJSON(o).uuid),this.matcap&&this.matcap.isTexture&&(e.matcap=this.matcap.toJSON(o).uuid),this.alphaMap&&this.alphaMap.isTexture&&(e.alphaMap=this.alphaMap.toJSON(o).uuid),this.lightMap&&this.lightMap.isTexture&&(e.lightMap=this.lightMap.toJSON(o).uuid),this.aoMap&&this.aoMap.isTexture&&(e.aoMap=this.aoMap.toJSON(o).uuid,e.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(e.bumpMap=this.bumpMap.toJSON(o).uuid,e.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(e.normalMap=this.normalMap.toJSON(o).uuid,e.normalMapType=this.normalMapType,e.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(e.displacementMap=this.displacementMap.toJSON(o).uuid,e.displacementScale=this.displacementScale,e.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(e.roughnessMap=this.roughnessMap.toJSON(o).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(e.metalnessMap=this.metalnessMap.toJSON(o).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(e.emissiveMap=this.emissiveMap.toJSON(o).uuid),this.specularMap&&this.specularMap.isTexture&&(e.specularMap=this.specularMap.toJSON(o).uuid),this.envMap&&this.envMap.isTexture&&(e.envMap=this.envMap.toJSON(o).uuid,e.reflectivity=this.reflectivity,e.refractionRatio=this.refractionRatio,void 0!==this.combine&&(e.combine=this.combine),void 0!==this.envMapIntensity&&(e.envMapIntensity=this.envMapIntensity)),this.gradientMap&&this.gradientMap.isTexture&&(e.gradientMap=this.gradientMap.toJSON(o).uuid),void 0!==this.size&&(e.size=this.size),void 0!==this.sizeAttenuation&&(e.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(e.blending=this.blending),!0===this.flatShading&&(e.flatShading=this.flatShading),0!==this.side&&(e.side=this.side),this.vertexColors&&(e.vertexColors=!0),1>this.opacity&&(e.opacity=this.opacity),!0===this.transparent&&(e.transparent=this.transparent),e.depthFunc=this.depthFunc,e.depthTest=this.depthTest,e.depthWrite=this.depthWrite,e.stencilWrite=this.stencilWrite,e.stencilWriteMask=this.stencilWriteMask,e.stencilFunc=this.stencilFunc,e.stencilRef=this.stencilRef,e.stencilFuncMask=this.stencilFuncMask,e.stencilFail=this.stencilFail,e.stencilZFail=this.stencilZFail,e.stencilZPass=this.stencilZPass,this.rotation&&0!==this.rotation&&(e.rotation=this.rotation),!0===this.polygonOffset&&(e.polygonOffset=!0),0!==this.polygonOffsetFactor&&(e.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(e.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&1!==this.linewidth&&(e.linewidth=this.linewidth),void 0!==this.dashSize&&(e.dashSize=this.dashSize),void 0!==this.gapSize&&(e.gapSize=this.gapSize),void 0!==this.scale&&(e.scale=this.scale),!0===this.dithering&&(e.dithering=!0),0<this.alphaTest&&(e.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(e.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(e.wireframe=this.wireframe),1<this.wireframeLinewidth&&(e.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(e.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(e.wireframeLinejoin=this.wireframeLinejoin),!0===this.morphTargets&&(e.morphTargets=!0),!0===this.morphNormals&&(e.morphNormals=!0),!0===this.skinning&&(e.skinning=!0),!1===this.visible&&(e.visible=!1),!1===this.toneMapped&&(e.toneMapped=!1),"{}"!==JSON.stringify(this.userData)&&(e.userData=this.userData),i){var n=s(o.textures),r=s(o.images);0<n.length&&(e.textures=n),0<r.length&&(e.images=r)}return e},clone:function(){return new this.constructor().copy(this)},copy:function(a){this.name=a.name,this.fog=a.fog,this.blending=a.blending,this.side=a.side,this.flatShading=a.flatShading,this.vertexColors=a.vertexColors,this.opacity=a.opacity,this.transparent=a.transparent,this.blendSrc=a.blendSrc,this.blendDst=a.blendDst,this.blendEquation=a.blendEquation,this.blendSrcAlpha=a.blendSrcAlpha,this.blendDstAlpha=a.blendDstAlpha,this.blendEquationAlpha=a.blendEquationAlpha,this.depthFunc=a.depthFunc,this.depthTest=a.depthTest,this.depthWrite=a.depthWrite,this.stencilWriteMask=a.stencilWriteMask,this.stencilFunc=a.stencilFunc,this.stencilRef=a.stencilRef,this.stencilFuncMask=a.stencilFuncMask,this.stencilFail=a.stencilFail,this.stencilZFail=a.stencilZFail,this.stencilZPass=a.stencilZPass,this.stencilWrite=a.stencilWrite;var t=a.clippingPlanes,e=null;if(null!==t){var o=t.length;e=Array(o);for(var i=0;i!==o;++i)e[i]=t[i].clone()}return this.clippingPlanes=e,this.clipIntersection=a.clipIntersection,this.clipShadows=a.clipShadows,this.shadowSide=a.shadowSide,this.colorWrite=a.colorWrite,this.precision=a.precision,this.polygonOffset=a.polygonOffset,this.polygonOffsetFactor=a.polygonOffsetFactor,this.polygonOffsetUnits=a.polygonOffsetUnits,this.dithering=a.dithering,this.alphaTest=a.alphaTest,this.premultipliedAlpha=a.premultipliedAlpha,this.visible=a.visible,this.toneMapped=a.toneMapped,this.userData=JSON.parse(JSON.stringify(a.userData)),this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.defineProperty(qr.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}});var og={clone:Zr,merge:Qr};gn.prototype=Object.create(qr.prototype),gn.prototype.constructor=gn,gn.prototype.isShaderMaterial=!0,gn.prototype.copy=function(e){return qr.prototype.copy.call(this,e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Zr(e.uniforms),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.extensions=e.extensions,this},gn.prototype.toJSON=function(o){var t=qr.prototype.toJSON.call(this,o);for(var e in t.uniforms={},this.uniforms){var n=this.uniforms[e].value;t.uniforms[e]=n&&n.isTexture?{type:"t",value:n.toJSON(o).uuid}:n&&n.isColor?{type:"c",value:n.getHex()}:n&&n.isVector2?{type:"v2",value:n.toArray()}:n&&n.isVector3?{type:"v3",value:n.toArray()}:n&&n.isVector4?{type:"v4",value:n.toArray()}:n&&n.isMatrix3?{type:"m3",value:n.toArray()}:n&&n.isMatrix4?{type:"m4",value:n.toArray()}:{value:n}}0<Object.keys(this.defines).length&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;var i={};for(var r in this.extensions)!0===this.extensions[r]&&(i[r]=!0);return 0<Object.keys(i).length&&(t.extensions=i),t};var bs=new At,ws=new At,Ds=new At,Ms=new At,Ss=new At,Ts=new At,As=new At;Object.assign(bn.prototype,{set:function(a,t){return this.origin.copy(a),this.direction.copy(t),this},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this},at:function(a,t){return void 0===t&&(console.warn("THREE.Ray: .at() target is now required"),t=new At),t.copy(this.direction).multiplyScalar(a).add(this.origin)},lookAt:function(e){return this.direction.copy(e).sub(this.origin).normalize(),this},recast:function(e){return this.origin.copy(this.at(e,bs)),this},closestPointToPoint:function(a,t){void 0===t&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),t=new At),t.subVectors(a,this.origin);var r=t.dot(this.direction);return 0>r?t.copy(this.origin):t.copy(this.direction).multiplyScalar(r).add(this.origin)},distanceToPoint:function(e){return _m(this.distanceSqToPoint(e))},distanceSqToPoint:function(a){var t=bs.subVectors(a,this.origin).dot(this.direction);return 0>t?this.origin.distanceToSquared(a):(bs.copy(this.direction).multiplyScalar(t).add(this.origin),bs.distanceToSquared(a))},distanceSqToSegment:function(m,t,e,n){ws.copy(m).add(t).multiplyScalar(.5),Ds.copy(t).sub(m).normalize(),Ms.copy(this.origin).sub(ws);var i=.5*m.distanceTo(t),l=-this.direction.dot(Ds),g=Ms.dot(this.direction),u=-Ms.dot(Ds),c=Ms.lengthSq(),p=vm(1-l*l),f,h,y,v;if(!(0<p))h=0<l?-i:i,y=-(f=Em(0,-(l*h+g)))*f+h*(h+2*u)+c;else if(!(h=l*g-u,v=i*p,0<=(f=l*u-g)))h<=-v?y=-(f=Em(0,-(-l*i+g)))*f+(h=0<f?-i:bm(Em(-i,-u),i))*(h+2*u)+c:h<=v?(f=0,y=(h=bm(Em(-i,-u),i))*(h+2*u)+c):y=-(f=Em(0,-(l*i+g)))*f+(h=0<f?i:bm(Em(-i,-u),i))*(h+2*u)+c;else if(!(h>=-v))h=-i,y=-(f=Em(0,-(l*h+g)))*f+h*(h+2*u)+c;else if(h<=v){var _=1/p;y=(f*=_)*(f+l*(h*=_)+2*g)+h*(l*f+h+2*u)+c}else h=i,y=-(f=Em(0,-(l*h+g)))*f+h*(h+2*u)+c;return e&&e.copy(this.direction).multiplyScalar(f).add(this.origin),n&&n.copy(Ds).multiplyScalar(h).add(ws),y},intersectSphere:function(l,t){bs.subVectors(l.center,this.origin);var e=bs.dot(this.direction),n=bs.dot(bs)-e*e,i=l.radius*l.radius;if(n>i)return null;var r=_m(i-n),a=e-r,s=e+r;return 0>a&&0>s?null:0>a?this.at(s,t):this.at(a,t)},intersectsSphere:function(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius},distanceToPlane:function(a){var t=a.normal.dot(this.direction);if(0===t)return 0===a.distanceToPoint(this.origin)?0:null;var e=-(this.origin.dot(a.normal)+a.constant)/t;return 0<=e?e:null},intersectPlane:function(a,t){var e=this.distanceToPlane(a);return null===e?null:this.at(e,t)},intersectsPlane:function(a){var t=a.distanceToPoint(this.origin);return 0===t||0>a.normal.dot(this.direction)*t},intersectBox:function(d,t){var e=1/this.direction.x,l=1/this.direction.y,p=1/this.direction.z,m=this.origin,c,u,g,f,h,y;return 0<=e?(c=(d.min.x-m.x)*e,u=(d.max.x-m.x)*e):(c=(d.max.x-m.x)*e,u=(d.min.x-m.x)*e),0<=l?(g=(d.min.y-m.y)*l,f=(d.max.y-m.y)*l):(g=(d.max.y-m.y)*l,f=(d.min.y-m.y)*l),c>f||g>u?null:((g>c||c!=c)&&(c=g),(f<u||u!=u)&&(u=f),0<=p?(h=(d.min.z-m.z)*p,y=(d.max.z-m.z)*p):(h=(d.max.z-m.z)*p,y=(d.min.z-m.z)*p),c>y||h>u?null:((h>c||c!=c)&&(c=h),(y<u||u!=u)&&(u=y),0>u?null:this.at(0<=c?c:u,t)))},intersectsBox:function(e){return null!==this.intersectBox(e,bs)},intersectTriangle:function(d,t,e,n,i){Ss.subVectors(t,d),Ts.subVectors(e,d),As.crossVectors(Ss,Ts);var r=this.direction.dot(As),p;if(0<r){if(n)return null;p=1}else{if(!(0>r))return null;p=-1,r=-r}Ms.subVectors(this.origin,d);var c=p*this.direction.dot(Ts.crossVectors(Ms,Ts));if(0>c)return null;var o=p*this.direction.dot(Ss.cross(Ms));if(0>o)return null;if(c+o>r)return null;var l=-p*Ms.dot(As);return 0>l?null:this.at(l/r,i)},applyMatrix4:function(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this},equals:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}});var Cs=new At,Fs=new At,Ls=new At,Rs=new At,Is=new At,ks=new At,Os=new At,Ns=new At,Bs=new At,zs=new At;Object.assign(En,{getNormal:function(a,t,e,n){void 0===n&&(console.warn("THREE.Triangle: .getNormal() target is now required"),n=new At),n.subVectors(e,t),Cs.subVectors(a,t),n.cross(Cs);var o=n.lengthSq();return 0<o?n.multiplyScalar(1/_m(o)):n.set(0,0,0)},getBarycoord:function(d,t,e,n,i){Cs.subVectors(n,t),Fs.subVectors(e,t),Ls.subVectors(d,t);var m=Cs.dot(Cs),a=Cs.dot(Fs),s=Cs.dot(Ls),o=Fs.dot(Fs),l=Fs.dot(Ls),g=m*o-a*a;if(void 0===i&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),i=new At),0==g)return i.set(-2,-1,-1);var u=1/g,c=(o*s-a*l)*u,p=(m*l-a*s)*u;return i.set(1-c-p,p,c)},containsPoint:function(a,t,e,r){return En.getBarycoord(a,t,e,r,Rs),0<=Rs.x&&0<=Rs.y&&1>=Rs.x+Rs.y},getUV:function(l,t,e,n,i,r,a,s){return this.getBarycoord(l,t,e,n,Rs),s.set(0,0),s.addScaledVector(i,Rs.x),s.addScaledVector(r,Rs.y),s.addScaledVector(a,Rs.z),s},isFrontFacing:function(a,t,e,r){return Cs.subVectors(e,t),Fs.subVectors(a,t),0>Cs.cross(Fs).dot(r)}}),Object.assign(En.prototype,{set:function(a,t,e){return this.a.copy(a),this.b.copy(t),this.c.copy(e),this},setFromPointsAndIndices:function(a,t,e,r){return this.a.copy(a[t]),this.b.copy(a[e]),this.c.copy(a[r]),this},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this},getArea:function(){return Cs.subVectors(this.c,this.b),Fs.subVectors(this.a,this.b),.5*Cs.cross(Fs).length()},getMidpoint:function(e){return void 0===e&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),e=new At),e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},getNormal:function(e){return En.getNormal(this.a,this.b,this.c,e)},getPlane:function(e){return void 0===e&&(console.warn("THREE.Triangle: .getPlane() target is now required"),e=new It),e.setFromCoplanarPoints(this.a,this.b,this.c)},getBarycoord:function(a,t){return En.getBarycoord(a,this.a,this.b,this.c,t)},getUV:function(a,t,e,n,i){return En.getUV(a,this.a,this.b,this.c,t,e,n,i)},containsPoint:function(e){return En.containsPoint(e,this.a,this.b,this.c)},isFrontFacing:function(e){return En.isFrontFacing(this.a,this.b,this.c,e)},intersectsBox:function(e){return e.intersectsTriangle(this)},closestPointToPoint:function(y,t){void 0===t&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),t=new At);var v=this.a,r=this.b,a=this.c,s,_;Is.subVectors(r,v),ks.subVectors(a,v),Ns.subVectors(y,v);var x=Is.dot(Ns),o=ks.dot(Ns);if(0>=x&&0>=o)return t.copy(v);Bs.subVectors(y,r);var l=Is.dot(Bs),h=ks.dot(Bs);if(0<=l&&h<=l)return t.copy(r);var u=x*h-l*o;if(0>=u&&0<=x&&0>=l)return s=x/(x-l),t.copy(v).addScaledVector(Is,s);zs.subVectors(y,a);var c=Is.dot(zs),p=ks.dot(zs);if(0<=p&&c<=p)return t.copy(a);var f=c*o-x*p;if(0>=f&&0<=o&&0>=p)return _=o/(o-p),t.copy(v).addScaledVector(ks,_);var d=l*p-c*h;if(0>=d&&0<=h-l&&0<=c-p)return Os.subVectors(a,r),_=(h-l)/(h-l+(c-p)),t.copy(r).addScaledVector(Os,_);var m=1/(d+f+u);return s=f*m,_=u*m,t.copy(v).addScaledVector(Is,s).addScaledVector(ks,_)},equals:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}),_i.prototype=Object.create(qr.prototype),_i.prototype.constructor=_i,_i.prototype.isMeshBasicMaterial=!0,_i.prototype.copy=function(e){return qr.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this};var Us=new na,Hs=new bn,js=new Rt,Ws=new At,Xs=new At,qs=new At,Ys=new At,Zs=new At,Js=new At,Ks=new At,$s=new At,Qs=new At,to=new j,eo=new j,no=new j,io=new At,ro=new At;xi.prototype=Object.assign(Object.create(wa.prototype),{constructor:xi,isMesh:!0,copy:function(e){return wa.prototype.copy.call(this,e),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this},updateMorphTargets:function(){var l=this.geometry,i,d,p;if(l.isBufferGeometry){var c=l.morphAttributes,r=Object.keys(c);if(0<r.length){var a=c[r[0]];if(void 0!==a)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},i=0,d=a.length;i<d;i++)p=a[i].name||i+"",this.morphTargetInfluences.push(0),this.morphTargetDictionary[p]=i}}else{var s=l.morphTargets;void 0!==s&&0<s.length&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}},raycast:function(N,t){var e=this.geometry,i=this.material,r=this.matrixWorld,a;if(void 0!==i&&(null===e.boundingSphere&&e.computeBoundingSphere(),js.copy(e.boundingSphere),js.applyMatrix4(r),!1!==N.ray.intersectsSphere(js)&&(Us.getInverse(r),Hs.copy(N.ray).applyMatrix4(Us),null===e.boundingBox||!1!==Hs.intersectsBox(e.boundingBox))))if(e.isBufferGeometry){var z=e.index,m=e.attributes.position,g=e.morphAttributes.position,v=e.morphTargetsRelative,y=e.attributes.uv,_=e.attributes.uv2,x=e.groups,b=e.drawRange,E,O,U,B,V,G,H,W,X;if(null!==z){if(Array.isArray(i))for(B=0,G=x.length;B<G;B++)for(X=i[(W=x[B]).materialIndex],V=Em(W.start,b.start),H=bm(W.start+W.count,b.start+b.count);V<H;V+=3)E=z.getX(V),O=z.getX(V+1),U=z.getX(V+2),(a=oo(this,X,N,Hs,m,g,v,y,_,E,O,U))&&(a.faceIndex=Tm(V/3),a.face.materialIndex=W.materialIndex,t.push(a));else for(B=Em(0,b.start),G=bm(z.count,b.start+b.count);B<G;B+=3)E=z.getX(B),O=z.getX(B+1),U=z.getX(B+2),(a=oo(this,i,N,Hs,m,g,v,y,_,E,O,U))&&(a.faceIndex=Tm(B/3),t.push(a));}else if(void 0!==m)if(Array.isArray(i))for(B=0,G=x.length;B<G;B++)for(X=i[(W=x[B]).materialIndex],V=Em(W.start,b.start),H=bm(W.start+W.count,b.start+b.count);V<H;V+=3)(a=oo(this,X,N,Hs,m,g,v,y,_,E=V,O=V+1,U=V+2))&&(a.faceIndex=Tm(V/3),a.face.materialIndex=W.materialIndex,t.push(a));else for(B=Em(0,b.start),G=bm(m.count,b.start+b.count);B<G;B+=3)(a=oo(this,i,N,Hs,m,g,v,y,_,E=B,O=B+1,U=B+2))&&(a.faceIndex=Tm(B/3),t.push(a))}else if(e.isGeometry){var Y=Array.isArray(i),T=e.vertices,A=e.faces,C=e.faceVertexUvs[0],P,q,Z,J;0<C.length&&(J=C);for(var K=0,Q=A.length;K<Q;K++){var L=A[K],R=Y?i[L.materialIndex]:i;if(void 0!==R&&(P=T[L.a],q=T[L.b],Z=T[L.c],a=so(this,R,N,Hs,P,q,Z,io))){if(J&&J[K]){var I=J[K];to.copy(I[0]),eo.copy(I[1]),no.copy(I[2]),a.uv=En.getUV(io,P,q,Z,to,eo,no,new j)}a.face=L,a.faceIndex=K,t.push(a)}}}},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});var ao={alphamap_fragment:"\n#ifdef USE_ALPHAMAP\n\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n\n#endif\n",alphamap_pars_fragment:"\n#ifdef USE_ALPHAMAP\n\n\tuniform sampler2D alphaMap;\n\n#endif\n",alphatest_fragment:"\n#ifdef ALPHATEST\n\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n\n#endif\n",aomap_fragment:"\n#ifdef USE_AOMAP\n\n\t// reads channel R, compatible with a combined OcclusionRoughnessMetallic (RGB) texture\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\n\t#endif\n\n#endif\n",aomap_pars_fragment:"\n#ifdef USE_AOMAP\n\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n\n#endif\n",begin_vertex:"\nvec3 transformed = vec3( position );\n",beginnormal_vertex:"\nvec3 objectNormal = vec3( normal );\n\n#ifdef USE_TANGENT\n\n\tvec3 objectTangent = vec3( tangent.xyz );\n\n#endif\n",bsdfs:"\n\n// Analytical approximation of the DFG LUT, one half of the\n// split-sum approximation used in indirect specular lighting.\n// via 'environmentBRDF' from \"Physically Based Shading on Mobile\"\n// https://www.unrealengine.com/blog/physically-based-shading-on-mobile - environmentBRDF for GGX on mobile\nvec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\n\tvec4 r = roughness * c0 + c1;\n\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\n\treturn vec2( -1.04, 1.04 ) * a004 + r.zw;\n\n}\n\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\n\t// based upon Frostbite 3 Moving to Physically-based Rendering\n\t// page 32, equation 26: E[window1]\n\t// https://seblagarde.files.wordpress.com/2015/07/course_notes_moving_frostbite_to_pbr_v32.pdf\n\t// this is intended to be used on spot and point lights who are represented as luminous intensity\n\t// but who must be converted to luminous irradiance for surface lighting calculation\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\n\tif( cutoffDistance > 0.0 ) {\n\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\n\t}\n\n\treturn distanceFalloff;\n\n#else\n\n\tif( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\n\t}\n\n\treturn 1.0;\n\n#endif\n\n}\n\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\n\treturn RECIPROCAL_PI * diffuseColor;\n\n} // validated\n\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\n\t// Original approximation by Christophe Schlick '94\n\t// float fresnel = pow( 1.0 - dotLH, 5.0 );\n\n\t// Optimized variant (presented by Epic at SIGGRAPH '13)\n\t// https://cdn2.unrealengine.com/Resources/files/2013SiggraphPresentationsNotes-26915738.pdf\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n\n} // validated\n\nvec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {\n\n\t// See F_Schlick\n\tfloat fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );\n\tvec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;\n\n\treturn Fr * fresnel + F0;\n\n}\n\n\n// Microfacet Models for Refraction through Rough Surfaces - equation (34)\n// http://graphicrants.blogspot.com/2013/08/specular-brdf-reference.html\n// alpha is \"roughness squared\" in Disney\xE2\u20AC\u2122s reparameterization\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\n\t// geometry term (normalized) = G(l)\xE2\u2039\u2026G(v) / 4(n\xE2\u2039\u2026l)(n\xE2\u2039\u2026v)\n\t// also see #12151\n\n\tfloat a2 = pow2( alpha );\n\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\n\treturn 1.0 / ( gl * gv );\n\n} // validated\n\n// Moving Frostbite to Physically Based Rendering 3.0 - page 12, listing 2\n// https://seblagarde.files.wordpress.com/2015/07/course_notes_moving_frostbite_to_pbr_v32.pdf\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\n\tfloat a2 = pow2( alpha );\n\n\t// dotNL and dotNV are explicitly swapped. This is not a mistake.\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\n\treturn 0.5 / max( gv + gl, EPSILON );\n\n}\n\n// Microfacet Models for Refraction through Rough Surfaces - equation (33)\n// http://graphicrants.blogspot.com/2013/08/specular-brdf-reference.html\n// alpha is \"roughness squared\" in Disney\xE2\u20AC\u2122s reparameterization\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\n\tfloat a2 = pow2( alpha );\n\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0; // avoid alpha = 0 with dotNH = 1\n\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n\n}\n\n// GGX Distribution, Schlick Fresnel, GGX-Smith Visibility\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\n\tfloat alpha = pow2( roughness ); // UE4's roughness\n\n\tvec3 halfDir = normalize( incidentLight.direction + viewDir );\n\n\tfloat dotNL = saturate( dot( normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\n\tfloat D = D_GGX( alpha, dotNH );\n\n\treturn F * ( G * D );\n\n} // validated\n\n// Rect Area Light\n\n// Real-Time Polygonal-Light Shading with Linearly Transformed Cosines\n// by Eric Heitz, Jonathan Dupuy, Stephen Hill and David Neubelt\n// code: https://github.com/selfshadow/ltc_code/\n\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\n\n\tfloat dotNV = saturate( dot( N, V ) );\n\n\t// texture parameterized by sqrt( GGX alpha ) and sqrt( 1 - cos( theta ) )\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\n\treturn uv;\n\n}\n\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\n\t// Real-Time Area Lighting: a Journey from Research to Production (p.102)\n\t// An approximation of the form factor of a horizon-clipped rectangle.\n\n\tfloat l = length( f );\n\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n\n}\n\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\n\tfloat x = dot( v1, v2 );\n\n\tfloat y = abs( x );\n\n\t// rational polynomial approximation to theta / sin( theta ) / 2PI\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\n\treturn cross( v1, v2 ) * theta_sintheta;\n\n}\n\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\n\t// bail if point is on back side of plane of light\n\t// assumes ccw winding order of light vertices\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\n\t// construct orthonormal basis around N\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 ); // negated from paper; possibly due to a different handedness of world coordinate system\n\n\t// compute transform\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\n\t// transform rect\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\n\t// project rect onto sphere\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\n\t// calculate vector form factor\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\n\t// adjust for horizon clipping\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\n/*\n\t// alternate method of adjusting for horizon clipping (see referece)\n\t// refactoring required\n\tfloat len = length( vectorFormFactor );\n\tfloat z = vectorFormFactor.z / len;\n\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\n\n\t// tabulated horizon-clipped sphere, apparently...\n\tvec2 uv = vec2( z * 0.5 + 0.5, len );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\n\tfloat scale = texture2D( ltc_2, uv ).w;\n\n\tfloat result = len * scale;\n*/\n\n\treturn vec3( result );\n\n}\n\n// End Rect Area Light\n\n// ref: https://www.unrealengine.com/blog/physically-based-shading-on-mobile - environmentBRDF for GGX on mobile\nvec3 BRDF_Specular_GGX_Environment( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\n\treturn specularColor * brdf.x + brdf.y;\n\n} // validated\n\n// Fdez-Ag\xC3\xBCera's \"Multiple-Scattering Microfacet Model for Real-Time Image Based Lighting\"\n// Approximates multiscattering in order to preserve energy.\n// http://www.jcgt.org/published/0008/01/03/\nvoid BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\n\tvec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\tvec3 FssEss = F * brdf.x + brdf.y;\n\n\tfloat Ess = brdf.x + brdf.y;\n\tfloat Ems = 1.0 - Ess;\n\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619; // 1/21\n\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n\n}\n\nfloat G_BlinnPhong_Implicit( /* const in float dotNL, const in float dotNV */ ) {\n\n\t// geometry term is (n dot l)(n dot v) / 4(n dot l)(n dot v)\n\treturn 0.25;\n\n}\n\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n\n}\n\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\n\t//float dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\n\t//float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\n\tfloat G = G_BlinnPhong_Implicit( /* dotNL, dotNV */ );\n\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\n\treturn F * ( G * D );\n\n} // validated\n\n// source: http://simonstechblog.blogspot.ca/2011/12/microfacet-brdf.html\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\n\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n\n#if defined( USE_SHEEN )\n\n// https://github.com/google/filament/blob/master/shaders/src/brdf.fs#L94\nfloat D_Charlie(float roughness, float NoH) {\n\t// Estevez and Kulla 2017, \"Production Friendly Microfacet Sheen BRDF\"\n\tfloat invAlpha  = 1.0 / roughness;\n\tfloat cos2h = NoH * NoH;\n\tfloat sin2h = max(1.0 - cos2h, 0.0078125); // 2^(-14/2), so sin2h^2 > 0 in fp16\n\treturn (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);\n}\n\n// https://github.com/google/filament/blob/master/shaders/src/brdf.fs#L136\nfloat V_Neubelt(float NoV, float NoL) {\n\t// Neubelt and Pettineo 2013, \"Crafting a Next-gen Material Pipeline for The Order: 1886\"\n\treturn saturate(1.0 / (4.0 * (NoL + NoV - NoL * NoV)));\n}\n\nvec3 BRDF_Specular_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {\n\n\tvec3 N = geometry.normal;\n\tvec3 V = geometry.viewDir;\n\n\tvec3 H = normalize( V + L );\n\tfloat dotNH = saturate( dot( N, H ) );\n\n\treturn specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );\n\n}\n\n#endif\n",bumpmap_pars_fragment:"\n#ifdef USE_BUMPMAP\n\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\n\t// Bump Mapping Unparametrized Surfaces on the GPU by Morten S. Mikkelsen\n\t// http://api.unrealengine.com/attachments/Engine/Rendering/LightingAndShadows/BumpMappingWithoutTangentSpace/mm_sfgrad_bump.pdf\n\n\t// Evaluate the derivative of the height w.r.t. screen-space using forward differencing (listing 2)\n\n\tvec2 dHdxy_fwd() {\n\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\n\t\treturn vec2( dBx, dBy );\n\n\t}\n\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\n\t\t// Workaround for Adreno 3XX dFd*( vec3 ) bug. See #9988\n\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\t\t// normalized\n\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\n\t\tfDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\n\t}\n\n#endif\n",clipping_planes_fragment:"\n#if NUM_CLIPPING_PLANES > 0\n\n\tvec4 plane;\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\n\t}\n\t#pragma unroll_loop_end\n\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\n\t\tbool clipped = true;\n\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\n\t\t}\n\t\t#pragma unroll_loop_end\n\n\t\tif ( clipped ) discard;\n\n\t#endif\n\n#endif\n",clipping_planes_pars_fragment:"\n#if NUM_CLIPPING_PLANES > 0\n\n\tvarying vec3 vClipPosition;\n\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n\n#endif\n",clipping_planes_pars_vertex:"\n#if NUM_CLIPPING_PLANES > 0\n\n\tvarying vec3 vClipPosition;\n\n#endif\n",clipping_planes_vertex:"\n#if NUM_CLIPPING_PLANES > 0\n\n\tvClipPosition = - mvPosition.xyz;\n\n#endif\n",color_fragment:"\n#ifdef USE_COLOR\n\n\tdiffuseColor.rgb *= vColor;\n\n#endif\n",color_pars_fragment:"\n#ifdef USE_COLOR\n\n\tvarying vec3 vColor;\n\n#endif\n",color_pars_vertex:"\n#ifdef USE_COLOR\n\n\tvarying vec3 vColor;\n\n#endif\n",color_vertex:"\n#ifdef USE_COLOR\n\n\tvColor.xyz = color.xyz;\n\n#endif\n",common:"\n#define PI 3.14159265359\n#define PI2 6.28318530718\n#define PI_HALF 1.5707963267949\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n\n#ifndef saturate\n// <tonemapping_pars_fragment> may have defined saturate() already\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement(a) ( 1.0 - saturate( a ) )\n\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\n// expects values in the range of [0,1]x[0,1], returns values in the [0,1] range.\n// do not collapse into a single function per: http://byteblacksmith.com/improvements-to-the-canonical-one-liner-glsl-rand-for-opengl-es-2-0/\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\n\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat max3( vec3 v ) { return max( max( v.x, v.y ), v.z ); }\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\n\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\n\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\n\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\n\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n}\n\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t// dir can be either a direction vector or a normal vector\n\t// upper-left 3x3 of matrix is assumed to be orthogonal\n\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n\n}\n\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\n\treturn - distance * planeNormal + point;\n\n}\n\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n\n}\n\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n\n}\n\nmat3 transposeMat3( const in mat3 m ) {\n\n\tmat3 tmp;\n\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\n\treturn tmp;\n\n}\n\n// https://en.wikipedia.org/wiki/Relative_luminance\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\n\treturn dot( weights, color.rgb );\n\n}\n\nbool isPerspectiveMatrix( mat4 m ) {\n\n  return m[ 2 ][ 3 ] == - 1.0;\n\n}\n",cube_uv_reflection_fragment:"\n#ifdef ENVMAP_TYPE_CUBE_UV\n\n#define cubeUV_maxMipLevel 8.0\n#define cubeUV_minMipLevel 4.0\n#define cubeUV_maxTileSize 256.0\n#define cubeUV_minTileSize 16.0\n\n// These shader functions convert between the UV coordinates of a single face of\n// a cubemap, the 0-5 integer index of a cube face, and the direction vector for\n// sampling a textureCube (not generally normalized).\n\nfloat getFace(vec3 direction) {\n    vec3 absDirection = abs(direction);\n    float face = -1.0;\n    if (absDirection.x > absDirection.z) {\n      if (absDirection.x > absDirection.y)\n        face = direction.x > 0.0 ? 0.0 : 3.0;\n      else\n        face = direction.y > 0.0 ? 1.0 : 4.0;\n    } else {\n      if (absDirection.z > absDirection.y)\n        face = direction.z > 0.0 ? 2.0 : 5.0;\n      else\n        face = direction.y > 0.0 ? 1.0 : 4.0;\n    }\n    return face;\n}\n\nvec2 getUV(vec3 direction, float face) {\n    vec2 uv;\n    if (face == 0.0) {\n      uv = vec2(-direction.z, direction.y) / abs(direction.x);\n    } else if (face == 1.0) {\n      uv = vec2(direction.x, -direction.z) / abs(direction.y);\n    } else if (face == 2.0) {\n      uv = direction.xy / abs(direction.z);\n    } else if (face == 3.0) {\n      uv = vec2(direction.z, direction.y) / abs(direction.x);\n    } else if (face == 4.0) {\n      uv = direction.xz / abs(direction.y);\n    } else {\n      uv = vec2(-direction.x, direction.y) / abs(direction.z);\n    }\n    return 0.5 * (uv + 1.0);\n}\n\nvec3 bilinearCubeUV(sampler2D envMap, vec3 direction, float mipInt) {\n  float face = getFace(direction);\n  float filterInt = max(cubeUV_minMipLevel - mipInt, 0.0);\n  mipInt = max(mipInt, cubeUV_minMipLevel);\n  float faceSize = exp2(mipInt);\n\n  float texelSize = 1.0 / (3.0 * cubeUV_maxTileSize);\n\n  vec2 uv = getUV(direction, face) * (faceSize - 1.0);\n  vec2 f = fract(uv);\n  uv += 0.5 - f;\n  if (face > 2.0) {\n    uv.y += faceSize;\n    face -= 3.0;\n  }\n  uv.x += face * faceSize;\n  if(mipInt < cubeUV_maxMipLevel){\n    uv.y += 2.0 * cubeUV_maxTileSize;\n  }\n  uv.y += filterInt * 2.0 * cubeUV_minTileSize;\n  uv.x += 3.0 * max(0.0, cubeUV_maxTileSize - 2.0 * faceSize);\n  uv *= texelSize;\n\n  vec3 tl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n  uv.x += texelSize;\n  vec3 tr = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n  uv.y += texelSize;\n  vec3 br = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n  uv.x -= texelSize;\n  vec3 bl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n  vec3 tm = mix(tl, tr, f.x);\n  vec3 bm = mix(bl, br, f.x);\n  return mix(tm, bm, f.y);\n}\n\n// These defines must match with PMREMGenerator\n\n#define r0 1.0\n#define v0 0.339\n#define m0 -2.0\n#define r1 0.8\n#define v1 0.276\n#define m1 -1.0\n#define r4 0.4\n#define v4 0.046\n#define m4 2.0\n#define r5 0.305\n#define v5 0.016\n#define m5 3.0\n#define r6 0.21\n#define v6 0.0038\n#define m6 4.0\n\nfloat roughnessToMip(float roughness) {\n  float mip = 0.0;\n  if (roughness >= r1) {\n    mip = (r0 - roughness) * (m1 - m0) / (r0 - r1) + m0;\n  } else if (roughness >= r4) {\n    mip = (r1 - roughness) * (m4 - m1) / (r1 - r4) + m1;\n  } else if (roughness >= r5) {\n    mip = (r4 - roughness) * (m5 - m4) / (r4 - r5) + m4;\n  } else if (roughness >= r6) {\n    mip = (r5 - roughness) * (m6 - m5) / (r5 - r6) + m5;\n  } else {\n    mip = -2.0 * log2(1.16 * roughness);// 1.16 = 1.79^0.25\n  }\n  return mip;\n}\n\nvec4 textureCubeUV(sampler2D envMap, vec3 sampleDir, float roughness) {\n  float mip = clamp(roughnessToMip(roughness), m0, cubeUV_maxMipLevel);\n  float mipF = fract(mip);\n  float mipInt = floor(mip);\n\n  vec3 color0 = bilinearCubeUV(envMap, sampleDir, mipInt);\n  if (mipF == 0.0) {\n    return vec4(color0, 1.0);\n  } else {\n    vec3 color1 = bilinearCubeUV(envMap, sampleDir, mipInt + 1.0);\n    return vec4(mix(color0, color1, mipF), 1.0);\n  }\n}\n#endif\n",defaultnormal_vertex:"\nvec3 transformedNormal = objectNormal;\n\n#ifdef USE_INSTANCING\n\n\t// this is in lieu of a per-instance normal-matrix\n\t// shear transforms in the instance matrix are not supported\n\n\tmat3 m = mat3( instanceMatrix );\n\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\n\ttransformedNormal = m * transformedNormal;\n\n#endif\n\ntransformedNormal = normalMatrix * transformedNormal;\n\n#ifdef FLIP_SIDED\n\n\ttransformedNormal = - transformedNormal;\n\n#endif\n\n#ifdef USE_TANGENT\n\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\n\t#ifdef FLIP_SIDED\n\n\t\ttransformedTangent = - transformedTangent;\n\n\t#endif\n\n#endif\n",displacementmap_pars_vertex:"\n#ifdef USE_DISPLACEMENTMAP\n\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n\n#endif\n",displacementmap_vertex:"\n#ifdef USE_DISPLACEMENTMAP\n\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n\n#endif\n",emissivemap_fragment:"\n#ifdef USE_EMISSIVEMAP\n\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n\n#endif\n",emissivemap_pars_fragment:"\n#ifdef USE_EMISSIVEMAP\n\n\tuniform sampler2D emissiveMap;\n\n#endif\n",encodings_fragment:"\ngl_FragColor = linearToOutputTexel( gl_FragColor );\n",encodings_pars_fragment:"\n// For a discussion of what this is, please read this: http://lousodrome.net/blog/light/2013/05/26/gamma-correct-and-hdr-rendering-in-a-32-bits-buffer/\n\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\n\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\n\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\n\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\n\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\n\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\n\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n//  return vec4( value.brg, ( 3.0 + 128.0 ) / 256.0 );\n}\n\n// reference: http://iwasbeingirony.blogspot.ca/2010/06/difference-between-rgbm-and-rgbd.html\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\n\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\n\n// reference: http://iwasbeingirony.blogspot.ca/2010/06/difference-between-rgbm-and-rgbd.html\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\n\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\t// NOTE: The implementation with min causes the shader to not compile on\n\t// a common Alcatel A502DL in Chrome 78/Android 8.1. Some research suggests \n\t// that the chipset is Mediatek MT6739 w/ IMG PowerVR GE8100 GPU.\n\t// D = min( floor( D ) / 255.0, 1.0 );\n\tD = clamp( floor( D ) / 255.0, 0.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\n\n// LogLuv reference: http://graphicrants.blogspot.ca/2009/04/rgbm-color-encoding.html\n\n// M matrix, for encoding\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n\tvec3 Xp_Y_XYZp = cLogLuvM * value.rgb;\n\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract( Le );\n\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\n\treturn vResult;\n}\n\n// Inverse M matrix, for decoding\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;\n\treturn vec4( max( vRGB, 0.0 ), 1.0 );\n}\n",envmap_fragment:"\n#ifdef USE_ENVMAP\n\n\t#ifdef ENV_WORLDPOS\n\n\t\tvec3 cameraToFrag;\n\t\t\n\t\tif ( isOrthographic ) {\n\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\n\t\t}  else {\n\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\n\t\t}\n\n\t\t// Transforming Normal Vectors with the Inverse Transformation\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\n\t\t#else\n\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\n\t\t#endif\n\n\t#else\n\n\t\tvec3 reflectVec = vReflect;\n\n\t#endif\n\n\t#ifdef ENVMAP_TYPE_CUBE\n\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\n\t\tvec2 sampleUV;\n\n\t\treflectVec = normalize( reflectVec );\n\n\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\n\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\n\t\treflectVec = normalize( reflectVec );\n\n\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\n\t#else\n\n\t\tvec4 envColor = vec4( 0.0 );\n\n\t#endif\n\n\t#ifndef ENVMAP_TYPE_CUBE_UV\n\n\t\tenvColor = envMapTexelToLinear( envColor );\n\n\t#endif\n\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\n\t#endif\n\n#endif\n",envmap_common_pars_fragment:"\n#ifdef USE_ENVMAP\n\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif\n",envmap_pars_fragment:"\n#ifdef USE_ENVMAP\n\n\tuniform float reflectivity;\n\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\n\t\t#define ENV_WORLDPOS\n\n\t#endif\n\n\t#ifdef ENV_WORLDPOS\n\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n\n#endif\n",envmap_pars_vertex:"\n#ifdef USE_ENVMAP\n\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\n\t\t#define ENV_WORLDPOS\n\n\t#endif\n\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\n\t#else\n\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\n\t#endif\n\n#endif\n",envmap_physical_pars_fragment:"\n#if defined( USE_ENVMAP )\n\n\t#ifdef ENVMAP_MODE_REFRACTION\n\t\tuniform float refractionRatio;\n\t#endif\n\n\tvec3 getLightProbeIndirectIrradiance( /*const in SpecularLightProbe specularLightProbe,*/ const in GeometricContext geometry, const in int maxMIPLevel ) {\n\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\n\t\t\t// TODO: replace with properly filtered cubemaps and access the irradiance LOD level, be it the last LOD level\n\t\t\t// of a specular cubemap, or just the default level of a specially created irradiance cubemap.\n\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\n\t\t\t#else\n\n\t\t\t\t// force the bias high to get the last LOD level as it is the most blurred.\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\n\t\t\t#endif\n\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\n\t\t#else\n\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\n\t\t#endif\n\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\n\t}\n\n\t// Trowbridge-Reitz distribution to Mip level, following the logic of http://casual-effects.blogspot.ca/2011/08/plausible-environment-lighting-in-two.html\n\tfloat getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {\n\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\n\t\tfloat sigma = PI * roughness * roughness / ( 1.0 + roughness );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + log2( sigma );\n\n\t\t// clamp to allowable LOD ranges.\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\n\t}\n\n\tvec3 getLightProbeIndirectRadiance( /*const in SpecularLightProbe specularLightProbe,*/ const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {\n\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\n\t\t  vec3 reflectVec = reflect( -viewDir, normal );\n\n\t\t  // Mixing the reflection with the normal is more accurate and keeps rough objects from gathering light from behind their tangent plane.\n\t\t  reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\n\t\t#else\n\n\t\t  vec3 reflectVec = refract( -viewDir, normal, refractionRatio );\n\n\t\t#endif\n\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );\n\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\n\t\t\t#else\n\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\n\t\t\t#endif\n\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\n\t\t\t#else\n\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\n\t\t\t#endif\n\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\n\t\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\n\t\t\t#else\n\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\n\t\t\t#endif\n\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\n\t\t#endif\n\n\t\treturn envMapColor.rgb * envMapIntensity;\n\n\t}\n\n#endif\n",envmap_vertex:"\n#ifdef USE_ENVMAP\n\n\t#ifdef ENV_WORLDPOS\n\n\t\tvWorldPosition = worldPosition.xyz;\n\n\t#else\n\n\t\tvec3 cameraToVertex;\n\n\t\tif ( isOrthographic ) { \n\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\n\t\t} else {\n\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\n\t\t}\n\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\n\t\t#else\n\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\n\t\t#endif\n\n\t#endif\n\n#endif\n",fog_vertex:"\n#ifdef USE_FOG\n\n\tfogDepth = -mvPosition.z;\n\n#endif\n",fog_pars_vertex:"\n#ifdef USE_FOG\n\n\tvarying float fogDepth;\n\n#endif\n",fog_fragment:"\n#ifdef USE_FOG\n\n\t#ifdef FOG_EXP2\n\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );\n\n\t#else\n\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\n\t#endif\n\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n\n#endif\n",fog_pars_fragment:"\n#ifdef USE_FOG\n\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\n\t#ifdef FOG_EXP2\n\n\t\tuniform float fogDensity;\n\n\t#else\n\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\n\t#endif\n\n#endif\n",gradientmap_pars_fragment:"\n\n#ifdef USE_GRADIENTMAP\n\n\tuniform sampler2D gradientMap;\n\n#endif\n\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\n\t// dotNL will be from -1.0 to 1.0\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\n\t#ifdef USE_GRADIENTMAP\n\n\t\treturn texture2D( gradientMap, coord ).rgb;\n\n\t#else\n\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\n\t#endif\n\n}\n\n",lightmap_fragment:"\n#ifdef USE_LIGHTMAP\n\n\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\treflectedLight.indirectDiffuse += PI * lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity; // factor of PI should not be present; included here to prevent breakage\n\n#endif\n",lightmap_pars_fragment:"\n#ifdef USE_LIGHTMAP\n\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n\n#endif\n",lights_lambert_vertex:"\nvec3 diffuse = vec3( 1.0 );\n\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\n\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\n\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\n\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\n\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry );\n\n#ifdef DOUBLE_SIDED\n\n\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\n\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry );\n\n#endif\n\n#if NUM_POINT_LIGHTS > 0\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\n\t\t#ifdef DOUBLE_SIDED\n\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\n\t\t#endif\n\n\t}\n\t#pragma unroll_loop_end\n\n#endif\n\n#if NUM_SPOT_LIGHTS > 0\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\n\t\t#ifdef DOUBLE_SIDED\n\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n\n#endif\n\n/*\n#if NUM_RECT_AREA_LIGHTS > 0\n\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\n\t\t// TODO (abelnation): implement\n\n\t}\n\n#endif\n*/\n\n#if NUM_DIR_LIGHTS > 0\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\n\t\t#ifdef DOUBLE_SIDED\n\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\n\t\t#endif\n\n\t}\n\t#pragma unroll_loop_end\n\n#endif\n\n#if NUM_HEMI_LIGHTS > 0\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\n\t\t#ifdef DOUBLE_SIDED\n\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\n\t\t#endif\n\n\t}\n\t#pragma unroll_loop_end\n\n#endif\n",lights_pars_begin:"\nuniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\n\n// get the irradiance (radiance convolved with cosine lobe) at the point 'normal' on the unit sphere\n// source: https://graphics.stanford.edu/papers/envmap/envmap.pdf\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\n\t// normal is assumed to have unit length\n\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\n\t// band 0\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\n\t// band 1\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\n\t// band 2\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\n\treturn result;\n\n}\n\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {\n\n\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\n\treturn irradiance;\n\n}\n\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\n\tvec3 irradiance = ambientLightColor;\n\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\n\t\tirradiance *= PI;\n\n\t#endif\n\n\treturn irradiance;\n\n}\n\n#if NUM_DIR_LIGHTS > 0\n\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\n\t#endif\n\n\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\n\t}\n\n#endif\n\n\n#if NUM_POINT_LIGHTS > 0\n\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\n\t#endif\n\n\t// directLight is an out parameter as having it as a return value caused compiler errors on some devices\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\n\t\tfloat lightDistance = length( lVector );\n\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\n\t}\n\n#endif\n\n\n#if NUM_SPOT_LIGHTS > 0\n\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\n\t#endif\n\n\t// directLight is an out parameter as having it as a return value caused compiler errors on some devices\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\n\t\tif ( angleCos > spotLight.coneCos ) {\n\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\n\t\t} else {\n\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\n\t\t}\n\t}\n\n#endif\n\n\n#if NUM_RECT_AREA_LIGHTS > 0\n\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\n\t// Pre-computed values of LinearTransformedCosine approximation of BRDF\n\t// BRDF approximation Texture is 64x64\n\tuniform sampler2D ltc_1; // RGBA Float\n\tuniform sampler2D ltc_2; // RGBA Float\n\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n\n#endif\n\n\n#if NUM_HEMI_LIGHTS > 0\n\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\n\t\t\tirradiance *= PI;\n\n\t\t#endif\n\n\t\treturn irradiance;\n\n\t}\n\n#endif\n",lights_toon_fragment:"\nToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;\n",lights_toon_pars_fragment:"\nvarying vec3 vViewPosition;\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n#endif\n\n\nstruct ToonMaterial {\n\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n\n};\n\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\n\t\tirradiance *= PI; // punctual light\n\n\t#endif\n\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n\n}\n\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\n}\n\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n\n#define Material_LightProbeLOD( material )\t(0)\n",lights_phong_fragment:"\nBlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;\n",lights_phong_pars_fragment:"\nvarying vec3 vViewPosition;\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n#endif\n\n\nstruct BlinnPhongMaterial {\n\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n\n};\n\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\n\t\tirradiance *= PI; // punctual light\n\n\t#endif\n\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n\n}\n\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\n}\n\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n\n#define Material_LightProbeLOD( material )\t(0)\n",lights_physical_fragment:"\nPhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\n\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\n\nmaterial.specularRoughness = max( roughnessFactor, 0.0525 );// 0.0525 corresponds to the base mip of a 256 cubemap.\nmaterial.specularRoughness += geometryRoughness;\nmaterial.specularRoughness = min( material.specularRoughness, 1.0 );\n\n#ifdef REFLECTIVITY\n\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n\n#else\n\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n\n#endif\n\n#ifdef CLEARCOAT\n\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\n\t#ifdef USE_CLEARCOATMAP\n\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\n\t#endif\n\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\n\t#endif\n\n\tmaterial.clearcoat = saturate( material.clearcoat ); // Burley clearcoat model\n\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n\n#endif\n\n#ifdef USE_SHEEN\n\n\tmaterial.sheenColor = sheen;\n\n#endif\n",lights_physical_pars_fragment:"\nstruct PhysicalMaterial {\n\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n\n#ifdef CLEARCOAT\n\tfloat clearcoat;\n\tfloat clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tvec3 sheenColor;\n#endif\n\n};\n\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\n\n// Clear coat directional hemishperical reflectance (this approximation should be improved)\nfloat clearcoatDHRApprox( const in float roughness, const in float dotNL ) {\n\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n\n}\n\n#if NUM_RECT_AREA_LIGHTS > 0\n\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight; // counterclockwise; light shines in local neg z direction\n\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\n\t\t// LTC Fresnel Approximation by Stephen Hill\n\t\t// http://blog.selfshadow.com/publications/s2016-advances/s2016_ltc_fresnel.pdf\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\n\t}\n\n#endif\n\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\n\tvec3 irradiance = dotNL * directLight.color;\n\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\n\t\tirradiance *= PI; // punctual light\n\n\t#endif\n\n\t#ifdef CLEARCOAT\n\n\t\tfloat ccDotNL = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\n\t\tvec3 ccIrradiance = ccDotNL * directLight.color;\n\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\n\t\t\tccIrradiance *= PI; // punctual light\n\n\t\t#endif\n\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\n\t\treflectedLight.directSpecular += ccIrradiance * material.clearcoat * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\n\t#else\n\n\t\tfloat clearcoatDHR = 0.0;\n\n\t#endif\n\n\t#ifdef USE_SHEEN\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_Sheen(\n\t\t\tmaterial.specularRoughness,\n\t\t\tdirectLight.direction,\n\t\t\tgeometry,\n\t\t\tmaterial.sheenColor\n\t\t);\n\t#else\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularRoughness);\n\t#endif\n\n\treflectedLight.directDiffuse += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\n}\n\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\n\t#ifdef CLEARCOAT\n\n\t\tfloat ccDotNV = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\n\t\treflectedLight.indirectSpecular += clearcoatRadiance * material.clearcoat * BRDF_Specular_GGX_Environment( geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\n\t\tfloat ccDotNL = ccDotNV;\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\n\t#else\n\n\t\tfloat clearcoatDHR = 0.0;\n\n\t#endif\n\n\tfloat clearcoatInv = 1.0 - clearcoatDHR;\n\n\t// Both indirect specular and indirect diffuse light accumulate here\n\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\n\tBRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );\n\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\n\treflectedLight.indirectSpecular += clearcoatInv * radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n\n}\n\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\n\n// ref: https://seblagarde.files.wordpress.com/2015/07/course_notes_moving_frostbite_to_pbr_v32.pdf\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n\n}\n",lights_fragment_begin:"\n/**\n * This is a template that can be used to light a material, it uses pluggable\n * RenderEquations (RE)for specific lighting scenarios.\n *\n * Instructions for use:\n * - Ensure that both RE_Direct, RE_IndirectDiffuse and RE_IndirectSpecular are defined\n * - If you have defined an RE_IndirectSpecular, you need to also provide a Material_LightProbeLOD. <---- ???\n * - Create a material parameter that is to be passed as the third parameter to your lighting functions.\n *\n * TODO:\n * - Add area light support.\n * - Add sphere light support.\n * - Add diffuse light probe (irradiance cubemap) support.\n */\n\nGeometricContext geometry;\n\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n\n#ifdef CLEARCOAT\n\n\tgeometry.clearcoatNormal = clearcoatNormal;\n\n#endif\n\nIncidentLight directLight;\n\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\n\t\tpointLight = pointLights[ i ];\n\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\n\t}\n\t#pragma unroll_loop_end\n\n#endif\n\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\n\t\tspotLight = spotLights[ i ];\n\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\n\t}\n\t#pragma unroll_loop_end\n\n#endif\n\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\n\t\tdirectionalLight = directionalLights[ i ];\n\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\n\t}\n\t#pragma unroll_loop_end\n\n#endif\n\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\n\tRectAreaLight rectAreaLight;\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\n\t}\n\t#pragma unroll_loop_end\n\n#endif\n\n#if defined( RE_IndirectDiffuse )\n\n\tvec3 iblIrradiance = vec3( 0.0 );\n\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry );\n\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\n\t\t}\n\t\t#pragma unroll_loop_end\n\n\t#endif\n\n#endif\n\n#if defined( RE_IndirectSpecular )\n\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n\n#endif\n",lights_fragment_maps:"\n#if defined( RE_IndirectDiffuse )\n\n\t#ifdef USE_LIGHTMAP\n\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\n\t\t\tlightMapIrradiance *= PI; // factor of PI should not be present; included here to prevent breakage\n\n\t\t#endif\n\n\t\tirradiance += lightMapIrradiance;\n\n\t#endif\n\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\n\t\tiblIrradiance += getLightProbeIndirectIrradiance( /*lightProbe,*/ geometry, maxMipLevel );\n\n\t#endif\n\n#endif\n\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\n\tradiance += getLightProbeIndirectRadiance( /*specularLightProbe,*/ geometry.viewDir, geometry.normal, material.specularRoughness, maxMipLevel );\n\n\t#ifdef CLEARCOAT\n\n\t\tclearcoatRadiance += getLightProbeIndirectRadiance( /*specularLightProbe,*/ geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness, maxMipLevel );\n\n\t#endif\n\n#endif\n",lights_fragment_end:"\n#if defined( RE_IndirectDiffuse )\n\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n\n#endif\n\n#if defined( RE_IndirectSpecular )\n\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n\n#endif\n",logdepthbuf_fragment:"\n#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\n\t// Doing a strict comparison with == 1.0 can cause noise artifacts\n\t// on some platforms. See issue #17623.\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n\n#endif\n",logdepthbuf_pars_fragment:"\n#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n\n#endif\n",logdepthbuf_pars_vertex:"\n#ifdef USE_LOGDEPTHBUF\n\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\n\t#else\n\n\t\tuniform float logDepthBufFC;\n\n\t#endif\n\n#endif\n",logdepthbuf_vertex:"\n#ifdef USE_LOGDEPTHBUF\n\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\n\t#else\n\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\n\t\t\tgl_Position.z *= gl_Position.w;\n\n\t\t}\n\n\t#endif\n\n#endif\n",map_fragment:"\n#ifdef USE_MAP\n\n\tvec4 texelColor = texture2D( map, vUv );\n\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n\n#endif\n",map_pars_fragment:"\n#ifdef USE_MAP\n\n\tuniform sampler2D map;\n\n#endif\n",map_particle_fragment:"\n#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\n#endif\n\n#ifdef USE_MAP\n\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n\n#endif\n\n#ifdef USE_ALPHAMAP\n\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n\n#endif\n",map_particle_pars_fragment:"\n#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\n\tuniform mat3 uvTransform;\n\n#endif\n\n#ifdef USE_MAP\n\n\tuniform sampler2D map;\n\n#endif\n\n#ifdef USE_ALPHAMAP\n\n\tuniform sampler2D alphaMap;\n\n#endif\n",metalnessmap_fragment:"\nfloat metalnessFactor = metalness;\n\n#ifdef USE_METALNESSMAP\n\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\n\t// reads channel B, compatible with a combined OcclusionRoughnessMetallic (RGB) texture\n\tmetalnessFactor *= texelMetalness.b;\n\n#endif\n",metalnessmap_pars_fragment:"\n#ifdef USE_METALNESSMAP\n\n\tuniform sampler2D metalnessMap;\n\n#endif\n",morphnormal_vertex:"\n#ifdef USE_MORPHNORMALS\n\n\t// morphTargetBaseInfluence is set based on BufferGeometry.morphTargetsRelative value:\n\t// When morphTargetsRelative is false, this is set to 1 - sum(influences); this results in normal = sum((target - base) * influence)\n\t// When morphTargetsRelative is true, this is set to 1; as a result, all morph targets are simply added to the base after weighting\n\tobjectNormal *= morphTargetBaseInfluence;\n\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\n#endif\n",morphtarget_pars_vertex:"\n#ifdef USE_MORPHTARGETS\n\n\tuniform float morphTargetBaseInfluence;\n\n\t#ifndef USE_MORPHNORMALS\n\n\tuniform float morphTargetInfluences[ 8 ];\n\n\t#else\n\n\tuniform float morphTargetInfluences[ 4 ];\n\n\t#endif\n\n#endif\n",morphtarget_vertex:"\n#ifdef USE_MORPHTARGETS\n\n\t// morphTargetBaseInfluence is set based on BufferGeometry.morphTargetsRelative value:\n\t// When morphTargetsRelative is false, this is set to 1 - sum(influences); this results in position = sum((target - base) * influence)\n\t// When morphTargetsRelative is true, this is set to 1; as a result, all morph targets are simply added to the base after weighting\n\ttransformed *= morphTargetBaseInfluence;\n\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\n\t#ifndef USE_MORPHNORMALS\n\n\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\n\t#endif\n\n#endif\n",normal_fragment_begin:"\n#ifdef FLAT_SHADED\n\n\t// Workaround for Adreno/Nexus5 not able able to do dFdx( vViewPosition ) ...\n\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n\n#else\n\n\tvec3 normal = normalize( vNormal );\n\n\t#ifdef DOUBLE_SIDED\n\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\n\t#endif\n\n\t#ifdef USE_TANGENT\n\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\n\t\t#ifdef DOUBLE_SIDED\n\n\t\t\ttangent = tangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t\tbitangent = bitangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\n\t\t#endif\n\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\n\t\t#endif\n\n\t#endif\n\n#endif\n\n// non perturbed normal for clearcoat among others\n\nvec3 geometryNormal = normal;\n\n",normal_fragment_maps:"\n\n#ifdef OBJECTSPACE_NORMALMAP\n\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0; // overrides both flatShading and attribute normals\n\n\t#ifdef FLIP_SIDED\n\n\t\tnormal = - normal;\n\n\t#endif\n\n\t#ifdef DOUBLE_SIDED\n\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\n\t#endif\n\n\tnormal = normalize( normalMatrix * normal );\n\n#elif defined( TANGENTSPACE_NORMALMAP )\n\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\n\t#ifdef USE_TANGENT\n\n\t\tnormal = normalize( vTBN * mapN );\n\n\t#else\n\n\t\tnormal = perturbNormal2Arb( -vViewPosition, normal, mapN );\n\n\t#endif\n\n#elif defined( USE_BUMPMAP )\n\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n\n#endif\n",normalmap_pars_fragment:"\n#ifdef USE_NORMALMAP\n\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\n#endif\n\n#ifdef OBJECTSPACE_NORMALMAP\n\n\tuniform mat3 normalMatrix;\n\n#endif\n\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\n\t// Per-Pixel Tangent Space Normal Mapping\n\t// http://hacksoflife.blogspot.ch/2009/11/per-pixel-tangent-space-normal-mapping.html\n\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN ) {\n\n\t\t// Workaround for Adreno 3XX dFd*( vec3 ) bug. See #9988\n\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\n\t\tfloat scale = sign( st1.t * st0.s - st0.t * st1.s ); // we do not care about the magnitude\n\n\t\tvec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\n\t\tvec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\n\t\tvec3 N = normalize( surf_norm );\n\n\t\tmat3 tsn = mat3( S, T, N );\n\n\t\tmapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\n\t\treturn normalize( tsn * mapN );\n\n\t}\n\n#endif\n",clearcoat_normal_fragment_begin:"\n#ifdef CLEARCOAT\n\n\tvec3 clearcoatNormal = geometryNormal;\n\n#endif\n",clearcoat_normal_fragment_maps:"\n#ifdef USE_CLEARCOAT_NORMALMAP\n\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\n\t#ifdef USE_TANGENT\n\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\n\t#else\n\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN );\n\n\t#endif\n\n#endif\n",clearcoat_pars_fragment:"\n\n#ifdef USE_CLEARCOATMAP\n\n\tuniform sampler2D clearcoatMap;\n\n#endif\n\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\n\tuniform sampler2D clearcoatRoughnessMap;\n\n#endif\n\n#ifdef USE_CLEARCOAT_NORMALMAP\n\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n\n#endif\n",packing:"\nvec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\n\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\n\nconst float PackUpscale = 256. / 255.; // fraction -> 0..1 (including 1)\nconst float UnpackDownscale = 255. / 256.; // 0..1 -> fraction (excluding 1)\n\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\n\nconst float ShiftRight8 = 1. / 256.;\n\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8; // tidy overflow\n\treturn r * PackUpscale;\n}\n\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\n\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ));\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w);\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\n\n// NOTE: viewZ/eyeZ is < 0 when in front of the camera per OpenGL conventions\n\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\n\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}\n",premultiplied_alpha_fragment:"\n#ifdef PREMULTIPLIED_ALPHA\n\n\t// Get get normal blending with premultipled, use with CustomBlending, OneFactor, OneMinusSrcAlphaFactor, AddEquation.\n\tgl_FragColor.rgb *= gl_FragColor.a;\n\n#endif\n",project_vertex:"\nvec4 mvPosition = vec4( transformed, 1.0 );\n\n#ifdef USE_INSTANCING\n\n\tmvPosition = instanceMatrix * mvPosition;\n\n#endif\n\nmvPosition = modelViewMatrix * mvPosition;\n\ngl_Position = projectionMatrix * mvPosition;\n",dithering_fragment:"\n#ifdef DITHERING\n\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n\n#endif\n",dithering_pars_fragment:"\n#ifdef DITHERING\n\n\t// based on https://www.shadertoy.com/view/MslGR8\n\tvec3 dithering( vec3 color ) {\n\t\t//Calculate grid position\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\n\t\t//Shift the individual colors differently, thus making it even harder to see the dithering pattern\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\n\t\t//modify shift acording to grid position.\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\n\t\t//shift the color by dither_shift\n\t\treturn color + dither_shift_RGB;\n\t}\n\n#endif\n",roughnessmap_fragment:"\nfloat roughnessFactor = roughness;\n\n#ifdef USE_ROUGHNESSMAP\n\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\n\t// reads channel G, compatible with a combined OcclusionRoughnessMetallic (RGB) texture\n\troughnessFactor *= texelRoughness.g;\n\n#endif\n",roughnessmap_pars_fragment:"\n#ifdef USE_ROUGHNESSMAP\n\n\tuniform sampler2D roughnessMap;\n\n#endif\n",shadowmap_pars_fragment:"\n#ifdef USE_SHADOWMAP\n\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\n\t#endif\n\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\n\t#endif\n\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\n\t#endif\n\n\t/*\n\t#if NUM_RECT_AREA_LIGHTS > 0\n\n\t\t// TODO (abelnation): create uniforms for area light shadows\n\n\t#endif\n\t*/\n\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\n\t}\n\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\n\t}\n\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\n\t\tfloat occlusion = 1.0;\n\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\n\t\tfloat hard_shadow = step( compare , distribution.x ); // Hard Shadow\n\n\t\tif (hard_shadow != 1.0 ) {\n\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance ); // Chebeyshevs inequality\n\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 ); // 0.3 reduces light bleed\n\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\n\t\t}\n\t\treturn occlusion;\n\n\t}\n\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\n\t\tfloat shadow = 1.0;\n\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\n\t\t// if ( something && something ) breaks ATI OpenGL shader compiler\n\t\t// if ( all( something, something ) ) using this instead\n\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\n\t\tbool frustumTest = all( frustumTestVec );\n\n\t\tif ( frustumTest ) {\n\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\n\t\t#else // no percentage-closer filtering:\n\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\n\t\t#endif\n\n\t\t}\n\n\t\treturn shadow;\n\n\t}\n\n\t// cubeToUV() maps a 3D direction vector suitable for cube texture mapping to a 2D\n\t// vector suitable for 2D texture mapping. This code uses the following layout for the\n\t// 2D texture:\n\t//\n\t// xzXZ\n\t//  y Y\n\t//\n\t// Y - Positive y direction\n\t// y - Negative y direction\n\t// X - Positive x direction\n\t// x - Negative x direction\n\t// Z - Positive z direction\n\t// z - Negative z direction\n\t//\n\t// Source and test bed:\n\t// https://gist.github.com/tschw/da10c43c467ce8afd0c4\n\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\n\t\t// Number of texels to avoid at the edge of each square\n\n\t\tvec3 absV = abs( v );\n\n\t\t// Intersect unit cube\n\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\n\t\t// Apply scale to avoid seams\n\n\t\t// two texels less per square (one texel will do for NEAREST)\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\n\t\t// Unwrap\n\n\t\t// space: -1 ... 1 range for each square\n\t\t//\n\t\t// #X##\t\tdim    := ( 4 , 2 )\n\t\t//  # #\t\tcenter := ( 1 , 1 )\n\n\t\tvec2 planar = v.xy;\n\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\n\t\tif ( absV.z >= almostOne ) {\n\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\n\t\t} else if ( absV.x >= almostOne ) {\n\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\n\t\t} else if ( absV.y >= almostOne ) {\n\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\n\t\t}\n\n\t\t// Transform to UV space\n\n\t\t// scale := 0.5 / dim\n\t\t// translate := ( center + 0.5 ) / dim\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\n\t}\n\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\n\t\t// for point lights, the uniform @vShadowCoord is re-purposed to hold\n\t\t// the vector from the light to the world-space position of the fragment.\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\n\t\t// dp = normalized distance from light to fragment position\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear ); // need to clamp?\n\t\tdp += shadowBias;\n\n\t\t// bd3D = base direction 3D\n\t\tvec3 bd3D = normalize( lightToPosition );\n\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\n\t\t#else // no percentage-closer filtering\n\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\n\t\t#endif\n\n\t}\n\n#endif\n",shadowmap_pars_vertex:"\n#ifdef USE_SHADOWMAP\n\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\n\t#endif\n\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\n\t#endif\n\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\n\t#endif\n\n\t/*\n\t#if NUM_RECT_AREA_LIGHTS > 0\n\n\t\t// TODO (abelnation): uniforms for area light shadows\n\n\t#endif\n\t*/\n\n#endif\n",shadowmap_vertex:"\n#ifdef USE_SHADOWMAP\n\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\n\t}\n\t#pragma unroll_loop_end\n\n\t#endif\n\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\n\t}\n\t#pragma unroll_loop_end\n\n\t#endif\n\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\n\t}\n\t#pragma unroll_loop_end\n\n\t#endif\n\n\t/*\n\t#if NUM_RECT_AREA_LIGHTS > 0\n\n\t\t// TODO (abelnation): update vAreaShadowCoord with area light info\n\n\t#endif\n\t*/\n\n#endif\n",shadowmask_pars_fragment:"\nfloat getShadowMask() {\n\n\tfloat shadow = 1.0;\n\n\t#ifdef USE_SHADOWMAP\n\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\n\tDirectionalLightShadow directionalLight;\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\n\t}\n\t#pragma unroll_loop_end\n\n\t#endif\n\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\n\tSpotLightShadow spotLight;\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\n\t}\n\t#pragma unroll_loop_end\n\n\t#endif\n\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\n\tPointLightShadow pointLight;\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\n\t}\n\t#pragma unroll_loop_end\n\n\t#endif\n\n\t/*\n\t#if NUM_RECT_AREA_LIGHTS > 0\n\n\t\t// TODO (abelnation): update shadow for Area light\n\n\t#endif\n\t*/\n\n\t#endif\n\n\treturn shadow;\n\n}\n",skinbase_vertex:"\n#ifdef USE_SKINNING\n\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n\n#endif\n",skinning_pars_vertex:"\n#ifdef USE_SKINNING\n\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\n\t#ifdef BONE_TEXTURE\n\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\n\t\tmat4 getBoneMatrix( const in float i ) {\n\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\n\t\t\ty = dy * ( y + 0.5 );\n\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\n\t\t\treturn bone;\n\n\t\t}\n\n\t#else\n\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\n\t\tmat4 getBoneMatrix( const in float i ) {\n\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\n\t\t}\n\n\t#endif\n\n#endif\n",skinning_vertex:"\n#ifdef USE_SKINNING\n\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n\n#endif\n",skinnormal_vertex:"\n#ifdef USE_SKINNING\n\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\n\t#ifdef USE_TANGENT\n\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\n\t#endif\n\n#endif\n",specularmap_fragment:"\nfloat specularStrength;\n\n#ifdef USE_SPECULARMAP\n\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n\n#else\n\n\tspecularStrength = 1.0;\n\n#endif\n",specularmap_pars_fragment:"\n#ifdef USE_SPECULARMAP\n\n\tuniform sampler2D specularMap;\n\n#endif\n",tonemapping_fragment:"\n#if defined( TONE_MAPPING )\n\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n\n#endif\n",tonemapping_pars_fragment:"\n#ifndef saturate\n// <common> may have defined saturate() already\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\n\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\n\n// exposure only\nvec3 LinearToneMapping( vec3 color ) {\n\n\treturn toneMappingExposure * color;\n\n}\n\n// source: https://www.cs.utah.edu/~reinhard/cdrom/\nvec3 ReinhardToneMapping( vec3 color ) {\n\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n\n}\n\n// source: http://filmicgames.com/archives/75\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n\n\t// John Hable's filmic operator from Uncharted 2 video game\n\tcolor *= toneMappingExposure;\n\treturn saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n\n}\n\n// source: http://filmicgames.com/archives/75\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\n\t// optimized filmic operator by Jim Hejl and Richard Burgess-Dawson\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n\n}\n\n// source: https://knarkowicz.wordpress.com/2016/01/06/aces-filmic-tone-mapping-curve/\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\n\tcolor *= toneMappingExposure;\n\treturn saturate( ( color * ( 2.51 * color + 0.03 ) ) / ( color * ( 2.43 * color + 0.59 ) + 0.14 ) );\n\n}\n",uv_pars_fragment:"\n#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\n\tvarying vec2 vUv;\n\n#endif\n",uv_pars_vertex:"\n#ifdef USE_UV\n\n\t#ifdef UVS_VERTEX_ONLY\n\n\t\tvec2 vUv;\n\n\t#else\n\n\t\tvarying vec2 vUv;\n\n\t#endif\n\n\tuniform mat3 uvTransform;\n\n#endif\n",uv_vertex:"\n#ifdef USE_UV\n\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\n#endif\n",uv2_pars_fragment:"\n#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\n\tvarying vec2 vUv2;\n\n#endif\n",uv2_pars_vertex:"\n#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\n\tuniform mat3 uv2Transform;\n\n#endif\n",uv2_vertex:"\n#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n\n#endif\n",worldpos_vertex:"\n#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\n\t#ifdef USE_INSTANCING\n\n\t\tworldPosition = instanceMatrix * worldPosition;\n\n\t#endif\n\n\tworldPosition = modelMatrix * worldPosition;\n\n#endif\n",background_frag:"\nuniform sampler2D t2D;\n\nvarying vec2 vUv;\n\nvoid main() {\n\n\tvec4 texColor = texture2D( t2D, vUv );\n\n\tgl_FragColor = mapTexelToLinear( texColor );\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\n}\n",background_vert:"\nvarying vec2 vUv;\nuniform mat3 uvTransform;\n\nvoid main() {\n\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n\n}\n",cube_frag:"\n\n#include <envmap_common_pars_fragment>\nuniform float opacity;\n\nvarying vec3 vWorldDirection;\n\n#include <cube_uv_reflection_fragment>\n\nvoid main() {\n\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\n}\n",cube_vert:"\nvarying vec3 vWorldDirection;\n\n#include <common>\n\nvoid main() {\n\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\n\tgl_Position.z = gl_Position.w; // set z to camera.far\n\n}\n",depth_frag:"\n#if DEPTH_PACKING == 3200\n\n\tuniform float opacity;\n\n#endif\n\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvarying vec2 vHighPrecisionZW;\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec4 diffuseColor = vec4( 1.0 );\n\n\t#if DEPTH_PACKING == 3200\n\n\t\tdiffuseColor.a = opacity;\n\n\t#endif\n\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\n\t#include <logdepthbuf_fragment>\n\n\t// Higher precision equivalent of gl_FragCoord.z. This assumes depthRange has been left to its default values.\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\n\t#if DEPTH_PACKING == 3200\n\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\n\t#elif DEPTH_PACKING == 3201\n\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\n\t#endif\n\n}\n",depth_vert:"\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\n// This is used for computing an equivalent of gl_FragCoord.z that is as high precision as possible.\n// Some platforms compute gl_FragCoord at a lower precision which makes the manually computed value better for\n// depth-based postprocessing effects. Reproduced on iPad with A10 processor / iPadOS 13.3.1.\nvarying vec2 vHighPrecisionZW;\n\nvoid main() {\n\n\t#include <uv_vertex>\n\n\t#include <skinbase_vertex>\n\n\t#ifdef USE_DISPLACEMENTMAP\n\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\n\t#endif\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\n\tvHighPrecisionZW = gl_Position.zw;\n\n}\n",distanceRGBA_frag:"\n#define DISTANCE\n\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main () {\n\n\t#include <clipping_planes_fragment>\n\n\tvec4 diffuseColor = vec4( 1.0 );\n\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist ); // clamp to [ 0, 1 ]\n\n\tgl_FragColor = packDepthToRGBA( dist );\n\n}\n",distanceRGBA_vert:"\n#define DISTANCE\n\nvarying vec3 vWorldPosition;\n\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\n\t#include <skinbase_vertex>\n\n\t#ifdef USE_DISPLACEMENTMAP\n\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\n\t#endif\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\n\tvWorldPosition = worldPosition.xyz;\n\n}\n",equirect_frag:"\nuniform sampler2D tEquirect;\n\nvarying vec3 vWorldDirection;\n\n#include <common>\n\nvoid main() {\n\n\tvec3 direction = normalize( vWorldDirection );\n\n\tvec2 sampleUV;\n\n\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\n\tvec4 texColor = texture2D( tEquirect, sampleUV );\n\n\tgl_FragColor = mapTexelToLinear( texColor );\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\n}\n",equirect_vert:"\nvarying vec3 vWorldDirection;\n\n#include <common>\n\nvoid main() {\n\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\n}\n",linedashed_frag:"\nuniform vec3 diffuse;\nuniform float opacity;\n\nuniform float dashSize;\nuniform float totalSize;\n\nvarying float vLineDistance;\n\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\n\t\tdiscard;\n\n\t}\n\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\n\toutgoingLight = diffuseColor.rgb; // simple shader\n\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\n}\n",linedashed_vert:"\nuniform float scale;\nattribute float lineDistance;\n\nvarying float vLineDistance;\n\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\tvLineDistance = scale * lineDistance;\n\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\n}\n",meshbasic_frag:"\nuniform vec3 diffuse;\nuniform float opacity;\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n#endif\n\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\n\t// accumulation (baked indirect lighting only)\n\t#ifdef USE_LIGHTMAP\n\t\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\n\t#else\n\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\n\t#endif\n\n\t// modulation\n\t#include <aomap_fragment>\n\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\n\t#include <envmap_fragment>\n\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n\n}\n",meshbasic_vert:"\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\n\t#ifdef USE_ENVMAP\n\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\n\t#endif\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n\n}\n",meshlambert_frag:"\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n\n\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\n\t// accumulation\n\n\t#ifdef DOUBLE_SIDED\n\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\n\t#else\n\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\n\t#endif\n\n\t#include <lightmap_fragment>\n\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\n\t#ifdef DOUBLE_SIDED\n\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\n\t#else\n\n\t\treflectedLight.directDiffuse = vLightFront;\n\n\t#endif\n\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\n\t// modulation\n\n\t#include <aomap_fragment>\n\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\n\t#include <envmap_fragment>\n\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",meshlambert_vert:"\n#define LAMBERT\n\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",meshmatcap_frag:"\n#define MATCAP\n\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\n\nvarying vec3 vViewPosition;\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n#endif\n\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n\n#include <fog_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5; // 0.495 to remove artifacts caused by undersized matcap disks\n\n\t#ifdef USE_MATCAP\n\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t\tmatcapColor = matcapTexelToLinear( matcapColor );\n\n\t#else\n\n\t\tvec4 matcapColor = vec4( 1.0 );\n\n\t#endif\n\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n\n}\n",meshmatcap_vert:"\n#define MATCAP\n\nvarying vec3 vViewPosition;\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n#endif\n\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\n\t#ifndef FLAT_SHADED // Normal computed with derivatives when FLAT_SHADED\n\n\t\tvNormal = normalize( transformedNormal );\n\n\t#endif\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\n\tvViewPosition = - mvPosition.xyz;\n\n}\n",meshtoon_frag:"\n#define TOON\n\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\n\t// accumulation\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\n\t// modulation\n\t#include <aomap_fragment>\n\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n\n}\n",meshtoon_vert:"\n#define TOON\n\nvarying vec3 vViewPosition;\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n#endif\n\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\n#ifndef FLAT_SHADED // Normal computed with derivatives when FLAT_SHADED\n\n\tvNormal = normalize( transformedNormal );\n\n#endif\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\n\tvViewPosition = - mvPosition.xyz;\n\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n\n}\n",meshphong_frag:"\n#define PHONG\n\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\n\t// accumulation\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\n\t// modulation\n\t#include <aomap_fragment>\n\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\n\t#include <envmap_fragment>\n\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n\n}\n",meshphong_vert:"\n#define PHONG\n\nvarying vec3 vViewPosition;\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n#endif\n\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\n#ifndef FLAT_SHADED // Normal computed with derivatives when FLAT_SHADED\n\n\tvNormal = normalize( transformedNormal );\n\n#endif\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\n\tvViewPosition = - mvPosition.xyz;\n\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n\n}\n",meshphysical_frag:"\n#define STANDARD\n\n#ifdef PHYSICAL\n\t#define REFLECTIVITY\n\t#define CLEARCOAT\n\t#define TRANSPARENCY\n#endif\n\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n\n#ifdef TRANSPARENCY\n\tuniform float transparency;\n#endif\n\n#ifdef REFLECTIVITY\n\tuniform float reflectivity;\n#endif\n\n#ifdef CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n\n#ifdef USE_SHEEN\n\tuniform vec3 sheen;\n#endif\n\nvarying vec3 vViewPosition;\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n\t#ifdef USE_TANGENT\n\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\n\t#endif\n\n#endif\n\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\n\t// accumulation\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\n\t// modulation\n\t#include <aomap_fragment>\n\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\n\t// this is a stub for the transparency model\n\t#ifdef TRANSPARENCY\n\t\tdiffuseColor.a *= saturate( 1. - transparency + linearToRelativeLuminance( reflectedLight.directSpecular + reflectedLight.indirectSpecular ) );\n\t#endif\n\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n\n}\n",meshphysical_vert:"\n#define STANDARD\n\nvarying vec3 vViewPosition;\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n\t#ifdef USE_TANGENT\n\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\n\t#endif\n\n#endif\n\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\n#ifndef FLAT_SHADED // Normal computed with derivatives when FLAT_SHADED\n\n\tvNormal = normalize( transformedNormal );\n\n\t#ifdef USE_TANGENT\n\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\n\t#endif\n\n#endif\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\n\tvViewPosition = - mvPosition.xyz;\n\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n\n}\n",normal_frag:"\n#define NORMAL\n\nuniform float opacity;\n\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\n\tvarying vec3 vViewPosition;\n\n#endif\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n\t#ifdef USE_TANGENT\n\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\n\t#endif\n\n#endif\n\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\n}\n",normal_vert:"\n#define NORMAL\n\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\n\tvarying vec3 vViewPosition;\n\n#endif\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n\t#ifdef USE_TANGENT\n\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\n\t#endif\n\n#endif\n\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\n#ifndef FLAT_SHADED // Normal computed with derivatives when FLAT_SHADED\n\n\tvNormal = normalize( transformedNormal );\n\n\t#ifdef USE_TANGENT\n\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\n\t#endif\n\n#endif\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\n\tvViewPosition = - mvPosition.xyz;\n\n#endif\n\n}\n",points_frag:"\nuniform vec3 diffuse;\nuniform float opacity;\n\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\n\toutgoingLight = diffuseColor.rgb;\n\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\n}\n",points_vert:"\nuniform float size;\nuniform float scale;\n\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\n\tgl_PointSize = size;\n\n\t#ifdef USE_SIZEATTENUATION\n\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\n\t#endif\n\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n\n}\n",shadow_frag:"\nuniform vec3 color;\nuniform float opacity;\n\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n\nvoid main() {\n\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\n}\n",shadow_vert:"\n#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\n\nvoid main() {\n\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n\n}\n",sprite_frag:"\nuniform vec3 diffuse;\nuniform float opacity;\n\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\n\toutgoingLight = diffuseColor.rgb;\n\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\n}\n",sprite_vert:"\nuniform float rotation;\nuniform vec2 center;\n\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\n\t#ifndef USE_SIZEATTENUATION\n\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\n\t#endif\n\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\n\tmvPosition.xy += rotatedPosition;\n\n\tgl_Position = projectionMatrix * mvPosition;\n\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\n}\n"},ho={basic:{uniforms:Qr([fa.common,fa.specularmap,fa.envmap,fa.aomap,fa.lightmap,fa.fog]),vertexShader:ao.meshbasic_vert,fragmentShader:ao.meshbasic_frag},lambert:{uniforms:Qr([fa.common,fa.specularmap,fa.envmap,fa.aomap,fa.lightmap,fa.emissivemap,fa.fog,fa.lights,{emissive:{value:new ua(0)}}]),vertexShader:ao.meshlambert_vert,fragmentShader:ao.meshlambert_frag},phong:{uniforms:Qr([fa.common,fa.specularmap,fa.envmap,fa.aomap,fa.lightmap,fa.emissivemap,fa.bumpmap,fa.normalmap,fa.displacementmap,fa.fog,fa.lights,{emissive:{value:new ua(0)},specular:{value:new ua(1118481)},shininess:{value:30}}]),vertexShader:ao.meshphong_vert,fragmentShader:ao.meshphong_frag},standard:{uniforms:Qr([fa.common,fa.envmap,fa.aomap,fa.lightmap,fa.emissivemap,fa.bumpmap,fa.normalmap,fa.displacementmap,fa.roughnessmap,fa.metalnessmap,fa.fog,fa.lights,{emissive:{value:new ua(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:ao.meshphysical_vert,fragmentShader:ao.meshphysical_frag},toon:{uniforms:Qr([fa.common,fa.specularmap,fa.aomap,fa.lightmap,fa.emissivemap,fa.bumpmap,fa.normalmap,fa.displacementmap,fa.gradientmap,fa.fog,fa.lights,{emissive:{value:new ua(0)},specular:{value:new ua(1118481)},shininess:{value:30}}]),vertexShader:ao.meshtoon_vert,fragmentShader:ao.meshtoon_frag},matcap:{uniforms:Qr([fa.common,fa.bumpmap,fa.normalmap,fa.displacementmap,fa.fog,{matcap:{value:null}}]),vertexShader:ao.meshmatcap_vert,fragmentShader:ao.meshmatcap_frag},points:{uniforms:Qr([fa.points,fa.fog]),vertexShader:ao.points_vert,fragmentShader:ao.points_frag},dashed:{uniforms:Qr([fa.common,fa.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:ao.linedashed_vert,fragmentShader:ao.linedashed_frag},depth:{uniforms:Qr([fa.common,fa.displacementmap]),vertexShader:ao.depth_vert,fragmentShader:ao.depth_frag},normal:{uniforms:Qr([fa.common,fa.bumpmap,fa.normalmap,fa.displacementmap,{opacity:{value:1}}]),vertexShader:ao.normal_vert,fragmentShader:ao.normal_frag},sprite:{uniforms:Qr([fa.sprite,fa.fog]),vertexShader:ao.sprite_vert,fragmentShader:ao.sprite_frag},background:{uniforms:{uvTransform:{value:new W},t2D:{value:null}},vertexShader:ao.background_vert,fragmentShader:ao.background_frag},cube:{uniforms:Qr([fa.envmap,{opacity:{value:1}}]),vertexShader:ao.cube_vert,fragmentShader:ao.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:ao.equirect_vert,fragmentShader:ao.equirect_frag},distanceRGBA:{uniforms:Qr([fa.common,fa.displacementmap,{referencePosition:{value:new At},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:ao.distanceRGBA_vert,fragmentShader:ao.distanceRGBA_frag},shadow:{uniforms:Qr([fa.lights,fa.fog,{color:{value:new ua(0)},opacity:{value:1}}]),vertexShader:ao.shadow_vert,fragmentShader:ao.shadow_frag}};ho.physical={uniforms:Qr([ho.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new j(1,1)},clearcoatNormalMap:{value:null},sheen:{value:new ua(0)},transparency:{value:0}}]),vertexShader:ao.meshphysical_vert,fragmentShader:ao.meshphysical_frag},Eo.prototype=Object.create(X.prototype),Eo.prototype.constructor=Eo,Eo.prototype.isCubeTexture=!0,Object.defineProperty(Eo.prototype,"images",{get:function(){return this.image},set:function(e){this.image=e}}),wo.prototype=Object.create(X.prototype),wo.prototype.constructor=wo,wo.prototype.isDataTexture2DArray=!0,Do.prototype=Object.create(X.prototype),Do.prototype.constructor=Do,Do.prototype.isDataTexture3D=!0;var uo=new X,So=new wo,To=new Do,Ao=new Eo,Co=[],Po=[],Fo=new Float32Array(16),Lo=new Float32Array(9),Ro=new Float32Array(4);Vs.prototype.updateCache=function(a){var t=this.cache;a instanceof Float32Array&&t.length!==a.length&&(this.cache=new Float32Array(a.length)),Oo(t,a)},Gs.prototype.setValue=function(o,t,e){for(var n=this.seq,i=0,l=n.length,a;i!==l;++i)a=n[i],a.setValue(o,t[a.id],e)};var Io=/([\w\d_]+)(\])?(\[|\.)?/g;al.prototype.setValue=function(a,t,e,n){var i=this.map[t];void 0!==i&&i.setValue(a,e,n)},al.prototype.setOptional=function(a,t,e){var r=t[e];void 0!==r&&this.setValue(a,e,r)},al.upload=function(l,t,e,n){for(var i=0,d=t.length;i!==d;++i){var a=t[i],s=e[a.id];!1!==s.needsUpdate&&a.setValue(l,s.value,n)}},al.seqWithValue=function(o,t){for(var e=[],n=0,s=o.length,r;n!==s;++n)r=o[n],r.id in t&&e.push(r);return e};var vl=0,sg=/^[ \t]*#include +<([\w\d./]+)>/gm,Pl=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,Rl=/#pragma unroll_loop_start[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}[\s]+?#pragma unroll_loop_end/g,Il=0;kl.prototype=Object.assign(Object.create(H.prototype),{constructor:kl,isWebGLRenderTarget:!0,setSize:function(a,t){this.width===a&&this.height===t||(this.width=a,this.height=t,this.texture.image.width=a,this.texture.image.height=t,this.dispose()),this.viewport.set(0,0,a,t),this.scissor.set(0,0,a,t)},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.width=e.width,this.height=e.height,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Fl.prototype=Object.create(qr.prototype),Fl.prototype.constructor=Fl,Fl.prototype.isMeshDepthMaterial=!0,Fl.prototype.copy=function(e){return qr.prototype.copy.call(this,e),this.depthPacking=e.depthPacking,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this},Nl.prototype=Object.create(qr.prototype),Nl.prototype.constructor=Nl,Nl.prototype.isMeshDistanceMaterial=!0,Nl.prototype.copy=function(e){return qr.prototype.copy.call(this,e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this},Vl.prototype=Object.assign(Object.create(wa.prototype),{constructor:Vl,isCamera:!0,copy:function(a,t){return wa.prototype.copy.call(this,a,t),this.matrixWorldInverse.copy(a.matrixWorldInverse),this.projectionMatrix.copy(a.projectionMatrix),this.projectionMatrixInverse.copy(a.projectionMatrixInverse),this},getWorldDirection:function(a){void 0===a&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),a=new At),this.updateMatrixWorld(!0);var r=this.matrixWorld.elements;return a.set(-r[8],-r[9],-r[10]).normalize()},updateMatrixWorld:function(e){wa.prototype.updateMatrixWorld.call(this,e),this.matrixWorldInverse.getInverse(this.matrixWorld)},updateWorldMatrix:function(a,t){wa.prototype.updateWorldMatrix.call(this,a,t),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return new this.constructor().copy(this)}}),Gl.prototype=Object.assign(Object.create(Vl.prototype),{constructor:Gl,isPerspectiveCamera:!0,copy:function(a,t){return Vl.prototype.copy.call(this,a,t),this.fov=a.fov,this.zoom=a.zoom,this.near=a.near,this.far=a.far,this.focus=a.focus,this.aspect=a.aspect,this.view=null===a.view?null:Object.assign({},a.view),this.filmGauge=a.filmGauge,this.filmOffset=a.filmOffset,this},setFocalLength:function(a){var t=.5*this.getFilmHeight()/a;this.fov=2*eg.RAD2DEG*dm(t),this.updateProjectionMatrix()},getFocalLength:function(){var e=gm(.5*eg.DEG2RAD*this.fov);return .5*this.getFilmHeight()/e},getEffectiveFOV:function(){return 2*eg.RAD2DEG*dm(gm(.5*eg.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*bm(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Em(this.aspect,1)},setViewOffset:function(o,t,e,n,i,r){this.aspect=o/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=o,this.view.fullHeight=t,this.view.offsetX=e,this.view.offsetY=n,this.view.width=i,this.view.height=r,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var d=this.near,t=d*gm(.5*eg.DEG2RAD*this.fov)/this.zoom,p=2*t,c=this.aspect*p,m=-.5*c,u=this.view;if(null!==this.view&&this.view.enabled){var a=u.fullWidth,s=u.fullHeight;m+=u.offsetX*c/a,t-=u.offsetY*p/s,c*=u.width/a,p*=u.height/s}var o=this.filmOffset;0!==o&&(m+=d*o/this.getFilmWidth()),this.projectionMatrix.makePerspective(m,m+c,t,t-p,d,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(a){var t=wa.prototype.toJSON.call(this,a);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}),Hl.prototype=Object.assign(Object.create(Gl.prototype),{constructor:Hl,isArrayCamera:!0}),Wl.prototype=Object.assign(Object.create(wa.prototype),{constructor:Wl,isGroup:!0}),Object.assign(Xl.prototype,{constructor:Xl,getTargetRaySpace:function(){return null===this._targetRay&&(this._targetRay=new Wl,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1),this._targetRay},getGripSpace:function(){return null===this._grip&&(this._grip=new Wl,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1),this._grip},dispatchEvent:function(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),this},disconnect:function(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),this},update:function(o,t,e){var n=null,l=null,d=this._targetRay,a=this._grip;return o&&(null!==d&&null!==(n=t.getPose(o.targetRaySpace,e))&&(d.matrix.fromArray(n.transform.matrix),d.matrix.decompose(d.position,d.rotation,d.scale)),null!==a&&o.gripSpace&&null!==(l=t.getPose(o.gripSpace,e))&&(a.matrix.fromArray(l.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale))),null!==d&&(d.visible=null!==n),null!==a&&(a.visible=null!==l),this}}),Object.assign(jl.prototype,H.prototype),Zl.prototype=Object.assign(Object.create(Vl.prototype),{constructor:Zl,isOrthographicCamera:!0,copy:function(a,t){return Vl.prototype.copy.call(this,a,t),this.left=a.left,this.right=a.right,this.top=a.top,this.bottom=a.bottom,this.near=a.near,this.far=a.far,this.zoom=a.zoom,this.view=null===a.view?null:Object.assign({},a.view),this},setViewOffset:function(o,t,e,n,i,r){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=o,this.view.fullHeight=t,this.view.offsetX=e,this.view.offsetY=n,this.view.width=i,this.view.height=r,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var d=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),e=(this.right+this.left)/2,n=(this.top+this.bottom)/2,i=e-d,p=e+d,c=n+t,m=n-t;if(null!==this.view&&this.view.enabled){var u=(this.right-this.left)/this.view.fullWidth/this.zoom,l=(this.top-this.bottom)/this.view.fullHeight/this.zoom;p=(i+=u*this.view.offsetX)+u*this.view.width,m=(c-=l*this.view.offsetY)-l*this.view.height}this.projectionMatrix.makeOrthographic(i,p,c,m,this.near,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(a){var t=wa.prototype.toJSON.call(this,a);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}});var lg=f.bounds,dg=new(function(){function a(){var o=this;!function(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),$l(this,"run",function(e){var s=e.current,n=e.diff,i=o.state,t=[].concat(Jl(hu.group.children),Jl(hu.slides.children));i.current=s,i.x+=.5,t&&t.forEach(function(e){e.material&&(e.st?e.onRaf(i.current,n,o.visible(e.bounds,s)):e.onRaf(i.current))}),hu.toggleSlides(i.current),o.renderer.render(o.scene,o.camera)}),$l(this,"resize",function(){var e=lg.ww,t=lg.wh;o.camera.updateProjectionMatrix(),o.renderer.setSize(e,t),hu.resize()}),this.scene=new Na,this.camera=null,this.renderer=null,this.state={current:0,x:0}}var t,r,o;return t=a,(r=[{key:"init",value:function(a){if(!this.initial){this.initial=!0;var t=lg.ww,e=lg.wh;this.camera=new Gl(45,t/e,.1,100),this.camera.position.z=50,this.renderer=new Yl({alpha:!0,antialias:!0}),this.renderer.setPixelRatio(1),this.renderer.setSize(t,e),this.renderer.setClearColor(16777215,0),this.renderer.domElement.classList.add("gl"),this.scene.add(hu.group),this.scene.add(hu.slides)}this.el=a,this.el.appendChild(this.renderer.domElement),this.addEvents()}},{key:"addEvents",value:function(){I.on("tick",this.run),I.on("resize:on-reset",this.resize)}},{key:"visible",value:function(a){var t=a.start,e=a.end,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.state.current;return r>t&&r<e}},{key:"removeEvents",value:function(){I.off("tick",this.run),I.off("resize:on-reset",this.resize)}},{key:"destroy",value:function(){this.removeEvents(),this.renderer.domElement.remove(),hu.removePlanes()}}])&&Ql(t.prototype,r),o&&Ql(t,o),a}()),pg=f.dom,cg=f.bounds,mg=function(o){function t(){return td(this,t),a.apply(this,arguments)}!function(a,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(t&&t.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),t&&rd(a,t)}(t,o);var a=nd(t),r,s,l;return r=t,(s=[{key:"init",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};this.args=e,this.el=this.args.el,this.name=this.args.name,this.progress={x:0,y:0},this.static=!1,this.out=!0,this.setBounds()}},{key:"update",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:pg.body;this.removed=!1,this.el=g("[data-gl-id=\"".concat(this.name,"\"]"),e),this.resize()}},{key:"setBounds",value:function(){var d=cg.ww,t=cg.wh,e=cg.hero,n=v(this.el),i=n.left,r=n.top,a=n.bottom,s=n.width,o=n.height;this.bounds={left:i,width:s,height:o,top:r,start:r-t-100,end:a+100,min:i<d?-d:0,max:i>d?e.w+d:e.w},this.updateSize(),this.updateY(),this.updateX()}},{key:"resize",value:function(){this.removed||this.setBounds()}},{key:"calculateUnitSize",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.position.z,t=dg.camera.fov*ym/180,e=2*gm(t/2)*a,r=e*dg.camera.aspect;return{width:r,height:e}}},{key:"updateSize",value:function(){this.camUnit=this.calculateUnitSize(dg.camera.position.z-this.position.z);var a=cg.ww,t=cg.wh,e=this.bounds,n=e.width/a,i=e.height/t;n&&i&&(this.scale.x=this.camUnit.width*n,this.scale.y=this.camUnit.height*i)}},{key:"updateY",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=cg.wh,e=this.bounds.top,r=this.camUnit.height;this.position.y=r/2-this.scale.y/2,this.position.y-=(e-a)/t*r}},{key:"updateX",value:function(){var d=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=cg.ww,e=this.bounds,n=e.left,i=e.min,r=e.max,a=this.camUnit.width;if(this.position.x=-a/2+this.scale.x/2,this.slide){var s=d+dg.state.x,o=Hu.utils.wrap(i,r,s);this.position.x+=(n-o)/t*a}else this.position.x+=(n+d)/t*a}},{key:"onRaf",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0;this.static||(this.slide?this.updateX(e):this.updateY(e))}},{key:"destroy",value:function(){this.parent&&this.parent.remove(this),this.removed=!0,this.visible=this.static=!1}}])&&ad(r.prototype,s),l&&ad(r,l),t}(wa),ug=f.bounds,gg=f.dom,fg=function o(){var l=this;!function(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),sd(this,"render",function(){l.renderer.render(l.scene,l.camera)}),sd(this,"out",function(e){var t=e.done,a=e.from,n=l.mat.uniforms.uProgress;l.tl.clear().to(n,{value:1,duration:1,ease:"power2.inOut",onUpdate:function(){return l.render()}},0).add(function(){a.remove(),t()}).play()}),sd(this,"in",function(e){var t=e.done,n=l.mat.uniforms,i=n.uProgress,r=n.uOut;l.tl.clear().set(r,{value:!1}).to(i,{value:0,duration:.85,ease:"power3.inOut",onUpdate:function(){return l.render()}},0).set(r,{value:!0}).add(function(){return t()}).play()}),sd(this,"resize",function(){var e=ug.ww,t=ug.wh;l.camera.left=e/-2,l.camera.right=e/2,l.camera.top=t/2,l.camera.bottom=t/-2,l.camera.updateProjectionMatrix(),l.renderer.setSize(e,t),l.triangle.scale.set(e/2,t/2,1)});var e=ug.ww,t=ug.wh;this.renderer=new Yl({alpha:!0,antialias:!0}),this.renderer.setPixelRatio(1),this.renderer.setSize(e,t),this.renderer.setClearColor(16777215,0),this.scene=new Na,this.camera=new Zl(e/-2,e/2,t/2,t/-2,1,100),this.camera.lookAt(this.scene.position),this.camera.position.z=1,this.renderer.domElement.classList.add("t"),gg.body.appendChild(this.renderer.domElement),this.geo=new Dr;var n=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),r=new Float32Array([0,0,2,0,0,2]);this.geo.setAttribute("uv",new Xa(r,2)),this.geo.setAttribute("position",new Xa(n,3)),this.texture=new X,this.texture.generateMipMaps=!1,this.texture.minFilter=1006,this.texture.magFilter=1006,this.texture.format=1022;var a=new Image;a.src="/2020/static/bg-gradient.png",a.decode().then(function(){l.texture.image=a,l.texture.needsUpdate=!0}),this.mat=new gn({fragmentShader:"precision highp float;\n#define GLSLIFY 1\n\nuniform sampler2D uTexture;\n\nuniform float uProgress;\n\nuniform bool uOut;\n\nvec4 transparent = vec4(0., 0., 0., 0.);\n\nvarying vec2 vUv;\n\nvoid main() {\n  vec2 uv = vUv;\n\n  vec4 tex = texture2D(uTexture, uv);\n\n  if (!uOut) uv.y = 1. - uv.y;\n  float t = step(uv.y, uProgress);\n  vec4 color = mix(transparent, tex, t);\n  \n  gl_FragColor = color;\n}  ",vertexShader:"precision highp float;\n#define GLSLIFY 1\nvarying vec2 vUv;\n\nvoid main(){\n  vUv = uv;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.);\n}",uniforms:{uProgress:{value:0},uTexture:{value:this.texture},uOut:{value:!0}}}),this.triangle=new xi(this.geo,this.mat),this.triangle.scale.set(e/2,t/2,1),this.triangle.frustumCulled=!1,this.scene.add(this.triangle),this.tl=Hu.timeline({paused:!0}),I.on("transition:out",this.out),I.on("transition:in",this.in),I.on("resize:on-reset",this.resize)},hg=new Xr(1,1,15,1),yg=new gn({vertexShader:"precision highp float;\n#define GLSLIFY 1\n\nuniform float uProgress;\nuniform float uOffset;\nuniform float uVelo;\nuniform float uStrength;\n\n#define M_PI 3.1415926535897932384626433832795\n\nvarying vec2 vUv;\n\nvoid main(){\n  vec3 pos = position;\n  vec4 mvPosition = modelViewMatrix * vec4(pos, 1.);\n\n  float dist = mvPosition.x / uOffset;\n  mvPosition.z += sin(dist * M_PI + M_PI / 2.) * -uStrength * (1. + (uVelo * 1.5));\n\n  vUv = uv;\n  gl_Position = projectionMatrix * mvPosition;\n}",fragmentShader:"precision highp float;\n#define GLSLIFY 1\n\nuniform sampler2D uTexture;\n\nuniform float uAlpha;\n\nvarying vec2 vUv;\n\nvoid main() {\n  vec2 uv = vUv;\n\n  vec4 texture = texture2D(uTexture, uv);\n  \n  gl_FragColor = texture * uAlpha;\n}"}),vg=f.bounds,_g=f.flags,xg=function(o){function s(){var r;dd(this,s);for(var o=arguments.length,e=Array(o),n=0;n<o;n++)e[n]=arguments[n];return yd(fd(r=a.call.apply(a,[this].concat(e))),"play",function(){r.visible=!0}),yd(fd(r),"pause",function(){r.visible=!1}),r}!function(a,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(t&&t.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),t&&md(a,t)}(s,o);var a=ud(s),t,r,l;return t=s,(r=[{key:"init",value:function(a){var t=this;if(cd(hd(s.prototype),"init",this).call(this,a),this.geometry=hg,this.material=yg.clone(),this.texture=new X,this.texture.generateMipMaps=!1,this.texture.minFilter=1006,this.texture.magFilter=1006,this.texture.format=1022,this.slide=!0,this.initial=!0,this.material.uniforms={uTime:{value:0},uTexture:{value:this.texture},uVelo:{value:0},uStrength:{value:0},uProgress:{value:0},uAlpha:{value:1},uOffset:{value:0}},this.setUnis(),_g.isDesktop)this.vid=document.createElement("video"),this.vid.src=location.origin+this.el.dataset.vid,this.vid.muted=!0,this.vid.loop=!0,this.vid.currentTime=1,this.vid.lastFrame=!1,this.vid.preload=!0,this.vid.play();else{var e=new Image;e.src=this.el.dataset.img,e.decode().then(function(){t.texture.image=e,t.texture.needsUpdate=!0})}this.mesh=new xi(this.geometry,this.material),this.add(this.mesh),hu.slides.add(this),hu.planes[this.name]=this,this.onAdd()}},{key:"onAdd",value:function(){this.vid&&this.vid.play(),I.on("intro:in",this.play),I.on("intro:out",this.pause)}},{key:"setUnis",value:function(){var a=this.material.uniforms,t=a.uStrength,e=a.uOffset;t.value=vg.ww/100,e.value=this.camUnit.width}},{key:"updateX",value:function(e){this.visible&&this.material&&(cd(hd(s.prototype),"updateX",this).call(this,e),this.material.uniforms.uVelo.value=gu.velo.diff,this.vid&&this.updateVid())}},{key:"updateVid",value:function(){this.vid.readyState>=this.vid.HAVE_CURRENT_DATA&&(this.vid.lastFrame?this.vid.lastFrame=!1:(this.vid.lastFrame=!0,this.initial&&(this.initial=!1,this.texture.image=this.vid,hu.loaded.push(!0),10===hu.loaded.length&&(_g.loaded=!0,I.emit("gl:loaded"))),this.texture.needsUpdate=!0))}},{key:"resize",value:function(){cd(hd(s.prototype),"resize",this).call(this),this.setUnis()}},{key:"destroy",value:function(){cd(hd(s.prototype),"destroy",this).call(this),I.off("intro:in",this.play),I.off("intro:out",this.pause),this.vid&&this.vid.pause()}}])&&pd(t.prototype,r),l&&pd(t,l),s}(mg),bg=new Xr(1,1,15,1),nu=new gn({vertexShader:"precision mediump float;\n#define GLSLIFY 1\n\nuniform float uProgress;\nuniform float uVelo;\n\n#define M_PI 3.1415926535897932384626433832795\n\nvarying vec2 vUv;\n\nvoid main(){\n  vec3 pos = position;\n\n  pos.y += ((sin(uv.x * M_PI) * uVelo) * 0.35);\n\n  vUv = uv;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(pos, 1.);\n}",fragmentShader:"precision mediump float;\n#define GLSLIFY 1\n\nuniform sampler2D uTexture;\n\nuniform float uAlpha;\n\nvarying vec2 vUv;\n\nvoid main() {\n  vec2 uv = vUv;\n\n  vec4 texture = texture2D(uTexture, uv);\n  \n  gl_FragColor = texture;\n}"}),iu=function(o){function s(){return _d(this,s),t.apply(this,arguments)}!function(a,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(t&&t.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),t&&Ed(a,t)}(s,o);var t=Td(s),a,r,l;return a=s,(r=[{key:"init",value:function(e){bd(Md(s.prototype),"init",this).call(this,e),this.geometry=bg,this.material=nu.clone(),this.texture=new X,this.texture.generateMipMaps=!1,this.texture.minFilter=1006,this.texture.magFilter=1006,this.texture.format=1022,this.st=!0,this.animated=!1,this.initial=!0,this.material.uniforms={uTime:{value:0},uTexture:{value:this.texture},uVelo:{value:0},uProgress:{value:0},uAlpha:{value:1},uOffset:{value:this.camUnit.width}},this.vid=document.createElement("video"),this.vid.src=location.origin+this.el.dataset.src,this.vid.muted=!0,this.vid.loop=!0,this.vid.currentTime=1,this.vid.lastFrame=!1,this.vid.preload=!0,this.mesh=new xi(this.geometry,this.material),this.mesh.renderOrder=10,this.add(this.mesh),hu.group.add(this),hu.planes[this.name]=this}},{key:"onRaf",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,e=2<arguments.length&&void 0!==arguments[2]&&arguments[2];!this.static&&this.material&&(this.updateY(a),this.material.uniforms.uVelo.value=t,this.updateVid(),e?this.vid.play():this.vid.pause())}},{key:"updateVid",value:function(){this.vid.readyState>=this.vid.HAVE_ENOUGH_DATA&&(this.vid.lastFrame?this.vid.lastFrame=!1:(this.vid.lastFrame=!0,this.initial&&(this.initial=!1,this.texture.image=this.vid),this.texture.needsUpdate=!0))}},{key:"destroy",value:function(){bd(Md(s.prototype),"destroy",this).call(this)}}])&&xd(a.prototype,r),l&&xd(a,l),s}(mg),ru=f.bounds,lu=f.flags,hu=new(function(){function a(){!function(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),this.planes={},this.slides=new Wl,this.group=new Wl,this.hero=g(".js-hero-inner"),this.heroVids=y(".js-hero-vid"),this.heroContent=g(".js-hero-content"),this.sv=!1,this.loaded=[]}var t,i,o;return t=a,(i=[{key:"fromDom",value:function(i,t){var e=i.dataset.glId,n=i.dataset.glComponent,r=this.planes[e];if(r&&!r.keep)this.add(r,t);else if(!r){if(lu.isDevice&&"PlaneVideo"===n)return;new Mm[n]().init({el:i,name:e})}}},{key:"addPlanes",value:function(a){var r=this,e=a.el,t=y("[data-gl-id]",e);t&&t.forEach(function(a){return r.fromDom(a,e)})}},{key:"add",value:function(a,t){a.visible||(a.name.includes("slide")?this.slides.add(a):this.group.add(a),a.visible=!0,a.material.uniforms.uAlpha.value=1,a.update(t),a.onAdd&&a.onAdd())}},{key:"resize",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;for(var t in this.planes)this.planes[t].resize(a)}},{key:"setStatic",value:function(){[].concat(Ad(this.group.children),Ad(this.slides.children)).forEach(function(e){return e.static=!0})}},{key:"removePlanes",value:function(){for(var e in this.planes)this.remove(this.planes[e])}},{key:"remove",value:function(e){e.destroy()}},{key:"toggleSlides",value:function(a){var t=ru.hero.h;a>t&&!this.sv?(I.emit("intro:out"),Hu.set(this.heroContent,{autoAlpha:0}),this.sv=!0):a<=t&&this.sv&&(this.sv=!1,Hu.set(this.heroContent,{autoAlpha:1}),I.emit("intro:in"))}}])&&Pd(t.prototype,i),o&&Pd(t,o),a}()),uu=f.dom,fu=f.flags,du=fu.isDevice,mu=fu.isDesktop,gu=new(function(){function a(){var r=this;!function(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),Dd(this,"tick",function(){du?(r.target=uu.scroll.scrollTop,I.emit("tick",{target:r.target,current:r.target,diff:0})):(r.last=r.current,r.current=m(r.current,r.target,r.ease),r.rounded=Sm(100*r.current)/100,r.diff=5e-4*(r.target-r.current),hu.sv||(r.velo.current=m(r.velo.current,r.rounded,r.velo.ease),r.velo.diff=Hu.utils.clamp(0,.75,5e-4*(r.rounded-r.velo.current))),I.emit("tick",{target:r.target,current:r.rounded,diff:r.diff,still:.001>=vm(r.current-r.last)}))}),Dd(this,"onScroll",function(e){var t=e.y;fu.locked||(r.target+=t,r.clamp())}),Dd(this,"reset",function(){r.target=r.current=r.rounded=0}),Dd(this,"resize",function(){r.clamp(),r.rounded=r.current=r.target}),this.target=0,this.current=0,this.rounded=0,this.velo={current:0,diff:0,ease:.075},this.ease=.115,this.init()}var t,r,o;return t=a,(r=[{key:"clamp",value:function(){this.target=Hu.utils.clamp(0,f.bounds.scroll,this.target)}},{key:"init",value:function(){Hu.ticker.fps(-1),Hu.ticker.add(this.tick),mu&&(I.on("scroll",this.onScroll),I.on("resize:on-reset",this.resize),I.on("scroll:on-reset",this.reset))}}])&&Cd(t.prototype,r),o&&Cd(t,o),a}()),vu=e(2),yu=e.n(vu),_u=f.dom,bu=f.bounds,Eu=f.flags.isDevice;new(function(){function a(){var o=this,t,r,s;!function(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),s=function(){var e=window.innerWidth;Eu&&e===bu.ww||(bu.ww=e,bu.wh=window.innerHeight,o.setOrientation(_u,bu),o.setVh(),I.emit("resize"),Eu&&I.emit("resize:on-reset"))},(r="resize")in(t=this)?Object.defineProperty(t,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[r]=s,this.setOrientation(_u,bu),this.setVh(),I.on("resize",window,yu()(this.resize,200)),I.on("orientationchange",window,this.resize)}var t,r,o;return t=a,(r=[{key:"setOrientation",value:function(a,t){var e=a.body,r=t.wh;t.ww<r?e.classList.add("is-portrait"):e.classList.remove("is-portrait")}},{key:"setVh",value:function(){_u.body.style.setProperty("--vh","".concat(.01*bu.wh,"px"))}}])&&Ld(t.prototype,r),o&&Ld(t,o),a}());var wu=f.flags,Su=wu.isDevice;new(function(){function a(){var o=this;!function(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),kd(this,"onMove",function(e){if(wu.dragging){var t=o.getPos(e),n=t.x,i=t.y,r=t.target;I.emit("mousemove",{x:n,y:i,target:r,e:e})}}),kd(this,"onDown",function(e){if(3!==e.which){var t=o.getPos(e),n=t.x,i=t.y,r=t.target;o.on=n,I.emit("mousedown",{x:n,y:i,target:r})}}),kd(this,"onUp",function(e){var t=o.getPos(e),n=t.x,i=t.target;o.off=n;var r=10>vm(o.off-o.on);I.emit("mouseup",{x:n,target:i,click:r})}),this.on=0,this.off=0,this.events={move:Su?"touchmove":"mousemove",down:Su?"touchstart":"mousedown",up:Su?"touchend":"mouseup"},this.addEvents()}var t,r,o;return t=a,(r=[{key:"addEvents",value:function(){var a=this.events,t=a.move,e=a.down,r=a.up;window.addEventListener(t,this.onMove,{passive:!1}),window.addEventListener(e,this.onDown,{passive:!1}),window.addEventListener(r,this.onUp,{passive:!1}),I.on("click",window,function(e){return I.emit("click",e)})}},{key:"getPos",value:function(e){return{x:e.changedTouches?e.changedTouches[0].clientX:e.clientX,y:e.changedTouches?e.changedTouches[0].clientY:e.clientY,target:e.target}}}])&&Rd(t.prototype,r),o&&Rd(t,o),a}());var Tu=new(function(){function a(){!function(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),this.isRunning=!1,this.el=g(".js-pe")}var t,r,o;return t=a,(r=[{key:"run",value:function(){var e=this;clearTimeout(this.timer),this.timer=setTimeout(function(){e.isRunning=!1,e.togglePointers("none")},300),this.isRunning||(this.isRunning=!0,this.togglePointers("all"))}},{key:"togglePointers",value:function(e){this.el.style.pointerEvents=e}}])&&Fd(t.prototype,r),o&&Fd(t,o),a}()),Cu=f.dom,Ou=f.flags,Nu=new function a(){var r=this;!function(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),Id(this,"handle",function(e){e.forEach(function(a){var e=r.cache.find(function(t){var e=t.el;return a.target===e});e&&(a.isIntersecting?(e.enter&&e.enter(e,a.target),e.intersecting=!0):(e.leave&&e.leave(e,a.target),e.intersecting=!1))})}),Id(this,"destroy",function(){r.cache.forEach(function(e,t){r.inst.unobserve(e.el),e.ani&&e.ani.destroy(),r.cache.splice(0,t)})}),this.inst=new IntersectionObserver(this.handle,{root:Ou.isDesktop?null:Cu.scroll}),I.on("on-leave-completed",this.destroy),this.cache=[]},Bu=e(0),zu=e.n(Bu),Uu=function(){return"undefined"!=typeof window},Vu=function(){return ec||Uu()&&(ec=window.gsap)&&ec.registerPlugin&&ec},Gu={rect:["width","height"],circle:["r","r"],ellipse:["rx","ry"],line:["x2","y2"]},ju=function(e){return Sm(1e4*e)/1e4},Wu=function(e){return parseFloat(e||0)},Xu=function(a,t){return Wu(a.getAttribute(t))},qu=_m,Yu=function(o,t,e,n,i,r){return qu(xm((Wu(e)-Wu(o))*i,2)+xm((Wu(n)-Wu(t))*r,2))},Zu=function(e){return console.warn(e)},Ju=function(e){return"non-scaling-stroke"===e.getAttribute("vector-effect")},Ku=function(y){if(!(y=Eg(y)[0]))return 0;var v=y.tagName.toLowerCase(),l=y.style,h=1,_=1,x,b,E,T,S,M,A;Ju(y)&&(_=y.getScreenCTM(),h=qu(_.a*_.a+_.b*_.b),_=qu(_.d*_.d+_.c*_.c));try{b=y.getBBox()}catch(e){Zu("Some browsers won't measure invisible elements (like display:none or masks inside defs).")}var w=b||{x:0,y:0,width:0,height:0},p=w.x,P=w.y,C=w.width,D=w.height;if(b&&(C||D)||!Gu[v]||(C=Xu(y,Gu[v][0]),D=Xu(y,Gu[v][1]),"rect"!==v&&"line"!==v&&(C*=2,D*=2),"line"===v&&(p=Xu(y,"x1"),P=Xu(y,"y1"),C=vm(C-p),D=vm(D-P))),"path"===v)T=l.strokeDasharray,l.strokeDasharray="none",x=y.getTotalLength()||0,h!==_&&Zu("Warning: <path> length cannot be measured when vector-effect is non-scaling-stroke and the element isn't proportionally scaled."),x*=(h+_)/2,l.strokeDasharray=T;else if("rect"===v)x=2*C*h+2*D*_;else if("line"===v)x=Yu(p,P,p+C,P+D,h,_);else if("polyline"===v||"polygon"===v)for(E=y.getAttribute("points").match(/[-+=\.]*\d+[\.e\-\+]*\d*[e\-\+]*\d*/gi)||[],"polygon"===v&&E.push(E[0],E[1]),x=0,S=2;S<E.length;S+=2)x+=Yu(E[S-2],E[S-1],E[S],E[S+1],h,_)||0;else"circle"!==v&&"ellipse"!==v||(M=C/2*h,A=D/2*_,x=ym*(3*(M+A)-qu((3*M+A)*(M+3*A))));return x||0},$u=function(o,s){if(!(o=Eg(o)[0]))return[0,0];s||(s=Ku(o)+1);var l=Tg.getComputedStyle(o),n=l.strokeDasharray||"",d=Wu(l.strokeDashoffset),r=n.indexOf(",");return 0>r&&(r=n.indexOf(" ")),(n=0>r?s:Wu(n.substr(0,r))||1e-5)>s&&(n=s),[Em(0,-d),Em(0,n-d)]},Qu=function(){Uu()&&(document,Tg=window,Mg=ec=Vu(),Eg=ec.utils.toArray,Sg=-1!==((Tg.navigator||{}).userAgent||"").indexOf("Edge"))},tc={version:"3.2.6",name:"drawSVG",register:function(e){ec=e,Qu()},init:function(r,t){if(!r.getBBox)return!1;Mg||Qu();var n=Ku(r)+1,i,d,p,c;return this._style=r.style,this._target=r,"true"==t+""?t="0 100%":t?-1===(t+"").indexOf(" ")&&(t="0 "+t):t="0 0",d=function(o,t,e){var n=o.indexOf(" "),a,s;return 0>n?(a=void 0===e?o:e+"",s=o):(a=o.substr(0,n),s=o.substr(n+1)),(a=~a.indexOf("%")?Wu(a)/100*t:Wu(a))>(s=~s.indexOf("%")?Wu(s)/100*t:Wu(s))?[s,a]:[a,s]}(t,n,(i=$u(r,n))[0]),this._length=ju(n+10),0===i[0]&&0===d[0]?(p=Em(1e-5,d[1]-n),this._dash=ju(n+p),this._offset=ju(n-i[1]+p),this._offsetPT=this.add(this,"_offset",this._offset,ju(n-d[1]+p))):(this._dash=ju(i[1]-i[0])||1e-6,this._offset=ju(-i[0]),this._dashPT=this.add(this,"_dash",this._dash,ju(d[1]-d[0])||1e-5),this._offsetPT=this.add(this,"_offset",this._offset,ju(-d[0]))),Sg&&(c=Tg.getComputedStyle(r)).strokeLinecap!==c.strokeLinejoin&&(d=Wu(c.strokeMiterlimit),this.add(r.style,"strokeMiterlimit",d,d+.01)),this._live=Ju(r)||~(t+"").indexOf("live"),this._props.push("drawSVG"),1},render:function(l,t){var e=t._pt,d=t._style,o,p,c,m;if(e){for(t._live&&(o=Ku(t._target)+11)!==t._length&&(p=o/t._length,t._length=o,t._offsetPT.s*=p,t._offsetPT.c*=p,t._dashPT?(t._dashPT.s*=p,t._dashPT.c*=p):t._dash*=p);e;)e.r(l,e.d),e=e._next;c=t._dash,m=t._offset,o=t._length,d.strokeDashoffset=t._offset,1!==l&&l?d.strokeDasharray=c+"px,"+o+"px":(.001>c-m&&10>=o-c&&(d.strokeDashoffset=m+1),d.strokeDasharray=.001>m&&10>=o-c?"none":m===c?"0px, 999999px":c+"px,"+o+"px")}},getLength:Ku,getPosition:$u},ec,Eg,Tg,Sg,Mg;Vu()&&ec.registerPlugin(tc),Hu.registerPlugin(tc);var Ag=f.flags,rc=function(){function a(){var r=this;!function(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),zd(this,"run",function(){var e=Ag.isDevice,t=Ag.loaded;!r.home||e||t?r.go():I.on("gl:loaded",r.go)}),zd(this,"go",function(){r.tl.pause(),r.tl.tweenTo("end"),r.clock.loop=!1}),this.el=g(".js-mask"),this.ui={bg:g(".js-mask-bg"),circle:g(".js-mask-circle"),outline:g(".js-mask-outline"),clock:g(".js-mask-clock")},this.home=g(".js-h-circle"),this.init()}var t,r,o;return t=a,(r=[{key:"init",value:function(){this.createClock(),this.prepare(),this.addEvents()}},{key:"addEvents",value:function(){I.on("loaded",this.run)}},{key:"createClock",value:function(){var e=this.ui.clock;this.clock=zu.a.loadAnimation({container:e,renderer:"svg",loop:!0,autoplay:!1,path:"/data.json"}),this.clock.setSubframe(!1),this.clock.setSpeed(1.25)}},{key:"prepare",value:function(){var o=this,e;this.home&&(e=v(this.home).bottom);var s=this.ui,n=s.circle,i=s.bg,r=s.outline;this.tl=Hu.timeline({paused:!0,immediateRender:!0,onStart:function(){o.clock.play()},onComplete:function(){o.destroy(),o.el.innerHTML="",f.flags.locked=!1}}).addLabel("start"),this.home?this.tl.set([r,".js-h-progress"],{alpha:Hu.utils.wrap([1,0])}):this.tl.set(r,{alpha:1}),this.tl.from(r,{drawSVG:0,duration:1.75,ease:"power2.inOut"}).addLabel("loaded"),this.home?this.tl.to(n,{y:e-v(n).bottom,scale:.75,duration:2,ease:"power2.inOut"}).to(i,{alpha:0,duration:.95,ease:"power1.inOut"},"-=0.95").to([n,".js-h-progress"],{alpha:Hu.utils.wrap([0,1]),duration:.15,ease:"linear"}):this.tl.to(this.el,{alpha:0,duration:.85,ease:"power1.inOut"}),this.tl.addLabel("end"),setTimeout(function(){o.tl.tweenTo("loaded")},1e3)}},{key:"removeEvents",value:function(){I.off("loaded",this.run)}},{key:"destroy",value:function(){this.removeEvents(),this.clock.destroy(),this.tl.kill(),this.ui=null}}])&&Nd(t.prototype,r),o&&Nd(t,o),a}(),ac=f.flags,cc=function(){function a(){var r=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:y("[data-smooth-item]");Bd(this,a),Gd(this,"run",function(e){var t=e.current;r.current=t,r.resizing||r.transformSections()}),Gd(this,"resize",function(){r.resizing=!0,r.getSections(),I.emit("resize:on-reset"),r.transformSections(),r.resizing=!1}),this.elems=e,this.current=0,this.last=null,this.resizing=!1,this.sections=null,this.init()}var t,r,o;return t=a,(r=[{key:"init",value:function(){this.getSections(),this.addEvents()}},{key:"addEvents",value:function(){I.on("tick",this.run),I.on("resize",this.resize)}},{key:"update",value:function(e){this.elems=e,this.getSections()}},{key:"getSections",value:function(){if(this.elems){var o=f.bounds,t=this.elems.length-1;this.sections=Od(this.elems).map(function(e,n){e.style.transform="translate3d(0, 0, 0)";var i=v(e),r=i.top,a=i.bottom;return n===t&&(o.scroll=a-o.wh),{el:e,start:r-o.wh,end:a,out:!0}})}}},{key:"transformSections",value:function(){var a=this;ac.locked||0<this.sections.length&&this.sections.forEach(function(t){a.visible(t)||a.resizing?(t.out&&(t.out=!1),a.transform(t.el)):t.out||(t.out=!0,a.transform(t.el))})}},{key:"transform",value:function(e){e.style.transform="translate3d(0, ".concat(-this.current,"px, 0)")}},{key:"visible",value:function(a){var t=a.start,e=a.end;return this.current>t&&this.current<e}},{key:"removeEvents",value:function(){I.off("tick",this.run),I.off("resize",this.resize)}},{key:"destroy",value:function(){this.removeEvents(),this.sections=this.elems=null,I.emit("scroll:on-reset")}}])&&Vd(t.prototype,r),o&&Vd(t,o),a}(),pc=e(3),fc=e.n(pc);new(function(){function a(){var t=this,r,o,s;!function(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),s=function(a){for(var r=function(r){var e=a[r];if(e.isIntersecting){var n=t.cache.find(function(a){return a.el===e.target});n.intersecting=!0,n.tl.play(),t.observer.unobserve(e.target)}},e=0;e<a.length;e++)r(e)},(o="handle")in(r=this)?Object.defineProperty(r,o,{value:s,enumerable:!0,configurable:!0,writable:!0}):r[o]=s,this.el=f.dom.body,this.cache=null,this.observer=new IntersectionObserver(this.handle,{root:null,rootMargin:"0px 0px 10% 0px",threshold:[0,0]})}var t,r,o;return t=a,(r=[{key:"update",value:function(e){this.getElems(e),this.observe()}},{key:"getElems",value:function(a){var r=this;this.cache=null,this.cache=[];var e=y("[data-scroll]",a);e&&e.forEach(function(e){e.getBoundingClientRect().top<f.bounds.wh||r.cache.push({el:e,intersecting:!1,tl:r.getTimelines(e,e.dataset.scroll)})})}},{key:"getTimelines",value:function(a,t){var e=Hu.timeline({paused:!0,immediateRender:!0});if("words"===t){var r=new fc.a(a,{type:"lines, words"});e.set(r.lines,{overflow:"hidden"}).from(r.words,{yPercent:100,duration:1.75,stagger:.1,ease:"expo"},0)}return e.progress(1).progress(0),e}},{key:"observe",value:function(){var a=this;this.cache.forEach(function(t){return a.observer.observe(t.el)})}},{key:"clean",value:function(){var a=this;this.cache.forEach(function(t){return a.observer.unobserve(t.el)})}},{key:"destroy",value:function(){this.observer.disconnect(),this.observer=null,this.cache=null}}])&&Hd(t.prototype,r),o&&Hd(t,o),a}());var dc=f.bounds,Tc=function(){function a(){var r=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:y("[data-stick]");jd(this,a),qd(this,"run",function(e){var t=e.current;r.current=t,r.resizing||r.transformElems(t)}),qd(this,"resize",function(){r.resizing=!0,r.cache=null,r.getCache(),r.transformElems(),r.resizing=!1}),this.elems=Wd(e),this.cache=null,this.resizing=!1,this.init()}var t,r,o;return t=a,(r=[{key:"init",value:function(){this.getCache(),this.addEvents()}},{key:"addEvents",value:function(){I.on("tick",this.run),I.on("resize:on-reset",this.resize)}},{key:"transformElems",value:function(){var o=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.current;this.cache&&this.cache.forEach(function(e){var n=o.visible(e,t),i=n.visible,r=n.progress;i||o.resizing?(e.out&&(e.out=!1),o.transform(e,t,r)):e.out||(e.out=!0,o.transform(e,t,r))})}},{key:"transform",value:function(d,t,e){var n=d.els.node,i=d.bounds,r=i.start,a=i.max,s=i.min,o=d.tl,l=Hu.utils.clamp(s,a,t-r);o&&e&&o.progress(e),n.style.transform="translate3d(0, ".concat(l,"px, 0)")}},{key:"visible",value:function(o,t){var e=o.duration,i=e.start,r=e.end,a=t>i&&t<r,s;return o.tl&&a&&(s=Hu.utils.clamp(0,1,(t-i)/(r-i))),{visible:a,progress:s}}},{key:"getCache",value:function(){var a=this,t=dc.wh;this.cache=this.elems.map(function(e){return a.base({el:e},t)}),this.addTalentText(),this.addHiw()}},{key:"base",value:function(){var l=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:dc.wh;return function(){var e=l.el,n={};n.node=l.el,n.node.style.transform="translate3d(0, 0, 0)",n.start=l.start||g("[data-stick-start]",e)||e.closest("[data-stick-start]"),n.end=l.end||g("[data-stick-end]",n.start)||e.closest("[data-stick-end]");var i={node:v(e),start:v(n.start),end:v(n.end)},r={start:i.start.top-t,end:i.end.bottom,height:i.node.height,progress:0},a=2*(i.node.top-i.start.top),s=t-i.node.height;return{els:n,rects:i,duration:r,bounds:{start:i.start.top,max:i.start.bottom-i.start.top-t-a+s,min:0},tl:null}}()}},{key:"addTalentText",value:function(){var a=this.base({el:g(".js-stick-talent"),end:g(".js-stick-talent-end")}),t=a.bounds,e=a.rects,n=f.bounds.wh,i=.5*(n-e.node.height);t.start=e.start.top-i,t.max=e.end.bottom-t.start-n+(n-e.end.height)/2,a.tl=Hu.timeline({paused:!0,defaults:{ease:"linear",duration:1}}).fromTo(".js-tal-r",{xPercent:0,alpha:0},{xPercent:-37.5,alpha:1}),this.cache.push(a)}},{key:"addHiw",value:function(){var a=this.base({el:g(".js-stick-hiw"),end:g(".js-stick-hiw-end")}),t=a.bounds,e=a.rects,r=.5*(f.bounds.wh-e.node.height);t.start=e.start.top-r,this.cache.push(a)}},{key:"removeEvents",value:function(){I.off("tick",this.run),I.off("resize:on-reset",this.resize)}},{key:"destroy",value:function(){this.removeEvents(),this.cache=null}}])&&Yd(t.prototype,r),o&&Yd(t,o),a}(),Ac=f.flags.isDesktop,Lc=function(){function a(){!function(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),this.elems=[].concat(Zd(y(".js-bm")),Zd(y(Ac?".js-bm-d":".js-bm-m"))),this.slides=g(".js-hiw-slides"),this.last=null,this.init()}var t,r,o;return t=a,(r=[{key:"init",value:function(){var a=this;this.elems.forEach(function(t){return a.set(t)})}},{key:"set",value:function(a){var t=zu.a.loadAnimation({container:a,renderer:"svg",loop:!0,autoplay:!1,path:"/".concat(a.dataset.name,"/data.json")});t.setSubframe(!1),Nu.cache.push({el:a,ani:t,enter:function(e){Ac&&(e.el.style.visibility="visible"),e.ani.play()},leave:function(e){e.ani.stop(),Ac&&(e.el.style.visibility="hidden")},intersecting:!1}),Nu.inst.observe(a)}}])&&Kd(t.prototype,r),o&&Kd(t,o),a}(),Rc=f.flags,Bc=f.bounds,zc=function(){function a(){var o=this;!function(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),ic(this,"ui",{}),ic(this,"run",function(){var e=o.state,t=e.target-e.current;!e.dragging&&.001>=vm(t)||(e.current+=t*o.opts.ease,e.rounded=Sm(100*e.current)/100,e.progress=e.rounded/e.max,!e.resizing&&o.transformSlides())}),ic(this,"down",function(e){var t=e.x,a=e.y;if(e.target.closest(".js-proof-draggable")){var n=o.state;Rc.dragging=!0,n.dragging=!0,n.cancel.x=t,n.cancel.y=a,n.on=n.target+t*o.opts.speed,o.initial||o.removeCTA()}}),ic(this,"move",function(e){var t=e.x,n=e.y,i=e.e,r=o.state;if(r.dragging){var a=r.cancel;vm(t-a.x)>vm(n-a.y)&&i.cancelable&&(i.preventDefault(),i.stopPropagation()),r.target=r.on-t*o.opts.speed,o.clamp()}}),ic(this,"up",function(){Rc.dragging=!1,o.state.dragging=!1}),ic(this,"resize",function(){var e=o.state;e.resizing=!0,o.setCache(),o.clamp(),e.rounded=e.current=e.target,o.transformSlides(),e.resizing=!1}),this.el=g(".js-proof"),this.ui.container=g(".js-proof-slides"),this.ui.slides=Qd(y(".js-proof-slide")),this.state={target:0,current:0,rounded:0,on:0,max:0,cancel:{x:0,y:0},dragging:!1,resizing:!1},this.opts={speed:2,ease:.085},this.init()}var t,r,o;return t=a,(r=[{key:"init",value:function(){this.setCache(),this.addEvents()}},{key:"addEvents",value:function(){I.on("tick",this.run),I.on("mousedown",this.down),I.on("mouseup",this.up),I.on("mousemove",this.move),I.on("resize",this.resize)}},{key:"setCache",value:function(){var d=this,t=this.ui,e=t.slides,p=t.container,i=Bc.ww,r=e.length-1;this.cache=e.map(function(t,e){t.style.transform="translate3d(0, 0, 0)";var a=v(t),n=a.left,o=a.right;return e===r&&(d.state.max=o+(i-v(p).right)-i),{el:t,start:n-i-50,end:o+50,out:!0}})}},{key:"transform",value:function(a,t){a.style.transform="translate3d(".concat(-t,"px, 0, 0)")}},{key:"transformSlides",value:function(){var a=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.state.rounded;this.cache.forEach(function(e){a.visible(e,t)||a.state.resizing?(e.out&&(e.out=!1,e.el.style.visibility="visible"),a.transform(e.el,t)):e.out||(e.out=!0,a.transform(e.el,t),e.el.style.visibility="hidden")})}},{key:"visible",value:function(a,t){var e=a.start,r=a.end;return t>e&&t<r}},{key:"removeCTA",value:function(){this.initial=!0;var e=g(".js-btn-next",this.el);Hu.to(e,{alpha:0,duration:.35,ease:"power1",onComplete:function(){return e.remove()}})}},{key:"clamp",value:function(){var e=this.state;e.target=Hu.utils.clamp(0,e.max,e.target)}},{key:"removeEvents",value:function(){I.off("tick",this.run),I.off("mousedown",this.down),I.off("mouseup",this.up),I.off("mousemove",this.move),I.off("resize",this.resize)}},{key:"destroy",value:function(){this.removeEvents(),this.state=null,this.opts=null,this.ui=null}}])&&nc(t.prototype,r),o&&nc(t,o),a}(),Uc=function(){function a(){var r=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:y("[data-from]");uc(this,a),hc(this,"run",function(e){var t=e.current;r.current=t,r.resizing||r.playTimelines()}),hc(this,"resize",function(){r.resizing=!0,r.cache=null,r.getCache(),r.playTimelines(),r.resizing=!1}),this.elems=lc(e),this.current=0,this.resizing=!1,this.init()}var t,r,o;return t=a,(r=[{key:"init",value:function(){this.getCache(),this.addEvents()}},{key:"addEvents",value:function(){I.on("tick",this.run),I.on("resize:on-reset",this.resize)}},{key:"playTimelines",value:function(){var l=this,t=f.bounds.wh;this.cache.forEach(function(e){if(l.visible(e)||l.resizing){var n=e.rect,i=n.top,r=n.height,a=e.tl,s=Hu.utils.clamp(0,1,1-(-l.current+i+r)/(r+t));a.progress(s)}})}},{key:"getCache",value:function(){this.cache=this.elems.map(function(a){var t=JSON.parse(a.dataset.from),e=JSON.parse(a.dataset.to),n=Hu.timeline({paused:!0}).fromTo(a,1,t,sc(sc({},e),{ease:"linear"}));n.progress(1);var i=a.getBoundingClientRect();return n.progress(0),{tl:n,rect:i,start:i.top-f.bounds.wh,end:i.bottom}})}},{key:"visible",value:function(a){var t=a.start,e=a.end;return this.current>t&&this.current<e}},{key:"removeEvents",value:function(){I.off("tick",this.run),I.off("resize:on-reset",this.resize)}},{key:"destroy",value:function(){this.removeEvents(),this.cache=this.elems=null}}])&&gc(t.prototype,r),o&&gc(t,o),a}();Hu.registerPlugin(tc);var Yc=f.bounds,Qc=f.flags.isDevice,tp=function(){function a(){var r=this;!function(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),xc(this,"ui",{}),xc(this,"addEvents",function(){I.on("tick",r.run),I.on("resize:on-reset",r.resize)}),xc(this,"run",function(e){var t=e.current;(!r.state.resizing||t>r.bounds.max)&&r.animate(t)}),xc(this,"resize",function(){var e=r.state;e.resizing=!0,r.setBounds(),r.setTlA(),r.setTlB(),r.animate(),e.resizing=!1}),xc(this,"removeEvents",function(){I.off("tick",r.run),I.off("resize:on-reset",r.resize)}),this.ui.texts=yc(y(".js-h-txt")),this.ui.intro=g(".js-intro"),this.ui.introContent=g(".js-intro-content"),this.state={progress:{a:0,b:0},resizing:!1},this.tl={a:null,b:null},this.init()}var t,r,o;return t=a,(r=[{key:"init",value:function(){this.cacheTexts(),this.setBounds(),this.setLottie(),this.setTlA(),this.setTlB(),this.addEvents()}},{key:"setBounds",value:function(){var o=this.ui,t=o.intro,e=o.introContent,n=Qc?gu.target:0,i=v(e).top+n,r=v(t).top+n,a=i-.5*Yc.wh-r;this.bounds={start:r,end:a,max:i}}},{key:"cacheTexts",value:function(){this.texts=this.ui.texts.map(function(o,t){var e=y(".js-h-txt__l",o),n=Hu.timeline({paused:!0}),i=.25*t,r=.25*(t+1),a=[g(".js-h-uline",o),g(".js-h-uline span",o)];return 0!==t&&Hu.set(e,{yPercent:100}),1===t?{i:t,el:o,lines:e,uline:a,tl:n,p1:i,p2:r,p1T:!1,p2T:!1}:2===t?{i:t,el:o,lines:e,uline:a,tl:n,p1:i,p1T:!1}:{i:t,el:o,lines:e,uline:a,tl:n,p2:r,p2T:!1}})}},{key:"setLottie",value:function(){this.icon=zu.a.loadAnimation({container:g(".js-h-progress"),loop:!1,autoplay:!1,path:"/data.json"})}},{key:"setTlA",value:function(){var a=this,t={progress:0};this.tl.a&&this.tl.a.kill(),this.tl.a=Hu.timeline({paused:!0,defaults:{ease:"linear"}}).fromTo(".js-h-circle path",{drawSVG:0},{drawSVG:"100%",duration:.8,ease:"power1.inOut"},0).to(t,{progress:1,duration:1,onUpdate:function(){a.icon.goToAndStop(1e3*(t.progress*a.icon.getDuration(!1)),!1)}},0)}},{key:"setTlB",value:function(){var a=this,t={progress:1};this.state.resizing||(this.planes=hu.slides.children.filter(function(e){return e.name.includes("slide")})),this.tl.b&&this.tl.b.kill(),this.tl.b=Hu.timeline({paused:!0,defaults:{ease:"linear"}}).fromTo(".js-intro__bg",{alpha:0},{alpha:1,duration:.25,ease:"linear"},0).fromTo([".js-h-logo, .js-h-play-icon"],{alpha:1},{alpha:0,duration:.25,ease:"linear"},0).to(t,{progress:0,duration:1,onUpdate:function(){a.togglePlanes(t.progress)}},0).fromTo(".js-h-txt--last",{alpha:1},{alpha:0,duration:.9},0)}},{key:"animate",value:function(){var o=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:gu.target,s=this.state.progress,e=this.bounds,n=e.start,r=e.end;s.a=Hu.utils.clamp(0,1,t/n),s.b=Hu.utils.clamp(0,1,(t-n)/r),this.texts.forEach(function(t){return o.toggleTexts(t,s.a)}),this.tl.a.progress(s.a),this.tl.b.progress(s.b)}},{key:"togglePlanes",value:function(a){this.planes.forEach(function(t){return t.material.uniforms.uAlpha.value=a})}},{key:"toggleTexts",value:function(a,t){a.p1&&this.toggleP1(a,t),this.toggleP2(a,t)}},{key:"toggleP1",value:function(a,t){t>a.p1&&!a.p1T?(a.p1T=!0,a.tl.clear().set(a.uline,{alpha:1}).fromTo(a.lines,{yPercent:100},{yPercent:0,duration:1.1,stagger:.075,ease:"expo"},.35).fromTo(a.uline,{xPercent:Hu.utils.wrap([-100,100])},{xPercent:0,duration:1,ease:"expo.inOut"},.45).play()):t<=a.p1&&a.p1T&&(a.p1T=!1,a.tl.clear().to(a.lines,{yPercent:-100,duration:.5,stagger:.075,ease:"power2.inOut"}).to(a.uline,{xPercent:Hu.utils.wrap([100,-100]),duration:.5,ease:"expo.inOut"},0).play())}},{key:"toggleP2",value:function(a,t){t>a.p2&&!a.p2T?(a.p2T=!0,a.tl.clear().to(a.lines,{yPercent:-100,duration:.5,stagger:.075,ease:"power2.inOut"}).to(a.uline,{xPercent:Hu.utils.wrap([100,-100]),duration:.5,ease:"expo.inOut"},0).play()):t<=a.p2&&a.p2T&&(a.p2T=!1,a.tl.clear().set(a.uline,{alpha:1}).fromTo(a.lines,{yPercent:100},{yPercent:0,duration:1.1,stagger:.075,ease:"expo"},.35).fromTo(a.uline,{xPercent:Hu.utils.wrap([-100,100])},{xPercent:0,duration:1,ease:"expo.inOut"},.45).play())}},{key:"destroy",value:function(){this.removeEvents(),this.planes=null,this.tl.a.kill(),this.tl.b.kill(),this.state=null,this.texts=null}}])&&_c(t.prototype,r),o&&_c(t,o),a}(),ep=f.bounds,fp=f.flags,dp=function(){function a(){var l=this;!function(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),rp(this,"ui",{}),rp(this,"run",function(){var e=l.state,t=e.target,n=t.x,i=t.scale,r=e.current,a=e.resize,s=n-r.x;.001>=vm(s)||(r.x+=.1*s,r.scale+=.1*(i-r.scale),!a&&l.transformLine(r.x,r.scale))}),rp(this,"handle",function(){}),rp(this,"anchorScroll",function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;e&&e.preventDefault();var t=l.cache.elems[l.ui.elems.indexOf(e.currentTarget)];Hu.to(gu,{target:t,duration:1.5,ease:"power3.inOut"})}),rp(this,"arrowScroll",function(e){var t=e.currentTarget,a=l.ui.arrows.indexOf(t),n=Hu.utils.clamp(0,ep.scroll,l.cache.arrows[a]);Hu.to(gu,{target:n,duration:1,ease:"power3.inOut"})}),rp(this,"resize",function(){var e=l.state;e.resize=!0,l.setElemCache(),l.setArrowCache(),l.updateMenuCache(),e.resize=!1}),this.ui.elems=bc(y("[data-anchor]")),this.ui.menuElems=this.ui.elems.filter(function(e){return e.classList.contains("js-sm-link")}),this.ui.hiwElems=this.ui.elems.filter(function(e){return e.classList.contains("js-hiw-link")}),this.ui.arrows=bc(y(".js-s-arrow")),this.ui.line=g(".js-sh-line"),this.state={last:null,target:{scale:0,x:0},current:{scale:0,x:0},hiw:{last:0},i:0},this.cache={elems:null,arrows:null,menu:null,hiw:null},this.o=new IntersectionObserver(this.handle,{root:null,rootMargin:"-25% 0px -25% 0px",threshold:[0,0]}),this.init()}var t,r,o;return t=a,(r=[{key:"init",value:function(){this.setElemCache(),this.setArrowCache(),this.setMenuCache(),this.setHiwCache(),this.addEvents()}},{key:"addEvents",value:function(){var a=this.ui,t=a.elems,e=a.arrows;I.on("tick",this.run),I.on("resize:on-reset",this.resize),t.length&&I.on("click",t,this.anchorScroll),e.length&&I.on("click",e,this.arrowScroll)}},{key:"setElemCache",value:function(){var a=ep.ww;this.cache.elems=this.ui.elems.map(function(t){var e=g("".concat(t.dataset.anchor)),r=a*(e.dataset.offset||.1);return v(e).top-r})}},{key:"setArrowCache",value:function(){var a=ep.ww,t=this.ui.arrows;t.length&&(this.cache.arrows=t.map(function(e,r){return r>=t.length-2?0:v(t[r+1]).top-.1*a}))}},{key:"setMenuCache",value:function(){var l=this,t=this.ui,e=t.menuElems,d=t.line;if(e.length){var i=v(d).width;this.cache.menu=e.map(function(t,e){var r=g("".concat(t.dataset.anchor)),a=t.offsetLeft,n=t.offsetWidth/i;return 0===e&&(fp.initial?Hu.timeline().set(d,{alpha:1}).fromTo(d,{scaleX:0,x:0},{scaleX:n,x:a,duration:.75,ease:"power3.inOut"}):Hu.set(d,{alpha:1,scaleX:n,x:a})),l.o.observe(r),{el:t,elem:r,i:e,x:a,scaleX:n}})}}},{key:"setHiwCache",value:function(){var a=this,t=this.ui.hiwElems;t.length&&(this.cache.hiw=t.map(function(t){var e=g("".concat(t.dataset.anchor));return a.o.observe(e),{el:t,elem:e}}))}},{key:"updateMenuCache",value:function(){var a=this.cache.menu;if(a){this.transformLine(0,1);var r=v(this.ui.line).width;a.forEach(function(e){e.x=e.el.offsetLeft,e.scaleX=e.el.offsetWidth/r}),this.line(),this.transformLine()}}},{key:"transformLine",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.state.current.x,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.state.current.scale,e=this.ui.line;e&&(e.style.transform="translate3d(".concat(a,"px, 0, 0) scaleX(").concat(t,")"))}},{key:"line",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.cache.menu[this.state.i].x,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.cache.menu[this.state.i].scaleX,e=this.state.target;e.scale=t,e.x=a}},{key:"removeEvents",value:function(){var a=this.ui,t=a.elems,e=a.arrows;t.length&&I.off("click",t,this.anchorScroll),e.length&&I.off("click",e,this.arrowScroll),I.off("resize:on-reset",this.resize)}},{key:"destroy",value:function(){this.removeEvents(),this.cache=null,this.ui=null}}])&&ip(t.prototype,r),o&&ip(t,o),a}(),mp=function(){return"undefined"!=typeof window},gp=function(){return Dp||mp()&&(Dp=window.gsap)&&Dp.registerPlugin&&Dp},vp=function(e){return"string"==typeof e},yp=function(a,t){var e="x"===t?"Width":"Height",n="scroll"+e,i="client"+e;return a===Pg||a===Cg||a===Dg?Em(Cg[n],Dg[n])-(Pg["inner"+e]||Cg[i]||Dg[i]):a[n]-a["offset"+e]},_p=function(a,r){var e="scroll"+("x"===r?"Left":"Top");return a===Pg&&(null==a.pageXOffset?a=null==Cg[e]?Dg:Cg:e="page"+r.toUpperCase()+"Offset"),function(){return a[e]}},xp=function(o,t){var e=Lg(o)[0].getBoundingClientRect(),n=!t||t===Pg||t===Dg,i=n?{top:Cg.clientTop-(Pg.pageYOffset||Cg.scrollTop||Dg.scrollTop||0),left:Cg.clientLeft-(Pg.pageXOffset||Cg.scrollLeft||Dg.scrollLeft||0)}:t.getBoundingClientRect(),r={x:e.left-i.left,y:e.top-i.top};return!n&&t&&(r.x+=_p(t,"x")(),r.y+=_p(t,"y")()),r},bp=function(a,t,e,r){return isNaN(a)||"object"==typeof a?vp(a)&&"="===a.charAt(1)?parseFloat(a.substr(2))*("-"===a.charAt(0)?-1:1)+r:"max"===a?yp(t,e):bm(yp(t,e),xp(a,t)[e]):parseFloat(a)},Ep=function(){Dp=gp(),mp()&&Dp&&document.body&&(Pg=window,Dg=document.body,Cg=document.documentElement,Lg=Dp.utils.toArray,Dp.config({autoKillThreshold:7}),Rg=Dp.config(),wg=1)},wp={version:"3.2.6",name:"scrollTo",rawVars:1,register:function(e){Dp=e,Ep()},init:function(a,t,o,n,i){wg||Ep(),this.isWin=a===Pg,this.target=a,this.tween=o,"object"==typeof t?t.nodeType&&(t={y:t,x:t}):vp((t={y:t}).y)&&"max"!==t.y&&"="!==t.y.charAt(1)&&(t.x=t.y),this.vars=t,this.autoKill=!!t.autoKill,this.getX=_p(a,"x"),this.getY=_p(a,"y"),this.x=this.xPrev=this.getX(),this.y=this.yPrev=this.getY(),null==t.x?this.skipX=1:(this.add(this,"x",this.x,bp(t.x,a,"x",this.x)-(t.offsetX||0),n,i,Math.round),this._props.push("scrollTo_x")),null==t.y?this.skipY=1:(this.add(this,"y",this.y,bp(t.y,a,"y",this.y)-(t.offsetY||0),n,i,Math.round),this._props.push("scrollTo_y"))},render:function(d,t){for(var e=t._pt,m=t.target,l=t.tween,g=t.autoKill,u=t.xPrev,c=t.yPrev,p=t.isWin,f,h,y,v,_;e;)e.r(d,e.d),e=e._next;f=p||!t.skipX?t.getX():u,y=(h=p||!t.skipY?t.getY():c)-c,v=f-u,_=Rg.autoKillThreshold,0>t.x&&(t.x=0),0>t.y&&(t.y=0),g&&(!t.skipX&&(v>_||v<-_)&&f<yp(m,"x")&&(t.skipX=1),!t.skipY&&(y>_||y<-_)&&h<yp(m,"y")&&(t.skipY=1),t.skipX&&t.skipY&&(l.kill(),t.vars.onAutoKill&&t.vars.onAutoKill.apply(l,t.vars.onAutoKillParams||[]))),p?Pg.scrollTo(t.skipX?f:t.x,t.skipY?h:t.y):(t.skipY||(m.scrollTop=t.y),t.skipX||(m.scrollLeft=t.x)),t.xPrev=t.x,t.yPrev=t.y},kill:function(a){var t="scrollTo"===a;(t||"scrollTo_x"===a)&&(this.skipX=1),(t||"scrollTo_y"===a)&&(this.skipY=1)}},Dp,wg,Pg,Cg,Dg,Lg,Rg;wp.max=yp,wp.getOffset=xp,wp.buildGetter=_p,gp()&&Dp.registerPlugin(wp),Hu.registerPlugin(wp);var kg=f.dom.scroll,Ap=function(){function a(){var r=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:y("[data-anchor]");ap(this,a),Sp(this,"animate",function(e){var t=e.currentTarget;r.tl.clear().to(kg,{scrollTo:{y:"".concat(t.dataset.anchor),offsetY:200},duration:1.5,ease:"power3.inOut"}).play()}),this.elems=e,this.tl=Hu.timeline({paused:!0}),I.on("click",this.elems,this.animate)}var t,r,o;return t=a,(r=[{key:"destroy",value:function(){I.off("click",this.elems,this.animate),this.tl.kill()}}])&&Mp(t.prototype,r),o&&Mp(t,o),a}(),Cp=f.flags,Ip=function(){function a(){var r=this;!function(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),Lp(this,"ui",{}),Lp(this,"click",function(e){var t=e.target;if(e.click){var a=t.closest("[data-v-src]");a&&r.open(a.dataset.vSrc)}}),Lp(this,"enter",function(e){e.currentTarget}),Lp(this,"close",function(){r.state.open=!1;var e=r.ui,t=e.vm,a=e.vid;r.tl.clear().to(t,{autoAlpha:0,duration:.35,ease:"power1"}).add(function(){return a.pause()}).play(),Cp.locked=!1,t.classList.remove("is-open")}),this.ui.elems=Tp(y("[data-v-src]")),this.ui.vm=g(".js-vm"),this.ui.vid=g(".js-vm-vid"),this.tl=Hu.timeline({paused:!0}),this.state={open:!1},this.init()}var t,r,o;return t=a,(r=[{key:"init",value:function(){this.addEvents()}},{key:"addEvents",value:function(){I.on("click",".js-vm-close",this.close),I.on("mouseup",this.click),Cp.hover&&I.on("mouseenter",this.ui.elems,this.enter)}},{key:"setCache",value:function(){this.cache=this.ui.elems.map(function(a){var t=zu.a.loadAnimation({container:a,renderer:"svg",loop:!1,autoplay:!1,path:"/data.json"});return t.setSubframe(!1),{a:t}})}},{key:"open",value:function(a){var t=this.state;if(!t.open){t.open=!0;var e=this.ui,n=e.vm,i=e.vid;a!==i.src&&(i.src=a),i.play(),this.tl.clear().to(n,{autoAlpha:1,duration:.35,ease:"power1"}).add(function(){Cp.locked=!0}).play(),n.classList.add("is-open")}}}])&&Fp(t.prototype,r),o&&Fp(t,o),a}(),kp=f.flags.isDevice,Up=function(){function a(){var r=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:y("[data-lazy-src]");Np(this,a),this.elems=e,kp&&(this.elems=[].concat(Rp(this.elems),Rp(y("[data-lazy-src-m]")))),this.elems.forEach(function(e){return r.set(e)}),this.load()}var t,r,o;return t=a,(r=[{key:"load",value:function(){var e=y("[data-lazy-load]");e&&e.forEach(function(e){return e.src=e.dataset.lazyLoad})}},{key:"set",value:function(){this.elems.forEach(function(l){Nu.cache.push({el:l,enter:function(t,e){var n=t.e,i=void 0===n?l:n,r="IMG"===l.nodeName,a=i.dataset.lazySrc||i.dataset.lazySrcM,s=new Image;s.src=a,s.decode().then(function(){r?i.src=a:i.appendChild(s),i.classList.add("is-animated")}),Nu.inst.unobserve(e)}}),Nu.inst.observe(l)})}}])&&Bp(t.prototype,r),o&&Bp(t,o),a}(),Vp=f.bounds,Xp=function(){function a(){var o=this;!function(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),jp(this,"run",function(e){var t=e.current;if(!e.still){var a=o.i,n=o.visible(t);n?(!o.initial&&o.setInitial(),a.last=a.current,a.current=Sm(Hu.utils.clamp(0,1,(t-o.min)/o.max)*o.total),a.last!==a.current&&o.check()):n||o.out||a.current!==o.total||(o.out=!0,o.cache[o.total].ani.stop())}}),jp(this,"resize",function(){o.cache.forEach(function(e,t){return o.setBounds(t,e.el)})}),this.container=g(".js-hiw-slides"),this.slides=zp(y(".js-hiw-slide")),this.current=0,this.total=this.slides.length-1,this.z=this.total+1,this.i={last:0,curent:0},this.initial=!1,this.init()}var t,r,o;return t=a,(r=[{key:"init",value:function(){this.setCache(),this.addEvents()}},{key:"addEvents",value:function(){I.on("tick",this.run),I.on("resize:on-reset",this.resize)}},{key:"check",value:function(){var a=this.cache[this.i.last],t=this.cache[this.i.current],e=t.inner,r=t.ani;a&&a.ani.stop(),this.z+=1,this.container.appendChild(e),this.tl(e,a),r.play()}},{key:"setInitial",value:function(){this.initial=!0;var a=this.cache[0],t=a.ani,e=a.inner;t.play(),Hu.set(e,{alpha:1})}},{key:"tl",value:function(a,t){return Hu.timeline({onComplete:function(){return t&&t.inner.remove()}}).set(a,{zIndex:this.z}).fromTo(a,{alpha:0},{alpha:1,duration:.25,ease:"power1"})}},{key:"visible",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.current;return e>this.start&&e<this.end}},{key:"setCache",value:function(){var a=this;this.cache=this.slides.map(function(t,e){var n=g("[data-name]",t),i=zu.a.loadAnimation({container:n,renderer:"svg",loop:!0,autoplay:!1,path:"/static/lottie/".concat(n.dataset.name,"/data.json")});return i.setSubframe(!1),a.setBounds(e,t),n.remove(),a.container.appendChild(n),Hu.set(n,{alpha:0}),{inner:n,el:t,ani:i}})}},{key:"setBounds",value:function(o,t){if(0===o||o===this.total){var e=Vp.wh,n=.25*e,i=v(t),r=i.top,a=i.bottom;0===o&&(this.start=r-e,this.min=r-n),o===this.total&&(this.end=a,this.max=r-n-this.min)}}},{key:"removeEvents",value:function(){I.off("tick",this.run),I.off("resize:on-reset",this.resize)}},{key:"destroy",value:function(){this.removeEvents(),this.cache.forEach(function(e){return e.ani.destroy()}),this.cache=this.i=null}}])&&Hp(t.prototype,r),o&&Hp(t,o),a}(),qp=function(){function o(t){var e=this,a,s,l;!function(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),l=function(a){a&&a.preventDefault(),document.MC_callback=function(a){e.msg.textContent="success"==a.result?"Subscribed to waitlist":"Make sure your inputs are correct"},e.appendScript()},(s="submit")in(a=this)?Object.defineProperty(a,s,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[s]=l,this.el=t,this.form=g("form",this.el),this.action=this.form.getAttribute("action"),this.inputs={email:g(".js-mc-email",this.form),tel:g(".js-mc-phone",this.form)},this.msg=g(".js-mc-msg",this.form),this.addEvents()}var t,a,r;return t=o,(a=[{key:"addEvents",value:function(){I.on("submit",this.el,this.submit)}},{key:"appendScript",value:function(){var a=g(".js-mc-script");a&&a.remove();var t=this.inputs,e=t.email,n=t.tel,i=document.createElement("script");i.type="text/javascript",i.classList.add("js-mc-script"),i.src="".concat(this.action,"&c=document.MC_callback&EMAIL=").concat(e.value,"&PHONE=").concat(n.value),g("head").appendChild(i)}},{key:"destroy",value:function(){I.off("submit",this.el,this.submit)}}])&&Wp(t.prototype,a),r&&Wp(t,r),o}(),Zp=f.flags,Fg=f.dom,Ig=Zp.isDevice,Ng=Zp.isDesktop,zg=function(o){function t(){return $p(this,t),a.apply(this,arguments)}!function(a,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(t&&t.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),t&&Sc(a,t)}(t,o);var a=Mc(t),r,s,l;return r=t,(s=[{key:"initial",value:function(){var e=this;new rc,f.addClasses(),this.onEnter(),window.onload=function(){return e.loaded()}}},{key:"onEnter",value:function(){Fg.scroll.scrollTop=0,this.el=this.wrap.lastElementChild}},{key:"onLeave",value:function(){this.scrollTo&&this.scrollTo.destroy(),this.forms&&this.forms.forEach(function(e){return e.destroy()})}},{key:"onEnterCompleted",value:function(){this.handleVm(),this.handleSmoothScroll(),this.handleLazy(),this.handleScrollTo(),this.handleMC(),this.lottieScroll=new Lc,this.parallax=new Uc}},{key:"onLeaveCompleted",value:function(){this.smoothScroll&&this.smoothScroll.destroy(),I.emit("on-leave-completed")}},{key:"handleSmoothScroll",value:function(){if(!Ig){var e=y("[data-smooth-item]");0<e.length&&(this.smoothScroll=new cc(e))}}},{key:"handleScrollTo",value:function(){if(Ng)this.scrollTo=new dp;else{var e=y("[data-anchor]");e.length&&(this.scrollTo=new Ap(e))}}},{key:"handleVm",value:function(){this.vm=new Ip}},{key:"handleLazy",value:function(){var e=y("[data-lazy-src]");0<e.length&&(this.lazy=new Up(e))}},{key:"handleMC",value:function(){var e=y(".js-mc-form",this.el);0<e.length&&(this.forms=Ec(e).map(function(e){return new qp(e)}))}},{key:"loaded",value:function(){this.onEnterCompleted(),new fg,I.emit("loaded"),Zp.initial=!0}},{key:"setup",value:function(){this.initial()}}])&&Qp(r.prototype,s),l&&Qp(r,l),t}(u.Renderer),Og=f.bounds,Ug=f.flags.isDevice,Bg=Og.hero,Vg=function(o){function s(){var r;Dc(this,s);for(var o=arguments.length,e=Array(o),n=0;n<o;n++)e[n]=arguments[n];return Hc(Vc(r=a.call.apply(a,[this].concat(e))),"setHeroBounds",function(){var t=Og.ww,e=y(".js-hero-slide",r.el),a=g(".js-hero",r.el);e&&(Bg.w=v(e[e.length-1]).right-t),a&&(Bg.h=v(a).height)}),r}!function(a,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(t&&t.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),t&&Ic(a,t)}(s,o);var a=Nc(s),t,r,l;return t=s,(r=[{key:"initial",value:function(){Fc(Gc(s.prototype),"initial",this).call(this),I.on("resize",this.setHeroBounds)}},{key:"onEnter",value:function(){Fc(Gc(s.prototype),"onEnter",this).call(this),this.setHeroBounds(),this.initGl(),this.intro=new tp}},{key:"onLeave",value:function(){Fc(Gc(s.prototype),"onLeave",this).call(this),this.stickies&&this.stickies.destroy(),this.hiw&&this.hiw.destroy(),this.pricing&&this.pricing.destroy(),this.proof&&this.proof.destroy()}},{key:"onLeaveCompleted",value:function(){Fc(Gc(s.prototype),"onLeaveCompleted",this).call(this),this.intro&&this.intro.destroy(),dg.destroy()}},{key:"initGl",value:function(){dg.init(this.el),hu.addPlanes({el:this.el})}}])&&kc(t.prototype,r),l&&kc(t,l),s}(zg),Gg=function(o){function t(){return Xc(this,t),a.apply(this,arguments)}!function(a,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(t&&t.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),t&&qc(a,t)}(t,o);var a=Zc(t),r,s,l;return r=t,(s=[{key:"in",value:function(a){var t=a.done;I.emit("transition:in",{done:t})}},{key:"out",value:function(a){var t=a.from,e=a.done;I.emit("transition:out",{done:e,from:t})}}])&&jc(r.prototype,s),l&&jc(r,l),t}(u.Transition);u.initial=!1,new(function(o){function s(){var e;return function(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),e=a.call(this,{renderers:{home:Vg,default:zg},transitions:{default:Gg}}),e}!function(a,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(t&&t.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),t&&am(a,t)}(s,o);var a=rm(s),t,r,l;return t=s,(r=[{key:"navigate",value:function(e){f.dom.lastClicked=e.currentTarget,tm(im(s.prototype),"navigate",this).call(this,e)}}])&&em(t.prototype,r),l&&em(t,l),s}(u.Core)),"scrollRestoration"in history&&(history.scrollRestoration="manual")}]);